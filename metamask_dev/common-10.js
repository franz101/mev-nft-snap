LavaPack.loadBundle([[7674,{"../../../shared/constants/labels":7058,"../../../shared/constants/network":7060,"../../../shared/modules/conversion.utils":7078,"../../../shared/modules/hexstring-utils":7081,"@metamask/controllers/dist/util":1319,"@metamask/slip44":1575,"bignumber.js":2326,"ethereumjs-util":2896,"human-standard-token-abi":5282,luxon:6066,"punycode/punycode":6396},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addressSummary=function(e,t=10,n=4,r=!0){if(!e)return"";let a=(0,l.toChecksumHexAddress)(e);r||(a=(0,l.stripHexPrefix)(a));return a?`${a.slice(0,t)}...${a.slice(a.length-n)}`:"..."},n.bnGreaterThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gt(t,10)},n.bnGreaterThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).gte(t,10)},n.bnLessThan=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lt(t,10)},n.bnLessThanEqualTo=function(e,t){if(null===e||e===undefined||null===t||t===undefined)return null;return new o.default(e,10).lte(t,10)},n.checkExistingAddresses=function(e,t=[]){if(!e)return!1;return t.some((t=>t.address.toLowerCase()===e.toLowerCase()))},n.clearClipboard=function(){window.navigator.clipboard.writeText("")},n.coinTypeToProtocolName=function(e){var t;if("1"===String(e))return"Test Networks";return(null===(t=u.default[e])||void 0===t?void 0:t.name)||undefined},n.formatBalance=function(e,t,n=!0,r="ETH"){const a=n?T(e):e.split("."),o=a[0];let s=a[1],i="None";if(t===undefined)if("0"===o){if("0"!==s){const e=s.match(/^0*(.{2})/u);e&&(s=e[0]),i=`0.${s} ${r}`}}else i=`${o}.${s.slice(0,3)} ${r}`;else s+=Array(t).join("0"),i=`${o}.${s.slice(0,t)} ${r}`;return i},n.formatDate=function(e,t="M/d/y 'at' T"){if(!e)return"";return i.DateTime.fromMillis(e).toFormat(t)},n.formatDateWithYearContext=function(e,t="MMM d",n="MMM d, y"){if(!e)return"";const r=i.DateTime.fromMillis(e),a=i.DateTime.local();return r.toFormat(a.year===r.year?t:n)},n.getAccountByAddress=function(e=[],t){return e.find((({address:e})=>e===t))},n.getAssetImageURL=function(e,t){if(!e||!t||"string"!=typeof e)return"";if(e.startsWith("ipfs://"))return(0,c.getFormattedIpfsUrl)(t,e,!0);return e},n.getContractAtAddress=function(e){return global.eth.contract(a.default).at(e)},n.getRandomFileName=function(){let e="";const t=[..."abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"],n=Math.floor(7*Math.random()+6);for(let r=0;r<n;r++)e+=t[Math.floor(Math.random()*t.length)];return e},n.getURL=E,n.getURLHost=function(e){var t;return(null===(t=E(e))||void 0===t?void 0:t.host)||""},n.getURLHostName=function(e){var t;return(null===(t=E(e))||void 0===t?void 0:t.hostname)||""},n.isDefaultMetaMaskChain=function(e){if(!e||e===d.CHAIN_IDS.MAINNET||e===d.CHAIN_IDS.GOERLI||e===d.CHAIN_IDS.SEPOLIA||e===d.CHAIN_IDS.LOCALHOST)return!0;return!1},n.isExtensionUrl=function(e){const t=["chrome-extension:","moz-extension:"];if("string"==typeof e)for(const n of t)if(e.startsWith(n))return!0;if(null!=e&&e.protocol)return t.includes(e.protocol);return!1},n.isNullish=function(e){return null===e||e===undefined},n.isOriginContractAddress=function(e,t){if(!e||!t)return!1;return e.toLowerCase()===t.toLowerCase()},n.isValidDomainName=function(e){return null!==r.default.toASCII(e).toLowerCase().match(/^(?:[a-z0-9](?:[-a-z0-9]*[a-z0-9])?\.)+[a-z0-9][-a-z0-9]*[a-z0-9]$/u)},n.numericBalance=m,n.parseBalance=T,n.roundToDecimalPlacesRemovingExtraZeroes=function(e,t){if(e===undefined||null===e)return"";return p.toBigNumber.dec(p.toBigNumber.dec(e).toFixed(t)).toNumber()},n.sanitizeMessage=void 0,n.shortenAddress=function(e=""){if(e.length<f.TRUNCATED_NAME_CHAR_LIMIT)return e;return`${e.slice(0,f.TRUNCATED_ADDRESS_START_CHARS)}...${e.slice(-f.TRUNCATED_ADDRESS_END_CHARS)}`},n.stripHttpSchemes=function(e){return e.replace(/^https?:\/\//u,"")},n.stripHttpsScheme=y,n.stripHttpsSchemeWithoutPort=function(e){if(E(e).port)return e;return y(e)},n.toHumanReadableTime=void 0,n.valuesFor=function(e){if(!e)return[];return Object.keys(e).map((function(t){return e[t]}))};var r=g(e("punycode/punycode")),a=g(e("human-standard-token-abi")),o=g(e("bignumber.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("ethereumjs-util")),i=e("luxon"),c=e("@metamask/controllers/dist/util"),u=g(e("@metamask/slip44")),d=e("../../../shared/constants/network"),l=e("../../../shared/modules/hexstring-utils"),f=e("../../../shared/constants/labels"),p=e("../../../shared/modules/conversion.utils");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e){return e&&e.__esModule?e:{default:e}}function m(e){if(!e)return new s.BN(0,16);const t=(0,l.stripHexPrefix)(e);return new s.BN(t,16)}function T(e){let t;const n=m(e),r=n.toString(),a=r.length>18?r.slice(0,r.length-18):"0";return t=`000000000000000000${n}`.slice(-18).replace(/0+$/u,""),""===t&&(t="0"),[a,t]}function y(e){return e.replace(/^https:\/\//u,"")}function E(e){try{return new URL(e)}catch(e){return""}}n.toHumanReadableTime=(e,t)=>{if(t===undefined||null===t)return"";const n=Math.ceil(t/1e3);return n<=90?e("gasTimingSecondsShort",[n]):n<=5400?e("gasTimingMinutesShort",[Math.ceil(n/60)]):e("gasTimingHoursShort",[Math.ceil(n/3600)])};const _=(e,t,n)=>{if(!n)throw new Error("Invalid types definition");const r=n[t];if(!r)throw new Error("Invalid primary type definition");const a={};return Object.keys(e).forEach((t=>{const o=Object.values(r).find((e=>e.name===t));if(!o)return;const s=o.type.replace(/\[\]$/u,"");if(n[s])o.type.endsWith("[]")>0?a[t]=e[t].map((e=>_(e,s,n))):a[t]=_(e[t],o.type,n);else{(()=>{const e=Array.from(new Array(32)).map(((e,t)=>"int"+8*(t+1))),t=Array.from(new Array(32)).map(((e,t)=>"uint"+8*(t+1))),n=Array.from(new Array(32)).map(((e,t)=>`bytes${t+1}`)),r=Array.from(new Array(32)).map(((e,t)=>"fixed"+8*(t+1))),a=Array.from(new Array(32)).map(((e,t)=>"ufixed"+8*(t+1))),o=Array.from(new Array(80)).map(((e,t)=>r.map((e=>`${e}x${t+1}`)))),s=Array.from(new Array(80)).map(((e,t)=>a.map((e=>`${e}x${t+1}`))));return["bool","address","string","bytes","int","uint","fixed","ufixed",...e,...t,...n,...o.flat(),...s.flat()]})().includes(s)&&(a[t]=e[t])}})),a};n.sanitizeMessage=_}}},{package:"$root$"}],[768,{"./lang-cz":759,"./lang-en":760,"./lang-es":761,"./lang-fr":762,"./lang-it":763,"./lang-ja":764,"./lang-ko":765,"./lang-zh":766},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wordlists=void 0;var r=e("./lang-cz"),a=e("./lang-en"),o=e("./lang-es"),s=e("./lang-fr"),i=e("./lang-ja"),c=e("./lang-ko"),u=e("./lang-it"),d=e("./lang-zh");n.wordlists={cz:r.langCz,en:a.langEn,es:o.langEs,fr:s.langFr,it:u.langIt,ja:i.langJa,ko:c.langKo,zh:d.langZhCn,zh_cn:d.langZhCn,zh_tw:d.langZhTw}}}},{package:"ethers>@ethersproject/wordlists"}],[7769,{"../../../../shared/constants/network":7060,"../../../../shared/lib/fetch-with-cache":7069,"../../../helpers/constants/design-system":7636,"../../../helpers/constants/routes":7641,"../../../helpers/constants/zendesk-url":7644,"eth-rpc-errors":2821,react:6562},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=d(e("react")),o=e("../../../../shared/constants/network"),s=e("../../../helpers/constants/design-system"),i=e("../../../helpers/constants/routes"),c=d(e("../../../helpers/constants/zendesk-url")),u=d(e("../../../../shared/lib/fetch-with-cache"));function d(e){return e&&e.__esModule?e:{default:e}}const l={id:"UNRECOGNIZED_CHAIN",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"unrecognizedChain"}}}},f={id:"MISMATCHED_CHAIN_RECOMMENDATION",content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainRecommendation",variables:[{element:"a",key:"mismatchedChainLink",props:{href:c.default.VERIFY_CUSTOM_NETWORK,target:"__blank",tabIndex:0},children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedChainLinkText"}}}]}}}},p={id:"MISMATCHED_NETWORK_NAME",severity:s.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkName"}}}},h={id:"MISMATCHED_NETWORK_SYMBOL",severity:s.SEVERITIES.DANGER,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedNetworkSymbol"}}}},g={id:"MISMATCHED_NETWORK_RPC",severity:s.SEVERITIES.DANGER,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"mismatchedRpcUrl"}}}};var m={getAlerts:async function(e){const t=[],n=(await(0,u.default)("https://chainid.network/chains.json")||[]).find((t=>t.chainId===parseInt(e.requestData.chainId,16)));if("metamask"===e.origin&&Boolean(n))return[];if(n){var r;n.name.toLowerCase()!==e.requestData.chainName.toLowerCase()&&t.push(p),(null===(r=n.nativeCurrency)||void 0===r?void 0:r.symbol)!==e.requestData.ticker&&t.push(h);const{origin:a}=new URL(e.requestData.rpcUrl);n.rpc.map((e=>new URL(e).origin)).includes(a)||t.push(g)}return n||t.push(l),t.length&&t.push(f),t},getValues:function(e,t,n,u){var d;const l="metamask"===e.origin;return{content:[{hide:!l,element:"Box",key:"network-box",props:{textAlign:s.TEXT_ALIGN.CENTER,display:s.DISPLAY.FLEX,justifyContent:s.JUSTIFY_CONTENT.CENTER,marginTop:4,marginBottom:2},children:[{element:"Chip",key:"network-chip",props:{label:e.requestData.chainName,backgroundColor:s.COLORS.BACKGROUND_ALTERNATIVE,leftIconUrl:e.requestData.imageUrl}}]},{element:"Typography",key:"title",children:t(l?"wantToAddThisNetwork":"addEthereumChainConfirmationTitle"),props:{variant:s.TYPOGRAPHY.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},{element:"Typography",key:"description",children:t("addEthereumChainConfirmationDescription"),props:{variant:s.TYPOGRAPHY.H7,align:"center",boxProps:{margin:l?[0,8,4]:[0,0,4]}}},{element:"Typography",key:"only-add-networks-you-trust",children:[{element:"b",key:"bolded-text",props:{style:{display:l&&"-webkit-box"}},children:[`${t("addEthereumChainConfirmationRisks")} `,{hide:!l,element:"Tooltip",key:"tooltip-info",props:{position:"bottom",interactive:!0,trigger:"mouseenter",html:a.default.createElement("div",{style:{width:"180px",margin:"16px",textAlign:"left"}},t("someNetworksMayPoseSecurity")," ",a.default.createElement("a",{key:"zendesk_page_link",href:c.default.UNKNOWN_NETWORK,rel:"noreferrer",target:"_blank",style:{color:"var(--color-primary-default)"}},t("learnMoreUpperCase")))},children:[{element:"i",key:"info-circle",props:{className:"fas fa-info-circle",style:{marginLeft:"4px",color:"var(--color-icon-default)"}}}]}]},{element:"MetaMaskTranslation",key:"learn-about-risks",props:{translationKey:"addEthereumChainConfirmationRisksLearnMore",variables:[{element:"a",children:t("addEthereumChainConfirmationRisksLearnMoreLink"),key:"addEthereumChainConfirmationRisksLearnMoreLink",props:{href:c.default.USER_GUIDE_CUSTOM_NETWORKS,target:"__blank"}}]}}],props:{variant:s.TYPOGRAPHY.H7,boxProps:{margin:l?[0,8]:0,display:s.DISPLAY.FLEX,flexDirection:s.FLEX_DIRECTION.COLUMN,alignItems:s.ALIGN_ITEMS.CENTER}}},{element:"TruncatedDefinitionList",key:"network-details",props:{title:t("networkDetails"),tooltips:{[t("networkName")]:t("networkNameDefinition"),[t("networkURL")]:t("networkURLDefinition"),[t("chainId")]:t("chainIdDefinition"),[t("currencySymbol")]:t("currencySymbolDefinition"),[t("blockExplorerUrl")]:t("blockExplorerUrlDefinition")},dictionary:{[t("networkName")]:e.requestData.chainName,[t("networkURL")]:null!==(d=e.requestData.rpcUrl)&&void 0!==d&&d.includes(`/v3/${o.infuraProjectId}`)?e.requestData.rpcUrl.replace(`/v3/${o.infuraProjectId}`,""):e.requestData.rpcUrl,[t("chainId")]:parseInt(e.requestData.chainId,16),[t("currencySymbol")]:e.requestData.ticker,[t("blockExplorerUrl")]:e.requestData.blockExplorerUrl},prefaceKeys:[t("networkName"),t("networkURL"),t("chainId"),t("currencySymbol")]}}],approvalText:t("approveButtonText"),cancelText:t("cancel"),onApprove:async()=>{await n.resolvePendingApproval(e.id,e.requestData),l&&(n.addCustomNetwork(e.requestData),u.push(i.DEFAULT_ROUTE))},onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!l}}};n.default=m}}},{package:"$root$"}],[7770,{"../../../../../helpers/constants/design-system":7636,"../../../../../helpers/constants/zendesk-url":7644},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r,a=e("../../../../../helpers/constants/design-system"),o=(r=e("../../../../../helpers/constants/zendesk-url"))&&r.__esModule?r:{default:r};var s={getValues:function(e,t,n){const{title:r,description:s,textAreaContent:i}=e.requestData;return{content:[{element:"Typography",key:"title",children:r,props:{variant:a.TYPOGRAPHY.H3,align:"center",fontWeight:"bold",boxProps:{margin:[0,0,4]}}},...s?[{element:"Typography",key:"subtitle",children:s,props:{variant:a.TYPOGRAPHY.H6,align:"center",boxProps:{margin:[0,0,4]}}}]:[],...i?[{element:"div",key:"text-area",children:{element:"TextArea",props:{height:"238px",value:i,readOnly:!0,resize:a.RESIZE.VERTICAL,scrollable:!0,className:"text"}},props:{className:"snap-confirm"}}]:[],{element:"Typography",key:"only-interact-with-entities-you-trust",children:[{element:"span",key:"only-connect-trust",children:`${t("onlyConnectTrust")} `},{element:"a",children:t("learnMoreUpperCase"),key:"learnMore-a-href",props:{href:o.default.USER_GUIDE_DAPPS,target:"__blank"}}],props:{variant:a.TYPOGRAPHY.H7,align:"center",boxProps:{margin:0}}}],approvalText:t("approveButtonText"),cancelText:t("reject"),onApprove:()=>n.resolvePendingApproval(e.id,!0),onCancel:()=>n.resolvePendingApproval(e.id,!1)}}};n.default=s}}},{package:"$root$"}],[7771,{"../../../../shared/constants/app":7055,"../../../store/actions":8060,"./add-ethereum-chain":7769,"./flask/snap-confirm/snap-confirm":7770,"./switch-ethereum-chain":7772,lodash:6046},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=void 0,n.getTemplateAlerts=async function(e){var t;const n=null===(t=d[e.type])||void 0===t?void 0:t.getAlerts,r=n?await n(e):[];if(!Array.isArray(r))throw new Error(`Template alerts must be an array, received: ${r}`);if(r.some((e=>(null==e?void 0:e.id)===undefined)))throw new Error(`Template alert entries must be objects with an id key. Received: ${r}`);return r},n.getTemplateState=async function(e){var t,n;const r=null!==(t=null===(n=d[e.type])||void 0===n?void 0:n.getState)&&void 0!==t?t:p,a=await r(e);if("object"!=typeof a||Array.isArray(a))throw new Error(`Template state must be an object, received: ${a}`);if(null===a||a===undefined)return{};return a},n.getTemplateValues=function(e,t,n,a){var s;const i=null===(s=d[e.type])||void 0===s?void 0:s.getValues;if(!i)throw new Error(`MESSAGE_TYPE: '${e.type}' is not specified in approval templates`);const c=function(e){return{rejectPendingApproval:(...t)=>e((0,o.rejectPendingApproval)(...t)),resolvePendingApproval:(...t)=>e((0,o.resolvePendingApproval)(...t)),addCustomNetwork:(...t)=>e((0,o.addCustomNetwork)(...t))}}(n),u=i(e,t,c,a),l=(0,r.omit)(u,f),p=(0,r.pick)(u,f);if(l.length>0)throw new Error(`Received extraneous keys from ${e.type}.getValues. These keys are not passed to the confirmation page: ${Object.keys(l)}`);return p};var r=e("lodash"),a=e("../../../../shared/constants/app"),o=e("../../../store/actions"),s=u(e("./add-ethereum-chain")),i=u(e("./switch-ethereum-chain")),c=u(e("./flask/snap-confirm/snap-confirm"));function u(e){return e&&e.__esModule?e:{default:e}}const d={[a.MESSAGE_TYPE.ADD_ETHEREUM_CHAIN]:s.default,[a.MESSAGE_TYPE.SWITCH_ETHEREUM_CHAIN]:i.default,[a.MESSAGE_TYPE.SNAP_CONFIRM]:c.default},l=Object.keys(d);n.TEMPLATED_CONFIRMATION_MESSAGE_TYPES=l;const f=["content","approvalText","cancelText","onApprove","onCancel","networkDisplay"];async function p(){return{}}}}},{package:"$root$"}],[7772,{"../../../helpers/constants/design-system":7636,"eth-rpc-errors":2821},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=e("eth-rpc-errors"),a=e("../../../helpers/constants/design-system");const o={id:"PENDING_TX_DROP_NOTICE",severity:a.SEVERITIES.WARNING,content:{element:"span",children:{element:"MetaMaskTranslation",props:{translationKey:"switchingNetworksCancelsPendingConfirmations"}}}};var s={getAlerts:async function(){return[o]},getValues:function(e,t,n){return{content:[{element:"Typography",key:"title",children:t("switchEthereumChainConfirmationTitle"),props:{variant:a.TYPOGRAPHY.H3,align:"center",fontWeight:"normal",boxProps:{margin:[0,0,2],padding:[0,4,0,4]}}},{element:"Typography",key:"description",children:t("switchEthereumChainConfirmationDescription"),props:{variant:a.TYPOGRAPHY.H7,color:a.COLORS.TEXT_ALTERNATIVE,align:"center",boxProps:{padding:[0,4,0,4]}}},{element:"Box",key:"status-box",props:{justifyContent:a.JUSTIFY_CONTENT.CENTER},children:{element:"ConfirmationNetworkSwitch",key:"network-being-switched",props:{newNetwork:{chainId:e.requestData.chainId,name:e.requestData.nickname}}}}],approvalText:t("switchNetwork"),cancelText:t("cancel"),onApprove:()=>n.resolvePendingApproval(e.id,e.requestData),onCancel:()=>n.rejectPendingApproval(e.id,r.ethErrors.provider.userRejectedRequest().serialize()),networkDisplay:!0}}};n.default=s}}},{package:"$root$"}],[778,{"@jridgewell/set-array":780,"@jridgewell/sourcemap-codec":781,"@jridgewell/trace-mapping":782},function(){with(this)return function(){"use strict";return function(e,t,n){!function(r,a){"object"==typeof n&&void 0!==t?a(n,e("@jridgewell/set-array"),e("@jridgewell/sourcemap-codec"),e("@jridgewell/trace-mapping")):"function"==typeof define&&define.amd?define(["exports","@jridgewell/set-array","@jridgewell/sourcemap-codec","@jridgewell/trace-mapping"],a):a((r="undefined"!=typeof globalThis?globalThis:r||self).genMapping={},r.setArray,r.sourcemapCodec,r.traceMapping)}(this,(function(e,t,n,r){let a;e.addSegment=void 0,e.addMapping=void 0,e.maybeAddSegment=void 0,e.maybeAddMapping=void 0,e.setSourceContent=void 0,e.toDecodedMap=void 0,e.toEncodedMap=void 0,e.fromMap=void 0,e.allMappings=void 0;class o{constructor({file:e,sourceRoot:n}={}){this._names=new t.SetArray,this._sources=new t.SetArray,this._sourcesContent=[],this._mappings=[],this.file=e,this.sourceRoot=n}}function s(e,t,n){for(let n=e.length;n>t;n--)e[n]=e[n-1];e[t]=n}function i(e,n){for(let r=0;r<n.length;r++)t.put(e,n[r])}function c(e,t,n){const{generated:r,source:o,original:s,name:i,content:c}=n;if(!o)return a(e,t,r.line-1,r.column,null,null,null,null,null);const u=o;return a(e,t,r.line-1,r.column,u,s.line-1,s.column,i,c)}e.addSegment=(e,t,n,r,o,s,i,c)=>a(!1,e,t,n,r,o,s,i,c),e.maybeAddSegment=(e,t,n,r,o,s,i,c)=>a(!0,e,t,n,r,o,s,i,c),e.addMapping=(e,t)=>c(!1,e,t),e.maybeAddMapping=(e,t)=>c(!0,e,t),e.setSourceContent=(e,n,r)=>{const{_sources:a,_sourcesContent:o}=e;o[t.put(a,n)]=r},e.toDecodedMap=e=>{const{file:t,sourceRoot:n,_mappings:r,_sources:a,_sourcesContent:o,_names:s}=e;return function(e){const{length:t}=e;let n=t;for(let t=n-1;t>=0&&!(e[t].length>0);n=t,t--);n<t&&(e.length=n)}(r),{version:3,file:t||undefined,names:s.array,sourceRoot:n||undefined,sources:a.array,sourcesContent:o,mappings:r}},e.toEncodedMap=t=>{const r=e.toDecodedMap(t);return Object.assign(Object.assign({},r),{mappings:n.encode(r.mappings)})},e.allMappings=e=>{const t=[],{_mappings:n,_sources:r,_names:a}=e;for(let e=0;e<n.length;e++){const o=n[e];for(let n=0;n<o.length;n++){const s=o[n],i={line:e+1,column:s[0]};let c=undefined,u=undefined,d=undefined;1!==s.length&&(c=r.array[s[1]],u={line:s[2]+1,column:s[3]},5===s.length&&(d=a.array[s[4]])),t.push({generated:i,source:c,original:u,name:d})}}return t},e.fromMap=e=>{const t=new r.TraceMap(e),n=new o({file:t.file,sourceRoot:t.sourceRoot});return i(n._names,t.names),i(n._sources,t.sources),n._sourcesContent=t.sourcesContent||t.sources.map((()=>null)),n._mappings=r.decodedMappings(t),n},a=(e,n,r,a,o,i,c,u,d)=>{const{_mappings:l,_sources:f,_sourcesContent:p,_names:h}=n,g=function(e,t){for(let n=e.length;n<=t;n++)e[n]=[];return e[t]}(l,r),m=function(e,t){let n=e.length;for(let r=n-1;r>=0&&!(t>=e[r][0]);n=r--);return n}(g,a);if(!o){if(e&&function(e,t){return 0===t||1===e[t-1].length}(g,m))return;return s(g,m,[a])}const T=t.put(f,o),y=u?t.put(h,u):-1;if(T===p.length&&(p[T]=null!=d?d:null),!e||!function(e,t,n,r,a,o){if(0===t)return!1;const s=e[t-1];return 1!==s.length&&n===s[1]&&r===s[2]&&a===s[3]&&o===(5===s.length?s[4]:-1)}(g,m,T,i,c,y))return s(g,m,u?[a,T,i,c,y]:[a,T,i,c])},e.GenMapping=o,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"terser>@jridgewell/source-map>@jridgewell/gen-mapping"}],[779,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).resolveURI=r()}(this,(function(){const e=/^[\w+.-]+:\/\//,t=/^([\w+.-]+:)\/\/([^@/#?]*@)?([^:/#?]*)(:\d+)?(\/[^#?]*)?(\?[^#]*)?(#.*)?/,n=/^file:(?:\/\/((?![a-z]:)[^/#?]*)?)?(\/?[^#?]*)(\?[^#]*)?(#.*)?/i;var r;function a(e){return e.startsWith("/")}function o(e){return/^[.?#]/.test(e)}function s(e){const n=t.exec(e);return i(n[1],n[2]||"",n[3],n[4]||"",n[5]||"/",n[6]||"",n[7]||"")}function i(e,t,n,a,o,s,i){return{scheme:e,user:t,host:n,port:a,path:o,query:s,hash:i,type:r.Absolute}}function c(t){if(function(e){return e.startsWith("//")}(t)){const e=s("http:"+t);return e.scheme="",e.type=r.SchemeRelative,e}if(a(t)){const e=s("http://foo.com"+t);return e.scheme="",e.host="",e.type=r.AbsolutePath,e}if(function(e){return e.startsWith("file:")}(t))return function(e){const t=n.exec(e),r=t[2];return i("file:","",t[1]||"","",a(r)?r:"/"+r,t[3]||"",t[4]||"")}(t);if(function(t){return e.test(t)}(t))return s(t);const o=s("http://foo.com/"+t);return o.scheme="",o.host="",o.type=t?t.startsWith("?")?r.Query:t.startsWith("#")?r.Hash:r.RelativePath:r.Empty,o}function u(e,t){const n=t<=r.RelativePath,a=e.path.split("/");let o=1,s=0,i=!1;for(let e=1;e<a.length;e++){const t=a[e];t?(i=!1,"."!==t&&(".."!==t?(a[o++]=t,s++):s?(i=!0,s--,o--):n&&(a[o++]=t))):i=!0}let c="";for(let e=1;e<o;e++)c+="/"+a[e];(!c||i&&!c.endsWith("/.."))&&(c+="/"),e.path=c}return function(e){e[e.Empty=1]="Empty",e[e.Hash=2]="Hash",e[e.Query=3]="Query",e[e.RelativePath=4]="RelativePath",e[e.AbsolutePath=5]="AbsolutePath",e[e.SchemeRelative=6]="SchemeRelative",e[e.Absolute=7]="Absolute"}(r||(r={})),function(e,t){if(!e&&!t)return"";const n=c(e);let a=n.type;if(t&&a!==r.Absolute){const e=c(t),o=e.type;switch(a){case r.Empty:n.hash=e.hash;case r.Hash:n.query=e.query;case r.Query:case r.RelativePath:!function(e,t){u(t,t.type),"/"===e.path?e.path=t.path:e.path=function(e){if(e.endsWith("/.."))return e;const t=e.lastIndexOf("/");return e.slice(0,t+1)}(t.path)+e.path}(n,e);case r.AbsolutePath:n.user=e.user,n.host=e.host,n.port=e.port;case r.SchemeRelative:n.scheme=e.scheme}o>a&&(a=o)}u(n,a);const s=n.query+n.hash;switch(a){case r.Hash:case r.Query:return s;case r.RelativePath:{const r=n.path.slice(1);return r?o(t||e)&&!o(r)?"./"+r+s:r+s:s||"."}case r.AbsolutePath:return n.path+s;default:return n.scheme+"//"+n.user+n.host+n.port+n.path+s}}}))}}},{package:"terser>@jridgewell/source-map>@jridgewell/trace-mapping>@jridgewell/resolve-uri"}],[780,{},function(){with(this)return function(){"use strict";return function(e,t,n){!function(e,r){"object"==typeof n&&void 0!==t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).setArray={})}(this,(function(e){e.get=void 0,e.put=void 0,e.pop=void 0;e.get=(e,t)=>e._indexes[t],e.put=(t,n)=>{const r=e.get(t,n);if(r!==undefined)return r;const{array:a,_indexes:o}=t;return o[n]=a.push(n)-1},e.pop=e=>{const{array:t,_indexes:n}=e;0!==t.length&&(n[t.pop()]=undefined)},e.SetArray=class{constructor(){this._indexes={__proto__:null},this.array=[]}},Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"terser>@jridgewell/source-map>@jridgewell/gen-mapping>@jridgewell/set-array"}],[781,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,n){(function(e){(function(){!function(e,r){"object"==typeof n&&void 0!==t?r(n):"function"==typeof define&&define.amd?define(["exports"],r):r((e="undefined"!=typeof globalThis?globalThis:e||self).sourcemapCodec={})}(this,(function(t){const n=",".charCodeAt(0),r=";".charCodeAt(0),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=new Uint8Array(64),s=new Uint8Array(128);for(let e=0;e<a.length;e++){const t=a.charCodeAt(e);o[e]=t,s[t]=e}const i="undefined"!=typeof TextDecoder?new TextDecoder:void 0!==e?{decode:t=>e.from(t.buffer,t.byteOffset,t.byteLength).toString()}:{decode(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}};function c(e,t){const n=e.indexOf(";",t);return-1===n?e.length:n}function u(e,t,n,r){let a=0,o=0,i=0;do{const n=e.charCodeAt(t++);i=s[n],a|=(31&i)<<o,o+=5}while(32&i);const c=1&a;return a>>>=1,c&&(a=-2147483648|-a),n[r]+=a,t}function d(e,t,r){return!(t>=r)&&e.charCodeAt(t)!==n}function l(e){e.sort(f)}function f(e,t){return e[0]-t[0]}function p(e,t,n,r,a){const s=r[a];let i=s-n[a];n[a]=s,i=i<0?-i<<1|1:i<<1;do{let n=31&i;i>>>=5,i>0&&(n|=32),e[t++]=o[n]}while(i>0);return t}t.decode=function(e){const t=new Int32Array(5),n=[];let r=0;do{const a=c(e,r),o=[];let s=!0,i=0;t[0]=0;for(let n=r;n<a;n++){let r;n=u(e,n,t,0);const c=t[0];c<i&&(s=!1),i=c,d(e,n,a)?(n=u(e,n,t,1),n=u(e,n,t,2),n=u(e,n,t,3),d(e,n,a)?(n=u(e,n,t,4),r=[c,t[1],t[2],t[3],t[4]]):r=[c,t[1],t[2],t[3]]):r=[c],o.push(r)}s||l(o),n.push(o),r=a+1}while(r<=e.length);return n},t.encode=function(e){const t=new Int32Array(5),a=16384,o=16348,s=new Uint8Array(a),c=s.subarray(0,o);let u=0,d="";for(let l=0;l<e.length;l++){const f=e[l];if(l>0&&(u===a&&(d+=i.decode(s),u=0),s[u++]=r),0!==f.length){t[0]=0;for(let e=0;e<f.length;e++){const r=f[e];u>o&&(d+=i.decode(c),s.copyWithin(0,o,u),u-=o),e>0&&(s[u++]=n),u=p(s,u,t,r,0),1!==r.length&&(u=p(s,u,t,r,1),u=p(s,u,t,r,2),u=p(s,u,t,r,3),4!==r.length&&(u=p(s,u,t,r,4)))}}}return d+i.decode(s.subarray(0,u))},Object.defineProperty(t,"__esModule",{value:!0})}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"terser>@jridgewell/source-map>@jridgewell/gen-mapping>@jridgewell/sourcemap-codec"}],[782,{"@jridgewell/resolve-uri":779,"@jridgewell/sourcemap-codec":781},function(){with(this)return function(){"use strict";return function(e,t,n){!function(r,a){"object"==typeof n&&void 0!==t?a(n,e("@jridgewell/sourcemap-codec"),e("@jridgewell/resolve-uri")):"function"==typeof define&&define.amd?define(["exports","@jridgewell/sourcemap-codec","@jridgewell/resolve-uri"],a):a((r="undefined"!=typeof globalThis?globalThis:r||self).traceMapping={},r.sourcemapCodec,r.resolveURI)}(this,(function(e,t,n){function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(n);function o(e,t){return t&&!t.endsWith("/")&&(t+="/"),a.default(e,t)}function s(e,t){for(let n=t;n<e.length;n++)if(!i(e[n]))return n;return e.length}function i(e){for(let t=1;t<e.length;t++)if(e[t][0]<e[t-1][0])return!1;return!0}function c(e,t){return t||(e=e.slice()),e.sort(u)}function u(e,t){return e[0]-t[0]}let d=!1;function l(e,t,n){for(let r=n+1;r<e.length&&e[r][0]===t;n=r++);return n}function f(e,t,n){for(let r=n-1;r>=0&&e[r][0]===t;n=r--);return n}function p(){return{lastKey:-1,lastNeedle:-1,lastIndex:-1}}function h(e,t,n,r){const{lastKey:a,lastNeedle:o,lastIndex:s}=n;let i=0,c=e.length-1;if(r===a){if(t===o)return d=-1!==s&&e[s][0]===t,s;t>=o?i=-1===s?0:s:c=s}return n.lastKey=r,n.lastNeedle=t,n.lastIndex=function(e,t,n,r){for(;n<=r;){const a=n+(r-n>>1),o=e[a][0]-t;if(0===o)return d=!0,a;o<0?n=a+1:r=a-1}return d=!1,n-1}(e,t,i,c)}function g(e,t,n){for(let n=e.length;n>t;n--)e[n]=e[n-1];e[t]=n}function m(){return{__proto__:null}}function T(e,t,n,r,a,o,s,i,c,u){const{sections:d}=e;for(let e=0;e<d.length;e++){const{map:l,offset:f}=d[e];let p=c,h=u;if(e+1<d.length){const t=d[e+1].offset;p=Math.min(c,s+t.line),p===c?h=Math.min(u,i+t.column):p<c&&(h=i+t.column)}y(l,t,n,r,a,o,s+f.line,i+f.column,p,h)}}function y(t,n,r,a,o,s,i,c,u,d){if("sections"in t)return T(...arguments);const l=new I(t,n),f=a.length,p=s.length,h=e.decodedMappings(l),{resolvedSources:g,sourcesContent:m}=l;if(E(a,g),E(s,l.names),m)E(o,m);else for(let e=0;e<g.length;e++)o.push(null);for(let e=0;e<h.length;e++){const t=i+e;if(t>u)return;const n=_(r,t),a=0===e?c:0,o=h[e];for(let e=0;e<o.length;e++){const r=o[e],s=a+r[0];if(t===u&&s>=d)return;if(1===r.length){n.push([s]);continue}const i=f+r[1],c=r[2],l=r[3];n.push(4===r.length?[s,i,c,l]:[s,i,c,l,p+r[4]])}}}function E(e,t){for(let n=0;n<t.length;n++)e.push(t[n])}function _(e,t){for(let n=e.length;n<=t;n++)e[n]=[];return e[t]}const S="`line` must be greater than 0 (lines start at line 1)",A="`column` must be greater than or equal to 0 (columns start at column 0)";e.encodedMappings=void 0,e.decodedMappings=void 0,e.traceSegment=void 0,e.originalPositionFor=void 0,e.generatedPositionFor=void 0,e.eachMapping=void 0,e.sourceContentFor=void 0,e.presortedDecodedMap=void 0,e.decodedMap=void 0,e.encodedMap=void 0;class I{constructor(e,t){const n="string"==typeof e;if(!n&&e._decodedMemo)return e;const r=n?JSON.parse(e):e,{version:a,file:i,names:u,sourceRoot:d,sources:l,sourcesContent:f}=r;this.version=a,this.file=i,this.names=u,this.sourceRoot=d,this.sources=l,this.sourcesContent=f;const p=o(d||"",function(e){if(!e)return"";const t=e.lastIndexOf("/");return e.slice(0,t+1)}(t));this.resolvedSources=l.map((e=>o(e||"",p)));const{mappings:h}=r;"string"==typeof h?(this._encoded=h,this._decoded=undefined):(this._encoded=undefined,this._decoded=function(e,t){const n=s(e,0);if(n===e.length)return e;t||(e=e.slice());for(let r=n;r<e.length;r=s(e,r+1))e[r]=c(e[r],t);return e}(h,n)),this._decodedMemo={lastKey:-1,lastNeedle:-1,lastIndex:-1},this._bySources=undefined,this._bySourceMemos=undefined}}function w(e,t){return{version:e.version,file:e.file,names:e.names,sourceRoot:e.sourceRoot,sources:e.sources,sourcesContent:e.sourcesContent,mappings:t}}function R(e,t,n,r){return{source:e,line:t,column:n,name:r}}function v(e,t){return{line:e,column:t}}function C(e,t,n,r,a){let o=h(e,r,t,n);return d?o=(-1===a?l:f)(e,r,o):-1===a&&o++,-1===o||o===e.length?null:e[o]}e.encodedMappings=e=>{var n;return null!==(n=e._encoded)&&void 0!==n?n:e._encoded=t.encode(e._decoded)},e.decodedMappings=e=>e._decoded||(e._decoded=t.decode(e._encoded)),e.traceSegment=(t,n,r)=>{const a=e.decodedMappings(t);return n>=a.length?null:C(a[n],t._decodedMemo,n,r,1)},e.originalPositionFor=(t,{line:n,column:r,bias:a})=>{if(--n<0)throw new Error(S);if(r<0)throw new Error(A);const o=e.decodedMappings(t);if(n>=o.length)return R(null,null,null,null);const s=C(o[n],t._decodedMemo,n,r,a||1);if(null==s)return R(null,null,null,null);if(1==s.length)return R(null,null,null,null);const{names:i,resolvedSources:c}=t;return R(c[s[1]],s[2]+1,s[3],5===s.length?i[s[4]]:null)},e.generatedPositionFor=(t,{source:n,line:r,column:a,bias:o})=>{if(--r<0)throw new Error(S);if(a<0)throw new Error(A);const{sources:s,resolvedSources:i}=t;let c=s.indexOf(n);if(-1===c&&(c=i.indexOf(n)),-1===c)return v(null,null);const u=t._bySources||(t._bySources=function(e,t){const n=t.map(m);for(let r=0;r<e.length;r++){const a=e[r];for(let e=0;e<a.length;e++){const o=a[e];if(1===o.length)continue;const s=o[1],i=o[2],c=o[3],u=n[s],d=u[i]||(u[i]=[]),f=t[s],p=l(d,c,h(d,c,f,i));g(d,f.lastIndex=p+1,[c,r,o[0]])}}return n}(e.decodedMappings(t),t._bySourceMemos=s.map(p))),d=t._bySourceMemos,f=u[c][r];if(null==f)return v(null,null);const T=C(f,d[c],r,a,o||1);return null==T?v(null,null):v(T[1]+1,T[2])},e.eachMapping=(t,n)=>{const r=e.decodedMappings(t),{names:a,resolvedSources:o}=t;for(let e=0;e<r.length;e++){const t=r[e];for(let r=0;r<t.length;r++){const s=t[r],i=e+1,c=s[0];let u=null,d=null,l=null,f=null;1!==s.length&&(u=o[s[1]],d=s[2]+1,l=s[3]),5===s.length&&(f=a[s[4]]),n({generatedLine:i,generatedColumn:c,source:u,originalLine:d,originalColumn:l,name:f})}}},e.sourceContentFor=(e,t)=>{const{sources:n,resolvedSources:r,sourcesContent:a}=e;if(null==a)return null;let o=n.indexOf(t);return-1===o&&(o=r.indexOf(t)),-1===o?null:a[o]},e.presortedDecodedMap=(e,t)=>{const n=new I(w(e,[]),t);return n._decoded=e.mappings,n},e.decodedMap=t=>w(t,e.decodedMappings(t)),e.encodedMap=t=>w(t,e.encodedMappings(t)),e.AnyMap=function(t,n){const r="string"==typeof t?JSON.parse(t):t;if(!("sections"in r))return new I(r,n);const a=[],o=[],s=[],i=[];T(r,n,a,o,s,i,0,0,Infinity,Infinity);const c={version:3,file:r.file,names:i,sources:o,sourcesContent:s,mappings:a};return e.presortedDecodedMap(c)},e.GREATEST_LOWER_BOUND=1,e.LEAST_UPPER_BOUND=-1,e.TraceMap=I,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"terser>@jridgewell/source-map>@jridgewell/trace-mapping"}],[787,{"@ethereumjs/util":636,"@keystonehq/bc-ur-registry":805,buffer:2438,hdkey:5270,uuid:6888},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,f;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(f=n.DataType||(n.DataType={}))[f.transaction=1]="transaction",f[f.typedData=2]="typedData",f[f.personalMessage=3]="personalMessage",f[f.typedTransaction=4]="typedTransaction";class p extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=this.chainId),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,s,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),f=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:i?t.from(o.parse(i)):undefined,signData:e,dataType:n,derivationPath:f,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):undefined,origin:d||undefined})}}p.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],o=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),s=t[l.chainId]?t[l.chainId]:undefined,i=t[l.address]?t[l.address]:undefined,c=t[l.requestId]?t[l.requestId].getData():undefined,u=t[l.origin]?t[l.origin]:undefined;return new p({requestId:c,signData:n,dataType:r,chainId:s,derivationPath:o,address:i,origin:u})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:h,decodeToDataItem:g}=a.extend;var m;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(m||(m={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[m.requestId]=new a.DataItem(this.requestId,h.UUID.getTag())),this.origin&&(e[m.origin]=this.origin),e[m.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[m.signature],r=t[m.requestId]?t[m.requestId].getData():undefined;return new T(n,r,t[m.origin])},T.fromCBOR=e=>{const t=g(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class _ extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new _({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}_.fromDataItem=e=>{const t=e.getData(),n=t[E.chainId],r=t[E.name],a=t[E.mediaData],o=t[E.contractAddress],s=t[E.contractName];return new _({chainId:n,name:r,contractAddress:o,contractName:s,mediaData:a})},_.fromCBOR=e=>{const t=y(e);return _.fromDataItem(t)};const S=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=_,n.ETHSignature=T,n.EthSignRequest=p,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=S(t,`M/0/${a}`);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=S}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth"}],[788,{"@ethereumjs/util":636,"@keystonehq/bc-ur-registry":805,buffer:2438,hdkey:5270,uuid:6888},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});var r,a=e("@keystonehq/bc-ur-registry"),o=e("uuid"),s=(r=e("hdkey"))&&"object"==typeof r&&"default"in r?r.default:r,i=e("@ethereumjs/util");const c={ETH_SIGN_REQUEST:new a.RegistryType("eth-sign-request",401),ETH_SIGNATURE:new a.RegistryType("eth-signature",402),ETH_NFT_ITEM:new a.RegistryType("eth-nft-item",403)},{decodeToDataItem:u,RegistryTypes:d}=a.extend;var l,f;!function(e){e[e.requestId=1]="requestId",e[e.signData=2]="signData",e[e.dataType=3]="dataType",e[e.chainId=4]="chainId",e[e.derivationPath=5]="derivationPath",e[e.address=6]="address",e[e.origin=7]="origin"}(l||(l={})),(f=n.DataType||(n.DataType={}))[f.transaction=1]="transaction",f[f.typedData=2]="typedData",f[f.personalMessage=3]="personalMessage",f[f.typedTransaction=4]="typedTransaction";class p extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_SIGN_REQUEST,this.getRequestId=()=>this.requestId,this.getSignData=()=>this.signData,this.getDataType=()=>this.dataType,this.getChainId=()=>this.chainId,this.getDerivationPath=()=>this.derivationPath.getPath(),this.getSourceFingerprint=()=>this.derivationPath.getSourceFingerprint(),this.getSignRequestAddress=()=>this.address,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};this.requestId&&(e[l.requestId]=new a.DataItem(this.requestId,d.UUID.getTag())),this.address&&(e[l.address]=this.address),this.chainId&&(e[l.chainId]=this.chainId),this.origin&&(e[l.origin]=this.origin),e[l.signData]=this.signData,e[l.dataType]=this.dataType;const t=this.derivationPath.toDataItem();return t.setTag(this.derivationPath.getRegistryType().getTag()),e[l.derivationPath]=t,new a.DataItem(e)},this.requestId=e.requestId,this.signData=e.signData,this.dataType=e.dataType,this.chainId=e.chainId,this.derivationPath=e.derivationPath,this.address=e.address,this.origin=e.origin}static constructETHRequest(e,n,r,s,i,c,u,d){const l=r.replace(/[m|M]\//,"").split("/"),f=new a.CryptoKeypath(l.map((e=>{const t=parseInt(e.replace("'",""));let n=!1;return e.endsWith("'")&&(n=!0),new a.PathComponent({index:t,hardened:n})})),t.from(s,"hex"));return new p({requestId:i?t.from(o.parse(i)):void 0,signData:e,dataType:n,derivationPath:f,chainId:c,address:u?t.from(u.replace("0x",""),"hex"):void 0,origin:d||void 0})}}p.fromDataItem=e=>{const t=e.getData(),n=t[l.signData],r=t[l.dataType],o=a.CryptoKeypath.fromDataItem(t[l.derivationPath]),s=t[l.chainId]?t[l.chainId]:void 0,i=t[l.address]?t[l.address]:void 0,c=t[l.requestId]?t[l.requestId].getData():void 0;return new p({requestId:c,signData:n,dataType:r,chainId:s,derivationPath:o,address:i,origin:t[l.origin]?t[l.origin]:void 0})},p.fromCBOR=e=>{const t=u(e);return p.fromDataItem(t)};const{RegistryTypes:h,decodeToDataItem:g}=a.extend;var m;!function(e){e[e.requestId=1]="requestId",e[e.signature=2]="signature",e[e.origin=3]="origin"}(m||(m={}));class T extends a.RegistryItem{constructor(e,t,n){super(),this.getRegistryType=()=>c.ETH_SIGNATURE,this.getRequestId=()=>this.requestId,this.getSignature=()=>this.signature,this.getOrigin=()=>this.origin,this.toDataItem=()=>{const e={};return this.requestId&&(e[m.requestId]=new a.DataItem(this.requestId,h.UUID.getTag())),this.origin&&(e[m.origin]=this.origin),e[m.signature]=this.signature,new a.DataItem(e)},this.signature=e,this.requestId=t,this.origin=n}}T.fromDataItem=e=>{const t=e.getData(),n=t[m.signature],r=t[m.requestId]?t[m.requestId].getData():void 0;return new T(n,r,t[m.origin])},T.fromCBOR=e=>{const t=g(e);return T.fromDataItem(t)};const{decodeToDataItem:y}=a.extend;var E;!function(e){e[e.chainId=1]="chainId",e[e.contractAddress=2]="contractAddress",e[e.contractName=3]="contractName",e[e.name=4]="name",e[e.mediaData=5]="mediaData"}(E||(E={}));class _ extends a.RegistryItem{constructor(e){super(),this.getRegistryType=()=>c.ETH_NFT_ITEM,this.getChainId=()=>this.chainId,this.getName=()=>this.name,this.getmediaData=()=>this.mediaData,this.getContractAddress=()=>this.contractAddress,this.getContractName=()=>this.contractName,this.toDataItem=()=>{const e={};return e[E.chainId]=this.chainId,e[E.name]=this.name,e[E.contractAddress]=this.contractAddress,e[E.contractName]=this.contractName,e[E.mediaData]=this.mediaData,new a.DataItem(e)},this.chainId=e.chainId,this.name=e.name,this.contractAddress=e.contractAddress,this.contractName=e.contractName,this.mediaData=e.mediaData}static constructETHNFTItem(e,t,n,r,a){return new _({chainId:e,contractAddress:t,contractName:n,mediaData:a,name:r})}}_.fromDataItem=e=>{const t=e.getData();return new _({chainId:t[E.chainId],name:t[E.name],contractAddress:t[E.contractAddress],contractName:t[E.contractName],mediaData:t[E.mediaData]})},_.fromCBOR=e=>{const t=y(e);return _.fromDataItem(t)};const S=(e,t)=>{const n=s.fromExtendedKey(e).derive(t),r="0x"+i.publicToAddress(n.publicKey,!0).toString("hex");return i.toChecksumAddress(r)};a.patchTags(Object.values(c).filter((e=>!!e.getTag())).map((e=>e.getTag()))),Object.keys(a).forEach((function(e){"default"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}})})),n.ETHNFTItem=_,n.ETHSignature=T,n.EthSignRequest=p,n.findHDPathFromAddress=(e,t,n,r)=>{for(let a=0;a<n;a++){const n=S(t,"M/0/"+a);if(e.toLowerCase()==n.toLowerCase())return`${r}/0/${a}`}return null},n.generateAddressFromXpub=S}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth"}],[789,{"./bc-ur-registry-eth.cjs.development.js":787,"./bc-ur-registry-eth.cjs.production.min.js":788},function(){with(this)return function(){"use strict";return function(e,t,n){t.exports=e("./bc-ur-registry-eth.cjs.production.min.js")}}},{package:"@keystonehq/bc-ur-registry-eth"}],[790,{"./RegistryItem":801,"./RegistryType":802,"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.Bytes=void 0;const r=e("./lib"),a=e("./RegistryItem"),o=e("./RegistryType");class s extends a.RegistryItem{constructor(e){super(),this.bytes=e,this.getRegistryType=()=>o.RegistryTypes.BYTES,this.getData=()=>this.bytes,this.toDataItem=()=>new r.DataItem(this.bytes)}}n.Bytes=s,s.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][Bytes][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return s.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[791,{".":805,"./RegistryItem":801,"./RegistryType":802,"./lib":808,buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoAccount=void 0;const r=e("."),a=e("./lib"),o=e("./RegistryItem"),s=e("./RegistryType");var i;!function(e){e[e.masterFingerprint=1]="masterFingerprint",e[e.outputDescriptors=2]="outputDescriptors"}(i||(i={}));class c extends o.RegistryItem{constructor(e,t){super(),this.masterFingerprint=e,this.outputDescriptors=t,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_ACCOUNT,this.getMasterFingerprint=()=>this.masterFingerprint,this.getOutputDescriptors=()=>this.outputDescriptors,this.toDataItem=()=>{const e={};return this.masterFingerprint&&(e[i.masterFingerprint]=this.masterFingerprint.readUInt32BE(0)),this.outputDescriptors&&(e[i.outputDescriptors]=this.outputDescriptors.map((e=>e.toDataItem()))),new a.DataItem(e)}}}n.CryptoAccount=c,c.fromDataItem=e=>{const n=e.getData(),a=t.alloc(4),o=n[i.masterFingerprint];o&&a.writeUInt32BE(o,0);const s=n[i.outputDescriptors].map((e=>r.CryptoOutput.fromDataItem(e)));return new c(a,s)},c.fromCBOR=e=>{const t=(0,a.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[792,{"./RegistryItem":801,"./RegistryType":802,"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoCoinInfo=n.Network=n.Type=void 0;const r=e("./lib"),a=e("./RegistryItem"),o=e("./RegistryType");var s,i,c;!function(e){e.type="1",e.network="2"}(s||(s={})),function(e){e[e.bitcoin=0]="bitcoin"}(i=n.Type||(n.Type={})),function(e){e[e.mainnet=0]="mainnet",e[e.testnet=1]="testnet"}(c=n.Network||(n.Network={}));class u extends a.RegistryItem{constructor(e,t){super(),this.type=e,this.network=t,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_COIN_INFO,this.getType=()=>this.type||i.bitcoin,this.getNetwork=()=>this.network||c.mainnet,this.toDataItem=()=>{const e={};return this.type&&(e[s.type]=this.type),this.network&&(e[s.network]=this.network),new r.DataItem(e)}}}n.CryptoCoinInfo=u,u.fromDataItem=e=>{const t=e.getData(),n=t[s.type],r=t[s.network];return new u(n,r)},u.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return u.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[7924,{"../../../app/scripts/lib/util":90,"../../../shared/constants/gas":7056,"../../../shared/modules/conversion.utils":7078},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.TOKEN_TRANSFER_FUNCTION_SIGNATURE=n.REQUIRED_ERROR=n.RECIPIENT_TYPES=n.NEGATIVE_ETH_ERROR=n.MIN_GAS_TOTAL=n.MIN_GAS_PRICE_HEX=n.MIN_GAS_PRICE_GWEI=n.MIN_GAS_PRICE_DEC=n.MIN_GAS_LIMIT_DEC=n.MAX_GAS_LIMIT_DEC=n.KNOWN_RECIPIENT_ADDRESS_WARNING=n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR=n.INVALID_RECIPIENT_ADDRESS_ERROR=n.INSUFFICIENT_TOKENS_ERROR=n.INSUFFICIENT_FUNDS_ERROR=n.HIGH_FEE_WARNING_MULTIPLIER=n.ENS_UNKNOWN_ERROR=n.ENS_REGISTRATION_ERROR=n.ENS_NO_ADDRESS_FOR_NAME=n.ENS_NOT_SUPPORTED_ON_NETWORK=n.ENS_NOT_FOUND_ON_NETWORK=n.ENS_ILLEGAL_CHARACTER=n.CONTRACT_ADDRESS_ERROR=n.CONFUSING_ENS_ERROR=n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE=void 0;var r=e("../../../shared/modules/conversion.utils"),a=e("../../../app/scripts/lib/util"),o=e("../../../shared/constants/gas");n.MIN_GAS_PRICE_DEC="0";const s=parseInt("0",10).toString(16);n.MIN_GAS_PRICE_HEX=s;n.MIN_GAS_LIMIT_DEC="21000";n.MAX_GAS_LIMIT_DEC="7920027";n.HIGH_FEE_WARNING_MULTIPLIER=1.5;const i=(0,a.addHexPrefix)((0,r.conversionUtil)(s,{fromDenomination:"WEI",toDenomination:"GWEI",fromNumericBase:"hex",toNumericBase:"hex",numberOfDecimals:1}));n.MIN_GAS_PRICE_GWEI=i;const c=(0,r.multiplyCurrencies)(o.MIN_GAS_LIMIT_HEX,s,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:16});n.MIN_GAS_TOTAL=c;n.TOKEN_TRANSFER_FUNCTION_SIGNATURE="0xa9059cbb";n.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE="0x23b872dd";n.INSUFFICIENT_FUNDS_ERROR="insufficientFunds";n.INSUFFICIENT_TOKENS_ERROR="insufficientTokens";n.NEGATIVE_ETH_ERROR="negativeETH";n.INVALID_RECIPIENT_ADDRESS_ERROR="invalidAddressRecipient";n.INVALID_RECIPIENT_ADDRESS_NOT_ETH_NETWORK_ERROR="invalidAddressRecipientNotEthNetwork";n.REQUIRED_ERROR="required";n.KNOWN_RECIPIENT_ADDRESS_WARNING="knownAddressRecipient";n.CONTRACT_ADDRESS_ERROR="contractAddressError";n.CONFUSING_ENS_ERROR="confusingEnsDomain";n.ENS_NO_ADDRESS_FOR_NAME="noAddressForName";n.ENS_NOT_FOUND_ON_NETWORK="ensNotFoundOnCurrentNetwork";n.ENS_NOT_SUPPORTED_ON_NETWORK="ensNotSupportedOnNetwork";n.ENS_ILLEGAL_CHARACTER="ensIllegalCharacter";n.ENS_UNKNOWN_ERROR="ensUnknownError";n.ENS_REGISTRATION_ERROR="ensRegistrationError";n.RECIPIENT_TYPES={SMART_CONTRACT:"SMART_CONTRACT",NON_CONTRACT:"NON_CONTRACT"}}}},{package:"$root$"}],[7926,{"../../../app/scripts/lib/util":90,"../../../shared/constants/transaction":7067,"../../../shared/lib/transactions-controller-utils":7074,"../../../shared/modules/conversion.utils":7078,"./send.constants":7924,"ethereumjs-abi":2876},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=function(e,t,n=1.5){const r=(0,o.multiplyCurrencies)(t,.9,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"}),a=(0,o.multiplyCurrencies)(e,n,{toNumericBase:"hex",multiplicandBase:16,multiplierBase:10,numberOfDecimals:"0"});if((0,o.conversionGreaterThan)({value:e,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return e;if((0,o.conversionLessThan)({value:a,fromNumericBase:"hex"},{value:r,fromNumericBase:"hex"}))return a;return r},n.ellipsify=function(e,t=6,n=4){return`${e.slice(0,t)}...${e.slice(-n)}`},n.generateERC20TransferData=d,n.generateERC721TransferData=l,n.getAssetTransferData=function({sendToken:e,fromAddress:t,toAddress:n,amount:r}){switch(e.standard){case i.ERC721:return l({toAddress:n,fromAddress:t,tokenId:e.tokenId});case i.ERC20:default:return d({toAddress:n,amount:r,sendToken:e})}},n.isBalanceSufficient=function({amount:e="0x0",balance:t="0x0",conversionRate:n=1,gasTotal:r="0x0",primaryCurrency:a}){const s=(0,o.addCurrencies)(e,r,{aBase:16,bBase:16,toNumericBase:"hex"});return(0,o.conversionGTE)({value:t,fromNumericBase:"hex",fromCurrency:a,conversionRate:n},{value:s,fromNumericBase:"hex",conversionRate:n,fromCurrency:a})},n.isTokenBalanceSufficient=function({amount:e="0x0",tokenBalance:t,decimals:n}){const r=(0,o.conversionUtil)(e,{fromNumericBase:"hex"});return(0,o.conversionGTE)({value:t,fromNumericBase:"hex"},{value:(0,c.calcTokenAmount)(r,n)})};var r,a=(r=e("ethereumjs-abi"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/conversion.utils"),s=e("../../../app/scripts/lib/util"),i=e("../../../shared/constants/transaction"),c=e("../../../shared/lib/transactions-controller-utils"),u=e("./send.constants");function d({toAddress:e="0x0",amount:t="0x0",sendToken:n}){return n?u.TOKEN_TRANSFER_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","uint256"],[(0,s.addHexPrefix)(e),(0,s.addHexPrefix)(t)]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}function l({toAddress:e="0x0",fromAddress:t="0x0",tokenId:n}){return n?u.COLLECTIBLE_TRANSFER_FROM_FUNCTION_SIGNATURE+Array.prototype.map.call(a.default.rawEncode(["address","address","uint256"],[(0,s.addHexPrefix)(t),(0,s.addHexPrefix)(e),n]),(e=>`00${e.toString(16)}`.slice(-2))).join(""):undefined}}}},{package:"$root$"}],[793,{"./RegistryItem":801,"./RegistryType":802,"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoECKey=void 0;const r=e("./lib"),a=e("./RegistryItem"),o=e("./RegistryType");var s;!function(e){e[e.curve=1]="curve",e[e.private=2]="private",e[e.data=3]="data"}(s||(s={}));class i extends a.RegistryItem{constructor(e){super(),this.isECKey=()=>!0,this.getCurve=()=>this.curve||0,this.isPrivateKey=()=>this.privateKey||!1,this.getData=()=>this.data,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_ECKEY,this.toDataItem=()=>{const e={};return this.curve&&(e[s.curve]=this.curve),this.privateKey!==undefined&&(e[s.private]=this.privateKey),e[s.data]=this.data,new r.DataItem(e)},this.getOutputDescriptorContent=()=>this.data.toString("hex"),this.data=e.data,this.curve=e.curve,this.privateKey=e.privateKey||undefined}}n.CryptoECKey=i,i.fromDataItem=e=>{const t=e.getData(),n=t[s.curve],r=t[s.private],a=t[s.data];if(!a)throw new Error(`#[ur-registry][CryptoECKey][fn.fromDataItem]: decoded [dataItem][#data.data] is undefined: ${e}`);return new i({data:a,curve:n,privateKey:r})},i.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return i.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[794,{"./CryptoCoinInfo":792,"./CryptoKeypath":795,"./RegistryItem":801,"./RegistryType":802,"./lib":808,bs58check:2451,buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoHDKey=void 0;const r=e("bs58check"),a=e("./CryptoCoinInfo"),o=e("./CryptoKeypath"),s=e("./lib"),i=e("./RegistryItem"),c=e("./RegistryType");var u;!function(e){e[e.is_master=1]="is_master",e[e.is_private=2]="is_private",e[e.key_data=3]="key_data",e[e.chain_code=4]="chain_code",e[e.use_info=5]="use_info",e[e.origin=6]="origin",e[e.children=7]="children",e[e.parent_fingerprint=8]="parent_fingerprint",e[e.name=9]="name",e[e.note=10]="note"}(u||(u={}));class d extends i.RegistryItem{constructor(e){super(),this.isECKey=()=>!1,this.getKey=()=>this.key,this.getChainCode=()=>this.chainCode,this.isMaster=()=>this.master,this.isPrivateKey=()=>!!this.privateKey,this.getUseInfo=()=>this.useInfo,this.getOrigin=()=>this.origin,this.getChildren=()=>this.children,this.getParentFingerprint=()=>this.parentFingerprint,this.getName=()=>this.name,this.getNote=()=>this.note,this.getBip32Key=()=>{var e,n,a;let o,s,i=0,c=t.alloc(4).fill(0);if(this.isMaster())o=t.from("0488ADE4","hex"),s=0,i=0;else{s=(null===(e=this.getOrigin())||void 0===e?void 0:e.getComponents().length)||(null===(n=this.getOrigin())||void 0===n?void 0:n.getDepth());const r=null===(a=this.getOrigin())||void 0===a?void 0:a.getComponents(),u=r[r.length-1];u&&(i=u.isHardened()?u.getIndex()+2147483648:u.getIndex(),this.getParentFingerprint()&&(c=this.getParentFingerprint())),o=this.isPrivateKey()?t.from("0488ADE4","hex"):t.from("0488B21E","hex")}const u=t.alloc(1);u.writeUInt8(s,0);const d=t.alloc(4);d.writeUInt32BE(i,0);const l=this.getChainCode(),f=this.getKey();return(0,r.encode)(t.concat([o,u,c,d,l,f]))},this.getRegistryType=()=>c.RegistryTypes.CRYPTO_HDKEY,this.getOutputDescriptorContent=()=>{var e,t,n,r,a,o,s;let i="";return this.getOrigin()&&(null===(e=this.getOrigin())||void 0===e?void 0:e.getSourceFingerprint())&&(null===(t=this.getOrigin())||void 0===t?void 0:t.getPath())&&(i+=`${null===(r=null===(n=this.getOrigin())||void 0===n?void 0:n.getSourceFingerprint())||void 0===r?void 0:r.toString("hex")}/${null===(a=this.getOrigin())||void 0===a?void 0:a.getPath()}`),i+=this.getBip32Key(),this.getChildren()&&(null===(o=this.getChildren())||void 0===o?void 0:o.getPath())&&(i+=`/${null===(s=this.getChildren())||void 0===s?void 0:s.getPath()}`),i},this.setupMasterKey=e=>{this.master=!0,this.key=e.key,this.chainCode=e.chainCode},this.setupDeriveKey=e=>{this.master=!1,this.privateKey=e.isPrivateKey,this.key=e.key,this.chainCode=e.chainCode,this.useInfo=e.useInfo,this.origin=e.origin,this.children=e.children,this.parentFingerprint=e.parentFingerprint,this.name=e.name,this.note=e.note},this.toDataItem=()=>{const e={};if(this.master)e[u.is_master]=!0,e[u.key_data]=this.key,e[u.chain_code]=this.chainCode;else{if(this.privateKey!==undefined&&(e[u.is_private]=this.privateKey),e[u.key_data]=this.key,this.chainCode&&(e[u.chain_code]=this.chainCode),this.useInfo){const t=this.useInfo.toDataItem();t.setTag(this.useInfo.getRegistryType().getTag()),e[u.use_info]=t}if(this.origin){const t=this.origin.toDataItem();t.setTag(this.origin.getRegistryType().getTag()),e[u.origin]=t}if(this.children){const t=this.children.toDataItem();t.setTag(this.children.getRegistryType().getTag()),e[u.children]=t}this.parentFingerprint&&(e[u.parent_fingerprint]=this.parentFingerprint.readUInt32BE(0)),this.name!==undefined&&(e[u.name]=this.name),this.note!==undefined&&(e[u.note]=this.note)}return new s.DataItem(e)},e.isMaster?this.setupMasterKey(e):this.setupDeriveKey(e)}}n.CryptoHDKey=d,d.fromDataItem=e=>{const n=e.getData(),r=!!n[u.is_master],s=n[u.is_private],i=n[u.key_data],c=n[u.chain_code],l=n[u.use_info]?a.CryptoCoinInfo.fromDataItem(n[u.use_info]):undefined,f=n[u.origin]?o.CryptoKeypath.fromDataItem(n[u.origin]):undefined,p=n[u.children]?o.CryptoKeypath.fromDataItem(n[u.children]):undefined,h=n[u.parent_fingerprint];let g=undefined;h&&(g=t.alloc(4),g.writeUInt32BE(h,0));const m=n[u.name],T=n[u.note];return new d({isMaster:r,isPrivateKey:s,key:i,chainCode:c,useInfo:l,origin:f,children:p,parentFingerprint:g,name:m,note:T})},d.fromCBOR=e=>{const t=(0,s.decodeToDataItem)(e);return d.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[795,{"./PathComponent":800,"./RegistryItem":801,"./RegistryType":802,"./lib":808,buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoKeypath=void 0;const r=e("./lib"),a=e("./PathComponent"),o=e("./RegistryItem"),s=e("./RegistryType");var i;!function(e){e[e.components=1]="components",e[e.source_fingerprint=2]="source_fingerprint",e[e.depth=3]="depth"}(i||(i={}));class c extends o.RegistryItem{constructor(e=[],t,n){super(),this.components=e,this.sourceFingerprint=t,this.depth=n,this.getRegistryType=()=>s.RegistryTypes.CRYPTO_KEYPATH,this.getPath=()=>{if(0===this.components.length)return undefined;return this.components.map((e=>`${e.isWildcard()?"*":e.getIndex()}${e.isHardened()?"'":""}`)).join("/")},this.getComponents=()=>this.components,this.getSourceFingerprint=()=>this.sourceFingerprint,this.getDepth=()=>this.depth,this.toDataItem=()=>{const e={},t=[];return this.components&&this.components.forEach((e=>{e.isWildcard()?t.push([]):t.push(e.getIndex()),t.push(e.isHardened())})),e[i.components]=t,this.sourceFingerprint&&(e[i.source_fingerprint]=this.sourceFingerprint.readUInt32BE(0)),this.depth!==undefined&&(e[i.depth]=this.depth),new r.DataItem(e)}}}n.CryptoKeypath=c,c.fromDataItem=e=>{const n=e.getData(),r=[],o=n[i.components];if(o)for(let e=0;e<o.length;e+=2){const t=o[e+1],n=o[e];"number"==typeof n?r.push(new a.PathComponent({index:n,hardened:t})):r.push(new a.PathComponent({hardened:t}))}const s=n[i.source_fingerprint];let u;s&&(u=t.alloc(4),u.writeUInt32BE(s,0));const d=n[i.depth];return new c(r,u,d)},c.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return c.fromDataItem(t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[796,{"./CryptoECKey":793,"./CryptoHDKey":794,"./MultiKey":799,"./RegistryItem":801,"./RegistryType":802,"./ScriptExpression":803,"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoOutput=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),o=e("./lib"),s=e("./MultiKey"),i=e("./RegistryItem"),c=e("./RegistryType"),u=e("./ScriptExpression");class d extends i.RegistryItem{constructor(e,t){super(),this.scriptExpressions=e,this.cryptoKey=t,this.getRegistryType=()=>c.RegistryTypes.CRYPTO_OUTPUT,this.getCryptoKey=()=>this.cryptoKey,this.getHDKey=()=>this.cryptoKey instanceof a.CryptoHDKey?this.cryptoKey:undefined,this.getECKey=()=>this.cryptoKey instanceof r.CryptoECKey?this.cryptoKey:undefined,this.getMultiKey=()=>this.cryptoKey instanceof s.MultiKey?this.cryptoKey:undefined,this.getScriptExpressions=()=>this.scriptExpressions,this._toOutputDescriptor=e=>e>=this.scriptExpressions.length?this.cryptoKey.getOutputDescriptorContent():`${this.scriptExpressions[e].getExpression()}(${this._toOutputDescriptor(e+1)})`,this.toString=()=>this._toOutputDescriptor(0),this.toDataItem=()=>{let e=this.cryptoKey.toDataItem();(this.cryptoKey instanceof r.CryptoECKey||this.cryptoKey instanceof a.CryptoHDKey)&&e.setTag(this.cryptoKey.getRegistryType().getTag());return[...this.scriptExpressions].reverse().forEach((t=>{const n=t.getTag();e.getTag()===undefined?e.setTag(n):e=new o.DataItem(e,n)})),e}}}n.CryptoOutput=d,d.fromDataItem=e=>{const t=[];let n=e;for(;;){let e=n.getTag();const r=u.ScriptExpression.fromTag(e);if(!r)break;if(t.push(r),!(n.getData()instanceof o.DataItem))break;n=n.getData(),e=n.getTag()}const i=t.length;if(i>0&&(t[i-1].getExpression()===u.ScriptExpressions.MULTISIG.getExpression()||t[i-1].getExpression()===u.ScriptExpressions.SORTED_MULTISIG.getExpression())){const e=s.MultiKey.fromDataItem(n);return new d(t,e)}if(n.getTag()===c.RegistryTypes.CRYPTO_HDKEY.getTag()){const e=a.CryptoHDKey.fromDataItem(n);return new d(t,e)}{const e=r.CryptoECKey.fromDataItem(n);return new d(t,e)}},d.fromCBOR=e=>{const t=(0,o.decodeToDataItem)(e);return d.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[797,{"./RegistryItem":801,"./RegistryType":802,"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.CryptoPSBT=void 0;const r=e("./lib"),a=e("./RegistryItem"),o=e("./RegistryType");class s extends a.RegistryItem{constructor(e){super(),this.psbt=e,this.getRegistryType=()=>o.RegistryTypes.CRYPTO_PSBT,this.getPSBT=()=>this.psbt,this.toDataItem=()=>new r.DataItem(this.psbt)}}n.CryptoPSBT=s,s.fromDataItem=e=>{const t=e.getData();if(!t)throw new Error(`#[ur-registry][CryptoPSBT][fn.fromDataItem]: decoded [dataItem][#data] is undefined: ${e}`);return new s(t)},s.fromCBOR=e=>{const t=(0,r.decodeToDataItem)(e);return s.fromDataItem(t)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[798,{"..":805,"../RegistryType":802,"../errors":804,"@ngraveio/bc-ur":1785},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.URRegistryDecoder=void 0;const r=e("@ngraveio/bc-ur"),a=e(".."),o=e("../RegistryType"),s=e("../errors");class i extends r.URDecoder{constructor(){super(...arguments),this.resultRegistryType=()=>{const e=this.resultUR();switch(e.type){case o.RegistryTypes.BYTES.getType():return a.Bytes.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_HDKEY.getType():return a.CryptoHDKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_KEYPATH.getType():return a.CryptoKeypath.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_COIN_INFO.getType():return a.CryptoCoinInfo.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ECKEY.getType():return a.CryptoECKey.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_OUTPUT.getType():return a.CryptoOutput.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_PSBT.getType():return a.CryptoPSBT.fromCBOR(e.cbor);case o.RegistryTypes.CRYPTO_ACCOUNT.getType():return a.CryptoAccount.fromCBOR(e.cbor);default:throw new s.UnknownURTypeError(`#[ur-registry][Decoder][fn.resultRegistryType]: registry type ${e.type} is not supported now`)}}}}n.URRegistryDecoder=i}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[799,{"./CryptoECKey":793,"./CryptoHDKey":794,"./RegistryItem":801,"./RegistryType":802,"./lib/DataItem":806},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MultiKey=void 0;const r=e("./CryptoECKey"),a=e("./CryptoHDKey"),o=e("./lib/DataItem"),s=e("./RegistryItem"),i=e("./RegistryType");var c;!function(e){e[e.threshold=1]="threshold",e[e.keys=2]="keys"}(c||(c={}));class u extends s.RegistryItem{constructor(e,t){super(),this.threshold=e,this.keys=t,this.getThreshold=()=>this.threshold,this.getKeys=()=>this.keys,this.toDataItem=()=>{const e={};e[c.threshold]=this.threshold;const t=this.keys.map((e=>{const t=e.toDataItem();return t.setTag(e.getRegistryType().getTag()),t}));return e[c.keys]=t,new o.DataItem(e)},this.getOutputDescriptorContent=()=>[this.getThreshold(),this.keys.map((e=>e.getOutputDescriptorContent())).join(",")].join(",")}}n.MultiKey=u,u.fromDataItem=e=>{const t=e.getData(),n=t[c.threshold],o=t[c.keys],s=[];return o.forEach((e=>{e.getTag()===i.RegistryTypes.CRYPTO_HDKEY.getTag()?s.push(a.CryptoHDKey.fromDataItem(e)):e.getTag()===i.RegistryTypes.CRYPTO_ECKEY.getTag()&&s.push(r.CryptoECKey.fromDataItem(e))})),new u(n,s)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[800,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.PathComponent=void 0;class r{constructor(e){if(this.getIndex=()=>this.index,this.isWildcard=()=>this.wildcard,this.isHardened=()=>this.hardened,this.index=e.index,this.hardened=e.hardened,this.index!==undefined?this.wildcard=!1:this.wildcard=!0,this.index&&0!=(this.index&r.HARDENED_BIT))throw new Error(`#[ur-registry][PathComponent][fn.constructor]: Invalid index ${this.index} - most significant bit cannot be set`)}}n.PathComponent=r,r.HARDENED_BIT=2147483648}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[801,{"./lib":808,"@ngraveio/bc-ur":1785},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryItem=void 0;const r=e("@ngraveio/bc-ur"),a=e("./lib");n.RegistryItem=class{constructor(){this.toCBOR=()=>{if(this.toDataItem()===undefined)throw new Error(`#[ur-registry][RegistryItem][fn.toCBOR]: registry ${this.getRegistryType()}'s method toDataItem returns undefined`);return(0,a.encodeDataItem)(this.toDataItem())},this.toUR=()=>new r.UR(this.toCBOR(),this.getRegistryType().getType()),this.toUREncoder=(e,t,n)=>{const a=this.toUR();return new r.UREncoder(a,e,t,n)}}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[802,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.RegistryTypes=n.RegistryType=void 0;class r{constructor(e,t){this.type=e,this.tag=t,this.getTag=()=>this.tag,this.getType=()=>this.type}}n.RegistryType=r,n.RegistryTypes={UUID:new r("uuid",37),BYTES:new r("bytes",undefined),CRYPTO_HDKEY:new r("crypto-hdkey",303),CRYPTO_KEYPATH:new r("crypto-keypath",304),CRYPTO_COIN_INFO:new r("crypto-coin-info",305),CRYPTO_ECKEY:new r("crypto-eckey",306),CRYPTO_OUTPUT:new r("crypto-output",308),CRYPTO_PSBT:new r("crypto-psbt",310),CRYPTO_ACCOUNT:new r("crypto-account",311)}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[803,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScriptExpressions=n.ScriptExpression=void 0;class r{constructor(e,t){this.tag=e,this.expression=t,this.getTag=()=>this.tag,this.getExpression=()=>this.expression}}n.ScriptExpression=r,r.fromTag=e=>Object.values(n.ScriptExpressions).find((t=>t.getTag()===e)),n.ScriptExpressions={SCRIPT_HASH:new r(400,"sh"),WITNESS_SCRIPT_HASH:new r(401,"wsh"),PUBLIC_KEY:new r(402,"pk"),PUBLIC_KEY_HASH:new r(403,"pkh"),WITNESS_PUBLIC_KEY_HASH:new r(404,"wpkh"),COMBO:new r(405,"combo"),MULTISIG:new r(406,"multi"),SORTED_MULTISIG:new r(407,"sortedmulti"),ADDRESS:new r(307,"addr"),RAW_SCRIPT:new r(408,"raw")}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[8038,{"../../../shared/constants/network":7060,"../../../shared/constants/swaps":7064,"../../../shared/constants/time":7065,"../../../shared/lib/fetch-with-cache":7069,"../../../shared/lib/swaps-utils":7072,"../../../shared/lib/transactions-controller-utils":7074,"../../../shared/modules/hexstring-utils":7081,"../../../shared/modules/swaps.utils":7089,"../../helpers/utils/confirm-tx.util":7656,"../../helpers/utils/conversions.util":7657,"bignumber.js":2326,"human-standard-token-abi":5282},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.countDecimals=void 0,n.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),n=await(0,d.default)(t,{method:"GET",headers:y},{cacheRefreshTime:m}),r={};for(const e in n)(0,p.validateData)(S,n[e],t)&&(r[e]=n[e]);return r},n.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,d.default)(`${e}/featureFlags`,{method:"GET",headers:y},{cacheRefreshTime:6e5})},n.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),n=await(0,d.default)(t,{method:"GET",headers:y},{cacheRefreshTime:3e4});if(!(0,p.validateData)(I,n,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:r,ProposeGasPrice:a,FastGasPrice:o}=n;return{safeLow:r,average:a,fast:o}},n.fetchToken=async function(e,t){const n=(0,p.getBaseApi)("token",t);return await(0,d.default)(`${n}?address=${e}`,{method:"GET",headers:y},{cacheRefreshTime:m})},n.fetchTokenBalance=async function(e,t){const n=global.eth.contract(a.default).at(e),r=n?n.balanceOf(t):Promise.resolve();return await r},n.fetchTokenPrice=async function(e){var t;const n=`contract_addresses=${e}&vs_currencies=eth`,r=await(0,d.default)(`https://api.coingecko.com/api/v3/simple/token_price/ethereum?${n}`,{method:"GET"},{cacheRefreshTime:6e4});return r&&(null===(t=r[e])||void 0===t?void 0:t.eth)},n.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),n=await(0,d.default)(t,{method:"GET",headers:y},{cacheRefreshTime:m});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e],...n.filter((n=>(0,p.validateData)(E,n,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(n.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(n.address,e))))]},n.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),n=await(0,d.default)(t,{method:"GET",headers:y},{cacheRefreshTime:m})||[];return n.reduce(((e,n,r)=>(0,p.validateData)(_,n,t)?{...e,[n.address]:{index:String(r)}}:e),{})},n.fetchTradesInfo=async function({slippage:e,sourceToken:t,sourceDecimals:n,destinationToken:r,value:a,fromAddress:o,exchangeList:s},{chainId:i}){const c={destinationToken:r,sourceToken:t,sourceAmount:(0,p.calcTokenValue)(a,n).toString(10),slippage:e,timeout:10*h.SECOND,walletAddress:o};s&&(c.exchangeList=s);w(i,t,r)&&(c.enableDirectWrapping=!0);const u=new URLSearchParams(c).toString(),l=`${(0,p.getBaseApi)("trade",i)}${u}`,g=await(0,d.default)(l,{method:"GET",headers:y},{cacheRefreshTime:0,timeout:15*h.SECOND});return g.reduce(((t,n)=>{if(n.trade&&!n.error&&(0,p.validateData)(p.QUOTE_VALIDATORS,n,l)){const r=(0,p.constructTxParams)({to:n.trade.to,from:n.trade.from,data:n.trade.data,amount:(0,f.decimalToHex)(n.trade.value),gas:(0,f.decimalToHex)(n.maxGas)});let{approvalNeeded:a}=n;return a&&(a=(0,p.constructTxParams)({...a})),{...t,[n.aggregator]:{...n,slippage:e,trade:r,approvalNeeded:a}}}return t}),{})},n.formatSwapsValueForDisplay=C,n.getNetworkNameByChainId=n.getFeeForSmartTransaction=void 0,n.getRenderableNetworkFeesForQuote=v,n.parseSmartTransactionsError=n.isContractAddressValid=n.getTranslatedStxErrorMessage=n.getSwapsLivenessForNetwork=void 0,n.quotesToRenderableData=function(e,t,n,a,o,i,c,u,d){return Object.values(e).map((e=>{const{destinationAmount:l=0,sourceAmount:p=0,sourceTokenInfo:h,destinationTokenInfo:g,slippage:m,aggType:T,aggregator:y,gasEstimateWithRefund:E,averageGas:_,fee:S,trade:A}=e,I=(0,f.calcTokenAmount)(p,h.decimals).toString(10),w=(0,f.calcTokenAmount)(l,g.decimals).toPrecision(8);let b=null,N=null,k=null,O=null;({feeInFiat:b,feeInEth:N,rawNetworkFees:k,rawEthFee:O}=v({tradeGas:E||(0,f.decimalToHex)(_||8e5),approveGas:o,gasPrice:t,currentCurrency:a,conversionRate:n,tradeValue:A.value,sourceSymbol:h.symbol,sourceAmount:p,chainId:c})),u&&({feeInFiat:b,feeInEth:N}=R({chainId:c,currentCurrency:a,conversionRate:n,nativeCurrencySymbol:d,estimatedFeeInWeiDec:u.feeEstimate}));const D=new r.default(100-m).div(100),P=new r.default(w).times(D).toFixed(6),M=i[g.address],B=(0,s.isSwapsDefaultTokenSymbol)(g.symbol,c)?(0,f.calcTokenAmount)(l,g.decimals).minus(O,10):new r.default(M||0,10).times((0,f.calcTokenAmount)(l,g.decimals),10).minus(O,10);let x,L=m;return"AGG"===T?x="swapAggregator":"RFQ"===T?(x="swapRequestForQuotation",L=0):x="DEX"===T?"swapDecentralizedExchange":"CONTRACT"===T?"swapDirectContract":"swapUnknown",{aggId:y,amountReceiving:`${w} ${g.symbol}`,destinationTokenDecimals:g.decimals,destinationTokenSymbol:g.symbol,destinationTokenValue:C(w),destinationIconUrl:g.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:x,feeInEth:N,detailedNetworkFees:`${N} (${b})`,networkFees:b,quoteSource:T,rawNetworkFees:k,slippage:L,sourceTokenDecimals:h.decimals,sourceTokenSymbol:h.symbol,sourceTokenValue:I,sourceTokenIconUrl:h.iconUrl,ethValueOfTrade:B,minimumAmountReceived:P,metaMaskFee:S}}))},n.stxErrorTypes=n.showRemainingTimeInMinAndSec=n.shouldEnableDirectWrapping=void 0;var r=g(e("bignumber.js")),a=g(e("human-standard-token-abi")),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),c=e("../../helpers/utils/conversions.util"),u=e("../../helpers/utils/confirm-tx.util"),d=g(e("../../../shared/lib/fetch-with-cache")),l=e("../../../shared/modules/hexstring-utils"),f=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),h=e("../../../shared/constants/time");function g(e){return e&&e.__esModule?e:{default:e}}const m=3e5,T="usd",y={"X-Client-Id":o.SWAPS_CLIENT_ID},E=[{property:"address",type:"string",validator:e=>(0,l.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],_=E.slice(0,2),S=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],A=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),I=[{property:"SafeGasPrice",type:"string",validator:A},{property:"ProposeGasPrice",type:"string",validator:A},{property:"FastGasPrice",type:"string",validator:A}],w=(e,t,n)=>{var r;if(!t||!n)return!1;const a=o.SWAPS_WRAPPED_TOKENS_ADDRESSES[e],s=null===(r=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===r?void 0:r.address,i=t.toLowerCase(),c=n.toLowerCase();return i===a&&c===s||i===s&&c===a};n.shouldEnableDirectWrapping=w;const R=({chainId:e,currentCurrency:t,conversionRate:n,USDConversionRate:r,nativeCurrencySymbol:a,feeInWeiDec:s})=>{const d=(0,f.decimalToHex)(s),l=(0,c.getValueFromWeiHex)({value:d,toDenomination:i.CURRENCY_SYMBOLS.ETH,numberOfDecimals:5}),p=(0,c.getValueFromWeiHex)({value:d,toCurrency:t,conversionRate:n,numberOfDecimals:2});let h;h=t===T?p:(0,c.getValueFromWeiHex)({value:d,toCurrency:T,conversionRate:r,numberOfDecimals:2});return{feeInUsd:h,feeInFiat:(0,u.formatCurrency)(p,t),feeInEth:`${l} ${a||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e].symbol}`,rawEthFee:l}};function v({tradeGas:e,approveGas:t,gasPrice:n,currentCurrency:a,conversionRate:i,USDConversionRate:d,tradeValue:l,sourceSymbol:p,sourceAmount:h,chainId:g,nativeCurrencySymbol:m}){const y=new r.default(e||"0x0",16).plus(t||"0x0",16).toString(16),E=(0,f.calcGasTotal)(y,n),_=new r.default(l,16).minus((0,s.isSwapsDefaultTokenSymbol)(p,g)?h:0,10).toString(16),S=new r.default(E,16).plus(_,16).toString(16),A=(0,c.getValueFromWeiHex)({value:S,toDenomination:"ETH",numberOfDecimals:5}),I=(0,c.getValueFromWeiHex)({value:S,toCurrency:a,conversionRate:i,numberOfDecimals:2}),w=(0,u.formatCurrency)(I,a);let R;R=a===T?I:(0,c.getValueFromWeiHex)({value:S,toCurrency:T,conversionRate:d,numberOfDecimals:2});return{rawNetworkFees:I,feeInUsd:R,rawEthFee:A,feeInFiat:w,feeInEth:`${A} ${m||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[g].symbol}`,nonGasFee:_}}function C(e){let t=(0,f.toPrecisionWithoutTrailingZeros)(e,12);return t.match(/e[+-]/u)&&(t=new r.default(t).toFixed()),t}n.getFeeForSmartTransaction=R;n.isContractAddressValid=(e,t=i.CHAIN_IDS.MAINNET)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const b=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;default:return""}};n.getNetworkNameByChainId=b;n.getSwapsLivenessForNetwork=(e={},t)=>{const n=b(t);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(t))return{swapsFeatureIsLive:!0};if(!e[n])return{swapsFeatureIsLive:!1};return e[n].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:e[n].fallbackToV1}};n.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};n.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};const N={UNAVAILABLE:"unavailable",NOT_ENOUGH_FUNDS:"not_enough_funds",REGULAR_TX_IN_PROGRESS:"regular_tx_pending"};n.stxErrorTypes=N;n.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case N.UNAVAILABLE:case N.REGULAR_TX_IN_PROGRESS:return t("stxErrorUnavailable");case N.NOT_ENOUGH_FUNDS:return t("stxErrorNotEnoughFunds");default:return t("stxErrorUnavailable")}};n.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$"}],[804,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UnknownURTypeError=void 0;class r extends Error{constructor(e){super(e)}}n.UnknownURTypeError=r}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[805,{"./Bytes":790,"./CryptoAccount":791,"./CryptoCoinInfo":792,"./CryptoECKey":793,"./CryptoHDKey":794,"./CryptoKeypath":795,"./CryptoOutput":796,"./CryptoPSBT":797,"./Decoder":798,"./MultiKey":799,"./PathComponent":800,"./RegistryItem":801,"./RegistryType":802,"./ScriptExpression":803,"./errors":804,"./lib":808,"./patchCBOR":809,"./types":810,"./utils":811,tslib:812},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.extend=n.PathComponent=n.ScriptExpressions=n.MultiKey=n.CryptoPSBT=n.CryptoOutput=n.CryptoECKey=n.CryptoCoinInfoNetwork=n.CryptoCoinInfoType=n.CryptoCoinInfo=n.CryptoKeypath=n.CryptoHDKey=n.CryptoAccount=n.Bytes=n.URRegistryDecoder=n.DataItem=void 0;const r=e("tslib");e("./patchCBOR");const a=e("./CryptoHDKey");Object.defineProperty(n,"CryptoHDKey",{enumerable:!0,get:function(){return a.CryptoHDKey}});const o=e("./CryptoKeypath");Object.defineProperty(n,"CryptoKeypath",{enumerable:!0,get:function(){return o.CryptoKeypath}});const s=e("./CryptoCoinInfo");Object.defineProperty(n,"CryptoCoinInfo",{enumerable:!0,get:function(){return s.CryptoCoinInfo}}),Object.defineProperty(n,"CryptoCoinInfoType",{enumerable:!0,get:function(){return s.Type}}),Object.defineProperty(n,"CryptoCoinInfoNetwork",{enumerable:!0,get:function(){return s.Network}});const i=e("./CryptoECKey");Object.defineProperty(n,"CryptoECKey",{enumerable:!0,get:function(){return i.CryptoECKey}});const c=e("./Bytes");Object.defineProperty(n,"Bytes",{enumerable:!0,get:function(){return c.Bytes}});const u=e("./CryptoOutput");Object.defineProperty(n,"CryptoOutput",{enumerable:!0,get:function(){return u.CryptoOutput}});const d=e("./CryptoPSBT");Object.defineProperty(n,"CryptoPSBT",{enumerable:!0,get:function(){return d.CryptoPSBT}});const l=e("./CryptoAccount");Object.defineProperty(n,"CryptoAccount",{enumerable:!0,get:function(){return l.CryptoAccount}});const f=e("./Decoder");Object.defineProperty(n,"URRegistryDecoder",{enumerable:!0,get:function(){return f.URRegistryDecoder}});const p=e("./MultiKey");Object.defineProperty(n,"MultiKey",{enumerable:!0,get:function(){return p.MultiKey}});const h=e("./ScriptExpression");Object.defineProperty(n,"ScriptExpressions",{enumerable:!0,get:function(){return h.ScriptExpressions}});const g=e("./PathComponent");Object.defineProperty(n,"PathComponent",{enumerable:!0,get:function(){return g.PathComponent}});const m=e("./RegistryItem"),T=e("./RegistryType"),y=e("./lib");var E=e("./lib");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return E.DataItem}});const _=e("./utils"),S={URRegistryDecoder:f.URRegistryDecoder,Bytes:c.Bytes,CryptoAccount:l.CryptoAccount,CryptoHDKey:a.CryptoHDKey,CryptoKeypath:o.CryptoKeypath,CryptoCoinInfo:s.CryptoCoinInfo,CryptoCoinInfoType:s.Type,CryptoCoinInfoNetwork:s.Network,CryptoECKey:i.CryptoECKey,CryptoOutput:u.CryptoOutput,CryptoPSBT:d.CryptoPSBT,MultiKey:p.MultiKey,ScriptExpressions:h.ScriptExpressions,PathComponent:g.PathComponent},A={addReader:y.addReader,addSemanticDecode:y.addSemanticDecode,addSemanticEncode:y.addSemanticEncode,addWriter:y.addWriter,patchTags:_.patchTags},I={RegistryTypes:T.RegistryTypes,RegistryItem:m.RegistryItem,RegistryType:T.RegistryType,decodeToDataItem:y.decodeToDataItem,encodeDataItem:y.encodeDataItem,cbor:A};n.extend=I,(0,r.__exportStar)(e("./errors"),n),(0,r.__exportStar)(e("./Decoder"),n),(0,r.__exportStar)(e("./lib"),n),(0,r.__exportStar)(e("./CryptoAccount"),n),(0,r.__exportStar)(e("./CryptoPSBT"),n),(0,r.__exportStar)(e("./CryptoHDKey"),n),(0,r.__exportStar)(e("./CryptoOutput"),n),(0,r.__exportStar)(e("./CryptoCoinInfo"),n),(0,r.__exportStar)(e("./CryptoECKey"),n),(0,r.__exportStar)(e("./MultiKey"),n),(0,r.__exportStar)(e("./CryptoKeypath"),n),(0,r.__exportStar)(e("./patchCBOR"),n),(0,r.__exportStar)(e("./PathComponent"),n),(0,r.__exportStar)(e("./RegistryItem"),n),(0,r.__exportStar)(e("./RegistryType"),n),(0,r.__exportStar)(e("./types"),n),(0,r.__exportStar)(e("./utils"),n),n.default=S}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[8050,{".":8053,"../../shared/constants/gas":7056,"../../shared/constants/transaction":7067,"../../shared/lib/transactions-controller-utils":7074,"../../shared/modules/gas.utils":7080,"../../shared/modules/string-utils":7088,"../../shared/modules/transaction.utils":7090,"../ducks/metamask/metamask":7628,"../helpers/utils/confirm-tx.util":7656,"../helpers/utils/conversions.util":7657,"../helpers/utils/transactions.util":7672,"../helpers/utils/tx-helper":7673,"./custom-gas":8051,"./selectors":8056,reselect:6605},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unconfirmedTransactionsListSelector=n.unconfirmedTransactionsHashSelector=n.unconfirmedTransactionsCountSelector=n.unconfirmedMessagesHashSelector=n.txDataSelector=n.transactionFeeSelector=n.tokenAddressSelector=n.sendTokenTokenAmountAndToAddressSelector=n.currentCurrencySelector=n.conversionRateSelector=n.contractExchangeRateSelector=void 0;var r,a=e("reselect"),o=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},s=e("../helpers/utils/confirm-tx.util"),i=e("../helpers/utils/transactions.util"),c=e("../../shared/modules/transaction.utils"),u=e("../ducks/metamask/metamask"),d=e("../../shared/constants/transaction"),l=e("../helpers/utils/conversions.util"),f=e("../../shared/constants/gas"),p=e("../../shared/modules/gas.utils"),h=e("../../shared/modules/string-utils"),g=e("../../shared/lib/transactions-controller-utils"),m=e("./custom-gas"),T=e("./selectors"),y=e(".");const E=e=>e.metamask.unapprovedTxs,_=e=>e.metamask.unapprovedMsgs,S=e=>e.metamask.unapprovedPersonalMsgs,A=e=>e.metamask.unapprovedDecryptMsgs,I=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,w=e=>e.metamask.unapprovedTypedMessages,R=(0,a.createSelector)(E,_,S,A,I,w,T.deprecatedGetCurrentNetworkId,T.getCurrentChainId,((e={},t={},n={},r={},a={},s={},i,c)=>(0,o.default)(e,t,n,r,a,s,i,c)||[]));n.unconfirmedTransactionsListSelector=R;const v=(0,a.createSelector)(E,_,S,A,I,w,T.deprecatedGetCurrentNetworkId,T.getCurrentChainId,((e={},t={},n={},r={},a={},o={},s,i)=>({...Object.keys(e).reduce(((t,n)=>{const r={...t};return(0,c.transactionMatchesNetwork)(e[n],i,s)&&(r[n]=e[n]),r}),{}),...t,...n,...r,...a,...o})));n.unconfirmedTransactionsHashSelector=v;const C=(0,a.createSelector)(_,S,A,I,w,((e={},t={},n={},r={},a={})=>({...e,...t,...n,...r,...a})));n.unconfirmedMessagesHashSelector=C;const b=(0,a.createSelector)(E,(e=>e.metamask.unapprovedMsgCount),(e=>e.metamask.unapprovedPersonalMsgCount),(e=>e.metamask.unapprovedDecryptMsgCount),(e=>e.metamask.unapprovedEncryptionPublicKeyMsgCount),(e=>e.metamask.unapprovedTypedMessagesCount),T.deprecatedGetCurrentNetworkId,T.getCurrentChainId,((e={},t=0,n=0,r=0,a=0,o=0,s,i)=>Object.keys(e).filter((t=>(0,c.transactionMatchesNetwork)(e[t],i,s))).length+o+t+n+r+a));n.unconfirmedTransactionsCountSelector=b;const N=e=>e.metamask.currentCurrency;n.currentCurrencySelector=N;const k=e=>e.metamask.conversionRate;n.conversionRateSelector=k;const O=e=>e.confirmTransaction.txData;n.txDataSelector=O;const D=(0,a.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),P=(0,a.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),M=(0,a.createSelector)(O,(e=>e&&e.txParams||{})),B=(0,a.createSelector)(M,(e=>e&&e.to));n.tokenAddressSelector=B;const x=(0,a.createSelector)(P,D,((e,t)=>{let n="",r="0";if(e&&e.length){n=e._to;let a=e._value.toString();t&&(a=(0,g.calcTokenAmount)(a,t).toFixed()),r=(0,s.roundExponential)(a)}return{toAddress:n,tokenAmount:r}}));n.sendTokenTokenAmountAndToAddressSelector=x;const L=(0,a.createSelector)((e=>e.metamask.contractExchangeRates),B,((e,t)=>e[Object.keys(e).find((e=>(0,h.isEqualCaseInsensitive)(e,t)))]));n.contractExchangeRateSelector=L;n.transactionFeeSelector=function(e,t){var n,r,a,o,c,h,g,T;const E=N(e),_=k(e),S=(0,u.getNativeCurrency)(e),A=(0,u.getGasFeeEstimates)(e)||{},I=(0,u.getGasEstimateType)(e),w=(0,y.checkNetworkAndAccountSupports1559)(e),R={gasLimit:null!==(n=null===(r=t.txParams)||void 0===r?void 0:r.gas)&&void 0!==n?n:"0x0"};if(w){var v;const{gasPrice:e="0"}=A,n=A[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===d.TRANSACTION_ENVELOPE_TYPES.LEGACY){var C,b;R.gasPrice=null!==(C=null===(b=t.txParams)||void 0===b?void 0:b.gasPrice)&&void 0!==C?C:(0,l.decGWEIToHexWEI)(e)}else{var O,D,P,M;const{suggestedMaxPriorityFeePerGas:r,suggestedMaxFeePerGas:a}=n;R.maxFeePerGas=null===(O=t.txParams)||void 0===O||!O.maxFeePerGas||t.userFeeLevel!==f.CUSTOM_GAS_ESTIMATE&&a?(0,l.decGWEIToHexWEI)(a||e):null===(D=t.txParams)||void 0===D?void 0:D.maxFeePerGas,R.maxPriorityFeePerGas=null===(P=t.txParams)||void 0===P||!P.maxPriorityFeePerGas||t.userFeeLevel!==f.CUSTOM_GAS_ESTIMATE&&r?r&&(0,l.decGWEIToHexWEI)(r)||R.maxFeePerGas:null===(M=t.txParams)||void 0===M?void 0:M.maxPriorityFeePerGas,R.baseFeePerGas=(0,l.decGWEIToHexWEI)(A.estimatedBaseFee)}}else switch(I){case f.GAS_ESTIMATE_TYPES.NONE:R.gasPrice=null!==(a=null===(o=t.txParams)||void 0===o?void 0:o.gasPrice)&&void 0!==a?a:"0x0";break;case f.GAS_ESTIMATE_TYPES.ETH_GASPRICE:R.gasPrice=null!==(c=null===(h=t.txParams)||void 0===h?void 0:h.gasPrice)&&void 0!==c?c:(0,l.decGWEIToHexWEI)(A.gasPrice);break;case f.GAS_ESTIMATE_TYPES.LEGACY:R.gasPrice=null!==(g=null===(T=t.txParams)||void 0===T?void 0:T.gasPrice)&&void 0!==g?g:(0,m.getAveragePriceEstimateInHexWEI)(e);case f.GAS_ESTIMATE_TYPES.FEE_MARKET:}const{txParams:{value:B="0x0"}={}}=t,x=(0,s.getValueFromWeiHex)({value:B,fromCurrency:S,toCurrency:E,conversionRate:_,numberOfDecimals:2}),L=(0,s.getValueFromWeiHex)({value:B,fromCurrency:S,toCurrency:S,conversionRate:_,numberOfDecimals:6}),U=(0,p.getMinimumGasTotalInHexWei)(R),F=(0,p.getMaximumGasTotalInHexWei)(R),H=(0,s.getTransactionFee)({value:U,fromCurrency:S,toCurrency:E,numberOfDecimals:2,conversionRate:_}),G=(0,s.getTransactionFee)({value:F,fromCurrency:S,toCurrency:E,numberOfDecimals:2,conversionRate:_}),q=(0,s.getTransactionFee)({value:U,fromCurrency:S,toCurrency:S,numberOfDecimals:6,conversionRate:_});return{hexTransactionAmount:B,fiatTransactionAmount:x,ethTransactionAmount:L,hexMinimumTransactionFee:U,fiatMinimumTransactionFee:H,hexMaximumTransactionFee:F,fiatMaximumTransactionFee:G,ethTransactionFee:q,fiatTransactionTotal:(0,s.addFiat)(H,x),ethTransactionTotal:(0,s.addEth)(q,L),hexTransactionTotal:(0,i.sumHexes)(B,U),gasEstimationObject:R}}}}},{package:"$root$"}],[8051,{".":8053,"../../app/scripts/lib/util":90,"../../shared/constants/gas":7056,"../../shared/lib/transactions-controller-utils":7074,"../../shared/modules/conversion.utils":7078,"../ducks/metamask/metamask":7628,"../ducks/send":7630,"../helpers/utils/confirm-tx.util":7656,"../helpers/utils/conversions.util":7657,"../helpers/utils/formatters":7659},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.basicPriceEstimateToETHTotal=T,n.getAverageEstimate=g,n.getAveragePriceEstimateInHexWEI=function(e){return E(g(e))},n.getBasicGasEstimateLoadingStatus=function(e){return!1===_(e)},n.getCustomGasLimit=function(e){return e.gas.customData.limit},n.getCustomGasPrice=p,n.getDefaultActiveButtonIndex=function(e,t,n){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,r.addHexPrefix)(t||n))},n.getFastPriceEstimate=m,n.getFastPriceEstimateInHexWEI=function(e){return E(m(e)||"0x0")},n.getGasPriceInHexWei=E,n.getIsCustomNetworkGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&!(0,f.getIsMainnet)(e)},n.getIsEthGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.ETH_GASPRICE&&(0,f.getIsMainnet)(e)},n.getIsGasEstimatesFetched=_,n.getNoGasPriceFetched=function(e){return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.NONE},n.getRenderableConvertedCurrencyFee=function(e,t,n,r){const i=T((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t),c=(0,s.decEthToConvertedCurrency)(i,n,r);return(0,o.formatCurrency)(c,n)},n.getRenderableEthFee=function(e,t,n=9,r="ETH"){const o=T((0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"}),t,n);return(0,i.formatETHFee)(o,r)},n.getSafeLowEstimate=h,n.isCustomPriceExcessive=function(e,t=!1){const n=t?(0,c.getGasPrice)(e):p(e),r=m(e);if(!n||!r)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{fromNumericBase:"dec",value:Math.floor(1.5*r)})},n.isCustomPriceSafe=function(e){const t=h(e),n=p(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.isCustomPriceSafeForCustomNetwork=function(e){const t=g(e),n=p(e);if(!n)return!0;if(!t)return!1;return(0,a.conversionGreaterThan)({value:n,fromNumericBase:"hex",fromDenomination:"WEI",toDenomination:"GWEI"},{value:t,fromNumericBase:"dec"})},n.priceEstimateToWei=y;var r=e("../../app/scripts/lib/util"),a=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/conversions.util"),i=e("../helpers/utils/formatters"),c=e("../ducks/send"),u=e("../../shared/constants/gas"),d=e("../ducks/metamask/metamask"),l=e("../../shared/lib/transactions-controller-utils"),f=e(".");function p(e){return e.gas.customData.price}function h(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.low:null}function g(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.medium:null}function m(e){const t=(0,d.getGasFeeEstimates)(e);return(0,d.getGasEstimateType)(e)===u.GAS_ESTIMATE_TYPES.LEGACY?null==t?void 0:t.high:null}function T(e,t,n=9){return(0,a.conversionUtil)((0,l.calcGasTotal)(t,e),{fromNumericBase:"hex",toNumericBase:"dec",fromDenomination:"GWEI",numberOfDecimals:n})}function y(e){return(0,a.conversionUtil)(e,{fromNumericBase:"hex",toNumericBase:"hex",fromDenomination:"GWEI",toDenomination:"WEI",numberOfDecimals:9})}function E(e){const t=(0,a.conversionUtil)(e,{fromNumericBase:"dec",toNumericBase:"hex"});return(0,r.addHexPrefix)(y(t))}function _(e){const t=(0,d.getGasEstimateType)(e);return!(0,d.isEIP1559Network)(e)&&t!==u.GAS_ESTIMATE_TYPES.NONE}}}},{package:"$root$"}],[8052,{"../helpers/constants/routes":7641},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getFirstTimeFlowType=void 0,n.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let n;n="create"===t?r.INITIALIZE_CREATE_PASSWORD_ROUTE:"import"===t?r.INITIALIZE_IMPORT_WITH_SEED_PHRASE_ROUTE:r.DEFAULT_ROUTE;return n},n.getOnboardingInitiator=void 0;var r=e("../helpers/constants/routes");n.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;n.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const n=Object.keys(t)[0];return{location:n,tabId:t[n]}}}}},{package:"$root$"}],[8053,{"./confirm-transaction":8050,"./custom-gas":8051,"./first-time-flow":8052,"./metametrics":8054,"./permissions":8055,"./selectors":8056,"./transactions":8057},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===r[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=e("./custom-gas");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===a[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=e("./first-time-flow");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===o[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./metametrics");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===s[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./permissions");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===i[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return i[e]}}))}));var c=e("./selectors");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===c[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return c[e]}}))}));var u=e("./transactions");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in n&&n[e]===u[e]||Object.defineProperty(n,e,{enumerable:!0,get:function(){return u[e]}}))}))}}},{package:"$root$"}],[8054,{reselect:6605},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.selectMatchingFragment=n.selectFragments=n.selectFragmentBySuccessEvent=n.selectFragmentById=void 0;var r=e("reselect");const a=e=>e.metamask.fragments;n.selectFragments=a;const o=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined));n.selectFragmentBySuccessEvent=o;const s=(0,r.createSelector)(a,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));n.selectFragmentById=s;const i=(0,r.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>null!=t?t:e));n.selectMatchingFragment=i}}},{package:"$root$"}],[8055,{".":8053,"../../shared/constants/permissions":7061},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.activeTabHasPermissions=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Boolean(Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},n.getAccountToConnectToActiveTab=function(e){const t=(0,a.getSelectedAddress)(e),n=i(e),{metamask:{identities:r}}=e,o=Object.keys(r).length;if(n.length&&n.length!==o&&-1===n.findIndex((e=>e===t)))return r[t];return undefined},n.getAddressConnectedSubjectMap=function(e){const t=(0,a.getSubjectMetadata)(e),n=c(e),r={};return Object.keys(n).forEach((e=>{const{iconUrl:a,name:o}=t[e]||{};n[e].forEach((t=>{const n=o||e;r[t]=r[t]?{...r[t],[e]:{iconUrl:a,name:n}}:{[e]:{iconUrl:a,name:n}}}))})),r},n.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,n=o(e),r=(0,a.getSubjectMetadata)(e),s=[];return Object.entries(n).forEach((([e,n])=>{if(!u(n).includes(t))return;const{extensionId:a,name:o,iconUrl:i}=r[e]||{};s.push({extensionId:a,origin:e,name:o,iconUrl:i})})),s},n.getFirstMultiChainAccountsRequest=function(e){var t,n;return null!==(t=null===(n=p(e))||void 0===n?void 0:n[0])&&void 0!==t?t:null},n.getFirstPermissionRequest=function(e){const t=h(e);return t&&t[0]?t[0]:null},n.getFirstSnapInstallOrUpdateRequest=function(e){var t,n;return null!==(t=null===(n=f(e))||void 0===n?void 0:n[0])&&void 0!==t?t:null},n.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,n)=>(t[n].eth_accounts&&(e[n]=JSON.parse(JSON.stringify(t[n].eth_accounts))),e)),{})},n.getMultichainAccountsRequests=p,n.getOrderedConnectedAccountsForActiveTab=function(e){var t,n;const{activeTab:r,metamask:{permissionHistory:o}}=e,s=null===(t=o[r.origin])||void 0===t||null===(n=t.eth_accounts)||void 0===n?void 0:n.accounts,c=(0,a.getMetaMaskAccountsOrdered)(e),u=i(e);return c.filter((e=>u.includes(e.address))).map((e=>({...e,lastActive:null==s?void 0:s[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},n.getPermissionSubjects=o,n.getPermissions=function(e,t){return o(e)[t].permissions},n.getPermissionsForActiveTab=function(e){var t;const{activeTab:n,metamask:r}=e,{subjects:a={}}=r;return Object.keys((null===(t=a[n.origin])||void 0===t?void 0:t.permissions)||{}).map((e=>({key:e})))},n.getPermissionsRequests=h,n.getPermittedAccounts=s,n.getPermittedAccountsByOrigin=c,n.getPermittedAccountsForCurrentTab=i,n.getSnapInstallOrUpdateRequests=f,n.getSubjectsWithPermission=function(e,t){const n=o(e),r=[];return Object.entries(n).forEach((([n,{permissions:o}])=>{if(o[t]){const{extensionId:t,name:o,iconUrl:s}=(0,a.getTargetSubjectMetadata)(e,n)||{};r.push({extensionId:t,origin:n,name:o,iconUrl:s})}})),r};var r=e("../../shared/constants/permissions"),a=e(".");function o(e){return e.metamask.subjects||{}}function s(e,t){return l(d(function(e,t){var n;return t&&(null===(n=e.metamask.subjects)||void 0===n?void 0:n[t])}(e,t)))}function i(e){return s(e,(0,a.getOriginOfCurrentTab)(e))}function c(e){const t=o(e);return Object.keys(t).reduce(((e,n)=>{const r=u(t[n]);return r.length>0&&(e[n]=r),e}),{})}function u(e){return l(d(e))}function d(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function l(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===r.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function f(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e)).map((({requestData:e})=>e))}function p(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"multichain_connect"===e)).map((({requestData:e,id:t,origin:n})=>({...e,metadata:{id:t,origin:n}})))}function h(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_requestPermissions"===e)).map((({requestData:e})=>e))}}}},{package:"$root$"}],[8056,{"../../app/scripts/lib/util":90,"../../shared/constants/app":7055,"../../shared/constants/hardware-wallets":7057,"../../shared/constants/labels":7058,"../../shared/constants/network":7060,"../../shared/constants/swaps":7064,"../../shared/constants/time":7065,"../../shared/constants/tokens":7066,"../../shared/lib/metamask-controller-utils":7070,"../../shared/modules/hexstring-utils":7081,"../../shared/modules/string-utils":7088,"../ducks/app/app":7620,"../ducks/metamask/metamask":7628,"../helpers/constants/routes":7641,"../helpers/utils/conversions.util":7657,"../helpers/utils/moonpay":7666,"../helpers/utils/util":7674,"../pages/confirmation/templates":7771,"./permissions":8055,lodash:6046,reselect:6605},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountsWithSendEtherInfoSelector=j,n.checkNetworkAndAccountSupports1559=function(e){const t=(0,T.isEIP1559Network)(e);return t&&true},n.checkNetworkOrAccountNotSupports1559=function(e){const t=(0,T.isNotEIP1559Network)(e);return t||!1},n.deprecatedGetCurrentNetworkId=b,n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,T.isAddressLedger)(e,t),r=(0,T.getLedgerTransportType)(e)===i.LEDGER_TRANSPORT_TYPES.WEBHID,a=(0,y.getLedgerWebHidConnectedStatus)(e)!==i.WEBHID_CONNECTED_STATUSES.CONNECTED,o=(0,y.getLedgerTransportStatus)(e)!==i.TRANSPORT_STATES.VERIFIED;return n&&r&&(a||o)},n.getAccountType=function(e){const t=R(e);switch(t&&t.type){case i.KEYRING_TYPES.TREZOR:case i.KEYRING_TYPES.LEDGER:case i.KEYRING_TYPES.LATTICE:return"hardware";case"Simple Key Pair":return"imported";default:return"default"}},n.getAccountsWithLabels=function(e){return L(e).map((({address:e,name:t,balance:n})=>({address:e,addressLabel:`${t.length<u.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,u.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,l.shortenAddress)(e)})`,label:t,balance:n})))},n.getAddressBook=G,n.getAddressBookEntry=q,n.getAddressBookEntryOrAccountName=function(e,t){const n=q(e,t)||Object.values(e.metamask.identities).find((e=>(0,E.isEqualCaseInsensitive)(e.address,(0,g.toChecksumHexAddress)(t))));return n&&""!==n.name?n.name:t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){var t;const n=null!==(t=x(e))&&void 0!==t?t:{},r=Object.values(n).every((e=>"0x0"===e||"0x00"===e)),a=0===D(e);return r&&a},n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=ce(e),r=J(e);let a={firstPart:"addBlockExplorer",secondPart:""};r.blockExplorerUrl?a=t?{firstPart:"blockExplorerView",secondPart:(0,l.getURLHostName)(r.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(a=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return a},n.getCurrentAccountWithSendEtherInfo=W,n.getCurrentChainId=w,n.getCurrentCurrency=function(e){return e.metamask.currentCurrency},n.getCurrentEthBalance=K,n.getCurrentKeyring=R,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},n.getDetectedTokensInCurrentNetwork=function(e){return e.metamask.detectedTokens},n.getEIP1559V2Enabled=function(e){return e.metamask.eip1559V2Enabled},n.getEnsResolutionByAddress=function(e,t){return e.metamask.ensResolutionsByAddress[t]||""},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFrequentRpcListDetail=function(e){return e.metamask.frequentRpcListDetail},n.getGasIsLoading=function(e){return e.appState.gasIsLoading},n.getHardwareWalletType=function(e){const t=R(e);return C(e)?t.type:undefined},n.getInfuraBlocked=function(e){return Boolean(e.metamask.infuraBlocked)},n.getInsightSnaps=function(e){const t=Object.values(e.metamask.snaps),n=(0,I.getPermissionSubjects)(e);return t.filter((({id:e})=>{var t;return null===(t=n[e])||void 0===t?void 0:t.permissions["endowment:transaction-insight"]}))},n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAdvancedGasFeeDefault=function(e){const{advancedGasFee:t}=e.metamask;return Boolean(null==t?void 0:t.maxBaseFee)&&Boolean(null==t?void 0:t.priorityFee)},n.getIsBuyableChain=function(e){const t=w(e);return Object.keys(s.BUYABLE_CHAINS_MAP).includes(t)},n.getIsBuyableCoinbasePayChain=function(e){var t;const n=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(t=s.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.coinbasePayCurrencies)},n.getIsBuyableCoinbasePayToken=function(e,t){var n,r;const a=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(n=s.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.coinbasePayCurrencies)||void 0===r?void 0:r.includes(t))},n.getIsBuyableMoonPayChain=function(e){var t;const n=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(t=s.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.moonPay)},n.getIsBuyableMoonpayToken=function(e,t){var n,r,a;const o=w(e),i=(0,S.formatMoonpaySymbol)(t,o);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(n=s.BUYABLE_CHAINS_MAP[o])||void 0===n||null===(r=n.moonPay)||void 0===r||null===(a=r.showOnlyCurrencies)||void 0===a?void 0:a.includes(i))},n.getIsBuyableTransakChain=function(e){var t;const n=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(t=s.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.transakCurrencies)},n.getIsBuyableTransakToken=function(e,t){var n,r;const a=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(n=s.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.transakCurrencies)||void 0===r?void 0:r.includes(t))},n.getIsBuyableWyreChain=function(e){var t;const n=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(t=s.BUYABLE_CHAINS_MAP[n])||void 0===t?void 0:t.wyre)},n.getIsBuyableWyreToken=function(e,t){var n,r;const a=w(e);return Boolean(null===s.BUYABLE_CHAINS_MAP||void 0===s.BUYABLE_CHAINS_MAP||null===(n=s.BUYABLE_CHAINS_MAP[a])||void 0===n||null===(r=n.wyre)||void 0===r?void 0:r.currencies.includes(t))},n.getIsCustomNetwork=ce,n.getIsCustomNetworkListEnabled=function(e){return e.metamask.customNetworkListEnabled},n.getIsDynamicTokenListAvailable=se,n.getIsMainnet=$,n.getIsMultiLayerFeeNetwork=function(e){return oe(e)},n.getIsNetworkUsed=function(e){const t=w(e),{usedNetworks:n}=e.metamask;return Boolean(n[t])},n.getIsNonStandardEthChain=function(e){return!($(e)||V(e))},n.getIsOptimism=oe,n.getIsSwapsChain=function(e){const t=w(e);return d.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},n.getIsTestnet=V,n.getIsTokenDetectionInactiveOnMainnet=ie,n.getIsTokenDetectionSupported=function(e){const t=ae(e),n=se(e);return t&&n},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=ae(e),n=$(e);return se(e)&&!t&&!n},n.getKnownMethodData=function(e,t){if(!t)return null;const n=(0,o.addHexPrefix)(t).slice(0,10),{knownMethodData:r}=e.metamask;return r&&r[n]},n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskAccountsRaw=B,n.getMetaMaskCachedBalances=x,n.getMetaMaskIdentities=M,n.getMetaMaskKeyrings=P,n.getMetricsNetworkIdentifier=function(e){const{provider:t}=e.metamask;return t.type===s.NETWORK_TYPES.RPC?t.rpcUrl:t.type},n.getNativeCurrencyImage=function(e){var t;const n=null===(t=(0,T.getNativeCurrency)(e))||void 0===t?void 0:t.toUpperCase();return s.NATIVE_CURRENCY_TOKEN_IMAGE_MAP[n]},n.getNetworkIdentifier=function(e){const{metamask:{provider:{type:t,nickname:n,rpcUrl:r}}}=e;return n||r||t},n.getNetworkSupportsSettingGasFees=function(e){return!oe(e)},n.getNetworksTabSelectedRpcUrl=function(e){return e.appState.networksTabSelectedRpcUrl},n.getNewCollectibleAddedMessage=function(e){return e.appState.newCollectibleAddedMessage},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAdded},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},n.getNotifications=te,n.getNumberOfAccounts=function(e){return Object.keys(e.metamask.accounts).length},n.getNumberOfTokens=D,n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOriginOfCurrentTab=function(e){return e.activeTab.origin},n.getParticipateInMetaMetrics=function(e){return Boolean(e.metamask.participateInMetaMetrics)},n.getPreferences=Q,n.getProvider=function(e){return e.metamask.provider},n.getRpcPrefsForCurrentProvider=J,n.getSelectedAccount=H,n.getSelectedAccountCachedBalance=F,n.getSelectedAddress=k,n.getSelectedIdentity=O,n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=Q(e);return t},n.getShouldShowFiat=function(e){const t=$(e),n=(0,T.getConversionRate)(e),{showFiatInTestnets:r}=Q(e);return Boolean((t||r)&&n)},n.getShouldShowSeedPhraseReminder=function(e){var t;const{tokens:n,seedPhraseBackedUp:r,dismissSeedBackUpReminder:a}=e.metamask,o=null!==(t=K(e))&&void 0!==t?t:0;return!1===r&&(parseInt(o,16)>0||n.length>0)&&!1===a},n.getShowPortfolioTooltip=function(e){return e.metamask.showPortfolioTooltip},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,r=(new Date).getTime(),a=n?90*m.DAY:2*m.DAY;return r-t>=a},n.getShowTestNetworks=function(e){const{showTestNetworks:t}=Q(e);return Boolean(t)},n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSnaps=Z,n.getSnapsRouteObjects=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=R(e),n=(null==t?void 0:t.type)===i.KEYRING_TYPES.LEDGER,r=window.navigator.hid!==undefined,a=(0,T.getLedgerTransportType)(e)===i.LEDGER_TRANSPORT_TYPES.LIVE,{threeBoxSyncingAllowed:o}=e.metamask;return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:r&&n&&a,9:!1,10:!0,11:!0,12:!1,13:!0,14:o,15:!0}}(e),r=t.filter((e=>!e.isShown&&n[e.id]));return r.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSubjectMetadata=z,n.getSuggestedAssets=function(e){return e.metamask.suggestedAssets},n.getSwapsDefaultToken=function(e){const t=H(e),{balance:n}=t,r=w(e);return{...d.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[r],balance:(0,_.hexToDecimal)(n),string:(0,f.getValueFromWeiHex)({value:n,numberOfDecimals:4,toDenomination:"ETH"})}},n.getTargetAccount=function(e,t){return N(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=j(e);return(0,l.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=function(e,t){const n=z(e)[t];if((null==n?void 0:n.subjectType)===c.SUBJECT_TYPES.SNAP){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?X(e):null}}return n},n.getTheme=function(e){return e.metamask.theme},n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokenList=function(e){const t=ie(e);return t?h.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList},n.getTotalUnapprovedCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:o=0,pendingApprovalCount:s=0}=e.metamask;return t+n+r+a+o+function(e){const{unapprovedTxs:t={}}=e.metamask;return Object.keys(t).length}(e)+s+function(e){const{suggestedAssets:t=[]}=e.metamask;return t.length}(e)},n.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:n=0,unapprovedDecryptMsgCount:r=0,unapprovedEncryptionPublicKeyMsgCount:a=0,unapprovedTypedMessagesCount:o=0}=e.metamask;return t+n+r+a+o},n.getUSDConversionRate=function(e){return e.metamask.usdConversionRate},n.getUnapprovedConfirmations=Y,n.getUnapprovedTemplatedConfirmations=function(e){return Y(e).filter((e=>p.TEMPLATED_CONFIRMATION_MESSAGE_TYPES.includes(e.type)))},n.getUnreadNotifications=ne,n.getUnreadNotificationsCount=void 0,n.getUseCollectibleDetection=function(e){return Boolean(e.metamask.useCollectibleDetection)},n.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},n.getUseTokenDetection=ae,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.hasUnsignedQRHardwareMessage=function(e){const{type:t,msgParams:n}=e.confirmTransaction.txData;if(!t||!n)return!1;const{from:r}=n,{keyrings:a}=e.metamask,o=a.find((e=>e.type===i.KEYRING_TYPES.QR));if(!o)return!1;switch(t){case c.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:case c.MESSAGE_TYPE.ETH_SIGN:case c.MESSAGE_TYPE.PERSONAL_SIGN:return Boolean(o.accounts.find((e=>e.toLowerCase()===r.toLowerCase())));default:return!1}},n.hasUnsignedQRHardwareTransaction=function(e){const{txParams:t}=e.confirmTransaction.txData;if(!t)return!1;const{from:n}=t,{keyrings:r}=e.metamask,a=r.find((e=>e.type===i.KEYRING_TYPES.QR));if(!a)return!1;return Boolean(a.accounts.find((e=>e.toLowerCase()===n.toLowerCase())))},n.isBalanceCached=function(e){const t=e.metamask.accounts[k(e)].balance,n=F(e);return Boolean(!t&&n)},n.isEIP1559Account=v,n.isHardwareWallet=C,n.isNetworkLoading=function(e){return"loading"===e.metamask.network};var r=e("reselect"),a=e("lodash"),o=e("../../app/scripts/lib/util"),s=e("../../shared/constants/network"),i=e("../../shared/constants/hardware-wallets"),c=e("../../shared/constants/app"),u=e("../../shared/constants/labels"),d=e("../../shared/constants/swaps"),l=e("../helpers/utils/util"),f=e("../helpers/utils/conversions.util"),p=e("../pages/confirmation/templates"),h=e("../../shared/constants/tokens"),g=e("../../shared/modules/hexstring-utils"),m=e("../../shared/constants/time"),T=e("../ducks/metamask/metamask"),y=e("../ducks/app/app"),E=e("../../shared/modules/string-utils"),_=e("../../shared/lib/metamask-controller-utils"),S=e("../helpers/utils/moonpay"),A=e("../helpers/constants/routes"),I=e("./permissions");function w(e){const{chainId:t}=e.metamask.provider;return t}function R(e){const t=O(e);if(!t)return null;return(0,T.findKeyringForAddress)(e,t.address)}function v(){return!0}function C(e){var t;const n=R(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function b(e){return e.metamask.network}const N=(0,r.createSelector)(B,x,((e,t)=>Object.entries(e).reduce(((e,[n,r])=>null===r.balance||r.balance===undefined?{...e,[n]:{...r,balance:t&&t[n]}}:{...e,[n]:r}),{})));function k(e){return e.metamask.selectedAddress}function O(e){const t=k(e),{identities:n}=e.metamask;return n[t]}function D(e){const{tokens:t}=e.metamask;return t?t.length:0}function P(e){return e.metamask.keyrings}function M(e){return e.metamask.identities}function B(e){return e.metamask.accounts}function x(e){var t;const n=w(e),r=b(e);return null!==(t=e.metamask.cachedBalances[n])&&void 0!==t?t:e.metamask.cachedBalances[r]}n.getMetaMaskAccounts=N;const L=(0,r.createSelector)(P,M,N,((e,t,n)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>({...t[e],...n[e]})))));n.getMetaMaskAccountsOrdered=L;const U=(0,r.createSelector)(L,(e=>e.map((({address:e})=>e.toLowerCase()))));function F(e){const t=x(e),n=k(e);return t&&t[n]}function H(e){return N(e)[k(e)]}n.getMetaMaskAccountsConnected=U;function G(e){const t=w(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function q(e,t){return G(e).find((e=>(0,E.isEqualCaseInsensitive)(e.address,(0,g.toChecksumHexAddress)(t))))}function j(e){const t=N(e),n=M(e);return Object.entries(n).map((([e,n])=>({...n,...t[e]})))}function W(e){const t=k(e),n=j(e);return(0,l.getAccountByAddress)(n,t)}function K(e){var t;return null===(t=W(e))||void 0===t?void 0:t.balance}function Y(e){const{pendingApprovals:t}=e.metamask;return Object.values(t)}function $(e){return w(e)===s.CHAIN_IDS.MAINNET}function V(e){const t=w(e);return s.TEST_CHAINS.includes(t)}function Q({metamask:e}){return e.preferences}function z(e){return e.metamask.subjectMetadata}n.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;const X=(0,a.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function J(e){const{frequentRpcListDetail:t,provider:n}=e.metamask,r=t.find((e=>e.rpcUrl===n.rpcUrl)),{rpcPrefs:a={}}=r||{};return a}function Z(e){return e.metamask.snaps}const ee=(0,r.createSelector)(Z,(e=>Object.values(e).map((e=>({id:e.id,tabMessage:()=>e.manifest.proposedName,descriptionMessage:()=>e.manifest.description,sectionMessage:()=>e.manifest.description,route:`${A.SNAPS_VIEW_ROUTE}/${encodeURIComponent(e.id)}`,icon:"fa fa-flask"})))));function te(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function ne(e){return te(e).filter((e=>null===e.readDate))}n.getSnapsRouteObjects=ee;const re=(0,r.createSelector)(ne,(e=>e.length));function ae(e){return Boolean(e.metamask.useTokenDetection)}function oe(e){return w(e)===s.CHAIN_IDS.OPTIMISM||w(e)===s.CHAIN_IDS.OPTIMISM_TESTNET}n.getUnreadNotificationsCount=re;function se(e){const t=w(e);return[s.CHAIN_IDS.MAINNET,s.CHAIN_IDS.BSC,s.CHAIN_IDS.POLYGON,s.CHAIN_IDS.AVALANCHE].includes(t)}function ie(e){const t=$(e);return!ae(e)&&t}function ce(e){const t=w(e);return!s.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch(w(e)){case s.CHAIN_IDS.MAINNET:return s.MAINNET_DISPLAY_NAME;case s.CHAIN_IDS.BSC:return s.BSC_DISPLAY_NAME;case s.CHAIN_IDS.POLYGON:return s.POLYGON_DISPLAY_NAME;case s.CHAIN_IDS.AVALANCHE:return s.AVALANCHE_DISPLAY_NAME;default:return""}}}}},{package:"$root$"}],[8057,{"../../shared/constants/transaction":7067,"../../shared/lib/metamask-controller-utils":7070,"../../shared/modules/transaction.utils":7090,"../helpers/constants/transactions":7643,"../helpers/utils/tx-helper":7673,"./selectors":8056,reselect:6605},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=n.currentNetworkTxListSelector=void 0;var r,a=e("reselect"),o=e("../helpers/constants/transactions"),s=(r=e("../helpers/utils/tx-helper"))&&r.__esModule?r:{default:r},i=e("../../shared/constants/transaction"),c=e("../../shared/modules/transaction.utils"),u=e("../../shared/lib/metamask-controller-utils"),d=e("./selectors");const l=[i.TRANSACTION_TYPES.CANCEL,i.TRANSACTION_TYPES.RETRY],f=e=>{const{showIncomingTransactions:t}=e.metamask.featureFlags;if(!t)return[];const{network:n,provider:{chainId:r}}=e.metamask,a=(0,d.getSelectedAddress)(e);return Object.values(e.metamask.incomingTransactions).filter((e=>e.txParams.to===a&&(0,c.transactionMatchesNetwork)(e,r,n)))};n.incomingTxListSelector=f;const p=e=>e.metamask.unapprovedMsgs;n.unapprovedMsgsSelector=p;const h=e=>e.metamask.currentNetworkTxList;n.currentNetworkTxListSelector=h;const g=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=g;const m=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=m;const T=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=T;const y=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=y;const E=e=>{var t,n,r;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(n=t.smartTransactions)||void 0===n||null===(r=n[(0,d.getCurrentChainId)(e)])||void 0===r?void 0:r.filter((e=>!e.confirmed)).map((e=>{var t;return{...e,transactionType:i.TRANSACTION_TYPES.SMART,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?i.SMART_TRANSACTION_STATUSES.CANCELLED:e.status}}))};n.smartTransactionsListSelector=E;const _=(0,a.createSelector)(d.getSelectedAddress,h,E,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e)).concat(n)));n.selectedAddressTxListSelector=_;const S=(0,a.createSelector)(p,g,m,T,y,d.deprecatedGetCurrentNetworkId,d.getCurrentChainId,((e={},t={},n={},r={},a={},o,i)=>(0,s.default)({},e,t,n,r,a,o,i)||[]));n.unapprovedMessagesSelector=S;const A=(0,a.createSelector)(S,f,((e=[],t=[])=>e.concat(t)));n.transactionSubSelector=A;const I=(0,a.createSelector)(A,_,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time))));n.transactionsSelector=I;const w=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let r=e.length;for(let t=0;t<e.length;t++){const a=e[t],{primaryTransaction:{time:o}={}}=a;if(o>n){r=t;break}}e.splice(r,0,t)},R=(0,a.createSelector)(I,((e=[])=>{const t=[],n=[],r=[],a={};e.forEach((e=>{const{txParams:{nonce:s}={},status:c,type:d,time:f,txReceipt:p}=e;if(void 0===s||d===i.TRANSACTION_TYPES.INCOMING){const r={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:s};d===i.TRANSACTION_TYPES.INCOMING?n.push(r):w(t,r)}else if(s in a){var h,g,m;const t=a[s];((e,t)=>{const{time:n}=t;let r=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){r=t;break}e.splice(r,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:r=0}={}}=t,u={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:c===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:l.includes(d),occurredAfterPrimary:f>n,hasPriorityStatus:c in o.PRIORITY_STATUS_HASH,isConfirmed:c===i.TRANSACTION_STATUSES.CONFIRMED,occurredBeforeInitial:f<r,isValidRetry:d===i.TRANSACTION_TYPES.RETRY&&(c in o.PRIORITY_STATUS_HASH||c===i.TRANSACTION_STATUSES.DROPPED),isValidCancel:d===i.TRANSACTION_TYPES.CANCEL&&(c in o.PRIORITY_STATUS_HASH||c===i.TRANSACTION_STATUSES.DROPPED)};u.eligibleForInitial=!u.isRetryOrCancel&&!u.isEphemeral,u.shouldBePrimary=u.isConfirmed||u.isOnChainFailure;const T={isEphemeral:t.primaryTransaction.status===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(h=t.primaryTransaction)||void 0===h||null===(g=h.txReceipt)||void 0===g?void 0:g.status)},y={isEphemeral:t.initialTransaction.status===i.TRANSACTION_STATUSES.FAILED&&"0x0"!==(null===(m=t.initialTransaction.txReceipt)||void 0===m?void 0:m.status)};(u.shouldBePrimary||T.isEphemeral||u.occurredAfterPrimary&&u.hasPriorityStatus)&&(t.primaryTransaction=e),(u.occurredBeforeInitial&&u.eligibleForInitial||y.isEphemeral&&u.eligibleForInitial)&&(t.initialTransaction=e),u.isValidRetry&&(t.hasRetried=!0),u.isValidCancel&&(t.hasCancelled=!0)}else a[s]={nonce:s,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===i.TRANSACTION_TYPES.RETRY&&(e.status in o.PRIORITY_STATUS_HASH||e.status===i.TRANSACTION_STATUSES.DROPPED),hasCancelled:e.type===i.TRANSACTION_TYPES.CANCEL&&(e.status in o.PRIORITY_STATUS_HASH||e.status===i.TRANSACTION_STATUSES.DROPPED)},((e,t)=>{let n=e.length;for(let r=0;r<e.length;r++){const a=e[r];if(Number((0,u.hexToDecimal)(a))>Number((0,u.hexToDecimal)(t))){n=r;break}}e.splice(n,0,t)})(r,s)}));const s=r.map((e=>a[e]));return((e,t)=>{t.forEach((t=>{w(e,t)}))})(s,n),t.concat(s).map((e=>{var t;if(l.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!l.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))}));n.nonceSortedTransactionsSelector=R;const v=(0,a.createSelector)(R,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in o.PENDING_STATUS_HASH))));n.nonceSortedPendingTransactionsSelector=v;const C=(0,a.createSelector)(R,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in o.PENDING_STATUS_HASH))).reverse()));n.nonceSortedCompletedTransactionsSelector=C;const b=(0,a.createSelector)(I,((e=[])=>e.filter((e=>e.status===i.TRANSACTION_STATUSES.SUBMITTED))));n.submittedPendingTransactionsSelector=b}}},{package:"$root$"}],[8058,{"../../../shared/modules/mv3.utils":7082,pify:6289},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n._setBackgroundConnection=async function(e){s=e,i=(0,a.default)(s),o.isManifestV3&&(f&&console.warn("_setBackgroundConnection called while a queue was processing and not disconnected yet"),async function(){if(f)return;f=!0;try{for(;s.connectionStream.readable&&c.length>0;){const e=c.shift();await l({action:e,disconnectSideeffect:()=>c.unshift(e)})}}catch(e){console.error(e)}f=!1}())},n.callBackgroundMethod=void 0,n.dropQueue=function(e){e||c.forEach((({reject:e})=>e(Error("Background operation cancelled while waiting for connection."))));c.length=0},n.generateActionId=void 0,n.submitRequestToBackground=function(e,t=[],n=u()){if(o.isManifestV3)return new Promise(((r,a)=>{d({actionId:n,request:{method:e,args:t},resolve:r,reject:a})}));return i[e](...t)};var r,a=(r=e("pify"))&&r.__esModule?r:{default:r},o=e("../../../shared/modules/mv3.utils");let s=null,i=null;const c=[],u=()=>Date.now()+Math.random();n.generateActionId=u;const d=e=>{c.some((t=>t.actionId===e.actionId))||(s.connectionStream.readable?l({action:e,disconnectSideeffect:()=>c.push(e)}):c.push(e))};async function l({action:e,disconnectSideeffect:t}){const{request:{method:n,args:r},resolve:a,reject:o}=e;try{a(await i[n](...r))}catch(n){s.DisconnectError&&n instanceof s.DisconnectError?t(e):o(n)}}n.callBackgroundMethod=(e,t=[],n,r=u())=>{if(o.isManifestV3){d({actionId:r,request:{method:e,args:t},resolve:e=>n(null,e),reject:e=>n(e)})}else s[e](...t,n)};let f=!1}}},{package:"$root$"}],[8059,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_PREFERENCES=n.UPDATE_METAMASK_STATE=n.UPDATE_FEATURE_FLAGS=n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_LOADING=n.SHOW_CONF_TX_PAGE=n.SHOW_ACCOUNT_DETAIL=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_USE_NONCEFIELD=n.SET_USE_BLOCKIE=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SELECTED_SETTINGS_RPC_URL=n.SET_RPC_TARGET=n.SET_REQUEST_ACCOUNT_TABS=n.SET_PROVIDER_TYPE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NETWORK_ADDED=n.SET_NEW_CUSTOM_NETWORK_ADDED=n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE=n.SET_MOUSE_USER_STATE=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_IPFS_GATEWAY=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_CURRENT_WINDOW_TAB=n.SET_CURRENT_LOCALE=n.SET_ACCOUNT_LABEL=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.QR_CODE_DETECTED=n.PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_TOKEN_PARAMS_STARTED=n.LOADING_TOKEN_PARAMS_FINISHED=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_LOADING=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.FORGOT_PASSWORD=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.BUY=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0;n.GO_HOME="GO_HOME";n.MODAL_OPEN="UI_MODAL_OPEN";n.MODAL_CLOSE="UI_MODAL_CLOSE";n.ALERT_OPEN="UI_ALERT_OPEN";n.ALERT_CLOSE="UI_ALERT_CLOSE";n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED";n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN";n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE";n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE";n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED";n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED";n.ACCOUNT_CHANGED="ACCOUNT_CHANGED";n.CHAIN_CHANGED="CHAIN_CHANGED";n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED";n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED";n.FORGOT_PASSWORD="FORGOT_PASSWORD";n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN";n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS";n.UNLOCK_FAILED="UNLOCK_FAILED";n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED";n.LOCK_METAMASK="LOCK_METAMASK";n.DISPLAY_WARNING="DISPLAY_WARNING";n.HIDE_WARNING="HIDE_WARNING";n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION";n.SHOW_ACCOUNT_DETAIL="SHOW_ACCOUNT_DETAIL";n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE";n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE";n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE";n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY";n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL";n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS";n.COMPLETED_TX="COMPLETED_TX";n.TRANSACTION_ERROR="TRANSACTION_ERROR";n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS";n.SET_NEXT_NONCE="SET_NEXT_NONCE";n.SET_RPC_TARGET="SET_RPC_TARGET";n.SET_PROVIDER_TYPE="SET_PROVIDER_TYPE";n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH";n.SHOW_LOADING="SHOW_LOADING_INDICATION";n.HIDE_LOADING="HIDE_LOADING_INDICATION";n.BUY="BUY";n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU";n.SET_USE_BLOCKIE="SET_USE_BLOCKIE";n.SET_USE_NONCEFIELD="SET_USE_NONCEFIELD";n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE";n.SET_IPFS_GATEWAY="SET_IPFS_GATEWAY";n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS";n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE";n.UPDATE_FEATURE_FLAGS="UPDATE_FEATURE_FLAGS";n.UPDATE_PREFERENCES="UPDATE_PREFERENCES";n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING";n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION";n.SET_MOUSE_USER_STATE="SET_MOUSE_USER_STATE";n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS";n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS";n.SET_PENDING_TOKENS="SET_PENDING_TOKENS";n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS";n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE";n.SET_SELECTED_SETTINGS_RPC_URL="SET_SELECTED_SETTINGS_RPC_URL";n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED";n.SET_NEW_COLLECTIBLE_ADDED_MESSAGE="SET_NEW_COLLECTIBLE_ADDED_MESSAGE";n.SET_NEW_CUSTOM_NETWORK_ADDED="SET_NEW_CUSTOM_NETWORK_ADDED";n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED";n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED";n.LOADING_TOKEN_PARAMS_STARTED="LOADING_TOKEN_PARAMS_STARTED";n.LOADING_TOKEN_PARAMS_FINISHED="LOADING_TOKEN_PARAMS_FINISHED";n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS";n.SET_CURRENT_WINDOW_TAB="SET_CURRENT_WINDOW_TAB";n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS";n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP";n.PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION="PORTFOLIO_TOOLTIP_WAS_SHOWN_IN_THIS_SESSION";n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION";n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR";n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE";n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH";n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED"}}},{package:"$root$"}],[806,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=void 0;n.DataItem=class{constructor(e,t){this.setTag=e=>{this.tag=e},this.clearTag=()=>{this.tag=undefined},this.getTag=()=>this.tag,this.getData=()=>this.data,this.data=e,this.tag=t}}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[8060,{"../../app/scripts/lib/buy-url":48,"../../app/scripts/lib/util":90,"../../shared/constants/app":7055,"../../shared/constants/hardware-wallets":7057,"../../shared/constants/metametrics":7059,"../../shared/lib/switch-direction":7073,"../../shared/lib/transactions-controller-utils":7074,"../../shared/modules/hexstring-utils":7081,"../../shared/modules/string-utils":7088,"../ducks/alerts/unconnected-account":7619,"../ducks/app/app":7620,"../ducks/metamask/metamask":7628,"../ducks/send":7630,"../helpers/constants/notifications":7639,"../helpers/utils/confirm-tx.util":7656,"../helpers/utils/i18n-helper":7662,"../helpers/utils/transactions.util":7672,"../helpers/utils/tx-helper":7673,"../pages/swaps/swaps.util":8038,"../selectors":8053,"./action-queue":8058,"./actionConstants":8059,"@sentry/browser":1817,buffer:2438,lodash:6046,loglevel:6059},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.acceptWatchAsset=function(e){return async t=>{t(Z());try{await(0,C.submitRequestToBackground)("acceptWatchAsset",[e]),await ie(t)}catch(e){return r.default.error(e),void t(te(e.message))}finally{t(ee())}t(J())}},n.addCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||a(Z());try{await(0,C.submitRequestToBackground)("addCollectible",[e,t])}catch(e){r.default.error(e),a(te(e.message))}finally{await ie(a),a(ee())}}},n.addCollectibleVerifyOwnership=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add collectible without address");if(!t)throw new Error("MetaMask - Cannot add collectible without tokenID");n||a(Z());try{await(0,C.submitRequestToBackground)("addCollectibleVerifyOwnership",[e,t])}catch(e){if(e.message.includes("This collectible is not owned by the user")||e.message.includes("Unable to verify ownership."))throw e;r.default.error(e),a(te(e.message))}finally{await ie(a),a(ee())}}},n.addCustomNetwork=function(e){return async t=>{try{t((0,I.setNewCustomNetworkAdded)(e)),await(0,C.submitRequestToBackground)("addCustomNetwork",[e])}catch(e){r.default.error(e),t(te("Had a problem changing networks!"))}}},n.addDetectedTokens=function(e){return async t=>{try{await(0,C.submitRequestToBackground)("addDetectedTokens",[e])}catch(e){r.default.error(e)}finally{await ie(t)}}},n.addImportedTokens=function(e){return async t=>{try{await(0,C.submitRequestToBackground)("addImportedTokens",[e])}catch(e){r.default.error(e)}finally{await ie(t)}}},n.addNewAccount=function(){return r.default.debug("background.addNewAccount"),async(e,t)=>{const n=t().metamask.identities;let r;e(Z());try{const{identities:t}=await(0,C.submitRequestToBackground)("addNewAccount",[Object.keys(n).length]);r=t}catch(t){throw e(te(t.message)),t}finally{e(ee())}const a=Object.keys(r).find((e=>!n[e]));return await ie(e),a}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,C.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ie(n)}},n.addPollingTokenToAppState=async function(e){return(0,C.submitRequestToBackground)("addPollingTokenToAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,f.getEnvironmentType)()]])},n.addToAddressBook=function(e,t="",n=""){return r.default.debug("background.addToAddressBook"),async(a,o)=>{const{chainId:s}=o().metamask.provider;let i;try{i=await(0,C.submitRequestToBackground)("setAddressBook",[(0,T.toChecksumHexAddress)(e),t,s,n])}catch(e){throw r.default.error(e),a(te("Address book failed to update")),e}i||a(te("Address book failed to update"))}},n.addToken=Q,n.addTokens=function(e){return t=>Array.isArray(e)?Promise.all(e.map((({address:e,symbol:n,decimals:r})=>t(Q(e,n,r))))):Promise.all(Object.entries(e).map((([e,{address:n,symbol:r,decimals:a}])=>t(Q(n,r,a)))))},n.addUnapprovedTransaction=async function(e,t){r.default.debug("background.addUnapprovedTransaction");const n=(0,C.generateActionId)();return await(0,C.submitRequestToBackground)("addUnapprovedTransaction",[e,u.ORIGIN_METAMASK,t,undefined,n],n)},n.addUnapprovedTransactionAndRouteToConfirmationPage=function(e,t,n){return async a=>{const o=(0,C.generateActionId)();try{r.default.debug("background.addUnapprovedTransaction");const s=await(0,C.submitRequestToBackground)("addUnapprovedTransaction",[e,u.ORIGIN_METAMASK,t,n,o],o);return a(V()),s}catch(e){a(ee()),a(te(e.message))}return null}},n.approvePermissionsRequest=function(e){return t=>{(0,C.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(te(e.message))}))}},n.attemptLedgerTransportCreation=async function(){return await(0,C.submitRequestToBackground)("attemptLedgerTransportCreation")},n.backupUserData=async function(){let e;try{e=await(0,C.submitRequestToBackground)("backupUserData")}catch(e){throw r.default.error(e.message),e}return e},n.buy=function(e){return async t=>{const n=await(0,s.default)(e);n&&(global.platform.openTab({url:n}),t({type:v.BUY}))}},n.cancelDecryptMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,C.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(ee())}return t(K(n)),t(L(e.id)),t(J()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,C.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(ee())}return t(K(n)),t(L(e.id)),t(J()),e}},n.cancelMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,C.submitRequestToBackground)("cancelMessage",[e.id])}finally{t(ee())}return t(K(n)),t(L(e.id)),t(J()),e}},n.cancelMsgs=function(e){return async t=>{t(Z());try{const n=e.map((e=>e)),r=e.map((({id:e,type:t})=>new Promise(((n,r)=>{switch(t){case u.MESSAGE_TYPE.ETH_SIGN_TYPED_DATA:return void(0,C.callBackgroundMethod)("cancelTypedMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.PERSONAL_SIGN:return void(0,C.callBackgroundMethod)("cancelPersonalMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_DECRYPT:return void(0,C.callBackgroundMethod)("cancelDecryptMessage",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_GET_ENCRYPTION_PUBLIC_KEY:return void(0,C.callBackgroundMethod)("cancelEncryptionPublicKey",[e],(e=>{e?r(e):n()}));case u.MESSAGE_TYPE.ETH_SIGN:return void(0,C.callBackgroundMethod)("cancelMessage",[e],(e=>{e?r(e):n()}));default:r(new Error(`MetaMask Message Signature: Unknown message type: ${e}`))}}))));await Promise.all(r);const a=await x();t(K(a)),n.forEach((e=>{t(L(e))}))}catch(e){r.default.error(e)}finally{(0,f.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?Ee():t(ee())}}},n.cancelPersonalMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,C.submitRequestToBackground)("cancelPersonalMessage",[e.id])}finally{t(ee())}return t(K(n)),t(L(e.id)),t(J()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(ee()),await(0,C.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,C.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const n=(0,_.parseSmartTransactionsError)(e.message);t({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:n})}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(ee()),await(0,C.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(Z()),new Promise(((t,n)=>{const r=(0,C.generateActionId)();(0,C.callBackgroundMethod)("cancelTransaction",[e.id,r],(e=>{e?n(e):t()}))})).then((()=>x())).then((e=>n(K(e)))).then((()=>(n((0,h.resetSendState)()),n(L(e.id)),n(ee()),n(J()),e))).catch((e=>{throw n(ee()),e})))},n.cancelTxs=function(e){return async t=>{t(Z());try{const n=e.map((({id:e})=>e)),r=n.map((e=>new Promise(((t,n)=>{const r=(0,C.generateActionId)();(0,C.callBackgroundMethod)("cancelTransaction",[e,r],(e=>{e?n(e):t()}))}))));await Promise.all(r);const a=await x();t(K(a)),t((0,h.resetSendState)()),n.forEach((e=>{t(L(e))}))}finally{(0,f.getEnvironmentType)()===u.ENVIRONMENT_TYPE_NOTIFICATION?Ee():t(ee())}}},n.cancelTypedMsg=function(e){return async t=>{let n;t(Z());try{n=await(0,C.submitRequestToBackground)("cancelTypedMessage",[e.id])}finally{t(ee())}return t(K(n)),t(L(e.id)),t(J()),e}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:r}=n().appState;e in r||(t({type:v.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,a.captureException)(Error(e)))}},n.checkAndUpdateAllCollectiblesOwnershipStatus=async function(){await(0,C.submitRequestToBackground)("checkAndUpdateAllCollectiblesOwnershipStatus")},n.checkAndUpdateSingleCollectibleOwnershipStatus=async function(e){await(0,C.submitRequestToBackground)("checkAndUpdateSingleCollectibleOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return r.default.debug("background.checkHardwareStatus",e,t),async n=>{let a;n(Z());try{a=await(0,C.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw r.default.error(e),n(te(e.message)),e}finally{n(ee())}return await ie(n),a}},n.clearAccountDetails=function(){return{type:v.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:v.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,C.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("clearSwapsQuotes"),await ie(e)}},n.closeCurrentNotificationWindow=J,n.closeNotificationPopup=Ee,n.closeWelcomeScreen=function(){return{type:v.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=se,n.completedTx=L,n.connectHardware=function(e,t,n,a){return r.default.debug("background.connectHardware",e,t,n),async(s,i)=>{const{ledgerTransportType:c}=i().metamask;let u;s(Z(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===y.DEVICE_NAMES.LEDGER&&await(0,C.submitRequestToBackground)("establishLedgerTransportPreference"),e===y.DEVICE_NAMES.LEDGER&&c===y.LEDGER_TRANSPORT_TYPES.WEBHID){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:y.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(y.LEDGER_USB_VENDOR_ID))))throw new Error(a("ledgerWebHIDNotConnectedErrorMessage"))}u=await(0,C.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){throw r.default.error(t),e===y.DEVICE_NAMES.LEDGER&&c===y.LEDGER_TRANSPORT_TYPES.WEBHID&&t.message.match("Failed to open the device")?(s(te(a("ledgerDeviceOpenFailureMessage"))),new Error(a("ledgerDeviceOpenFailureMessage"))):(e!==y.DEVICE_NAMES.QR&&s(te(t.message)),t)}finally{s(ee())}return await ie(s),u}},n.createCancelTransaction=function(e,t,n){let a;return r.default.debug("background.cancelTransaction"),r=>{const o=(0,C.generateActionId)();return new Promise(((s,i)=>{(0,C.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(te(e.message)),void i(e);const{currentNetworkTxList:n}=t,{id:o}=n[n.length-1];a=o,s(t)}),o)})).then((e=>r(K(e)))).then((()=>a))}},n.createEventFragment=function(e){const t=(0,C.generateActionId)();return(0,C.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createNewVault=D,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await D(e);return await M()}catch(e){throw t(te(e.message)),new Error(e.message)}finally{t(ee())}}},n.createNewVaultAndRestore=function(e,n){return a=>{a(Z()),r.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());let s;return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("createNewVaultAndRestore",[e,o],((e,r)=>{e?n(e):(s=r,t())}))})).then((()=>a(H()))).then((()=>(a($()),a(ee()),s))).catch((e=>(a(te(e.message)),a(ee()),Promise.reject(e))))}},n.createRetryTransaction=function(e,t){let n;return r=>new Promise(((a,o)=>{const s=(0,C.generateActionId)();(0,C.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return r(te(e.message)),void o(e);const{currentNetworkTxList:s}=t;n=s[s.length-1],a(t)}))})).then((e=>r(K(e)))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n){let a;return r.default.debug("background.createSpeedUpTransaction"),r=>{const o=(0,C.generateActionId)();return new Promise(((s,i)=>{(0,C.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return r(te(e.message)),void i(e);const{currentNetworkTxList:n}=t;a=n[n.length-1],s(t)}),o)})).then((e=>r(K(e)))).then((()=>a))}},n.createTransactionEventFragment=function(e,t){const n=(0,C.generateActionId)();return(0,C.submitRequestToBackground)("createTransactionEventFragment",[e,t,n])},n.customSwapsGasParamsUpdated=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("setSwapsTxGasPrice",[t]),await(0,C.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ie(n)}},n.decryptMsg=function(e){return r.default.debug("action - decryptMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.decryptMessage");try{n=await(0,C.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}return t(K(n)),t(L(e.metamaskId)),t(J()),e}},n.decryptMsgInline=function(e){return r.default.debug("action - decryptMsgInline"),async t=>{let n;r.default.debug("actions calling background.decryptMessageInline");try{n=await(0,C.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}return t(K(n)),n.unapprovedDecryptMsgs[e.metamaskId]}},n.delRpcTarget=function(e){return t=>(r.default.debug(`background.delRpcTarget: ${e}`),new Promise(((n,a)=>{(0,C.callBackgroundMethod)("delCustomRpc",[e],(e=>{if(e)return r.default.error(e),t(te("Had a problem removing network!")),void a(e);n()}))})))},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t(),r=(0,p.getNotifications)(n).filter((e=>{const t=new Date(Date.now()-A.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));r.length&&(await(0,C.submitRequestToBackground)("dismissNotifications",[r]),await ie(e))}},n.detectCollectibles=function(){return async e=>{e(Z()),r.default.debug("background.detectCollectibles"),await(0,C.submitRequestToBackground)("detectCollectibles"),e(ee()),await ie(e)}},n.detectNewTokens=async function(){return(0,C.submitRequestToBackground)("detectNewTokens")},n.disableSnap=function(e){return async t=>{await(0,C.submitRequestToBackground)("disableSnap",[e]),await ie(t)}},n.disconnectGasFeeEstimatePoller=function(e){return(0,C.submitRequestToBackground)("disconnectGasFeeEstimatePoller",[e])},n.dismissNotifications=function(e){return async t=>{await(0,C.submitRequestToBackground)("dismissNotifications",[e]),await ie(t)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:v.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=te,n.editRpc=function(e,t,n,a="ETH",o,s){return async i=>{r.default.debug(`background.delRpcTarget: ${e}`);try{(0,C.submitRequestToBackground)("delCustomRpc",[e])}catch(e){return r.default.error(e),void i(te("Had a problem removing network!"))}try{await(0,C.submitRequestToBackground)("updateAndSetCustomRpc",[t,n,a,o||t,s])}catch(e){return r.default.error(e),void i(te("Had a problem changing networks!"))}i({type:v.SET_RPC_TARGET,value:t})}},n.enableSnap=function(e){return async t=>{await(0,C.submitRequestToBackground)("enableSnap",[e]),await ie(t)}},n.encryptionPublicKeyMsg=function(e){return r.default.debug("action - encryptionPublicKeyMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.encryptionPublicKey");try{n=await(0,C.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}return t(K(n)),t(L(e.metamaskId)),t(J()),e}},n.estimateGas=function(e){return(0,C.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t){return function(n){return n(Z()),r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(function(e){if(e)return r.default.error("Error in verifying password."),n(ee()),n(te("Incorrect Password.")),void o(e);r.default.debug("background.exportAccount"),(0,C.callBackgroundMethod)("exportAccount",[t],(function(e,t){if(n(ee()),e)return r.default.error(e),n(te("Had a problem exporting the account.")),void o(e);n(ne(t)),a(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return r.default.debug("background.verifyPassword"),new Promise(((a,o)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(function(e){if(e)return r.default.error("Error in submitting password."),void o(e);r.default.debug("background.exportAccounts");const s=t.map((e=>new Promise(((t,a)=>(0,C.callBackgroundMethod)("exportAccount",[e],(function(e,o){if(e)return r.default.error(e),n(te("Had a problem exporting the account.")),void a(e);t(o)}))))));a(Promise.all(s))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[r,a]=await(0,C.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ie(n),[r,a]}},n.fetchInfoToSync=function(){return e=>(r.default.debug("background.fetchInfoToSync"),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("fetchInfoToSync",[],((r,a)=>{if(r)return e(te(r.message)),void n(r);t(a)}))})))},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const r=await await(0,C.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:null}),r}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,_.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,C.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){r.default.error(e)}}},n.finalizeEventFragment=function(e,t){return(0,C.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=ie,n.forgetDevice=function(e){return r.default.debug("background.forgetDevice",e),async t=>{t(Z());try{await(0,C.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}await ie(t)}},n.forgotPassword=G,n.getBalancesInSingleCall=async function(e){return await(0,C.submitRequestToBackground)("getBalancesInSingleCall",[e])},n.getContractMethodData=function(e=""){return(t,n)=>{const a=(0,f.addHexPrefix)(e).slice(0,10);if(a.length<10)return Promise.resolve({});const{knownMethodData:o}=n().metamask;return o&&o[a]&&0!==Object.keys(o[a]).length?Promise.resolve(o[a]):(t(de()),r.default.debug("loadingMethodData"),(0,i.getMethodDataAsync)(a).then((({name:e,params:n})=>(t(le()),(0,C.callBackgroundMethod)("addKnownMethodData",[a,{name:e,params:n}],(e=>{e&&t(te(e.message))})),{name:e,params:n}))))}},n.getCurrentWindowTab=function(){return async e=>{e(ye(await global.platform.currentTab()))}},n.getGasFeeEstimatesAndStartPolling=function(){return(0,C.submitRequestToBackground)("getGasFeeEstimatesAndStartPolling")},n.getGasFeeTimeEstimate=function(e,t){return(0,C.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getNextNonce=function(){return async(e,t)=>{const n=t().metamask.selectedAddress;let r;try{r=await(0,C.submitRequestToBackground)("getNextNonce",[n])}catch(t){throw e(te(t.message)),t}return e(ge(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(Te(await(0,C.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getRequestAccountTabIds=function(){return async e=>{e(me(await(0,C.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getThreeBoxLastUpdated=function(){return e=>new Promise(((t,n)=>{(0,C.callBackgroundMethod)("getThreeBoxLastUpdated",[],((r,a)=>{if(r)return e(te(r.message)),void n(r);t(a)}))}))},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,C.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTransactions=async function(e={}){return await(0,C.submitRequestToBackground)("getTransactions",[e])},n.goHome=k,n.handleSnapRequest=async function(e){return(0,C.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAlert=function(){return{type:v.ALERT_CLOSE}},n.hideLoadingIndication=ee,n.hideModal=function(e){return{type:v.MODAL_CLOSE,payload:e}},n.hideNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_CLOSE}},n.hidePortfolioTooltip=function(){return(0,C.submitRequestToBackground)("setShowPortfolioTooltip",[!1])},n.hideTestNetMessage=function(){return(0,C.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:v.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1}){const n=Array.isArray(e)?e:[e];return async e=>{t||e(Z());try{await(0,C.submitRequestToBackground)("ignoreTokens",[n])}catch(t){r.default.error(t),e(te(t.message))}finally{await ie(e),e(ee())}}},n.importNewAccount=function(e,t){return async n=>{let a;n(Z("This may take a while, please be patient."));try{r.default.debug("background.importAccountWithStrategy"),await(0,C.submitRequestToBackground)("importAccountWithStrategy",[e,t]),r.default.debug("background.getState"),a=await(0,C.submitRequestToBackground)("getState")}catch(e){throw n(te(e.message)),e}finally{n(ee())}return n(K(a)),a.selectedAddress&&n({type:v.SHOW_ACCOUNT_DETAIL,value:a.selectedAddress}),a}},n.initializeThreeBox=fe,n.isCollectibleOwner=async function(e,t,n){return await(0,C.submitRequestToBackground)("isCollectibleOwner",[e,t,n])},n.loadingMethodDataFinished=le,n.loadingMethodDataStarted=de,n.loadingTokenParamsFinished=function(){return{type:v.LOADING_TOKEN_PARAMS_FINISHED}},n.loadingTokenParamsStarted=function(){return{type:v.LOADING_TOKEN_PARAMS_STARTED}},n.lockMetamask=function(){return r.default.debug("background.setLocked"),e=>(e(Z()),new Promise(((e,t)=>{(0,C.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))})).then((()=>x())).catch((t=>(e(te(t.message)),Promise.reject(t)))).then((t=>{e(K(t)),e(ee()),e({type:v.LOCK_METAMASK})})).catch((()=>{e(ee()),e({type:v.LOCK_METAMASK})})))},n.markNotificationsAsRead=function(e){return async t=>{await(0,C.submitRequestToBackground)("markNotificationsAsRead",[e]),await ie(t)}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,C.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(ee()),e(G()),await ie(e)}}},n.qrCodeDetected=function(e){return async t=>{await t({type:v.QR_CODE_DETECTED,value:e}),t((0,h.computeEstimatedGasLimit)())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:r}=await ie(n);0===Object.values(r).length&&n(J())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,r)=>{(0,C.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(te(e.message)),void r(e);ie(t).then(n).catch(r)}))}))},n.rejectWatchAsset=function(e){return async t=>{t(Z());try{await(0,C.submitRequestToBackground)("rejectWatchAsset",[e]),await ie(t)}catch(e){return r.default.error(e),void t(te(e.message))}finally{t(ee())}t(J())}},n.removeAccount=function(e){return async t=>{t(Z());try{await new Promise(((t,n)=>{(0,C.callBackgroundMethod)("removeAccount",[e],((e,r)=>{e?n(e):t(r)}))})),await ie(t)}catch(e){throw t(te(e.message)),e}finally{t(ee())}r.default.info(`Account removed: ${e}`),t($())}},n.removeAndIgnoreCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot ignore collectible without address");if(!t)throw new Error("MetaMask - Cannot ignore collectible without tokenID");n||a(Z());try{await(0,C.submitRequestToBackground)("removeAndIgnoreCollectible",[e,t])}catch(e){r.default.error(e),a(te(e.message))}finally{await ie(a),a(ee())}}},n.removeCollectible=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot remove collectible without address");if(!t)throw new Error("MetaMask - Cannot remove collectible without tokenID");n||a(Z());try{await(0,C.submitRequestToBackground)("removeCollectible",[e,t])}catch(e){r.default.error(e),a(te(e.message))}finally{await ie(a),a(ee())}}},n.removeFromAddressBook=function(e,t){return r.default.debug("background.removeFromAddressBook"),async()=>{await(0,C.submitRequestToBackground)("removeFromAddressBook",[e,(0,T.toChecksumHexAddress)(t)])}},n.removePermissionsFor=function(e){return t=>{(0,C.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(te(e.message))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,r)=>{(0,C.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?r(e):n()}))})),await ie(n)}},n.removePollingTokenFromAppState=async function(e){return(0,C.submitRequestToBackground)("removePollingTokenFromAppState",[e,u.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,f.getEnvironmentType)()]])},n.removeSnap=function(e){return async t=>{await(0,C.submitRequestToBackground)("removeSnap",[e]),await ie(t)}},n.removeSnapError=async function(e){return(0,C.submitRequestToBackground)("removeSnapError",[e])},n.requestAccountsPermissionWithId=function(e){return async t=>{const n=await(0,C.submitRequestToBackground)("requestAccountsPermissionWithId",[e]);return await ie(t),n}},n.requestAddNetworkApproval=function(e,t){return async n=>{try{await(0,C.submitRequestToBackground)("requestAddNetworkApproval",[e,t])}catch(e){r.default.error(e),n(te("Had a problem changing networks!"))}}},n.requestRevealSeedWords=function(e){return async t=>{t(Z()),r.default.debug("background.verifyPassword");try{await P(e);return await M()}catch(e){throw t(te(e.message)),e}finally{t(ee())}}},n.resetAccount=function(){return e=>(e(Z()),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("resetAccount",[],((a,o)=>{if(e(ee()),a)return e(te(a.message)),void n(a);r.default.info(`Transaction history reset for ${o}`),e($()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{const t=await(0,C.submitRequestToBackground)("resetSwapsState");return await ie(e),t}},n.resetSwapsPostFetchState=function(){return async e=>{await(0,C.submitRequestToBackground)("resetPostFetchState"),await ie(e)}},n.resolvePendingApproval=function(e,t){return async n=>{await(0,C.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:r}=await ie(n);0===Object.values(r).length&&n(J())}},n.restoreFromThreeBox=function(e){return t=>new Promise(((n,r)=>{(0,C.callBackgroundMethod)("restoreFromThreeBox",[e],(e=>{if(e)return t(te(e.message)),void r(e);n()}))}))},n.restoreUserData=async function(e){try{await(0,C.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw r.default.error(e.message),e}return!0},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,C.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){r.default.error(t),e(te("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("safeRefetchQuotes"),await ie(e)}},n.setAccountLabel=function(e,t){return n=>(n(Z()),r.default.debug("background.setAccountLabel"),new Promise(((r,a)=>{(0,C.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(ee()),o)return n(te(o.message)),void a(o);n({type:v.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),r(e)}))})))},n.setAdvancedGasFee=function(e){return t=>{t(Z()),r.default.debug("background.setAdvancedGasFee"),(0,C.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(ee()),e&&t(te(e.message))}))}},n.setAlertEnabledness=async function(e,t){await(0,C.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setApproveTxId=function(e){return async t=>{await(0,C.submitRequestToBackground)("setApproveTxId",[e]),await ie(t)}},n.setAutoLockTimeLimit=function(e){return ae("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,C.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ie(t)}},n.setCollectiblesDetectionNoticeDismissed=function(){return(0,C.submitRequestToBackground)("setCollectiblesDetectionNoticeDismissed",[!0])},n.setCompletedOnboarding=function(){return async e=>{e(Z());try{await(0,C.submitRequestToBackground)("completeOnboarding"),e(se())}catch(t){throw e(te(t.message)),t}finally{e(ee())}}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,C.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if(e)throw new Error(e.message)}))}},n.setCurrentCurrency=function(e){return async t=>{t(Z()),r.default.debug("background.setCurrentCurrency");try{await(0,C.submitRequestToBackground)("setCurrentCurrency",[e]),await ie(t)}catch(e){return r.default.error(e),void t(te(e.message))}finally{t(ee())}}},n.setCurrentLocale=ue,n.setCurrentWindowTab=ye,n.setCustomApproveTxData=function(e){return async t=>{await(0,C.submitRequestToBackground)("setCustomApproveTxData",[e]),await ie(t)}},n.setCustomNetworkListEnabled=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("setCustomNetworkListEnabled",[e])}catch(e){r.default.error(e)}}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,C.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ie(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(Z()),await(0,C.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(ee())}},n.setEIP1559V2Enabled=function(e){return async t=>{t(Z()),r.default.debug("background.setEIP1559V2Enabled");try{await(0,C.submitRequestToBackground)("setEIP1559V2Enabled",[e])}finally{t(ee())}}},n.setEnableEIP1559V2NoticeDismissed=function(){return(0,C.submitRequestToBackground)("setEnableEIP1559V2NoticeDismissed",[!0])},n.setFeatureFlag=function(e,t,n){return r=>(r(Z()),new Promise(((a,o)=>{(0,C.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(r(ee()),e)return r(te(e.message)),void o(e);r(re(t)),n&&r(X({name:n})),a(t)}))})))},n.setFirstTimeFlowType=function(e){return t=>{r.default.debug("background.setFirstTimeFlowType"),(0,C.callBackgroundMethod)("setFirstTimeFlowType",[e],(e=>{e&&t(te(e.message))})),t({type:v.SET_FIRST_TIME_FLOW_TYPE,value:e})}},n.setFirstTimeUsedNetwork=function(e){return(0,C.submitRequestToBackground)("setFirstTimeUsedNetwork",[e])},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:v.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,value:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return ae("hideZeroBalanceTokens",e)},n.setInitialGasEstimate=function(e){return async t=>{await(0,C.submitRequestToBackground)("setInitialGasEstimate",[e]),await ie(t)}},n.setIpfsGateway=function(e){return t=>{t(Z()),r.default.debug("background.setIpfsGateway"),(0,C.callBackgroundMethod)("setIpfsGateway",[e],(n=>{t(ee()),t(n?te(n.message):{type:v.SET_IPFS_GATEWAY,value:e})}))}},n.setLastActiveTime=function(){return e=>{(0,C.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(te(t.message))}))}},n.setLedgerTransportPreference=function(e){return async t=>{t(Z()),await(0,C.submitRequestToBackground)("setLedgerTransportPreference",[e]),t(ee())}},n.setMouseUserState=function(e){return{type:v.SET_MOUSE_USER_STATE,value:e}},n.setNewCollectibleAddedMessage=function(e){return{type:v.SET_NEW_COLLECTIBLE_ADDED_MESSAGE,value:e}},n.setNewNetworkAdded=function(e){return{type:v.SET_NEW_NETWORK_ADDED,value:e}},n.setNewTokensImported=function(e){return{type:v.SET_NEW_TOKENS_IMPORTED,value:e}},n.setNextNonce=ge,n.setOpenMetamaskTabsIDs=Te,n.setOpenSeaEnabled=function(e){return t=>{t(Z()),r.default.debug("background.setOpenSeaEnabled"),(0,C.callBackgroundMethod)("setOpenSeaEnabled",[e],(e=>{t(ee()),e&&t(te(e.message))}))}},n.setParticipateInMetaMetrics=function(e){return t=>(r.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,a)=>{(0,C.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(r.default.debug(o),o)return t(te(o.message)),void a(o);t({type:v.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t={},selectedTokens:n={},tokenAddressList:r=[]}=e,{address:a,symbol:o,decimals:s}=t,i=a&&o&&s>=0<=36?{...n,[a]:{...t,isCustom:!0}}:n;return Object.keys(i).forEach((e=>{i[e].unlisted=!r.find((t=>(0,S.isEqualCaseInsensitive)(t,e)))})),{type:v.SET_PENDING_TOKENS,payload:i}},n.setPreference=ae,n.setProviderType=function(e){return async t=>{r.default.debug("background.setProviderType",e);try{await(0,C.submitRequestToBackground)("setProviderType",[e])}catch(e){return r.default.error(e),void t(te("Had a problem changing networks!"))}t(z(e))}},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,C.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if(e)throw new Error(e.message)}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,C.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if(e)throw new Error(e.message)}))}},n.setRequestAccountTabIds=me,n.setRpcTarget=function(e,t,n="ETH",a){return async o=>{r.default.debug(`background.setRpcTarget: ${e} ${t} ${n} ${a}`);try{await(0,C.submitRequestToBackground)("setCustomRpc",[e,t,n,a||e])}catch(e){r.default.error(e),o(te("Had a problem changing networks!"))}}},n.setSeedPhraseBackedUp=function(e){return t=>(r.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,r)=>{(0,C.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(te(e.message)),void r(e);ie(t).then(n).catch(r)}))})))},n.setSelectedAddress=function(e){return async t=>{t(Z()),r.default.debug("background.setSelectedAddress");try{await Y(e)}catch(e){return void t(te(e.message))}finally{t(ee())}}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ie(t)}},n.setSelectedSettingsRpcUrl=function(e){return{type:v.SET_SELECTED_SETTINGS_RPC_URL,value:e}},n.setShowFiatConversionOnTestnetsPreference=function(e){return ae("showFiatInTestnets",e)},n.setShowRestorePromptToFalse=function(){return e=>new Promise(((t,n)=>{(0,C.callBackgroundMethod)("setShowRestorePromptToFalse",[],(r=>{if(r)return e(te(r.message)),void n(r);t()}))}))},n.setShowTestNetworks=function(e){return ae("showTestNetworks",e)},n.setSmartTransactionsOptInStatus=async function(e,t){_e({event:"STX OptIn",category:E.EVENT.CATEGORIES.SWAPS,sensitiveProperties:{stx_enabled:!0,current_stx_enabled:!0,stx_user_opt_in:e,stx_prev_user_opt_in:t}}),await(0,C.submitRequestToBackground)("setSmartTransactionsOptInStatus",[e])},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{try{await(0,C.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){r.default.error(e)}}},n.setSwapsErrorKey=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsErrorKey",[e]),await ie(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ie(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsLiveness",[e]),await ie(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ie(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTokens",[e]),await ie(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ie(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ie(t)}},n.setTheme=function(e){return async t=>{t(Z()),r.default.debug("background.setTheme");try{await(0,C.submitRequestToBackground)("setTheme",[e])}finally{t(ee())}}},n.setThreeBoxSyncingPermission=he,n.setTradeTxId=function(e){return async t=>{await(0,C.submitRequestToBackground)("setTradeTxId",[e]),await ie(t)}},n.setUnconnectedAccountAlertShown=Se,n.setUseBlockie=function(e){return t=>{t(Z()),r.default.debug("background.setUseBlockie"),(0,C.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(ee()),e&&t(te(e.message))})),t({type:v.SET_USE_BLOCKIE,value:e})}},n.setUseCollectibleDetection=function(e){return t=>{t(Z()),r.default.debug("background.setUseCollectibleDetection"),(0,C.callBackgroundMethod)("setUseCollectibleDetection",[e],(e=>{t(ee()),e&&t(te(e.message))}))}},n.setUseNativeCurrencyAsPrimaryCurrencyPreference=function(e){return ae("useNativeCurrencyAsPrimaryCurrency",e)},n.setUseNonceField=function(e){return async t=>{t(Z()),r.default.debug("background.setUseNonceField");try{await(0,C.submitRequestToBackground)("setUseNonceField",[e])}catch(e){t(te(e.message))}t(ee()),t({type:v.SET_USE_NONCEFIELD,value:e})}},n.setUsePhishDetect=function(e){return t=>{t(Z()),r.default.debug("background.setUsePhishDetect"),(0,C.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(ee()),e&&t(te(e.message))}))}},n.setUseTokenDetection=function(e){return t=>{t(Z()),r.default.debug("background.setUseTokenDetection"),(0,C.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(ee()),e&&t(te(e.message))}))}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,C.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountDetail=function(e){return async(t,n)=>{t(Z()),r.default.debug("background.setSelectedAddress");const a=n(),o=(0,m.getUnconnectedAccountAlertEnabledness)(a),s=a.activeTab.origin,i=(0,p.getSelectedAddress)(a),c=(0,p.getPermittedAccountsForCurrentTab)(a),u=Boolean(s)&&c.includes(i),d=Boolean(s)&&c.includes(e),l=u&&!d;try{await Y(e),await ie(t)}catch(e){return void t(te(e.message))}finally{t(ee())}t({type:v.SHOW_ACCOUNT_DETAIL,value:e}),o&&l&&(t((0,g.switchedToUnconnectedAccount)()),await Se(s))}},n.showAccountsPage=$,n.showAlert=function(e){return{type:v.ALERT_OPEN,value:e}},n.showConfTxPage=V,n.showLoadingIndication=Z,n.showModal=X,n.showNetworkDropdown=function(){return{type:v.NETWORK_DROPDOWN_OPEN}},n.showPrivateKey=ne,n.showQrScanner=function(){return e=>{e(X({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:v.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const a=await Ae(e,t.fees),o=await Ae(e,t.cancelFees,!0);try{return(await(0,C.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:a,signedCanceledTransactions:o,txParams:e}])).uuid}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,_.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.signMsg=function(e){return r.default.debug("action - signMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signMessage");try{n=await(0,C.submitRequestToBackground)("signMessage",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}return t(K(n)),t(L(e.metamaskId)),t(J()),e}},n.signPersonalMsg=function(e){return r.default.debug("action - signPersonalMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signPersonalMessage");try{n=await(0,C.submitRequestToBackground)("signPersonalMessage",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}return t(K(n)),t(L(e.metamaskId)),t(J()),e}},n.signTypedMsg=function(e){return r.default.debug("action - signTypedMsg"),async t=>{let n;t(Z()),r.default.debug("actions calling background.signTypedMessage");try{n=await(0,C.submitRequestToBackground)("signTypedMessage",[e])}catch(e){throw r.default.error(e),t(te(e.message)),e}finally{t(ee())}return t(K(n)),t(L(e.metamaskId)),t(J()),e}},n.stopPollingForQuotes=function(){return async e=>{await(0,C.submitRequestToBackground)("stopPollingForQuotes"),await ie(e)}},n.submitPassword=O,n.submitQRHardwareCryptoAccount=async function(e){await(0,C.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,C.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,C.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.toggleAccountMenu=function(){return{type:v.TOGGLE_ACCOUNT_MENU}},n.trackMetaMetricsEvent=_e,n.trackMetaMetricsPage=function(e,t){return(0,C.submitRequestToBackground)("trackMetaMetricsPage",[e,t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,C.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&r.default.error(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(Z()),t(q()),r.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,C.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(W()),ie(t)))).then((()=>{t(ee())})).catch((e=>(t(j(e.message)),t(ee()),Promise.reject(e)))))},n.turnThreeBoxSyncingOn=pe,n.turnThreeBoxSyncingOnAndInitialize=function(){return async e=>{await e(he(!0)),await e(pe()),await e(fe())}},n.txError=F,n.unMarkPasswordForgotten=H,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(Z());try{await O(e);const n=await M();return await ie(t),n}catch(e){throw t(te(e.message)),new Error(e.message)}finally{t(ee())}}},n.unlockFailed=j,n.unlockHardwareWalletAccounts=function(e,t,n,a){return r.default.debug("background.unlockHardwareWalletAccount",e,t,n,a),async o=>{o(Z());for(const s of e)try{await(0,C.submitRequestToBackground)("unlockHardwareWalletAccount",[s,t,n,a])}catch(e){throw r.default.error(e),o(te(e.message)),o(ee()),e}return o(ee()),undefined}},n.unlockInProgress=q,n.unlockSucceeded=W,n.updateAndApproveTx=function(e,t){return n=>(!t&&n(Z()),new Promise(((t,a)=>{const o=(0,C.generateActionId)();(0,C.callBackgroundMethod)("updateAndApproveTransaction",[e,o],(o=>{if(n(U(e.id,e.txParams)),n((0,h.resetSendState)()),o)return n(F(o)),n(k()),r.default.error(o.message),void a(o);t(e)}))})).then((()=>x())).then((e=>n(K(e)))).then((()=>(n((0,h.resetSendState)()),n(L(e.id)),n(ee()),n(B("")),n(J()),e))).catch((e=>(n(ee()),Promise.reject(e)))))},n.updateAndSetCustomRpc=function(e,t,n="ETH",a,o){return async s=>{r.default.debug(`background.updateAndSetCustomRpc: ${e} ${t} ${n} ${a}`);try{await(0,C.submitRequestToBackground)("updateAndSetCustomRpc",[e,t,n,a||e,o])}catch(e){return r.default.error(e),void s(te("Had a problem changing networks!"))}s({type:v.SET_RPC_TARGET,value:e})}},n.updateCollectibleDropDownState=function(e){return async t=>{await(0,C.submitRequestToBackground)("updateCollectibleDropDownState",[e]),await ie(t)}},n.updateCurrentLocale=ce,n.updateCustomNonce=B,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async r=>{await Promise.all([(0,C.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,C.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,C.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await ie(r)}},n.updateEditableParams=function(e,t){return async n=>{let a;try{a=await(0,C.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw n(F(e)),r.default.error(e.message),e}return await ie(n),a}},n.updateEventFragment=function(e,t){return(0,C.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateFeatureFlags=re,n.updateMetamaskState=K,n.updatePreferences=oe,n.updatePreviousGasParams=function(e,t){return async n=>{let a;try{a=await(0,C.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw n(F(e)),r.default.error(e.message),e}return a}},n.updateProviderType=z,n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,C.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if(r.default.error(e),e.message.startsWith("Fetch error:")){const t=(0,_.parseSmartTransactionsError)(e.message);n({type:v.SET_SMART_TRANSACTIONS_ERROR,payload:t})}throw e}}},n.updateSwapApprovalTransaction=function(e,t){return async n=>{let a;try{a=await(0,C.submitRequestToBackground)("updateSwapApprovalTransaction",[e,t])}catch(e){throw n(F(e)),r.default.error(e.message),e}return a}},n.updateSwapTransaction=function(e,t){return async n=>{let a;try{a=await(0,C.submitRequestToBackground)("updateSwapTransaction",[e,t])}catch(e){throw n(F(e)),r.default.error(e.message),e}return a}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,C.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ie(t)}},n.updateTokenType=async function(e){let t={};try{t=await(0,C.submitRequestToBackground)("updateTokenType",[e])}catch(e){r.default.error(e)}return t},n.updateTransaction=function(e,t){return async n=>{!t&&n(Z());try{await(0,C.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(U(e.id,e.txParams)),n(ee()),n(F(t)),n(k()),r.default.error(t.message),t}try{n(U(e.id,e.txParams));return n(K(await x())),n(V({id:e.id})),e}finally{n(ee())}}},n.updateTransactionGasFees=function(e,t){return async n=>{let a;try{a=await(0,C.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw n(F(e)),r.default.error(e.message),e}return a}},n.updateTransactionParams=U,n.updateTransactionSendFlowHistory=function(e,t,n){return async a=>{let o;try{o=await(0,C.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw a(F(e)),r.default.error(e.message),e}return o}},n.updateViewedNotifications=function(e){return(0,C.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=P,n.verifySeedPhrase=M;var r=N(e("loglevel")),a=e("@sentry/browser"),o=e("lodash"),s=N(e("../../app/scripts/lib/buy-url")),i=e("../helpers/utils/transactions.util"),c=N(e("../../shared/lib/switch-direction")),u=e("../../shared/constants/app"),d=e("../helpers/utils/confirm-tx.util"),l=N(e("../helpers/utils/tx-helper")),f=e("../../app/scripts/lib/util"),p=e("../selectors"),h=e("../ducks/send"),g=e("../ducks/alerts/unconnected-account"),m=e("../ducks/metamask/metamask"),T=e("../../shared/modules/hexstring-utils"),y=e("../../shared/constants/hardware-wallets"),E=e("../../shared/constants/metametrics"),_=e("../pages/swaps/swaps.util"),S=e("../../shared/modules/string-utils"),A=e("../helpers/constants/notifications"),I=e("../ducks/app/app"),w=e("../../shared/lib/transactions-controller-utils"),R=e("../helpers/utils/i18n-helper"),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("./actionConstants")),C=e("./action-queue");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function N(e){return e&&e.__esModule?e:{default:e}}function k(){return{type:v.GO_HOME}}function O(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function D(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function P(e){return new Promise(((t,n)=>{(0,C.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function M(){const e=await(0,C.submitRequestToBackground)("verifySeedPhrase");return t.from(e).toString("utf8")}function B(e){return{type:v.UPDATE_CUSTOM_NONCE,value:e}}const x=()=>(r.default.debug("background.getState"),new Promise(((e,t)=>{(0,C.callBackgroundMethod)("getState",[],((n,r)=>{n?t(n):e(r)}))})));function L(e){return(t,n)=>{const r=n(),{unapprovedTxs:a,unapprovedMsgs:o,unapprovedPersonalMsgs:s,unapprovedTypedMessages:i,network:c,provider:{chainId:u}}=r.metamask,d=(0,l.default)(a,o,s,i,c,u).filter((t=>t.id!==e));t({type:v.COMPLETED_TX,value:{id:e,unconfirmedActionsCount:d.length}})}}function U(e,t){return{type:v.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function F(e){return{type:v.TRANSACTION_ERROR,message:e.message}}function H(){return e=>new Promise((t=>{(0,C.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e(G(!1)),t()}))})).then((()=>ie(e)))}function G(e=!0){return{type:v.FORGOT_PASSWORD,value:e}}function q(){return{type:v.UNLOCK_IN_PROGRESS}}function j(e){return{type:v.UNLOCK_FAILED,value:e}}function W(e){return{type:v.UNLOCK_SUCCEEDED,value:e}}function K(e){return(t,n)=>{var r,a,s,i;const{metamask:c}=n(),{currentLocale:u,selectedAddress:d,provider:l}=c,{currentLocale:f,selectedAddress:g,provider:m}=e;u&&f&&u!==f&&t(ce(f)),d!==g&&t({type:v.SELECTED_ADDRESS_CHANGED});const T=null!==(r=null===(a=e.addressBook)||void 0===a?void 0:a[null==m?void 0:m.chainId])&&void 0!==r?r:{},y=null!==(s=null===(i=c.addressBook)||void 0===i?void 0:i[null==l?void 0:l.chainId])&&void 0!==s?s:{},E=(0,p.getMetaMaskAccounts)({metamask:e}),_=(0,p.getMetaMaskAccounts)({metamask:c}),S=E[g],A=E[d];Object.entries(_).forEach((([e,n])=>{(0,o.isEqual)(n,E[e])||t({type:v.ACCOUNT_CHANGED,payload:{account:E[e]}})})),!1===(0,o.isEqual)(A,S)&&t({type:v.SELECTED_ACCOUNT_CHANGED,payload:{account:S}}),!1===(0,o.isEqual)(y,T)&&t({type:v.ADDRESS_BOOK_UPDATED,payload:{addressBook:T}}),!1===(0,o.isEqual)(c.gasFeeEstimates,e.gasFeeEstimates)&&t({type:v.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:e.gasFeeEstimates,gasEstimateType:e.gasEstimateType}}),t({type:v.UPDATE_METAMASK_STATE,value:e}),l.chainId!==m.chainId&&(t({type:v.CHAIN_CHANGED,payload:m.chainId}),t((0,h.initializeSendState)({chainHasChanged:!0})))}}async function Y(e){r.default.debug("background.setSelectedAddress"),await(0,C.submitRequestToBackground)("setSelectedAddress",[e])}function $(){return{type:v.SHOW_ACCOUNTS_PAGE}}function V({id:e}={}){return{type:v.SHOW_CONF_TX_PAGE,id:e}}function Q(e,t,n,a,o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(Z());try{await(0,C.submitRequestToBackground)("addToken",[e,t,n,a])}catch(e){r.default.error(e),s(te(e.message))}finally{await ie(s),s(ee())}}}function z(e){return{type:v.SET_PROVIDER_TYPE,value:e}}function X(e){return{type:v.MODAL_OPEN,payload:e}}function J(){return(e,t)=>{(0,f.getEnvironmentType)()!==u.ENVIRONMENT_TYPE_NOTIFICATION||(0,d.hasUnconfirmedTransactions)(t())||Ee()}}function Z(e){return{type:v.SHOW_LOADING,value:e}}function ee(){return{type:v.HIDE_LOADING}}function te(e){return{type:v.DISPLAY_WARNING,value:e}}function ne(e){return{type:v.SHOW_PRIVATE_KEY,value:e}}function re(e){return{type:v.UPDATE_FEATURE_FLAGS,value:e}}function ae(e,t){return n=>(n(Z()),new Promise(((r,a)=>{(0,C.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n(ee()),e)return n(te(e.message)),void a(e);n(oe(t)),r(t)}))})))}function oe(e){return{type:v.UPDATE_PREFERENCES,value:e}}function se(){return{type:v.COMPLETE_ONBOARDING}}async function ie(e){let t;r.default.debug("background.getState");try{t=await(0,C.submitRequestToBackground)("getState")}catch(t){throw e(te(t.message)),t}return e(K(t)),t}function ce(e){return async t=>{t(Z());try{await(0,R.loadRelativeTimeFormatLocaleData)(e);const n=await(0,R.fetchLocale)(e),r=await(0,C.submitRequestToBackground)("setCurrentLocale",[e]);await(0,c.default)(r),t(ue(e,n))}catch(e){return void t(te(e.message))}finally{t(ee())}}}function ue(e,t){return{type:v.SET_CURRENT_LOCALE,value:{locale:e,messages:t}}}function de(){return{type:v.LOADING_METHOD_DATA_STARTED}}function le(){return{type:v.LOADING_METHOD_DATA_FINISHED}}function fe(){return e=>new Promise(((t,n)=>{(0,C.callBackgroundMethod)("initializeThreeBox",[],(r=>{if(r)return e(te(r.message)),void n(r);t()}))}))}function pe(){return e=>new Promise(((t,n)=>{(0,C.callBackgroundMethod)("turnThreeBoxSyncingOn",[],(r=>{if(r)return e(te(r.message)),void n(r);t()}))}))}function he(e){return t=>new Promise(((n,r)=>{(0,C.callBackgroundMethod)("setThreeBoxSyncingPermission",[e],(e=>{if(e)return t(te(e.message)),void r(e);n()}))}))}function ge(e){return{type:v.SET_NEXT_NONCE,value:e}}function me(e){return{type:v.SET_REQUEST_ACCOUNT_TABS,value:e}}function Te(e){return{type:v.SET_OPEN_METAMASK_TAB_IDS,value:e}}function ye(e){return{type:v.SET_CURRENT_WINDOW_TAB,value:e}}async function Ee(){await(0,C.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function _e(e,t){return(0,C.submitRequestToBackground)("trackMetaMetricsEvent",[e,t])}async function Se(e){await(0,C.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const Ae=async(e,t,n)=>{const r=t.map((t=>{const r={...e,maxFeePerGas:(0,w.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,w.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,w.decimalToHex)(21e3):e.gas,value:e.value};return n&&(r.to=r.from,r.data="0x"),r}));return await(0,C.submitRequestToBackground)("approveTransactionsWithSameNonce",[r])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[807,{"./DataItem":806,buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,n){(function(n){(function(){!function(e,n){"function"==typeof define&&define.amd?define([],n):void 0!==t&&t.exports?t.exports=n():e.CBOR=n()}(this,(function(){const{DataItem:t}=e("./DataItem");var r=function(){function e(e){this.$hex=e}e.prototype={length:function(){return this.$hex.length/2},toString:function(e){if(!e||"hex"===e||16===e)return this.$hex;if("utf-8"===e){for(var t="",n=0;n<this.$hex.length;n+=2)t+="%"+this.$hex.substring(n,n+2);return decodeURIComponent(t)}if("latin"===e){for(t=[],n=0;n<this.$hex.length;n+=2)t.push(parseInt(this.$hex.substring(n,n+2),16));return String.fromCharCode.apply(String,t)}throw new Error("Unrecognised format: "+e)}},e.fromLatinString=function(t){for(var n="",r=0;r<t.length;r++){var a=t.charCodeAt(r).toString(16);1===a.length&&(a="0"+a),n+=a}return new e(n)},e.fromUtf8String=function(t){for(var n=encodeURIComponent(t),r="",a=0;a<n.length;a++)if("%"===n.charAt(a))r+=n.substring(a+1,a+3),a+=2;else{var o=n.charCodeAt(a).toString(16);o.length<2&&(o="0"+o),r+=o}return new e(r)};var r=[],a={},o=function(e){return function(){throw new Error(e+" not implemented")}};function s(){}function i(){}function c(e,t){var n=e.value;return n<24?n:24==n?t.readByte():25==n?t.readUint16():26==n?t.readUint32():27==n?t.readUint64():31==n?null:void o("Additional info: "+n)()}function u(e,t,n){var r=e<<5;t<24?n.writeByte(r|t):t<256?(n.writeByte(24|r),n.writeByte(t)):t<65536?(n.writeByte(25|r),n.writeUint16(t)):t<4294967296?(n.writeByte(26|r),n.writeUint32(t)):(n.writeByte(27|r),n.writeUint64(t))}s.prototype={peekByte:o("peekByte"),readByte:o("readByte"),readChunk:o("readChunk"),readFloat16:function(){var e=this.readUint16(),t=(32767&e)>>10,n=1023&e,r=32768&e;if(31===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-25)*(1024+n):Math.pow(2,-24)*n;return r?-a:a},readFloat32:function(){var e=this.readUint32(),t=(2147483647&e)>>23,n=8388607&e,r=2147483648&e;if(255===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-23-127)*(8388608+n):Math.pow(2,-149)*n;return r?-a:a},readFloat64:function(){var e=this.readUint32(),t=e>>20&2047,n=4294967296*(1048575&e)+this.readUint32(),r=2147483648&e;if(2047===t)return 0===n?r?-Infinity:Infinity:NaN;var a=t?Math.pow(2,t-52-1023)*(4503599627370496+n):Math.pow(2,-1074)*n;return r?-a:a},readUint16:function(){return 256*this.readByte()+this.readByte()},readUint32:function(){return 65536*this.readUint16()+this.readUint16()},readUint64:function(){return 4294967296*this.readUint32()+this.readUint32()}},i.prototype={writeByte:o("writeByte"),result:o("result"),writeFloat16:o("writeFloat16"),writeFloat32:o("writeFloat32"),writeFloat64:o("writeFloat64"),writeUint16:function(e){this.writeByte(e>>8&255),this.writeByte(255&e)},writeUint32:function(e){this.writeUint16(e>>16&65535),this.writeUint16(65535&e)},writeUint64:function(e){if(e>=9007199254740992||e<=-9007199254740992)throw new Error("Cannot encode Uint64 of: "+e+" magnitude to big (floating point errors)");this.writeUint32(Math.floor(e/4294967296)),this.writeUint32(e%4294967296)},writeString:o("writeString"),canWriteBinary:function(e){return!1},writeBinary:o("writeChunk")};var d=new Error;function l(e){var t=function(e){var t=e.readByte();return{type:t>>5,value:31&t}}(e);switch(t.type){case 0:return c(t,e);case 1:return-1-c(t,e);case 2:return e.readChunk(c(t,e));case 3:return e.readChunk(c(t,e)).toString("utf-8");case 4:case 5:var n=c(t,e),r=[];if(null!==n){5===t.type&&(n*=2);for(var o=0;o<n;o++)r[o]=l(e)}else for(var s;(s=l(e))!==d;)r.push(s);if(5===t.type){var i={};for(o=0;o<r.length;o+=2)i[r[o]]=r[o+1];return i}return r;case 6:var u=c(t,e),f=a[u];r=l(e);return f?f(r):r;case 7:if(25===t.value)return e.readFloat16();if(26===t.value)return e.readFloat32();if(27===t.value)return e.readFloat64();switch(c(t,e)){case 20:return!1;case 21:return!0;case 22:return null;case 23:return undefined;case null:return d;default:throw new Error("Unknown fixed value: "+t.value)}default:throw new Error("Unsupported header: "+JSON.stringify(t))}throw new Error("not implemented yet")}function f(e,t){for(var n=0;n<r.length;n++){var a=r[n].fn(e);if(a!==undefined)return u(6,r[n].tag,t),f(a,t)}if(e&&"function"==typeof e.toCBOR&&(e=e.toCBOR()),!1===e)u(7,20,t);else if(!0===e)u(7,21,t);else if(null===e)u(7,22,t);else if(e===undefined)u(7,23,t);else if("number"==typeof e)Math.floor(e)===e&&e<9007199254740992&&e>-9007199254740992?e<0?u(1,-1-e,t):u(0,e,t):(!function(e,t,n){n.writeByte(e<<5|t)}(7,27,t),t.writeFloat64(e));else if("string"==typeof e)t.writeString(e,(function(e){u(3,e,t)}));else if(t.canWriteBinary(e))t.writeBinary(e,(function(e){u(2,e,t)}));else{if("object"!=typeof e)throw new Error("CBOR encoding not supported: "+e);if(g.config.useToJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),Array.isArray(e)){u(4,e.length,t);for(n=0;n<e.length;n++)f(e[n],t)}else{var o=Object.keys(e);u(5,o.length,t);for(n=0;n<o.length;n++){const r=parseInt(o[n]);isNaN(r)?(f(o[n],t),f(e[o[n]],t)):(f(r,t),f(e[o[n]],t))}}}}var p=[],h=[],g={config:{useToJSON:!0},addWriter:function(e,t){"string"==typeof e?h.push((function(n){if(e===n)return t(n)})):h.push(e)},addReader:function(e,t){"string"==typeof e?p.push((function(n,r){if(e===r)return t(n,r)})):p.push(e)},encode:function(e,t){for(var n=0;n<h.length;n++){var r=(0,h[n])(t);if(r)return f(e,r),r.result()}throw new Error("Unsupported output format: "+t)},encodeDataItem:function(e,t){for(var n=0;n<h.length;n++){var r=(0,h[n])(t);if(r)return e.getTag()!==undefined?(f(e,r),r.result()):(f(e.getData(),r),r.result())}throw new Error("Unsupported output format: "+t)},decode:function(e,t){for(var n=0;n<p.length;n++){var r=(0,p[n])(e,t);if(r)return l(r)}throw new Error("Unsupported input format: "+t)},decodeToDataItem:function(e,n){for(var r=0;r<p.length;r++){var a=(0,p[r])(e,n);if(a){const e=l(a);return e instanceof t?e:new t(e)}}throw new Error("Unsupported input format: "+n)},addSemanticEncode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return r.push({tag:e,fn:t}),this},addSemanticDecode:function(e,t){if("number"!=typeof e||e%1!=0||e<0)throw new Error("Tag must be a positive integer");return a[e]=t,this}};function m(e){this.buffer=e,this.pos=0}function T(e){this.byteLength=0,this.defaultBufferLength=16384,this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0,this.completeBuffers=[],this.stringFormat=e}function y(e){this.hex=e,this.pos=0}function E(e){this.$hex="",this.finalFormat=e||"hex"}return m.prototype=Object.create(s.prototype),m.prototype.peekByte=function(){return this.buffer[this.pos]},m.prototype.readByte=function(){return this.buffer[this.pos++]},m.prototype.readUint16=function(){var e=this.buffer.readUInt16BE(this.pos);return this.pos+=2,e},m.prototype.readUint32=function(){var e=this.buffer.readUInt32BE(this.pos);return this.pos+=4,e},m.prototype.readFloat32=function(){var e=this.buffer.readFloatBE(this.pos);return this.pos+=4,e},m.prototype.readFloat64=function(){var e=this.buffer.readDoubleBE(this.pos);return this.pos+=8,e},m.prototype.readChunk=function(e){var t=n.alloc(e);return this.buffer.copy(t,0,this.pos,this.pos+=e),t},T.prototype=Object.create(i.prototype),T.prototype.writeByte=function(e){this.latestBuffer[this.latestBufferOffset++]=e,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0),this.byteLength++},T.prototype.writeFloat32=function(e){var t=n.alloc(4);t.writeFloatBE(e,0),this.writeBuffer(t)},T.prototype.writeFloat64=function(e){var t=n.alloc(8);t.writeDoubleBE(e,0),this.writeBuffer(t)},T.prototype.writeString=function(e,t){var r=n.from(e,"utf-8");t(r.length),this.writeBuffer(r)},T.prototype.canWriteBinary=function(e){return e instanceof n},T.prototype.writeBinary=function(e,t){t(e.length),this.writeBuffer(e)},T.prototype.writeBuffer=function(e){if(!(e instanceof n))throw new TypeError("BufferWriter only accepts Buffers");this.latestBufferOffset?this.latestBuffer.length-this.latestBufferOffset>=e.length?(e.copy(this.latestBuffer,this.latestBufferOffset),this.latestBufferOffset+=e.length,this.latestBufferOffset>=this.latestBuffer.length&&(this.completeBuffers.push(this.latestBuffer),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0)):(this.completeBuffers.push(this.latestBuffer.slice(0,this.latestBufferOffset)),this.completeBuffers.push(e),this.latestBuffer=n.alloc(this.defaultBufferLength),this.latestBufferOffset=0):this.completeBuffers.push(e),this.byteLength+=e.length},T.prototype.result=function(){for(var e=n.alloc(this.byteLength),t=0,r=0;r<this.completeBuffers.length;r++){var a=this.completeBuffers[r];a.copy(e,t,0,a.length),t+=a.length}return this.latestBufferOffset&&this.latestBuffer.copy(e,t,0,this.latestBufferOffset),this.stringFormat?e.toString(this.stringFormat):e},"function"==typeof n&&(g.addReader((function(e,t){return e instanceof n?new m(e):"hex"===t||"base64"===t?new m(n.from(e,t)):void 0})),g.addWriter((function(e){return e&&"buffer"!==e?"hex"===e||"base64"===e?new T(e):void 0:new T}))),y.prototype=Object.create(s.prototype),y.prototype.peekByte=function(){var e=this.hex.substring(this.pos,2);return parseInt(e,16)},y.prototype.readByte=function(){var e=this.hex.substring(this.pos,this.pos+2);return this.pos+=2,parseInt(e,16)},y.prototype.readChunk=function(t){var r=this.hex.substring(this.pos,this.pos+2*t);return this.pos+=2*t,"function"==typeof n?n.from(r,"hex"):new e(r)},E.prototype=Object.create(i.prototype),E.prototype.writeByte=function(e){if(e<0||e>255)throw new Error("Byte value out of range: "+e);var t=e.toString(16);1==t.length&&(t="0"+t),this.$hex+=t},E.prototype.canWriteBinary=function(t){return t instanceof e||"function"==typeof n&&t instanceof n},E.prototype.writeBinary=function(t,r){if(t instanceof e)r(t.length()),this.$hex+=t.$hex;else{if(!("function"==typeof n&&t instanceof n))throw new TypeError("HexWriter only accepts BinaryHex or Buffers");r(t.length),this.$hex+=t.toString("hex")}},E.prototype.result=function(){return"buffer"===this.finalFormat&&"function"==typeof n?n.from(this.$hex,"hex"):new e(this.$hex).toString(this.finalFormat)},E.prototype.writeString=function(t,n){var r=e.fromUtf8String(t);n(r.length()),this.$hex+=r.$hex},g.addReader((function(t,n){return t instanceof e||t.$hex?new y(t.$hex):"hex"===n?new y(t):void 0})),g.addWriter((function(e){if("hex"===e)return new E})),g}();return r.addSemanticEncode(0,(function(e){if(e instanceof Date)return e.toISOString()})).addSemanticDecode(0,(function(e){return new Date(e)})).addSemanticDecode(1,(function(e){return new Date(e)})),r}))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[808,{"./DataItem":806,"./cbor-sync":807},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DataItem=n.addWriter=n.addReader=n.addSemanticEncode=n.addSemanticDecode=n.decodeToDataItem=n.encodeDataItem=void 0;var r=e("./cbor-sync");Object.defineProperty(n,"encodeDataItem",{enumerable:!0,get:function(){return r.encodeDataItem}}),Object.defineProperty(n,"decodeToDataItem",{enumerable:!0,get:function(){return r.decodeToDataItem}}),Object.defineProperty(n,"addSemanticDecode",{enumerable:!0,get:function(){return r.addSemanticDecode}}),Object.defineProperty(n,"addSemanticEncode",{enumerable:!0,get:function(){return r.addSemanticEncode}}),Object.defineProperty(n,"addReader",{enumerable:!0,get:function(){return r.addReader}}),Object.defineProperty(n,"addWriter",{enumerable:!0,get:function(){return r.addWriter}});var a=e("./DataItem");Object.defineProperty(n,"DataItem",{enumerable:!0,get:function(){return a.DataItem}})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[809,{"./RegistryType":802,"./ScriptExpression":803,"./utils":811},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./utils"),a=e("./RegistryType"),o=e("./ScriptExpression"),s=Object.values(a.RegistryTypes).filter((e=>!!e.getTag())).map((e=>e.getTag())),i=Object.values(o.ScriptExpressions).map((e=>e.getTag()));(0,r.patchTags)(s.concat(i))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[810,{},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[811,{"./lib":808},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.patchTags=void 0;const r=e("./lib"),a=[];n.patchTags=e=>{e.forEach((e=>{a.find((t=>t===e))||((0,r.addSemanticEncode)(e,(t=>{if(t instanceof r.DataItem&&t.getTag()===e)return t.getData()})),(0,r.addSemanticDecode)(e,(t=>new r.DataItem(t,e))),a.push(e))}))}}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry"}],[812,{},function(){with(this)return function(){"use strict";return function(e,t,n){var r,a,o,s,i,c,u,d,l,f,p,h,g,m,T,y,E,_,S,A,I,w,R,v,C;!function(e){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:{};function r(e,t){return e!==n&&("function"==typeof Object.create?Object.defineProperty(e,"__esModule",{value:!0}):e.__esModule=!0),function(n,r){return e[n]=t?t(n,r):r}}"function"==typeof define&&define.amd?define("tslib",["exports"],(function(t){e(r(n,r(t)))})):"object"==typeof t&&"object"==typeof t.exports?e(r(n,r(t.exports))):e(r(n))}((function(e){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};r=function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)},a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n},s=function(e,t,n,r){var a,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(o<3?a(s):o>3?a(t,n,s):a(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=function(e,t){return function(n,r){t(n,r,e)}},c=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},u=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(a=s.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){s.label=o[1];break}if(6===o[0]&&s.label<a[1]){s.label=a[1],a=o;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(o);break}a[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},l=function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||C(t,e,n)},C=Object.create?function(e,t,n,r){r===undefined&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]},f=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},p=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(a)throw a.error}}return s},h=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(p(arguments[t]));return e},g=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),a=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,i=o.length;s<i;s++,a++)r[a]=o[s];return r},m=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},T=function(e){return this instanceof T?(this.v=e,this):new T(e)},y=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||i(e,t)}))})}function i(e,t){try{(n=a[e](t)).value instanceof T?Promise.resolve(n.value.v).then(c,u):d(o[0][2],n)}catch(e){d(o[0][3],e)}var n}function c(e){i("next",e)}function u(e){i("throw",e)}function d(e,t){e(t),o.shift(),o.length&&i(o[0][0],o[0][1])}},E=function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,a){t[r]=e[r]?function(t){return(n=!n)?{value:T(e[r](t)),done:"return"===r}:a?a(t):t}:a}},_=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=f(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,a){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,a,(t=e[n](t)).done,t.value)}))}}},S=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};var n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};A=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&C(t,e,r);return n(t,e),t},I=function(e){return e&&e.__esModule?e:{default:e}},w=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},R=function(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?a.call(e,n):a?a.value=n:t.set(e,n),n},v=function(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)},e("__extends",r),e("__assign",a),e("__rest",o),e("__decorate",s),e("__param",i),e("__metadata",c),e("__awaiter",u),e("__generator",d),e("__exportStar",l),e("__createBinding",C),e("__values",f),e("__read",p),e("__spread",h),e("__spreadArrays",g),e("__spreadArray",m),e("__await",T),e("__asyncGenerator",y),e("__asyncDelegator",E),e("__asyncValues",_),e("__makeTemplateObject",S),e("__importStar",A),e("__importDefault",I),e("__classPrivateFieldGet",w),e("__classPrivateFieldSet",R),e("__classPrivateFieldIn",v)}))}}},{package:"@keystonehq/bc-ur-registry-eth>@keystonehq/bc-ur-registry>tslib"}],[86,{"@sentry/utils":1876},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.FilterEvents=void 0;var r=e("@sentry/utils");function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class o{constructor({getMetaMetricsEnabled:e}){a(this,"name",o.id),a(this,"getMetaMetricsEnabled",void 0),this.getMetaMetricsEnabled=e}setupOnce(e,t){e((e=>{const n=t().getIntegration(o);return n&&!n.getMetaMetricsEnabled()?(r.logger.warn("Event dropped due to MetaMetrics setting."),null):e}))}}n.FilterEvents=o,a(o,"id","FilterEvents")}}},{package:"$root$"}],[87,{"../../../shared/constants/app":7055,"./extractEthjsErrorMessage":63,"./sentry-filter-events":86,"@sentry/browser":1817,"@sentry/integrations":1857,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.SENTRY_STATE=void 0,n.default=function({release:e,getState:t}){if(!e)throw new Error("Missing release");const n=f===s.BuildType.main?d:"pull-request-flask";let r;console.log(`Setting up Sentry Remote Error Reporting for '${n}': SENTRY_DSN_DEV`),r=l;return a.init({dsn:r,debug:false,environment:n,integrations:[new i.FilterEvents({getMetaMetricsEnabled:function(){if(!t)return!1;{var e,n;const r=t();if(null==r||null===(e=r.store)||void 0===e||null===(n=e.metamask)||void 0===n||!n.participateInMetaMetrics)return!1}return!0}}),new o.Dedupe,new o.ExtraErrorData],release:e,beforeSend:e=>function(e){try{if(function(e){!function(e,t){"string"==typeof e.message&&(e.message=t(e.message));e.exception&&e.exception.values&&e.exception.values.forEach((e=>{"string"==typeof e.value&&(e.value=t(e.value))}))}(e,(e=>{let t=(0,c.default)(e);return 0===t.indexOf("Transaction Failed: known transaction")&&(t="Transaction Failed: known transaction"),t}))}(e),function(e){e.request.url=p(e.request.url),e.exception&&e.exception.values&&e.exception.values.forEach((e=>{e.stacktrace&&e.stacktrace.frames.forEach((e=>{e.filename=p(e.filename)}))}))}(e),t){const n=t();e.extra||(e.extra={}),e.extra.appState=n}}catch(e){console.warn(e)}return e}(e),beforeBreadcrumb(e){if(!t)return null;{var n,r,a,o;const s=t();if(Object.values(s).length&&(null==s||null===(n=s.store)||void 0===n||null===(r=n.metamask)||void 0===r||!r.participateInMetaMetrics||null==s||null===(a=s.store)||void 0===a||null===(o=a.metamask)||void 0===o||!o.completedOnboarding||"ui.input"===(null==e?void 0:e.category)))return null}return e}}),a};var r,a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(r,o,s):r[o]=e[o]}r.default=e,n&&n.set(e,r);return r}(e("@sentry/browser")),o=e("@sentry/integrations"),s=e("../../../shared/constants/app"),i=e("./sentry-filter-events"),c=(r=e("./extractEthjsErrorMessage"))&&r.__esModule?r:{default:r};function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}const d="pull-request",l=t.env.SENTRY_DSN_DEV||"https://f59f3dd640d2429d9d0e2445a87ea8e1@sentry.io/273496",f="flask";function p(e){const t=e.split(globalThis.location.origin)[1];if(!t)return e;return`metamask${t}`}n.SENTRY_STATE={gas:!0,history:!0,metamask:{alertEnabledness:!0,completedOnboarding:!0,connectedStatusPopoverHasBeenShown:!0,conversionDate:!0,conversionRate:!0,currentBlockGasLimit:!0,currentCurrency:!0,currentLocale:!0,customNonceValue:!0,defaultHomeActiveTabName:!0,featureFlags:!0,firstTimeFlowType:!0,forgottenPassword:!0,incomingTxLastFetchedBlockByChainId:!0,ipfsGateway:!0,isAccountMenuOpen:!0,isInitialized:!0,isUnlocked:!0,metaMetricsId:!0,nativeCurrency:!0,network:!0,nextNonce:!0,participateInMetaMetrics:!0,preferences:!0,provider:{nickname:!0,ticker:!0,type:!0},seedPhraseBackedUp:!0,showRestorePrompt:!0,threeBoxDisabled:!0,threeBoxLastUpdated:!0,threeBoxSynced:!0,threeBoxSyncingAllowed:!0,unapprovedDecryptMsgCount:!0,unapprovedEncryptionPublicKeyMsgCount:!0,unapprovedMsgCount:!0,unapprovedPersonalMsgCount:!0,unapprovedTypedMessagesCount:!0,useBlockie:!0,useNonceField:!0,usePhishDetect:!0,welcomeScreenSeen:!0},unconnectedAccount:!0}}).call(this)}).call(this,e("_process"))}}},{package:"$root$"}],[88,{"obj-multiplex":6178,pump:6395},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.setupMultiplex=function(e){const t=new r.default;return(0,a.default)(e,t,e,(e=>{e&&console.error(e)})),t};var r=o(e("obj-multiplex")),a=o(e("pump"));function o(e){return e&&e.__esModule?e:{default:e}}}}},{package:"$root$"}],[90,{"../../../shared/constants/app":7055,"../../../shared/constants/network":7060,"../../../shared/modules/hexstring-utils":7081,"bn.js":2394,lodash:6046,"webextension-polyfill":7029},function(){with(this)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.BnMultiplyByFraction=function(e,t,n){const r=new a.default(t),o=new a.default(n);return e.mul(r).div(o)},n.addHexPrefix=void 0,n.bnToHex=function(e){return l(e.toString(16))},n.checkAlarmExists=function(e,t){return e.some((e=>e.name===t))},n.checkForError=function(){const{lastError:e}=r.default.runtime;if(!e)return undefined;if(e.stack&&e.message)return e;return new Error(e.message)},n.getChainType=function(e){if(e===s.CHAIN_IDS.MAINNET)return"mainnet";if(s.TEST_CHAINS.includes(e))return"testnet";return"custom"},n.getPlatform=n.getEnvironmentType=void 0,n.hexToBn=function(e){return new a.default((0,c.stripHexPrefix)(e),16)};var r=u(e("webextension-polyfill")),a=u(e("bn.js")),o=e("lodash"),s=e("../../../shared/constants/network"),i=e("../../../shared/constants/app"),c=e("../../../shared/modules/hexstring-utils");function u(e){return e&&e.__esModule?e:{default:e}}const d=(0,o.memoize)((e=>{const t=new URL(e);return"/popup.html"===t.pathname?i.ENVIRONMENT_TYPE_POPUP:["/home.html"].includes(t.pathname)?i.ENVIRONMENT_TYPE_FULLSCREEN:"/notification.html"===t.pathname?i.ENVIRONMENT_TYPE_NOTIFICATION:i.ENVIRONMENT_TYPE_BACKGROUND}));n.getEnvironmentType=(e=window.location.href)=>d(e);n.getPlatform=()=>{const{navigator:e}=window,{userAgent:t}=e;return t.includes("Firefox")?i.PLATFORM_FIREFOX:"brave"in e?i.PLATFORM_BRAVE:t.includes("Edg/")?i.PLATFORM_EDGE:t.includes("OPR")?i.PLATFORM_OPERA:i.PLATFORM_CHROME};const l=e=>"string"!=typeof e||e.match(/^-?0x/u)?e:e.match(/^-?0X/u)?e.replace("0X","0x"):e.startsWith("-")?e.replace("-","-0x"):`0x${e}`;n.addHexPrefix=l}}},{package:"$root$"}]],[],{});