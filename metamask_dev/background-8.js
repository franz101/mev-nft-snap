LavaPack.loadBundle([[6311,{"./utils":6315,buffer:2438,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("./utils").defined,i=e("varint");t.exports=function(e,t,o,a,s){for(var u=Object.keys(a),c=o.length,l={},f=0;f<c;f++){l[f]={p:i.encode(e.fields[f].tag<<3|2),h:i.encode(e.fields[f].tag<<3|o[f].type)};var h=e.fields[f];e.fields[f].packed=h.repeated&&h.options&&h.options.packed&&"false"!==h.options.packed}function d(e,t,r,n,o,a){var s=0;if(!o)for(s=0;s<r.length;s++)e[t++]=r[s];return n.message&&(i.encode(n.encodingLength(a),e,t),t+=i.encode.bytes),n.encode(a,e,t),t+n.encode.bytes}return function t(f,h,p){null==p&&(p=0),null==h&&(h=r.allocUnsafe(s(f)));var m=p,g=Object.keys(f),b=0,y=!1;for(b=0;b<u.length;b++){var v=u[b],_=a[b];if(g.indexOf(_)>-1){if(y)throw new Error("only one of the properties defined in oneof "+v+" can be set");y=!0}}for(b=0;b<c;b++){var w=o[b],E=e.fields[b],k=f[E.name],S=0;if(n(k)){var R,T=l[b].p,A=l[b].h,C=E.packed;if(E.map){var O=Object.keys(k);for(S=0;S<O.length;S++)O[S]={key:O[S],value:k[O[S]]};k=O}if(C){var P=0;for(S=0;S<k.length;S++)n(k[S])&&(P+=w.encodingLength(k[S]));if(P){for(S=0;S<A.length;S++)h[p++]=T[S];i.encode(P,h,p),p+=i.encode.bytes}}if(E.repeated)for(S=0;S<k.length;S++)R=k[S],n(R)&&(p=d(h,p,A,w,C,R));else p=d(h,p,A,w,C,k)}else if(E.required)throw new Error(E.name+" is required")}return t.bytes=p-m,h}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>protons"}],[6312,{"./utils":6315,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./utils").defined,i=e("varint");t.exports=function(e,t,r){for(var o=Object.keys(r),a=t.length,s=new Array(a),u=0;u<e.fields.length;u++){s[u]=i.encodingLength(e.fields[u].tag<<3|t[u].type);var c=e.fields[u];e.fields[u].packed=c.repeated&&c.options&&c.options.packed&&"false"!==c.options.packed}return function(u){var c=0,l=0,f=0;for(l=0;l<o.length;l++){var h=o[l],d=r[h],p=!1;for(f=0;f<d.length;f++)if(n(u[d[f]])){if(p)throw new Error("only one of the properties defined in oneof "+h+" can be set");p=!0}}for(l=0;l<a;l++){var m,g=t[l],b=e.fields[l],y=u[b.name],v=s[l];if(n(y)){if(b.map){var _=Object.keys(y);for(f=0;f<_.length;f++)_[f]={key:_[f],value:y[_[f]]};y=_}if(b.packed){var w=0;for(f=0;f<y.length;f++)n(y[f])&&(w+=m=g.encodingLength(y[f]),g.message&&(w+=i.encodingLength(m)));w&&(c+=v+w+i.encodingLength(w))}else if(b.repeated)for(f=0;f<y.length;f++)n(y[f])&&(c+=v+(m=g.encodingLength(y[f]))+(g.message?i.encodingLength(m):0));else c+=v+(m=g.encodingLength(y))+(g.message?i.encodingLength(m):0)}else if(b.required)throw new Error(b.name+" is required")}return c}}}}},{package:"3box>ipfs>protons"}],[6313,{"safe-buffer":6615,"signed-varint":6705,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,o,a=e("varint"),s=e("signed-varint"),u=e("safe-buffer").Buffer,c=function(e,t,r,n){return t.bytes=r.bytes=0,{type:e,encode:t,decode:r,encodingLength:n}};r.make=c,r.bytes=(n=function(e){return u.isBuffer(e)?e.length:u.byteLength(e)},c(2,i=function(e,t,r){var o=r,s=n(e);return a.encode(s,t,r),r+=a.encode.bytes,u.isBuffer(e)?e.copy(t,r):t.write(e,r,s),r+=s,i.bytes=r-o,t},o=function(e,t){var r=t,n=a.decode(e,t);t+=a.decode.bytes;var i=e.slice(t,t+n);return t+=i.length,o.bytes=t-r,i},(function(e){var t=n(e);return a.encodingLength(t)+t}))),r.string=function(){var e=function(t,r,n){var i=n,o=u.byteLength(t);return a.encode(o,r,n,"utf-8"),n+=a.encode.bytes,r.write(t,n,o),n+=o,e.bytes=n-i,r},t=function(e,r){var n=r,i=a.decode(e,r);r+=a.decode.bytes;var o=e.toString("utf-8",r,r+i);return r+=i,t.bytes=r-n,o};return c(2,e,t,(function(e){var t=u.byteLength(e);return a.encodingLength(t)+t}))}(),r.bool=function(){var e=function(t,r,n){return r[n]=t?1:0,e.bytes=1,r},t=function(e,r){var n=e[r]>0;return t.bytes=1,n};return c(0,e,t,(function(e){return 1}))}(),r.int32=function(){var e=function(t,r){var n=a.decode(t,r);return e.bytes=a.decode.bytes,n>2147483647?n-4294967296:n};return c(0,a.encode,e,(function(e){return a.encodingLength(e<0?e+4294967296:e)}))}(),r.int64=function(){var e=function(t,r){var n=a.decode(t,r);if(n>=Math.pow(2,63)){for(var i=9;255===t[r+i-1];)i--;i=i||9;var o=u.allocUnsafe(i);t.copy(o,0,r,r+i),o[i-1]=127&o[i-1],n=-1*a.decode(o,0),e.bytes=10}else e.bytes=a.decode.bytes;return n},t=function(e,r,n){if(e<0){var i=n+9;for(a.encode(-1*e,r,n),r[n+=a.encode.bytes-1]=128|r[n];n<i-1;)r[++n]=255;r[i]=1,t.bytes=10}else a.encode(e,r,n),t.bytes=a.encode.bytes;return r};return c(0,t,e,(function(e){return e<0?10:a.encodingLength(e)}))}(),r.sint32=r.sint64=c(0,s.encode,s.decode,s.encodingLength),r.uint32=r.uint64=r.enum=r.varint=c(0,a.encode,a.decode,a.encodingLength),r.fixed64=r.sfixed64=function(){var e=function(t,r,n){return t.copy(r,n),e.bytes=8,r},t=function(e,r){var n=e.slice(r,r+8);return t.bytes=8,n};return c(1,e,t,(function(e){return 8}))}(),r.double=function(){var e=function(t,r,n){return r.writeDoubleLE(t,n),e.bytes=8,r},t=function(e,r){var n=e.readDoubleLE(r);return t.bytes=8,n};return c(1,e,t,(function(e){return 8}))}(),r.fixed32=function(){var e=function(t,r,n){return r.writeUInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readUInt32LE(r);return t.bytes=4,n};return c(5,e,t,(function(e){return 4}))}(),r.sfixed32=function(){var e=function(t,r,n){return r.writeInt32LE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readInt32LE(r);return t.bytes=4,n};return c(5,e,t,(function(e){return 4}))}(),r.float=function(){var e=function(t,r,n){return r.writeFloatLE(t,n),e.bytes=4,r},t=function(e,r){var n=e.readFloatLE(r);return t.bytes=4,n};return c(5,e,t,(function(e){return 4}))}()}}},{package:"3box>ipfs>protons"}],[6314,{"./decode":6310,"./encode":6311,"./encoding-length":6312,"./encodings":6313,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./encodings"),i=e("./decode"),o=e("./encode"),a=e("./encoding-length"),s=e("varint");t.exports=function(e,t){var r={},u={},c={},l=function(e,t){e.enums&&e.enums.forEach((function(e){e.id=t+(t?".":"")+e.name,u[e.id]=e,l(e,e.id)})),e.messages&&e.messages.forEach((function(n){n.id=t+(t?".":"")+n.name,r[n.id]=n,n.fields.forEach((function(n){if(n.map){var i="Map_"+n.map.from+"_"+n.map.to,o={name:i,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+i};r[o.id]||(r[o.id]=o,e.messages.push(o)),n.type=i,n.repeated=!0}})),l(n,n.id)}))};l(e,"");var f=function(e,t){e.messages.forEach((function(r){t[r.name]=h(r.name,e.id)})),e.enums.forEach((function(e){t[e.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(e.values)})),t.type=2,t.message=!0,t.name=e.name;var r={};e.fields.forEach((function(e){e.oneof&&(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(e.name))}));var n=e.fields.map((function(t){return h(t.type,e.id)})),s=a(e,n,r),u=o(e,h,n,r,s),c=i(e,h,n);return u.bytes=c.bytes=0,t.buffer=!0,t.encode=u,t.decode=c,t.encodingLength=s,t},h=function(e,i,o){if(t&&t[e])return t[e];if(n[e])return n[e];var a,l,h=(i?i+"."+e:e).split(".").map((function(t,r,n){return n.slice(0,r).concat(e).join(".")})).reverse().reduce((function(e,t){return e||r[t]||u[t]}),null);if(!1===o)return h;if(!h)throw new Error("Could not resolve "+e);return h.values?(a=h,l=Object.keys(a.values||[]).map((function(e){return parseInt(a.values[e].value,10)})),n.make(0,(function e(t,r,n){if(!l.length||-1===l.indexOf(t))throw new Error("Invalid enum value: "+t);return s.encode(t,r,n),e.bytes=s.encode.bytes,r}),(function e(t,r){var n=s.decode(t,r);if(!l.length||-1===l.indexOf(n))throw new Error("Invalid enum value: "+n);return e.bytes=s.decode.bytes,n}),s.encodingLength)):c[h.id]||f(h,c[h.id]={})};return(e.enums||[]).concat((e.messages||[]).map((function(e){return h(e.id)})))}}}},{package:"3box>ipfs>protons"}],[6315,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.defined=function(e){return null!==e&&e!==undefined&&("number"!=typeof e||!isNaN(e))}}}},{package:"3box>ipfs>protons"}],[6316,{"../../is-buffer/index.js":5584,"./compile":6314,"protocol-buffers-schema":6306},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("protocol-buffers-schema"),i=e("./compile");t.exports=function(e,t){if(t||(t={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var o="object"!=typeof e||r.isBuffer(e)?n.parse(e):e,a=function(){var e=this;i(o,t.encodings||{}).forEach((function(t){e[t.name]=function(e){if(!e)return null;var t={};return Object.keys(e).forEach((function(r){t[r]=e[r].value})),t}(t.values)||t}))};return a.prototype.toString=function(){return n.stringify(o)},a.prototype.toJSON=function(){return o},new a}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>protons"}],[6317,{},function(){with(this)return function(){"use strict";return function(e,t,r){
/*!
  * prr
  * (c) 2013 Rod Vagg <rod@vagg.org>
  * https://github.com/rvagg/prr
  * License: MIT
  */
var n,i;n=this,i=function(){var e="function"==typeof Object.defineProperty?function(e,t,r){return Object.defineProperty(e,t,r),e}:function(e,t,r){return e[t]=r.value,e};return function(t,r,n,i){var o;if(i=function(e,t){var r="object"==typeof t,n=!r&&"string"==typeof t,i=function(e){return r?!!t[e]:!!n&&t.indexOf(e[0])>-1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}}(n,i),"object"==typeof r){for(o in r)Object.hasOwnProperty.call(r,o)&&(i.value=r[o],e(t,o,i));return t}return e(t,r,i)}},void 0!==t&&t.exports?t.exports=i():n.prr=i()}}},{package:"webpack>memory-fs>errno>prr"}],[6325,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t,r,n=!1,i=!1;function o(){if(e)return e(n&&!0!==n?n:i&&!0!==i?i:null)}function a(){i=i||!0,function(e){o();var r=t;t=null,r&&r(n||i)}(),r&&r(n,(function(e){t&&t(e||n)}))}function s(e){return r=e,function(r,a){if(t=a,r&&(n=r),i)return a(i);n||(!0,e(r,(function(a,s){if(!1,n)return!r&&e(n,(function(){}));if(t){var u=t;t=null,a?(i=n||a,o(),u(n||a)):u(n||a,s)}})))}}return s.abort=function(e){i||(n=e||!0,a())},s}}}},{package:"3box>ipfs>pull-abortable"}],[6326,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t,r){var n=e.length;if(!n)return r(t);function i(){--n||r(t)}e.forEach((function(e){e?e(t,i):i()})),n||i()}t.exports=function(e){return function(t,r){!function i(){t?n(e,t,r):e.length?e[0]?e[0](null,(function(t,o){t?(e.shift(),!0===t?i():n(e,t,r)):r(null,o)})):(e.shift(),i()):r(!0)}()}}}}},{package:"3box>ipfs>pull-cat"}],[6327,{"./sink":6329,"./source":6330},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./source"),i=e("./sink");t.exports=function(){var e=n(),t=i();return{source:e,sink:t,resolve:function(r){e.resolve(r.source),t.resolve(r.sink)}}}}}},{package:"3box>ipfs>pull-defer"}],[6328,{"./duplex":6327,"./sink":6329,"./source":6330,"./through":6331},function(){with(this)return function(){"use strict";return function(e,t,r){r.source=e("./source"),r.through=e("./through"),r.sink=e("./sink"),r.duplex=e("./duplex")}}},{package:"3box>ipfs>pull-defer"}],[6329,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t,r=!1;function n(n){if(!n)throw new Error("must be passed a readable");t=n,r&&e(t)}return n.resolve=n.ready=n.start=function(i){return r=!0,e=i||e,t&&e(t),n},n}}}},{package:"3box>ipfs>pull-defer"}],[6330,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){var e,t,r,n,i=function(i,o){e?e(i,o):i?(n=i,r=o):t=o};return i.resolve=function(i){if(e)throw new Error("already resolved");if(!(e=i))throw new Error("no read cannot resolve!"+e);t&&i(null,t),r&&i(n,r)},i.abort=function(e){i.resolve((function(t,r){r(e||!0)}))},i}}}},{package:"3box>ipfs>pull-defer"}],[6331,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){var e,t,r,n,i;function o(o){return i?i(o):(e=o,function(e,i){t?t(e,i):(n=e,r=i)})}return o.resolve=function(o){if(i)throw new Error("already resolved");if(!(i=o))throw new Error("resolve *must* be passed a transform stream");e&&(t=i(e),r&&t(n,r))},o}}}},{package:"3box>ipfs>pull-defer"}],[6332,{"pull-cat":6326,"pull-pair":6346,"pull-pushable":6347,"pull-reader":6348},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("pull-reader"),i=e("pull-pushable"),o=e("pull-cat"),a=e("pull-pair");t.exports=function(e,t){"function"==typeof e&&(t=e,e={}),t=function(e){var t=0;return function(r,n,i){t++||e(r,n,i)}}(t||function(){});var r=n(e&&e.timeout||5e3),s=i((function(e){e&&t(e)})),u=a();return{handshake:{read:r.read,abort:function(e){s.end(e),r.abort(e,(function(e){})),t(e)},write:s.push,rest:function(){return s.end(),{source:r.read(),sink:u.sink}}},sink:r,source:o([s,u.source])}}}}},{package:"3box>ipfs>libp2p-secio>pull-handshake"}],[6333,{"pull-pushable":6347,"pull-reader":6348,"safe-buffer":6615,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("varint"),i=e("pull-reader"),o=e("safe-buffer").Buffer,a=e("pull-pushable");r.decode=function(e){let t=new i,r=a((e=>{t.abort(e)}));return n=>(t(n),function n(){let i=!0,o=!1;const a=(e,t)=>{o=!0,e?(r.end(e),i=!1):(r.push(t),i||n())};for(;i;)o=!1,s(t,e,a),o||(i=!1)}(),r)},r.decodeFromReader=function(e,t,r){"function"==typeof t&&(r=t,t={});s(e,t,(function(e,t){if(e)return r(!0===e?new Error("Unexpected end of input from reader."):e);r(null,t)}))};function s(e,t,r){(t=Object.assign({fixed:!1,maxLength:4194304},t||{})).fixed?function(e,t,r){e.read(4,((n,i)=>{if(n)return r(n);const o=i.readInt32BE(0);if(o>t)return r(new Error("size longer than max permitted length of "+t+"!"));u(e,o,r)}))}(e,t.maxLength,r):function(e,t,r){let i=[];0===i.length&&a();function a(){e.read(1,((s,c)=>{if(s)return r(s);if(i.push(c),c&&!(e=>!(128&e))(c[0]))return void a();const l=n.decode(o.concat(i));if(l>t)return r(new Error("size longer than max permitted length of "+t+"!"));u(e,l,((e,t)=>e?r(e):(i=[],t.length<l?r(new Error("Message length does not match prefix specified length.")):void r(null,t))))}))}}(e,t.maxLength,r)}function u(e,t,r){e.read(t,((e,t)=>{if(e)return r(e);r(null,t)}))}}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[6334,{"safe-buffer":6615,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("safe-buffer").Buffer;t.exports=function(t){t=Object.assign({fixed:!1},t||{});const r=e("varint");let o=t.fixed?null:i(),a=0,s=!1;return e=>(u,c)=>{if(u&&(s=u),s)return c(s);e(null,((e,u)=>{if(e&&(s=e),s)return c(s);if(!s&&!n.isBuffer(u))return s=new Error("data must be a buffer"),c(s);const l=s?0:u.length;let f;if(t.fixed?(f=n.alloc(4),f.writeInt32BE(l,0)):(r.encode(l,o,a),a+=r.encode.bytes,f=o.slice(a-r.encode.bytes,a),o.length-a<100&&(o=i(),a=0)),s)return c(null,f);c(null,n.concat([f,u],(t.fixed?4:r.encode.bytes)+l))}))}};function i(){return n.alloc(10240)}}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[6335,{"./decode":6333,"./encode":6334},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./encode"),i=e("./decode");r.encode=n,r.decode=i.decode,r.decodeFromReader=i.decodeFromReader}}},{package:"3box>ipfs>libp2p-secio>pull-length-prefixed"}],[6336,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t,r,n=!!e,i=(e||[]).map(a),o=0;function a(e){return{ready:!1,reading:!1,ended:!1,read:e,data:null}}function s(){if(r){!function(){var e=i.length;for(;e--;)i[e].ended&&i.splice(e,1)}();var e=i.length,a=r;if(0===e&&(t||n))return r=null,void a(t||!0);for(var s=0;s<e;s++){var u=i[(o+s)%e];if(u.ready&&!u.ended){var c=u.data;return u.ready=!1,u.data=null,o++,r=null,a(null,c)}}}}function u(){for(var e=i.length;e--;)!function(r){if(e>i.length)throw new Error("this should never happen");if(!(r.reading||r.ended||r.ready)){r.reading=!0;var n=!0;r.read(t,(function e(i,o){r.data=o,r.ready=!0,r.reading=!1,!0===i||t?r.ended=!0:i&&(t=r.ended=i),t&&!i&&r.read(t,e),n||s()})),n=!1}}(i[e]);s()}function c(e,n){t=t||e,r=n,u()}return c.add=function(e){if(!e)return n=!0,u();i.push(a(e)),u()},c.cap=function(e){c.add(null)},c}}}},{package:"3box>ipfs>datastore-core>pull-many"}],[6337,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=!1,r=0;return function(){if(r=!0,!t){for(t=!0;r;)r=!1,e();t=!1}}}}}},{package:"3box>ipfs>pull-mplex>looper"}],[6338,{"./consts":6341,"./util":6345,"async/nextTick":2133,debug:2622,events:2439,looper:6337,"pull-pushable":6347},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-pushable"),i=e("looper"),o=e("async/nextTick"),a=e("events"),s=e("debug"),{Types:u}=e("./consts"),{emitError:c}=e("./util"),l=s("pull-plex:chan");l.err=s("pull-plex:chan:err");t.exports=class extends a{constructor(e){var t;super(),e={initiator:!1,...e},this._id=e.id,this._name=e.name,this._plex=e.plex,this._open=e.open,this._initiator=e.initiator,this._endedRemote=!1,this._endedLocal=!1,this._destroy=!1,this.MSG=this._initiator?u.OUT_MESSAGE:u.IN_MESSAGE,this.END=this._initiator?u.OUT_CLOSE:u.IN_CLOSE,this.RESET=this._initiator?u.OUT_RESET:u.IN_RESET,this._log("new channel",this._name),this._msgs=n((e=>{this._log("source closed",e),e&&"boolean"!=typeof e&&o(c,this,e)})),this._source=this._msgs,this.sink=(t=this,function(e){const r=i((function(){e(null,(function(e,n){if(!t._endedLocal){if(t._endedLocal=e||!1,!0===e)return t.endChan();if(e||t._destroy)return t.destroyChan(),t.emit("error",e||t._destroy),void t.destroy();t.sendMsg(n),r()}}))}));r()})}get source(){return this._source}get id(){return this._id}get open(){return this._open}set open(e){this._open=e}get name(){return this._name}get destroyed(){return this._endedRemote&&this._endedLocal}_log(e,t){l.enabled&&l({op:e,name:this._name,id:this._id,endedLocal:this._endedLocal,endedRemote:this._endedRemote,initiator:this._initiator,data:t&&t.toString()||""})}push(e){this._log("push"),this._msgs.push(e)}close(e){this._log("close",e),this._endedRemote||(this._endedRemote=e||!0,this._msgs.end(this._endedRemote),this.emit("close",e),this.plex=null)}destroy(e){this._log("destroy",e),this._destroy=e||"channel destroyed!",this.close(this._destroy)}openChan(e){this.open||(this.open=!0,this._plex.push([this._id,u.NEW,e!==this._id.toString()?e:this._id.toString()]))}sendMsg(e){this._log("sendMsg",e),this.open||this.openChan(this.name),this._plex.push([this._id,this.MSG,e])}endChan(){this._log("endChan"),this.open&&this._plex.push([this._id,this.END])}destroyChan(){this._log("destroyChan"),this.open&&this._plex.push([this._id,this.RESET])}}}}},{package:"3box>ipfs>pull-mplex"}],[6339,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="/mplex/6.7.0"}}},{package:"3box>ipfs>pull-mplex"}],[6340,{buffer:2438,debug:2622,"pull-through":6384,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){const n=e("varint"),i=e("pull-through"),o=e("debug"),a=o("pull-plex:coder");a.err=o("pull-plex:coder:err");const s=10240,u=t.alloc(0);r.encode=()=>{let e=t.allocUnsafe(s),r=0;return i((function(i){const o=r;n.encode(i[0]<<3|i[1],e,r),r+=n.encode.bytes,n.encode(i[2]?i[2].length:0,e,r),r+=n.encode.bytes,this.queue(e.slice(o,r)),s-r<100&&(e=t.allocUnsafe(s),r=0),this.queue(i[2]?i[2]:u)}))};const c=0,l=1;r.decode=()=>{let e=c;const r=t=>{const[r,i,o]=(e=>{let t=0,r=0;try{let i=n.decode(e);return t+=n.decode.bytes,r=n.decode(e,t),t+=n.decode.bytes,[i,t,r]}catch(e){a.err(e)}return[]})(t);if(void 0!==r){const n={id:r>>3,type:7&r,data:[]};return e=l,[t.slice(i),n,o]}return[t]};let o=0,s=null,u=!1,f=[];return i((function(n){var i=this;!function a(){if(n&&n.length){if(c===e){if(u&&(f.push(n),n=t.concat(f)),[n,s,o]=r(n),!s)return u||f.push(n),void(u=!0);f=[],u=!1}l===e&&([o,n,s.data]=((r,n,i)=>{if(i<=0)return e=c,[0,r,n];let o=i-r.length;o<0&&(o=0);const a=i-o;if(r.length>0){const e=t.isBuffer(r)?r:t.from(r);n.push(e.slice(0,a))}return o<=0&&(e=c),[o,r.slice(a),n]})(n,s.data,o),o<=0&&c===e&&(s.data=t.concat(s.data),i.queue(s),s=null,o=0)),a()}}()}))}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>pull-mplex"}],[6341,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.Types={NEW:0,IN_MESSAGE:1,OUT_MESSAGE:2,IN_CLOSE:3,OUT_CLOSE:4,IN_RESET:5,OUT_RESET:6},r.MAX_MSG_SIZE=1<<20}}},{package:"3box>ipfs>pull-mplex"}],[6342,{"./codec":6339,"./mplex":6343,"./muxer":6344,debug:2622,"pull-abortable":6325,"pull-stream":6353},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-abortable"),i=e("pull-stream"),o=e("debug"),a=e("./codec"),s=e("./mplex"),u=e("./muxer"),c=o("pull-plex");function l(e,t){const r=new s(!t),o=n();i(e,r,o,e);const a=new u(e,r);return a.once("error",(e=>{c.err("got error",e),o.abort(e)})),a.on("close",(()=>{c("closing muxer"),o.abort()})),a}c.err=o("pull-plex:err"),(r=t.exports=l).pullMplex=s,r.multicodec=a,r.dialer=e=>l(e,!1),r.listener=e=>l(e,!0)}}},{package:"3box>ipfs>pull-mplex"}],[6343,{"./channel":6338,"./coder":6340,"./consts":6341,"./util":6345,"async/nextTick":2133,buffer:2438,debug:2622,events:2439,looper:6337,"pull-pushable":6347,"pull-stream":6353,"pull-through":6384},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("pull-stream"),i=e("pull-pushable"),o=e("pull-through"),a=e("looper"),s=e("async/nextTick"),u=e("events"),c=e("debug"),{emitError:l,emitStream:f}=e("./util"),{Types:h,MAX_MSG_SIZE:d}=e("./consts"),p=e("./channel"),m=e("./coder"),g=c("pull-plex");g.err=c("pull-plex:err");t.exports=class extends u{constructor(e){super(),"boolean"==typeof e&&(e={initiator:e}),e={initiator:!0,onChan:null,maxChannels:1e4,maxMsgSize:d,lazy:!1,...e},this._maxChannels=e.maxChannels,this._maxMsgSize=e.maxMsgSize,this._lazy=e.lazy,this._initiator=Boolean(e.initiator),this._chanId=0,this._inChannels=new Array(this._maxChannels/2),this._outChannels=new Array(this._maxChannels/2),this._endedRemote=!1,this._endedLocal=!1,this._chandata=i((e=>{this._log("mplex ended"),this._endedRemote=!0,this.close(e)})),e.onChan&&this.on("stream",(t=>e.onChan(t,t.id))),this.source=n(this._chandata,m.encode());const t=this;this.sink=n(o((function(e){if(e&&e.length>=t._maxMsgSize)return s(l,t,new Error("message too large!")),this.queue(null);this.queue(e)})),m.decode(),(e=>{const r=a((()=>{e(null,((e,n)=>{if(!t._endedLocal){if(!0===e)return t.close();if(e)return t.destroy(e);t._handle(n),r()}}))}));r()}))}_log(e,t){g({op:e,initiator:this._initiator,endedLocal:this._endedLocal,endedRemote:this._endedRemote,data:t&&t.toString()||""})}get initiator(){return this._initiator}close(e){if(this._log("close",e),this.destroyed)return;e&&s(l,this,e),e=e||"Underlying stream has been closed",this._endedLocal=!0;const t=Array.prototype.concat(this._outChannels,this._inChannels);for(let r of t)r&&r.close(e);this.emit("close")}get destroyed(){return this._endedRemote&&this._endedLocal}destroy(e){e=e||new Error("Underlying stream has been closed"),this._chandata.end(e),this.close(e)}push(e){e.data&&r.byteLength(e.data)>this._maxMsgSize&&this._chandata.end(new Error("message too large!")),this._chandata.push(e)}createStream(e){"number"==typeof e&&(e=e.toString());const t=this._newStream(null,!0,!1,e,this._outChannels);return this._lazy||t.openChan(e),t}_newStream(e,t,r,n,i){if(this.chanSize>=this._maxChannels)return void this.emit("error",new Error("max channels exceeded"));if("string"==typeof t&&(n=t,t=!1,r=!1),"string"==typeof r&&(n=r,r=!1),i[e="number"==typeof e?e:this._chanId++])return void this.emit("error",new Error(`channel with id ${e} already exist!`));const o=new p({id:e,name:n,plex:this,initiator:t,open:r||!1});return this._addChan(e,o,i)}_addChan(e,t,r){return t.once("close",(()=>{r[e]=null})),t.once("error",(e=>{g.err("channel error",e)})),r[e]=t,t}get chanSize(){return this._inChannels.size+this._outChannels.size}_handle(e){this._log("_handle",e);const{id:t,type:r,data:n}=e;switch(r){case h.NEW:{const e=this._newStream(t,!1,!0,n.toString(),this._inChannels);s(f,this,e,t);break}case h.OUT_MESSAGE:case h.IN_MESSAGE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.push(n);break}case h.OUT_CLOSE:case h.IN_CLOSE:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.close();break}case h.OUT_RESET:case h.IN_RESET:{const e=(1&r?this._outChannels:this._inChannels)[t];e&&e.destroy();break}default:s(l,this,new Error("Invalid message type"))}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>pull-mplex"}],[6344,{"./codec":6339,"async/nextTick":2133,debug:2622,events:2439,"interface-connection":5301},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("events").EventEmitter,i=e("interface-connection").Connection,o=e("async/nextTick"),a=e("debug"),s=e("./codec"),u=a("libp2p-mplex:muxer");function c(){}u.err=a("libp2p-mplex:muxer:error");t.exports=class extends n{constructor(e,t){super(),this.conn=e,this.multiplex=t,this.multicodec=s,t.on("close",(()=>this.emit("close"))),t.on("error",(e=>this.emit("error",e))),t.on("stream",(e=>{e.on("error",(e=>{u.err("receiver stream errored",e)})),this.emit("stream",new i(e,this.conn))}))}newStream(e){e=e||c;let t=this.multiplex.createStream();t.on("error",(e=>{u.err("initiator stream errored",e)}));const r=new i(t,this.conn);return o(e,null,r),r}end(e){if(e=e||c,this.multiplex.destroyed)return o(e);this.multiplex.once("close",e),this.multiplex.close()}}}}},{package:"3box>ipfs>pull-mplex"}],[6345,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports.emitError=function(e,t){e.emit("error",t)},t.exports.emitStream=function(e,t,r){e.emit("stream",t,r)}}}},{package:"3box>ipfs>pull-mplex"}],[6346,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){var e,t;return{source:function(r,n){e?e(r,n):t=[r,n]},sink:function(r){if("function"!=typeof r)throw new Error("read must be function");if(e)throw new Error("already piped");if(e=r,t){var n=t;t=null,e.apply(null,n)}}}}}}},{package:"3box>ipfs>pull-mplex>pull-pair"}],[6347,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){"function"==typeof e&&(t=e,e=!1);var r,n,i,o=[];function a(e,t){e&&(r=e,n&&l(r)),n=t,c()}function s(e){i=i||e||!0,c()}function u(e){i||(n?l(r,e):o.push(e))}if(e)return{push:u,end:s,source:a,buffer:o};return a.push=u,a.end=s,a.buffer=o,a;function c(){n&&(r?l(r):!o.length&&i?l(i):o.length&&l(null,o.shift()))}function l(e,r){var i=n;if(e&&t){var o=t;t=null,o(!0===e?null:e)}n=null,i(e,r)}}}}},{package:"3box>ipfs>pull-pushable"}],[6348,{"./state":6349},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./state");function i(e){return"function"==typeof e}function o(e,t){return t?function(r,n){var i=setTimeout((function(){e(new Error("pull-reader: read exceeded timeout"),n)}),t);e(r,(function(e,t){clearTimeout(i),n(e,t)}))}:e}t.exports=function(e){var t,r,a,s,u,c=[],l=!1,f=n();function h(){for(;c.length;)if(null==c[0].length&&f.has(1))c.shift().cb(null,f.get());else if(f.has(c[0].length)){var e=c.shift();e.cb(null,f.get(e.length))}else if(1==a&&c[0].length&&f.length<c[0].length){var t="stream ended with:"+f.length+" but wanted:"+c[0].length;c.shift().cb(new Error(t))}else{if(!a)return!!c.length;c.shift().cb(a)}return c.length||!f.has(1)||u}function d(){h()&&!l&&(!t||l||s||(l=!0,r(null,(function(e,t){if(l=!1,e)return a=e,h();f.add(t),d()}))))}function p(n){if(u){for(;c.length;)c.shift().cb(u);return cb&&cb(u)}r=o(n,e),t=n,d()}return p.abort=function(e,r){u=e||!0,t?(l=!0,t(u,(function(){for(;c.length;)c.shift().cb(u);r&&r(u)}))):r()},p.read=function(r,n,a){if(i(n)&&(a=n,n=e),!i(a))return s=!0,function(e,r){if(l||f.has(1)){if(e)return t(e,r);c.push({length:null,cb:r}),d()}else o(t,n)(e,(function(e,t){r(e,t)}))};var u;c.push({length:(u=r,Number.isFinite(u)?r:null),cb:a}),d()},p}}}},{package:"3box>ipfs>libp2p-secio>pull-handshake>pull-reader"}],[6349,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){t.exports=function(){var t=[],r=0;return{length:r,data:this,add:function(n){if(!e.isBuffer(n))throw new Error("data must be a buffer, was: "+JSON.stringify(n));return this.length=r+=n.length,t.push(n),this},has:function(e){return null==e?r>0:r>=e},get:function(n){var i;if(null==n||n===r){r=0;var o=t;return t=[],1==o.length?o[0]:e.concat(o)}if(t.length>1&&n<=(i=t[0].length)){var a=t[0].slice(0,n);return n===i?t.shift():t[0]=t[0].slice(n,i),r-=n,a}if(n<r){for(var s=[],u=0;u+t[0].length<n;){var c=t.shift();u+=c.length,s.push(c)}return u<n&&(s.push(t[0].slice(0,n-u)),t[0]=t[0].slice(n-u,t[0].length),this.length=r-=n),e.concat(s)}throw new Error("could not get "+n+" bytes")}}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-secio>pull-handshake>pull-reader"}],[6350,{"pull-defer/source":6330,"pull-stream/sinks/collect":6355,"pull-stream/sources/error":6365,"pull-stream/sources/values":6370},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("pull-defer/source"),i=e("pull-stream/sources/error"),o=e("pull-stream/sources/values"),a=e("pull-stream/sinks/collect");t.exports=function(e){var t=n(),r=a((function(r,n){if(r)return t.resolve(i(r));t.resolve(o(n.sort(e)))}));return function(e){return r(e),t}}}}},{package:"3box>ipfs>pull-sort"}],[6351,{"pull-stream/pull":6354},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("pull-stream/pull");t.exports=e=>async function*(){let t;for(n(e,(e=>{t=()=>new Promise(((t,r)=>{e(null,((e,n)=>!0===e?t({end:e}):e?r(e):void t({data:n})))}))}));;){const{end:e,data:r}=await t();if(e)break;yield r}}()}}},{package:"3box>ipfs>pull-stream-to-async-iterator"}],[6352,{_process:6295,stream:2441,timers:6814},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("stream");t.exports=a,t.exports.source=function(e){return a(null,e)},t.exports.sink=function(e){return a(e,null)};var o=void 0===n?r.nextTick:n;function a(e,t){e&&"object"==typeof e&&(t=e.source,e=e.sink);var r,n,a,s=[],u=[],c=new i;c.writable=c.readable=!0,c.write=function(e){return s.length?s.shift()(null,e):u.push(e),s.length||(n=!0),!!s.length},c.end=function(){t?u.length?p():t(r=!0,s.length?s.shift():function(){}):s.length&&s.shift()(!0)},c.source=function(e,t){u.length?(t(null,u.shift()),u.length||c.emit("drain")):((r=r||e)?t(r):s.push(t),n&&(n=!1,c.emit("drain")))},e&&(a=e(c.source)),a&&!t&&(t=a);var l=[],f=!1,h=!1;if(c.sink=function(e){t=e,o(p)},t){c.sink(t);var d=c.pipe.bind(c);c.pipe=function(e,t){var r=d(e,t);return c.paused&&c.resume(),r}}function p(){if(!1,t&&!h){for(;l.length&&!c.paused;)c.emit("data",l.shift());if(!c.paused){if(f)return c.emit("end");h=!0,t(null,(function e(n,i){h=!1,c.paused?(!0===n?f=n:n?c.emit("error",n):l.push(i),!0):n&&!0!==(r=n)?c.emit("error",n):(r=r||n)?c.emit("end"):(c.emit("data",i),h=!0,t(null,e))}))}}}return c.pause=function(){return c.paused=!0,c},c.resume=function(){return c.paused=!1,p(),c},c.destroy=function(){!r&&t&&t(r=!0,(function(){})),r=!0,s.length&&s.shift()(!0),c.emit("close")},c}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"3box>ipfs>pull-stream-to-stream"}],[6353,{"./pull":6354,"./sinks":6359,"./sources":6366,"./throughs":6375},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./sources"),i=e("./sinks"),o=e("./throughs");for(var a in(r=t.exports=e("./pull")).pull=r,n)r[a]=n[a];for(var a in o)r[a]=o[a];for(var a in i)r[a]=i[a]}}},{package:"3box>ipfs>pull-stream"}],[6354,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function e(t){var r=arguments.length;if("function"==typeof t&&1===t.length){for(var n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return function(t){if(null==n)throw new TypeError("partial sink should only be called once!");var i=n;switch(n=null,r){case 1:return e(t,i[0]);case 2:return e(t,i[0],i[1]);case 3:return e(t,i[0],i[1],i[2]);case 4:return e(t,i[0],i[1],i[2],i[3]);default:return i.unshift(t),e.apply(null,i)}}}var o=t;o&&"function"==typeof o.source&&(o=o.source);for(i=1;i<r;i++){var a=arguments[i];"function"==typeof a?o=a(o):a&&"object"==typeof a&&(a.sink(o),o=a.source)}return o}}}},{package:"3box>ipfs>pull-stream"}],[6355,{"./reduce":6362},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./reduce");t.exports=function(e){return n((function(e,t){return e.push(t),e}),[],e)}}}},{package:"3box>ipfs>pull-stream"}],[6356,{"./reduce":6362},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./reduce");t.exports=function(e){return n((function(e,t){return e+t}),"",e)}}}},{package:"3box>ipfs>pull-stream"}],[6357,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r,n;function i(o){if(r=o,n)return i.abort();!function i(){for(var o=!0,a=!1;o;)if(a=!1,r(null,(function(s,u){if(a=!0,s=s||n){if(o=!1,t)t(!0===s?null:s);else if(s&&!0!==s)throw s}else e&&!1===e(u)||n?(o=!1,r(n||!0,t||function(){})):o||i()})),!a)return void(o=!1)}()}return i.abort=function(e,t){if("function"==typeof e&&(t=e,e=!0),n=e||!0,r)return r(n,t||function(){})},i}}}},{package:"3box>ipfs>pull-stream"}],[6358,{"../util/prop":6382,"./drain":6357},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e}var i=e("../util/prop"),o=e("./drain");t.exports=function(e,t){var r=!1;return t?e=i(e)||n:(t=e,e=n),o((function(n){if(e(n))return r=!0,t(null,n),!1}),(function(e){r||t(!0===e?null:e,null)}))}}}},{package:"3box>ipfs>pull-stream"}],[6359,{"./collect":6355,"./concat":6356,"./drain":6357,"./find":6358,"./log":6360,"./on-end":6361,"./reduce":6362},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={drain:e("./drain"),onEnd:e("./on-end"),log:e("./log"),find:e("./find"),reduce:e("./reduce"),collect:e("./collect"),concat:e("./concat")}}}},{package:"3box>ipfs>pull-stream"}],[6360,{"./drain":6357},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./drain");t.exports=function(e){return n((function(e){console.log(e)}),e)}}}},{package:"3box>ipfs>pull-stream"}],[6361,{"./drain":6357},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./drain");t.exports=function(e){return n(null,e)}}}},{package:"3box>ipfs>pull-stream"}],[6362,{"./drain":6357},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./drain");t.exports=function(e,t,r){r||(r=t,t=null);var i=n((function(r){t=e(t,r)}),(function(e){r(e,t)}));return 2===arguments.length?function(e){e(null,(function(n,o){if(n)return r(!0===n?null:n);t=o,i(e)}))}:i}}}},{package:"3box>ipfs>pull-stream"}],[6363,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=0;return e=e||Infinity,function(r,n){return r?n&&n(r):t>e?n(!0):void n(null,t++)}}}}},{package:"3box>ipfs>pull-stream"}],[6364,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){return function(e,t){t(!0)}}}}},{package:"3box>ipfs>pull-stream"}],[6365,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return function(t,r){r(e)}}}}},{package:"3box>ipfs>pull-stream"}],[6366,{"./count":6363,"./empty":6364,"./error":6365,"./infinite":6367,"./keys":6368,"./once":6369,"./values":6370},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={keys:e("./keys"),once:e("./once"),values:e("./values"),count:e("./count"),infinite:e("./infinite"),empty:e("./empty"),error:e("./error")}}}},{package:"3box>ipfs>pull-stream"}],[6367,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e=e||Math.random,function(t,r){return t?r&&r(t):r(null,e())}}}}},{package:"3box>ipfs>pull-stream"}],[6368,{"./values":6370},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./values");t.exports=function(e){return n(Object.keys(e))}}}},{package:"3box>ipfs>pull-stream"}],[6369,{"../util/abort-cb":6381},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../util/abort-cb");t.exports=function(e,t){return function(r,i){if(r)return n(i,r,t);if(null!=e){var o=e;e=null,i(null,o)}else i(!0)}}}}},{package:"3box>ipfs>pull-stream"}],[6370,{"../util/abort-cb":6381},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../util/abort-cb");t.exports=function(e,t){if(!e)return function(e,r){return e?n(r,e,t):r(!0)};Array.isArray(e)||(e=Object.keys(e).map((function(t){return e[t]})));var r=0;return function(i,o){if(i)return n(o,i,t);r>=e.length?o(!0):o(null,e[r++])}}}}},{package:"3box>ipfs>pull-stream"}],[6371,{"../util/prop":6382},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e}var i=e("../util/prop");t.exports=function(e){if(!e)return n;e=i(e);var t,r,o=!1;return function(n){return function i(a,s){if(r)return s(r);a?(r=a,n(a,o?function(e){o?t=s:s(a)}:function(e){s(a)})):n(null,(function(n,a){n?s(n):r?s(r):(o=!0,e(a,(function(e,n){o=!1,r?(s(r),t&&t(r)):e?i(e,s):s(null,n)})))}))}}}}}},{package:"3box>ipfs>pull-stream"}],[6372,{"../util/tester":6383,"./filter":6373},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../util/tester"),i=e("./filter");t.exports=function(e){return e=n(e),i((function(t){return!e(t)}))}}}},{package:"3box>ipfs>pull-stream"}],[6373,{"../util/tester":6383},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../util/tester");t.exports=function(e){return e=n(e),function(t){return function r(n,i){for(var o,a=!0;a;)a=!1,o=!0,t(n,(function(t,n){if(!t&&!e(n))return o?a=!0:r(t,i);i(t,n)})),o=!1}}}}}},{package:"3box>ipfs>pull-stream"}],[6374,{"../sources/once":6369,"../sources/values":6370},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../sources/values"),i=e("../sources/once");t.exports=function(){return function(e){var t;return function(r,o){function a(){t(null,(function(t,r){!0===t?s():t?e(!0,(function(e){o(t)})):o(null,r)}))}function s(){t=null,e(null,(function(e,r){if(e)return o(e);Array.isArray(r)||r&&"object"==typeof r?r=n(r):"function"!=typeof r&&(r=i(r)),t=r,a()}))}r?t?t(r,(function(t){e(t||r,o)})):e(r,o):t?a():s()}}}}}},{package:"3box>ipfs>pull-stream"}],[6375,{"./async-map":6371,"./filter":6373,"./filter-not":6372,"./flatten":6374,"./map":6376,"./non-unique":6377,"./take":6378,"./through":6379,"./unique":6380},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={map:e("./map"),asyncMap:e("./async-map"),filter:e("./filter"),filterNot:e("./filter-not"),through:e("./through"),take:e("./take"),unique:e("./unique"),nonUnique:e("./non-unique"),flatten:e("./flatten")}}}},{package:"3box>ipfs>pull-stream"}],[6376,{"../util/prop":6382},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e}var i=e("../util/prop");t.exports=function(e){return e?(e=i(e),function(t){return function(r,n){t(r,(function(r,i){try{i=r?null:e(i)}catch(e){return t(e,(function(){return n(e)}))}n(r,i)}))}}):n}}}},{package:"3box>ipfs>pull-stream"}],[6377,{"./unique":6380},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./unique");t.exports=function(e){return n(e,!0)}}}},{package:"3box>ipfs>pull-stream"}],[6378,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r=(t=t||{}).last||!1,n=!1;if("number"==typeof e){r=!0;var i=e;e=function(){return--i}}return function(t){function i(e){t(!0,(function(t){r=!1,e(t||!0)}))}return function(o,a){n&&!o?r?i(a):a(n):(n=o)?t(n,a):t(null,(function(t,o){(n=n||t)?a(n):e(o)?a(null,o):(n=!0,r?a(null,o):i(a))}))}}}}}},{package:"3box>ipfs>pull-stream"}],[6379,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r=!1;function n(e){!r&&t&&(r=!0,t(!0===e?null:e))}return function(t){return function(r,i){return r&&n(r),t(r,(function(t,r){t?n(t):e&&e(r),i(t,r)}))}}}}}},{package:"3box>ipfs>pull-stream"}],[6380,{"../util/prop":6382,"./filter":6373},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e}var i=e("../util/prop"),o=e("./filter");t.exports=function(e,t){e=i(e)||n;var r={};return o((function(n){var i=e(n);return r[i]?!!t:(r[i]=!0,!t)}))}}}},{package:"3box>ipfs>pull-stream"}],[6381,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){e(t),r&&r(!0===t?null:t)}}}},{package:"3box>ipfs>pull-stream"}],[6382,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){return e&&("string"==typeof e?function(t){return t[e]}:"object"==typeof e&&"function"==typeof e.exec?function(t){var r=e.exec(t);return r&&r[0]}:e)}}}},{package:"3box>ipfs>pull-stream"}],[6383,{"./prop":6382},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./prop");function i(e){return e}t.exports=function(e){return"object"==typeof e&&"function"==typeof e.test?function(t){return e.test(t)}:n(e)||i}}}},{package:"3box>ipfs>pull-stream"}],[6384,{looper:6061},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("looper");t.exports=function(e,t){return function(r){var i,o,a=[];function s(e){a.push(e)}e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var u,c={emit:function(e,t){"data"==e&&s(t),"end"==e&&(i=!0,s(null)),"error"==e&&(o=t)},queue:s};return function(s,l){if(i=i||s,s)return r(s,(function(){if(u){var e=u;u=null,e(s)}l(s)}));u=l,n((function n(s){if(u)if(l=u,o)u=null,l(o);else if(a.length){var f=a.shift();u=null,l(null===f,f)}else r(i,(function(a,f){if(a&&!0!==a)return o=a,s();if(i=i||a)t.call(c);else if(null!==f&&(e.call(c,f),o||i))return r(o||i,(function(){u=null,l(o||i)}));s(n)}))}))}}}}}},{package:"3box>ipfs>pull-mplex>pull-through"}],[6385,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=r.once=function(e){return function(t,r){if(t)return r(t);if(null!=e){var n=e;e=null,r(null,n)}else r(!0)}};r.depthFirst=function(e,t){var r,i=[];return i.unshift(n(e)),function e(n,o){return i.length?r?o(r):void i[0](n,(function(n,a){if(n){if(!0!==n){for(r=n,i.shift();i.length;)i.shift()(n,(function(){}));return o(n)}return i.shift(),e(null,o)}i.unshift(t(a)),o(n,a)})):o(!0)}},r.widthFirst=function(e,t){var r=[];return r.push(n(e)),function e(n,i){if(!r.length)return i(!0);r[0](n,(function(n,o){if(n)return r.shift(),e(null,i);r.push(t(o)),i(n,o)}))}},r.leafFirst=function(e,t){var r=[],i=[];return r.push(n(e)),function e(n,o){r[0](n,(function(n,a){if(n)return r.shift(),i.length?o(null,i.shift()):o(!0);r.unshift(t(a)),i.unshift(a),e(null,o)}))}}}}},{package:"3box>ipfs>pull-traverse"}],[6386,{"./duplex":6387,"./web-socket":6393,"./ws-url":6394},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./web-socket"),i=e("./duplex"),o=e("./ws-url");function a(e){return"function"==typeof e}t.exports=function(e,t){a(t)&&(t={onConnect:t});var r="undefined"==typeof window?{}:window.location,s=o(e,r),u=new n(s),c=i(u,t);return c.remoteAddress=s,c.close=function(e){a(e)&&u.addEventListener("close",e),u.close()},u.addEventListener("open",(function(e){t&&a(t.onConnect)&&t.onConnect(null,c)})),c},t.exports.connect=t.exports}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6387,{"./sink":6391,"./source":6392},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./source"),i=e("./sink");t.exports=function(e,t){var r=e.upgradeReq||{};t&&t.binaryType?e.binaryType=t.binaryType:t&&t.binary&&(e.binaryType="arraybuffer");return{source:n(e,t&&t.onConnect),sink:i(e,t),headers:r.headers,url:r.url,upgrade:r.upgrade,method:r.method}}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6388,{"./client":6386,"./duplex":6387,"./server":2437,"./sink":6391,"./source":6392},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./duplex")).source=e("./source"),r.sink=e("./sink"),r.createServer=e("./server"),r.connect=e("./client")}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6389,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r=e&&(e.removeEventListener||e.removeListener);function n(){"function"==typeof r&&(r.call(e,"open",i),r.call(e,"error",o))}function i(e){n(),t()}function o(e){n(),t(e)}return e.readyState>=2?t(!0):1===e.readyState?t():(e.addEventListener("open",i),void e.addEventListener("error",o))}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6390,{"./":6388,events:2439,http:6762,https:5280,url:6883,ws:2437},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./"),i=e("ws"),o=(e("url"),e("http")),a=e("https"),s=e("events").EventEmitter;t.exports=i.Server?function(e,t){var r=new s;function u(e,t){return e.on(t,(function(){var e=[].slice.call(arguments);e.unshift(t),r.emit.apply(r,e)}))}"function"==typeof e&&(t=e,e=null),e=e||{},t&&r.on("connection",t);var c=e.server||(e.key&&e.cert?a.createServer(e):o.createServer()),l=new i.Server({server:c,perMessageDeflate:!1,verifyClient:e.verifyClient});return u(c,"listening"),u(c,"request"),u(c,"close"),l.on("connection",(function(e){var t=n(e);t.remoteAddress=e.upgradeReq.socket.remoteAddress,r.emit("connection",t)})),r.listen=function(e,t){return t&&r.once("listening",t),c.listen(e.port||e),r},r.close=function(e){return c.close(e),l.close(),r},r.address=c.address.bind(c),r}:null}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6391,{"./ready":6389,_process:6295,timers:6814},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("./ready"),o=void 0!==n?n:r.nextTick;t.exports=function(e,t){return function(r){var n=!1!==(t=t||{}).closeOnEnd,a="function"==typeof t?t:t.onClose;r(null,(function t(s,u){s?n&&e.readyState<=1&&(a&&e.addEventListener("close",(function(e){if(e.wasClean||1006===e.code)a();else{var t=new Error("ws error");t.event=e,a(t)}})),e.close()):i(e,(function(n){if(n)return r(n,(function(){}));e.send(u),o((function(){r(null,t)}))}))}))}}}).call(this)}).call(this,e("_process"),e("timers").setImmediate)}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6392,{"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer;t.exports=function(e,t){var r,i,o=[],a=!1;return e.addEventListener("message",(function(e){var t,i=e.data;if(((t=i)instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength)&&(i=n.from(i)),r)return r(null,i);o.push(i)})),e.addEventListener("close",(function(e){i||r&&r(i=!0)})),e.addEventListener("error",(function(e){i||(i=e,a||(a=!0,t&&t(e)),r&&r(i))})),e.addEventListener("open",(function(e){a||i||(a=!0)})),function(t,n){if(r=null,i)return n(i);t?(r=n,e.close()):o.length>0?n(null,o.shift()):r=n}}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6393,{ws:2437},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports="undefined"==typeof WebSocket?e("ws"):WebSocket}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6394,{"relative-url":6603},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("relative-url"),i={http:"ws",https:"wss"};t.exports=function(e,t){return n(e,t,i,"ws")}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws"}],[6427,{"assemblyscript/lib/loader":2065},function(){with(this)return function(){"use strict";return function(e,t,r){const{instantiateStreaming:n}=e("assemblyscript/lib/loader");function i(e={}){if(!i.supported)return null;var t=new Uint8Array([0,97,115,109,1,0,0,0,1,90,16,96,0,0,96,2,127,127,1,127,96,4,127,127,127,127,0,96,1,127,1,127,96,3,127,127,127,0,96,1,126,1,127,96,2,126,126,1,126,96,5,127,127,127,127,127,1,127,96,3,127,127,126,0,96,2,127,127,1,126,96,3,127,127,127,1,127,96,1,127,0,96,2,127,127,0,96,1,127,1,126,96,2,127,126,0,96,0,1,127,2,13,1,3,101,110,118,5,97,98,111,114,116,0,2,3,57,56,3,3,12,3,3,15,5,6,1,8,4,1,9,11,7,4,10,10,11,0,0,0,3,12,3,12,3,12,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,13,14,4,4,1,112,0,1,5,3,1,0,1,6,26,5,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,127,1,65,0,11,7,253,6,44,6,109,101,109,111,114,121,2,0,5,116,97,98,108,101,1,0,6,100,101,103,114,101,101,0,7,3,109,111,100,0,8,16,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,0,23,16,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,0,24,21,82,97,98,105,110,35,103,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,25,21,82,97,98,105,110,35,115,101,116,58,119,105,110,100,111,119,95,115,105,122,101,0,26,14,82,97,98,105,110,35,103,101,116,58,119,112,111,115,0,27,14,82,97,98,105,110,35,115,101,116,58,119,112,111,115,0,28,15,82,97,98,105,110,35,103,101,116,58,99,111,117,110,116,0,29,15,82,97,98,105,110,35,115,101,116,58,99,111,117,110,116,0,30,13,82,97,98,105,110,35,103,101,116,58,112,111,115,0,31,13,82,97,98,105,110,35,115,101,116,58,112,111,115,0,32,15,82,97,98,105,110,35,103,101,116,58,115,116,97,114,116,0,33,15,82,97,98,105,110,35,115,101,116,58,115,116,97,114,116,0,34,16,82,97,98,105,110,35,103,101,116,58,100,105,103,101,115,116,0,35,16,82,97,98,105,110,35,115,101,116,58,100,105,103,101,115,116,0,36,21,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,37,21,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,115,116,97,114,116,0,38,22,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,39,22,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,108,101,110,103,116,104,0,40,31,82,97,98,105,110,35,103,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,41,31,82,97,98,105,110,35,115,101,116,58,99,104,117,110,107,95,99,117,116,95,102,105,110,103,101,114,112,114,105,110,116,0,42,20,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,0,43,20,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,0,44,27,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,45,27,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,100,101,103,114,101,101,0,46,26,82,97,98,105,110,35,103,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,47,26,82,97,98,105,110,35,115,101,116,58,112,111,108,121,110,111,109,105,97,108,95,115,104,105,102,116,0,48,22,82,97,98,105,110,35,103,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,49,22,82,97,98,105,110,35,115,101,116,58,97,118,101,114,97,103,101,95,98,105,116,115,0,50,17,82,97,98,105,110,35,103,101,116,58,109,105,110,115,105,122,101,0,51,17,82,97,98,105,110,35,115,101,116,58,109,105,110,115,105,122,101,0,52,17,82,97,98,105,110,35,103,101,116,58,109,97,120,115,105,122,101,0,53,17,82,97,98,105,110,35,115,101,116,58,109,97,120,115,105,122,101,0,54,14,82,97,98,105,110,35,103,101,116,58,109,97,115,107,0,55,14,82,97,98,105,110,35,115,101,116,58,109,97,115,107,0,56,17,82,97,98,105,110,35,99,111,110,115,116,114,117,99,116,111,114,0,15,17,82,97,98,105,110,35,102,105,110,103,101,114,112,114,105,110,116,0,16,14,109,101,109,111,114,121,46,99,111,109,112,97,114,101,0,18,15,109,101,109,111,114,121,46,97,108,108,111,99,97,116,101,0,4,11,109,101,109,111,114,121,46,102,114,101,101,0,19,12,109,101,109,111,114,121,46,114,101,115,101,116,0,20,8,1,21,9,7,1,0,65,0,11,1,22,10,188,30,56,104,1,3,127,32,0,65,128,128,128,128,4,75,4,64,0,11,35,1,34,1,32,0,65,1,32,0,65,1,75,27,106,65,7,106,65,120,113,34,0,63,0,34,2,65,16,116,75,4,64,32,2,32,0,32,1,107,65,255,255,3,106,65,128,128,124,113,65,16,118,34,3,32,2,32,3,74,27,64,0,65,0,72,4,64,32,3,64,0,65,0,72,4,64,0,11,11,11,32,0,36,1,32,1,11,51,1,1,127,32,0,65,248,255,255,255,3,75,4,64,65,0,65,200,0,65,26,65,2,16,0,0,11,65,1,65,32,32,0,65,7,106,103,107,116,16,1,34,1,32,0,54,2,0,32,1,11,145,3,1,1,127,32,1,69,4,64,15,11,32,0,65,0,58,0,0,32,0,32,1,106,65,1,107,65,0,58,0,0,32,1,65,2,77,4,64,15,11,32,0,65,1,106,65,0,58,0,0,32,0,65,2,106,65,0,58,0,0,32,0,32,1,106,34,2,65,2,107,65,0,58,0,0,32,2,65,3,107,65,0,58,0,0,32,1,65,6,77,4,64,15,11,32,0,65,3,106,65,0,58,0,0,32,0,32,1,106,65,4,107,65,0,58,0,0,32,1,65,8,77,4,64,15,11,65,0,32,0,107,65,3,113,34,2,32,0,106,34,0,65,0,54,2,0,32,1,32,2,107,65,124,113,34,1,32,0,106,65,4,107,65,0,54,2,0,32,1,65,8,77,4,64,15,11,32,0,65,4,106,65,0,54,2,0,32,0,65,8,106,65,0,54,2,0,32,0,32,1,106,34,2,65,12,107,65,0,54,2,0,32,2,65,8,107,65,0,54,2,0,32,1,65,24,77,4,64,15,11,32,0,65,12,106,65,0,54,2,0,32,0,65,16,106,65,0,54,2,0,32,0,65,20,106,65,0,54,2,0,32,0,65,24,106,65,0,54,2,0,32,0,32,1,106,34,2,65,28,107,65,0,54,2,0,32,2,65,24,107,65,0,54,2,0,32,2,65,20,107,65,0,54,2,0,32,2,65,16,107,65,0,54,2,0,32,0,65,4,113,65,24,106,34,2,32,0,106,33,0,32,1,32,2,107,33,1,3,64,32,1,65,32,79,4,64,32,0,66,0,55,3,0,32,0,65,8,106,66,0,55,3,0,32,0,65,16,106,66,0,55,3,0,32,0,65,24,106,66,0,55,3,0,32,1,65,32,107,33,1,32,0,65,32,106,33,0,12,1,11,11,11,6,0,32,0,16,1,11,76,1,1,127,65,128,16,16,2,34,1,65,8,106,65,128,16,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,1,54,2,0,32,0,65,0,54,2,4,32,0,65,128,16,54,2,8,32,0,11,8,0,65,12,16,1,16,5,11,70,2,1,127,1,126,66,128,128,128,128,128,128,128,128,128,127,33,2,3,64,2,64,32,1,65,192,0,78,13,0,32,0,32,2,131,66,0,86,4,64,65,63,32,1,107,15,5,32,2,66,1,136,33,2,32,1,65,1,106,33,1,12,2,11,0,11,11,65,127,11,175,2,2,1,127,2,126,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,32,1,33,4,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,3,32,4,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,78,4,64,32,1,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,0,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,3,65,0,33,2,3,64,2,64,32,2,65,192,0,78,13,0,65,63,32,2,107,32,1,32,3,131,66,0,86,13,2,26,32,3,66,1,136,33,3,32,2,65,1,106,33,2,12,1,11,11,65,127,11,107,172,134,32,0,133,33,0,12,1,11,11,32,0,11,96,1,1,127,32,1,65,248,255,255,255,3,75,4,64,65,0,65,8,65,23,65,34,16,0,0,11,32,1,16,2,34,2,65,8,106,32,1,16,3,32,0,69,4,64,65,12,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,32,2,54,2,0,32,0,65,0,54,2,4,32,0,32,1,54,2,8,32,0,11,49,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,32,2,55,3,8,11,43,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,50,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,32,2,58,0,8,11,41,0,32,1,32,0,40,2,8,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,1,32,0,40,2,0,106,106,45,0,8,11,47,0,32,1,32,0,40,2,8,65,3,118,79,4,64,65,0,65,8,65,39,65,63,16,0,0,11,32,0,40,2,4,32,0,40,2,0,32,1,65,3,116,106,106,41,3,8,11,166,10,2,3,127,5,126,35,2,69,4,64,3,64,32,2,65,128,2,72,4,64,32,2,65,255,1,113,173,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,65,0,33,1,3,64,32,1,32,0,40,2,4,65,1,107,72,4,64,32,5,66,8,134,33,4,32,0,41,3,72,33,6,3,64,2,127,32,4,33,5,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,3,3,64,32,3,65,192,0,72,4,64,65,63,32,3,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,3,65,1,106,33,3,12,1,11,11,65,127,11,107,172,134,32,5,133,33,4,12,1,11,11,32,1,65,1,106,33,1,12,1,11,11,35,4,32,2,32,5,16,10,32,2,65,1,106,33,2,12,1,11,11,2,127,32,0,41,3,72,33,4,66,128,128,128,128,128,128,128,128,128,127,33,5,65,0,33,2,3,64,32,2,65,192,0,72,4,64,65,63,32,2,107,32,4,32,5,131,66,0,86,13,2,26,32,5,66,1,136,33,5,32,2,65,1,106,33,2,12,1,11,11,65,127,11,172,33,8,65,0,33,2,3,64,32,2,65,128,2,72,4,64,35,3,33,3,32,2,172,32,8,134,33,5,32,0,41,3,72,33,6,3,64,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,32,6,33,7,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,7,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,78,4,64,32,6,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,5,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,2,127,66,128,128,128,128,128,128,128,128,128,127,33,4,65,0,33,1,3,64,32,1,65,192,0,72,4,64,65,63,32,1,107,32,4,32,6,131,66,0,86,13,2,26,32,4,66,1,136,33,4,32,1,65,1,106,33,1,12,1,11,11,65,127,11,107,172,134,32,5,133,33,5,12,1,11,11,32,3,32,2,32,2,172,32,8,134,32,5,132,16,10,32,2,65,1,106,33,2,12,1,11,11,65,1,36,2,11,32,0,66,0,55,3,24,32,0,66,0,55,3,32,65,0,33,2,3,64,32,2,32,0,40,2,4,72,4,64,32,0,40,2,0,32,2,65,0,16,11,32,2,65,1,106,33,2,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,11,234,1,0,32,0,69,4,64,65,128,1,16,1,33,0,11,32,0,65,0,54,2,0,32,0,65,0,54,2,4,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,24,32,0,66,0,55,3,32,32,0,66,0,55,3,40,32,0,66,0,55,3,48,32,0,66,0,55,3,56,32,0,66,0,55,3,64,32,0,66,0,55,3,72,32,0,66,0,55,3,80,32,0,66,0,55,3,88,32,0,66,0,55,3,96,32,0,66,0,55,3,104,32,0,66,0,55,3,112,32,0,66,0,55,3,120,32,0,32,1,173,55,3,96,32,0,32,2,173,55,3,104,32,0,32,3,173,55,3,112,32,0,65,12,16,1,32,4,16,9,54,2,0,32,0,32,4,54,2,4,32,0,66,1,32,0,41,3,96,134,66,1,125,55,3,120,32,0,66,243,130,183,218,216,230,232,30,55,3,72,32,0,66,53,55,3,80,32,0,32,0,41,3,80,66,8,125,55,3,88,32,0,16,14,32,0,11,206,4,1,5,127,32,1,40,2,8,33,4,32,1,40,2,0,65,8,106,33,5,3,64,2,127,65,0,33,3,3,64,32,3,32,4,72,4,64,32,3,32,5,106,45,0,0,33,1,32,0,40,2,0,32,0,40,2,8,16,12,33,6,32,0,40,2,0,32,0,40,2,8,32,1,16,11,32,0,32,0,41,3,40,35,4,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,6,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,32,1,173,132,55,3,40,32,0,32,0,41,3,40,35,3,32,6,65,255,1,113,16,13,133,55,3,40,32,0,32,0,41,3,16,66,1,124,55,3,16,32,0,32,0,41,3,24,66,1,124,55,3,24,2,127,32,0,41,3,16,32,0,41,3,104,90,34,1,4,64,32,0,41,3,40,32,0,41,3,120,131,66,0,81,33,1,11,32,1,69,11,4,127,32,0,41,3,16,32,0,41,3,112,90,5,32,1,11,4,64,32,0,32,0,41,3,32,55,3,48,32,0,32,0,41,3,16,55,3,56,32,0,32,0,41,3,40,55,3,64,65,0,33,1,3,64,32,1,32,0,40,2,4,72,4,64,32,0,40,2,0,32,1,65,0,16,11,32,1,65,1,106,33,1,12,1,11,11,32,0,66,0,55,3,40,32,0,65,0,54,2,8,32,0,66,0,55,3,16,32,0,66,0,55,3,40,32,0,40,2,0,32,0,40,2,8,16,12,33,1,32,0,40,2,0,32,0,40,2,8,65,1,16,11,32,0,32,0,41,3,40,35,4,32,1,65,255,1,113,16,13,133,55,3,40,32,0,32,0,40,2,8,65,1,106,32,0,40,2,4,111,54,2,8,32,0,41,3,40,32,0,41,3,88,136,167,33,1,32,0,32,0,41,3,40,66,8,134,55,3,40,32,0,32,0,41,3,40,66,1,132,55,3,40,32,0,32,0,41,3,40,35,3,32,1,65,255,1,113,16,13,133,55,3,40,32,3,65,1,106,12,3,5,32,3,65,1,106,33,3,12,2,11,0,11,11,65,127,11,34,1,65,0,78,4,64,32,4,32,1,107,33,4,32,1,32,5,106,33,5,32,7,34,1,65,1,106,33,7,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,32,0,41,3,56,62,2,8,32,2,40,2,4,32,2,40,2,0,32,1,65,2,116,106,106,40,2,8,26,12,1,11,11,11,88,1,1,127,32,0,32,1,70,4,64,65,0,15,11,3,64,32,2,65,0,71,34,3,4,64,32,0,45,0,0,32,1,45,0,0,70,33,3,11,32,3,4,64,32,2,65,1,107,33,2,32,0,65,1,106,33,0,32,1,65,1,106,33,1,12,1,11,11,32,2,4,127,32,0,45,0,0,32,1,45,0,0,107,5,65,0,11,11,10,0,32,0,32,1,32,2,16,17,11,3,0,1,11,6,0,35,0,36,1,11,19,0,65,136,1,36,0,35,0,36,1,16,6,36,3,16,6,36,4,11,3,0,1,11,7,0,32,0,40,2,0,11,9,0,32,0,32,1,54,2,0,11,7,0,32,0,40,2,4,11,9,0,32,0,32,1,54,2,4,11,7,0,32,0,40,2,8,11,9,0,32,0,32,1,54,2,8,11,7,0,32,0,41,3,16,11,9,0,32,0,32,1,55,3,16,11,7,0,32,0,41,3,24,11,9,0,32,0,32,1,55,3,24,11,7,0,32,0,41,3,32,11,9,0,32,0,32,1,55,3,32,11,7,0,32,0,41,3,40,11,9,0,32,0,32,1,55,3,40,11,7,0,32,0,41,3,48,11,9,0,32,0,32,1,55,3,48,11,7,0,32,0,41,3,56,11,9,0,32,0,32,1,55,3,56,11,7,0,32,0,41,3,64,11,9,0,32,0,32,1,55,3,64,11,7,0,32,0,41,3,72,11,9,0,32,0,32,1,55,3,72,11,7,0,32,0,41,3,80,11,9,0,32,0,32,1,55,3,80,11,7,0,32,0,41,3,88,11,9,0,32,0,32,1,55,3,88,11,7,0,32,0,41,3,96,11,9,0,32,0,32,1,55,3,96,11,7,0,32,0,41,3,104,11,9,0,32,0,32,1,55,3,104,11,7,0,32,0,41,3,112,11,9,0,32,0,32,1,55,3,112,11,7,0,32,0,41,3,120,11,9,0,32,0,32,1,55,3,120,11,11,128,1,2,0,65,8,11,57,27,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,116,0,121,0,112,0,101,0,100,0,97,0,114,0,114,0,97,0,121,0,46,0,116,0,115,0,65,200,0,11,59,28,0,0,0,126,0,108,0,105,0,98,0,47,0,105,0,110,0,116,0,101,0,114,0,110,0,97,0,108,0,47,0,97,0,114,0,114,0,97,0,121,0,98,0,117,0,102,0,102,0,101,0,114,0,46,0,116,0,115,0,32,16,115,111,117,114,99,101,77,97,112,112,105,110,103,85,82,76,14,114,97,98,105,110,46,119,97,115,109,46,109,97,112]);return n(new Response(new Blob([t],{type:"application/wasm"})),e)}i.supported="undefined"!=typeof WebAssembly,t.exports=i}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[6428,{"../dist/rabin-wasm.node.js":6427,"./rabin":6429},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./rabin"),i=e("../dist/rabin-wasm.node.js");t.exports={Rabin:n,create:async(e,t,r,o)=>{const a=await i();return new n(e,t,r,o,a)}}}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[6429,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=class{constructor(e=12,t=8192,r=32768,n=64,i){this.bits=e,this.min=t,this.max=r,this.asModule=i,this.rabin=new i.Rabin(e,t,r,n)}fingerprint(e){const t=new Int32Array(Math.ceil(e.length/this.min)),r=this.asModule.newArray(t),n=this.asModule.newArray(e);this.rabin.fingerprint(n,r);const i=this.asModule.getArray(Int32Array,r);this.asModule.freeArray(r),this.asModule.freeArray(n);const o=[];for(let e=0;e<i.length&&0!==i[e];e++)o[e]=i[e];return o}}}}},{package:"3box>ipfs>ipfs-unixfs-importer>rabin-wasm"}],[643,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="abi/5.7.0"}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[644,{"./_version":643,"./coders/abstract-coder":645,"./coders/address":646,"./coders/array":648,"./coders/boolean":649,"./coders/bytes":650,"./coders/fixed-bytes":651,"./coders/null":652,"./coders/number":653,"./coders/string":654,"./coders/tuple":655,"./fragments":656,"@ethersproject/bytes":674,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.defaultAbiCoder=r.AbiCoder=void 0;var n=e("@ethersproject/bytes"),i=e("@ethersproject/properties"),o=e("@ethersproject/logger"),a=e("./_version"),s=new o.Logger(a.version),u=e("./coders/abstract-coder"),c=e("./coders/address"),l=e("./coders/array"),f=e("./coders/boolean"),h=e("./coders/bytes"),d=e("./coders/fixed-bytes"),p=e("./coders/null"),m=e("./coders/number"),g=e("./coders/string"),b=e("./coders/tuple"),y=e("./fragments"),v=new RegExp(/^bytes([0-9]*)$/),_=new RegExp(/^(u?int)([0-9]*)$/),w=function(){function e(e){(0,i.defineReadOnly)(this,"coerceFunc",e||null)}return e.prototype._getCoder=function(e){var t=this;switch(e.baseType){case"address":return new c.AddressCoder(e.name);case"bool":return new f.BooleanCoder(e.name);case"string":return new g.StringCoder(e.name);case"bytes":return new h.BytesCoder(e.name);case"array":return new l.ArrayCoder(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new b.TupleCoder((e.components||[]).map((function(e){return t._getCoder(e)})),e.name);case"":return new p.NullCoder(e.name)}var r,n=e.type.match(_);return n?((0===(r=parseInt(n[2]||"256"))||r>256||r%8!=0)&&s.throwArgumentError("invalid "+n[1]+" bit length","param",e),new m.NumberCoder(r/8,"int"===n[1],e.name)):(n=e.type.match(v))?((0===(r=parseInt(n[1]))||r>32)&&s.throwArgumentError("invalid bytes length","param",e),new d.FixedBytesCoder(r,e.name)):s.throwArgumentError("invalid type","type",e.type)},e.prototype._getWordSize=function(){return 32},e.prototype._getReader=function(e,t){return new u.Reader(e,this._getWordSize(),this.coerceFunc,t)},e.prototype._getWriter=function(){return new u.Writer(this._getWordSize())},e.prototype.getDefaultValue=function(e){var t=this,r=e.map((function(e){return t._getCoder(y.ParamType.from(e))}));return new b.TupleCoder(r,"_").defaultValue()},e.prototype.encode=function(e,t){var r=this;e.length!==t.length&&s.throwError("types/values length mismatch",o.Logger.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});var n=e.map((function(e){return r._getCoder(y.ParamType.from(e))})),i=new b.TupleCoder(n,"_"),a=this._getWriter();return i.encode(a,t),a.data},e.prototype.decode=function(e,t,r){var i=this,o=e.map((function(e){return i._getCoder(y.ParamType.from(e))}));return new b.TupleCoder(o,"_").decode(this._getReader((0,n.arrayify)(t),r))},e}();r.AbiCoder=w,r.defaultAbiCoder=new w}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[645,{"../_version":643,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Reader=r.Writer=r.Coder=r.checkResultErrors=void 0;var n=e("@ethersproject/bytes"),i=e("@ethersproject/bignumber"),o=e("@ethersproject/properties"),a=e("@ethersproject/logger"),s=e("../_version"),u=new a.Logger(s.version);r.checkResultErrors=function(e){var t=[],r=function(e,n){if(Array.isArray(n))for(var i in n){var o=e.slice();o.push(i);try{r(o,n[i])}catch(e){t.push({path:o,error:e})}}};return r([],e),t};var c=function(){function e(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}return e.prototype._throwError=function(e,t){u.throwArgumentError(e,this.localName,t)},e}();r.Coder=c;var l=function(){function e(e){(0,o.defineReadOnly)(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}return Object.defineProperty(e.prototype,"data",{get:function(){return(0,n.hexConcat)(this._data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._dataLength},enumerable:!1,configurable:!0}),e.prototype._writeData=function(e){return this._data.push(e),this._dataLength+=e.length,e.length},e.prototype.appendWriter=function(e){return this._writeData((0,n.concat)(e._data))},e.prototype.writeBytes=function(e){var t=(0,n.arrayify)(e),r=t.length%this.wordSize;return r&&(t=(0,n.concat)([t,this._padding.slice(r)])),this._writeData(t)},e.prototype._getValue=function(e){var t=(0,n.arrayify)(i.BigNumber.from(e));return t.length>this.wordSize&&u.throwError("value out-of-bounds",a.Logger.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=(0,n.concat)([this._padding.slice(t.length%this.wordSize),t])),t},e.prototype.writeValue=function(e){return this._writeData(this._getValue(e))},e.prototype.writeUpdatableValue=function(){var e=this,t=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(r){e._data[t]=e._getValue(r)}},e}();r.Writer=l;var f=function(){function e(e,t,r,i){(0,o.defineReadOnly)(this,"_data",(0,n.arrayify)(e)),(0,o.defineReadOnly)(this,"wordSize",t||32),(0,o.defineReadOnly)(this,"_coerceFunc",r),(0,o.defineReadOnly)(this,"allowLoose",i),this._offset=0}return Object.defineProperty(e.prototype,"data",{get:function(){return(0,n.hexlify)(this._data)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"consumed",{get:function(){return this._offset},enumerable:!1,configurable:!0}),e.coerce=function(e,t){var r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t},e.prototype.coerce=function(t,r){return this._coerceFunc?this._coerceFunc(t,r):e.coerce(t,r)},e.prototype._peekBytes=function(e,t,r){var n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:u.throwError("data out-of-bounds",a.Logger.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)},e.prototype.subReader=function(t){return new e(this._data.slice(this._offset+t),this.wordSize,this._coerceFunc,this.allowLoose)},e.prototype.readBytes=function(e,t){var r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)},e.prototype.readValue=function(){return i.BigNumber.from(this.readBytes(this.wordSize))},e}();r.Reader=f}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[646,{"./abstract-coder":645,"@ethersproject/address":664,"@ethersproject/bytes":674},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AddressCoder=void 0;var o=e("@ethersproject/address"),a=e("@ethersproject/bytes"),s=function(e){function t(t){return e.call(this,"address","address",t,!1)||this}return i(t,e),t.prototype.defaultValue=function(){return"0x0000000000000000000000000000000000000000"},t.prototype.encode=function(e,t){try{t=(0,o.getAddress)(t)}catch(e){this._throwError(e.message,t)}return e.writeValue(t)},t.prototype.decode=function(e){return(0,o.getAddress)((0,a.hexZeroPad)(e.readValue().toHexString(),20))},t}(e("./abstract-coder").Coder);r.AddressCoder=s}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[647,{"./abstract-coder":645},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AnonymousCoder=void 0;var o=function(e){function t(t){var r=e.call(this,t.name,t.type,undefined,t.dynamic)||this;return r.coder=t,r}return i(t,e),t.prototype.defaultValue=function(){return this.coder.defaultValue()},t.prototype.encode=function(e,t){return this.coder.encode(e,t)},t.prototype.decode=function(e){return this.coder.decode(e)},t}(e("./abstract-coder").Coder);r.AnonymousCoder=o}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[648,{"../_version":643,"./abstract-coder":645,"./anonymous":647,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.ArrayCoder=r.unpack=r.pack=void 0;var o=e("@ethersproject/logger"),a=e("../_version"),s=new o.Logger(a.version),u=e("./abstract-coder"),c=e("./anonymous");function l(e,t,r){var n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){var i={};n=t.map((function(e){var t=e.localName;return t||s.throwError("cannot encode object for signature with missing names",o.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]&&s.throwError("cannot encode object for signature with duplicate names",o.Logger.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),i[t]=!0,r[t]}))}else s.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&s.throwArgumentError("types/value length mismatch","tuple",r);var a=new u.Writer(e.wordSize),c=new u.Writer(e.wordSize),l=[];t.forEach((function(e,t){var r=n[t];if(e.dynamic){var i=c.length;e.encode(c,r);var o=a.writeUpdatableValue();l.push((function(e){o(e+i)}))}else e.encode(a,r)})),l.forEach((function(e){e(a.length)}));var f=e.appendWriter(a);return f+=e.appendWriter(c)}function f(e,t){var r=[],n=e.subReader(0);t.forEach((function(t){var i=null;if(t.dynamic){var a=e.readValue(),s=n.subReader(a.toNumber());try{i=t.decode(s)}catch(e){if(e.code===o.Logger.errors.BUFFER_OVERRUN)throw e;(i=e).baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(e){if(e.code===o.Logger.errors.BUFFER_OVERRUN)throw e;(i=e).baseType=t.name,i.name=t.localName,i.type=t.type}i!=undefined&&r.push(i)}));var i=t.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});t.forEach((function(e,t){var n=e.localName;if(n&&1===i[n]&&("length"===n&&(n="_length"),null==r[n])){var o=r[t];o instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:function(){throw o}}):r[n]=o}}));for(var a=function(e){var t=r[e];t instanceof Error&&Object.defineProperty(r,e,{enumerable:!0,get:function(){throw t}})},s=0;s<r.length;s++)a(s);return Object.freeze(r)}r.pack=l,r.unpack=f;var h=function(e){function t(t,r,n){var i=this,o=t.type+"["+(r>=0?r:"")+"]",a=-1===r||t.dynamic;return(i=e.call(this,"array",o,n,a)||this).coder=t,i.length=r,i}return i(t,e),t.prototype.defaultValue=function(){for(var e=this.coder.defaultValue(),t=[],r=0;r<this.length;r++)t.push(e);return t},t.prototype.encode=function(e,t){Array.isArray(t)||this._throwError("expected array value",t);var r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),s.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));for(var n=[],i=0;i<t.length;i++)n.push(this.coder);return l(e,n,t)},t.prototype.decode=function(e){var t=this.length;-1===t&&32*(t=e.readValue().toNumber())>e._data.length&&s.throwError("insufficient data length",o.Logger.errors.BUFFER_OVERRUN,{length:e._data.length,count:t});for(var r=[],n=0;n<t;n++)r.push(new c.AnonymousCoder(this.coder));return e.coerce(this.name,f(e,r))},t}(u.Coder);r.ArrayCoder=h}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[649,{"./abstract-coder":645},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.BooleanCoder=void 0;var o=function(e){function t(t){return e.call(this,"bool","bool",t,!1)||this}return i(t,e),t.prototype.defaultValue=function(){return!1},t.prototype.encode=function(e,t){return e.writeValue(t?1:0)},t.prototype.decode=function(e){return e.coerce(this.type,!e.readValue().isZero())},t}(e("./abstract-coder").Coder);r.BooleanCoder=o}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[65,{lodash:6046},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return i((0,n.cloneDeep)(e),(e=>null===e?"null":typeof e))};var n=e("lodash");function i(e={},t){return Object.entries(e).forEach((([r,n])=>{e[r]="object"==typeof n&&null!==n?i(n,t):t(n)})),e}}}},{package:"$root$"}],[650,{"./abstract-coder":645,"@ethersproject/bytes":674},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.BytesCoder=r.DynamicBytesCoder=void 0;var o=e("@ethersproject/bytes"),a=function(e){function t(t,r){return e.call(this,t,t,r,!0)||this}return i(t,e),t.prototype.defaultValue=function(){return"0x"},t.prototype.encode=function(e,t){t=(0,o.arrayify)(t);var r=e.writeValue(t.length);return r+=e.writeBytes(t)},t.prototype.decode=function(e){return e.readBytes(e.readValue().toNumber(),!0)},t}(e("./abstract-coder").Coder);r.DynamicBytesCoder=a;var s=function(e){function t(t){return e.call(this,"bytes",t)||this}return i(t,e),t.prototype.decode=function(t){return t.coerce(this.name,(0,o.hexlify)(e.prototype.decode.call(this,t)))},t}(a);r.BytesCoder=s}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[651,{"./abstract-coder":645,"@ethersproject/bytes":674},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.FixedBytesCoder=void 0;var o=e("@ethersproject/bytes"),a=function(e){function t(t,r){var n=this,i="bytes"+String(t);return(n=e.call(this,i,i,r,!1)||this).size=t,n}return i(t,e),t.prototype.defaultValue=function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)},t.prototype.encode=function(e,t){var r=(0,o.arrayify)(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)},t.prototype.decode=function(e){return e.coerce(this.name,(0,o.hexlify)(e.readBytes(this.size)))},t}(e("./abstract-coder").Coder);r.FixedBytesCoder=a}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[652,{"./abstract-coder":645},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.NullCoder=void 0;var o=function(e){function t(t){return e.call(this,"null","",t,!1)||this}return i(t,e),t.prototype.defaultValue=function(){return null},t.prototype.encode=function(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])},t.prototype.decode=function(e){return e.readBytes(0),e.coerce(this.name,null)},t}(e("./abstract-coder").Coder);r.NullCoder=o}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[653,{"./abstract-coder":645,"@ethersproject/bignumber":671,"@ethersproject/constants":678},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.NumberCoder=void 0;var o=e("@ethersproject/bignumber"),a=e("@ethersproject/constants"),s=function(e){function t(t,r,n){var i=this,o=(r?"int":"uint")+8*t;return(i=e.call(this,o,o,n,!1)||this).size=t,i.signed=r,i}return i(t,e),t.prototype.defaultValue=function(){return 0},t.prototype.encode=function(e,t){var r=o.BigNumber.from(t),n=a.MaxUint256.mask(8*e.wordSize);if(this.signed){var i=n.mask(8*this.size-1);(r.gt(i)||r.lt(i.add(a.One).mul(a.NegativeOne)))&&this._throwError("value out-of-bounds",t)}else(r.lt(a.Zero)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)},t.prototype.decode=function(e){var t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)},t}(e("./abstract-coder").Coder);r.NumberCoder=s}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[654,{"./bytes":650,"@ethersproject/strings":746},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.StringCoder=void 0;var o=e("@ethersproject/strings"),a=function(e){function t(t){return e.call(this,"string",t)||this}return i(t,e),t.prototype.defaultValue=function(){return""},t.prototype.encode=function(t,r){return e.prototype.encode.call(this,t,(0,o.toUtf8Bytes)(r))},t.prototype.decode=function(t){return(0,o.toUtf8String)(e.prototype.decode.call(this,t))},t}(e("./bytes").DynamicBytesCoder);r.StringCoder=a}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[655,{"./abstract-coder":645,"./array":648},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.TupleCoder=void 0;var o=e("./abstract-coder"),a=e("./array"),s=function(e){function t(t,r){var n=this,i=!1,o=[];t.forEach((function(e){e.dynamic&&(i=!0),o.push(e.type)}));var a="tuple("+o.join(",")+")";return(n=e.call(this,"tuple",a,r,i)||this).coders=t,n}return i(t,e),t.prototype.defaultValue=function(){var e=[];this.coders.forEach((function(t){e.push(t.defaultValue())}));var t=this.coders.reduce((function(e,t){var r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e}),{});return this.coders.forEach((function(r,n){var i=r.localName;i&&1===t[i]&&("length"===i&&(i="_length"),null==e[i]&&(e[i]=e[n]))})),Object.freeze(e)},t.prototype.encode=function(e,t){return(0,a.pack)(e,this.coders,t)},t.prototype.decode=function(e){return e.coerce(this.name,(0,a.unpack)(e,this.coders))},t}(o.Coder);r.TupleCoder=s}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[656,{"./_version":643,"@ethersproject/bignumber":671,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorFragment=r.FunctionFragment=r.ConstructorFragment=r.EventFragment=r.Fragment=r.ParamType=r.FormatTypes=void 0;var o=e("@ethersproject/bignumber"),a=e("@ethersproject/properties"),s=e("@ethersproject/logger"),u=e("./_version"),c=new s.Logger(u.version),l={},f={calldata:!0,memory:!0,storage:!0},h={calldata:!0,memory:!0};function d(e,t){if("bytes"===e||"string"===e){if(f[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&h[t])return!0;return(f[t]||"payable"===t)&&c.throwArgumentError("invalid modifier","name",t),!1}function p(e,t){for(var r in t)(0,a.defineReadOnly)(e,r,t[r])}r.FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"});var m=new RegExp(/^(.*)\[([0-9]*)\]$/),g=function(){function e(t,r){t!==l&&c.throwError("use fromString",s.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),p(this,r);var n=this.type.match(m);p(this,n?{arrayLength:parseInt(n[2]||"-1"),arrayChildren:e.fromObject({type:n[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return e.prototype.format=function(e){if(e||(e=r.FormatTypes.sighash),r.FormatTypes[e]||c.throwArgumentError("invalid format type","format",e),e===r.FormatTypes.json){var t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||undefined};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map((function(t){return JSON.parse(t.format(e))}))),JSON.stringify(t)}var n="";return"array"===this.baseType?(n+=this.arrayChildren.format(e),n+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==r.FormatTypes.sighash&&(n+=this.type),n+="("+this.components.map((function(t){return t.format(e)})).join(e===r.FormatTypes.full?", ":",")+")"):n+=this.type,e!==r.FormatTypes.sighash&&(!0===this.indexed&&(n+=" indexed"),e===r.FormatTypes.full&&this.name&&(n+=" "+this.name)),n},e.from=function(t,r){return"string"==typeof t?e.fromString(t,r):e.fromObject(t)},e.fromObject=function(t){return e.isParamType(t)?t:new e(l,{name:t.name||null,type:A(t.type),indexed:null==t.indexed?null:!!t.indexed,components:t.components?t.components.map(e.fromObject):null})},e.fromString=function(t,r){return n=function(e,t){var r=e;function n(t){c.throwArgumentError("unexpected character at position "+t,"param",e)}function i(e){var r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");for(var o={type:"",name:"",state:{allowType:!0}},a=o,s=0;s<e.length;s++){var u=e[s];switch(u){case"(":a.state.allowType&&""===a.type?a.type="tuple":a.state.allowParams||n(s),a.state.allowType=!1,a.type=A(a.type),a.components=[i(a)],a=a.components[0];break;case")":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),d(a.type,a.name)&&(a.name=""),a.type=A(a.type);var l=a;(a=a.parent)||n(s),delete l.parent,a.state.allowParams=!1,a.state.allowName=!0,a.state.allowArray=!0;break;case",":delete a.state,"indexed"===a.name&&(t||n(s),a.indexed=!0,a.name=""),d(a.type,a.name)&&(a.name=""),a.type=A(a.type);var f=i(a.parent);a.parent.components.push(f),delete a.parent,a=f;break;case" ":a.state.allowType&&""!==a.type&&(a.type=A(a.type),delete a.state.allowType,a.state.allowName=!0,a.state.allowParams=!0),a.state.allowName&&""!==a.name&&("indexed"===a.name?(t||n(s),a.indexed&&n(s),a.indexed=!0,a.name=""):d(a.type,a.name)?a.name="":a.state.allowName=!1);break;case"[":a.state.allowArray||n(s),a.type+=u,a.state.allowArray=!1,a.state.allowName=!1,a.state.readArray=!0;break;case"]":a.state.readArray||n(s),a.type+=u,a.state.readArray=!1,a.state.allowArray=!0,a.state.allowName=!0;break;default:a.state.allowType?(a.type+=u,a.state.allowParams=!0,a.state.allowArray=!0):a.state.allowName?(a.name+=u,delete a.state.allowArray):a.state.readArray?a.type+=u:n(s)}}return a.parent&&c.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===a.name?(t||n(r.length-7),a.indexed&&n(r.length-7),a.indexed=!0,a.name=""):d(a.type,a.name)&&(a.name=""),o.type=A(o.type),o}(t,!!r),e.fromObject({name:n.name,type:n.type,indexed:n.indexed,components:n.components});var n},e.isParamType=function(e){return!(null==e||!e._isParamType)},e}();function b(e,t){return function(e){e=e.trim();for(var t=[],r="",n=0,i=0;i<e.length;i++){var o=e[i];","===o&&0===n?(t.push(r),r=""):(r+=o,"("===o?n++:")"===o&&-1===--n&&c.throwArgumentError("unbalanced parenthesis","value",e))}r&&t.push(r);return t}(e).map((function(e){return g.fromString(e,t)}))}r.ParamType=g;var y=function(){function e(e,t){e!==l&&c.throwError("use a static from method",s.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),p(this,t),this._isFragment=!0,Object.freeze(this)}return e.from=function(t){return e.isFragment(t)?t:"string"==typeof t?e.fromString(t):e.fromObject(t)},e.fromObject=function(t){if(e.isFragment(t))return t;switch(t.type){case"function":return S.fromObject(t);case"event":return v.fromObject(t);case"constructor":return k.fromObject(t);case"error":return T.fromObject(t);case"fallback":case"receive":return null}return c.throwArgumentError("invalid fragment object","value",t)},e.fromString=function(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?v.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?S.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?k.fromString(e.trim()):"error"===e.split(" ")[0]?T.fromString(e.substring(5).trim()):c.throwArgumentError("unsupported fragment","value",e)},e.isFragment=function(e){return!(!e||!e._isFragment)},e}();r.Fragment=y;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.format=function(e){if(e||(e=r.FormatTypes.sighash),r.FormatTypes[e]||c.throwArgumentError("invalid format type","format",e),e===r.FormatTypes.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==r.FormatTypes.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===r.FormatTypes.full?", ":",")+") ",e!==r.FormatTypes.sighash&&this.anonymous&&(t+="anonymous "),t.trim()},t.from=function(e){return"string"==typeof e?t.fromString(e):t.fromObject(e)},t.fromObject=function(e){if(t.isEventFragment(e))return e;"event"!==e.type&&c.throwArgumentError("invalid event object","value",e);var r={name:O(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(g.fromObject):[],type:"event"};return new t(l,r)},t.fromString=function(e){var r=e.match(P);r||c.throwArgumentError("invalid event string","value",e);var n=!1;return r[3].split(" ").forEach((function(e){switch(e.trim()){case"anonymous":n=!0;break;case"":break;default:c.warn("unknown modifier: "+e)}})),t.fromObject({name:r[1].trim(),anonymous:n,inputs:b(r[2],!0),type:"event"})},t.isEventFragment=function(e){return e&&e._isFragment&&"event"===e.type},t}(y);function _(e,t){t.gas=null;var r=e.split("@");return 1!==r.length?(r.length>2&&c.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||c.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=o.BigNumber.from(r[1]),r[0]):e}function w(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach((function(e){switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}}))}function E(e){var t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&c.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&c.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||c.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&c.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&c.throwArgumentError("unable to determine stateMutability","value",e),t}r.EventFragment=v;var k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.format=function(e){if(e||(e=r.FormatTypes.sighash),r.FormatTypes[e]||c.throwArgumentError("invalid format type","format",e),e===r.FormatTypes.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});e===r.FormatTypes.sighash&&c.throwError("cannot format a constructor for sighash",s.Logger.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var t="constructor("+this.inputs.map((function(t){return t.format(e)})).join(e===r.FormatTypes.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()},t.from=function(e){return"string"==typeof e?t.fromString(e):t.fromObject(e)},t.fromObject=function(e){if(t.isConstructorFragment(e))return e;"constructor"!==e.type&&c.throwArgumentError("invalid constructor object","value",e);var r=E(e);r.constant&&c.throwArgumentError("constructor cannot be constant","value",e);var n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(g.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?o.BigNumber.from(e.gas):null};return new t(l,n)},t.fromString=function(e){var r={type:"constructor"},n=(e=_(e,r)).match(P);return n&&"constructor"===n[1].trim()||c.throwArgumentError("invalid constructor string","value",e),r.inputs=b(n[2].trim(),!1),w(n[3].trim(),r),t.fromObject(r)},t.isConstructorFragment=function(e){return e&&e._isFragment&&"constructor"===e.type},t}(y);r.ConstructorFragment=k;var S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.format=function(e){if(e||(e=r.FormatTypes.sighash),r.FormatTypes[e]||c.throwArgumentError("invalid format type","format",e),e===r.FormatTypes.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:undefined,payable:this.payable,gas:this.gas?this.gas.toNumber():undefined,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))})),outputs:this.outputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==r.FormatTypes.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===r.FormatTypes.full?", ":",")+") ",e!==r.FormatTypes.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map((function(t){return t.format(e)})).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()},t.from=function(e){return"string"==typeof e?t.fromString(e):t.fromObject(e)},t.fromObject=function(e){if(t.isFunctionFragment(e))return e;"function"!==e.type&&c.throwArgumentError("invalid function object","value",e);var r=E(e),n={type:e.type,name:O(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(g.fromObject):[],outputs:e.outputs?e.outputs.map(g.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?o.BigNumber.from(e.gas):null};return new t(l,n)},t.fromString=function(e){var r={type:"function"},n=(e=_(e,r)).split(" returns ");n.length>2&&c.throwArgumentError("invalid function string","value",e);var i=n[0].match(P);if(i||c.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&O(r.name),r.inputs=b(i[2],!1),w(i[3].trim(),r),n.length>1){var o=n[1].match(P);""==o[1].trim()&&""==o[3].trim()||c.throwArgumentError("unexpected tokens","value",e),r.outputs=b(o[2],!1)}else r.outputs=[];return t.fromObject(r)},t.isFunctionFragment=function(e){return e&&e._isFragment&&"function"===e.type},t}(k);function R(e){var t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||c.throwArgumentError("cannot specify user defined "+t+" error","fragment",e),e}r.FunctionFragment=S;var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.format=function(e){if(e||(e=r.FormatTypes.sighash),r.FormatTypes[e]||c.throwArgumentError("invalid format type","format",e),e===r.FormatTypes.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(t){return JSON.parse(t.format(e))}))});var t="";return e!==r.FormatTypes.sighash&&(t+="error "),(t+=this.name+"("+this.inputs.map((function(t){return t.format(e)})).join(e===r.FormatTypes.full?", ":",")+") ").trim()},t.from=function(e){return"string"==typeof e?t.fromString(e):t.fromObject(e)},t.fromObject=function(e){if(t.isErrorFragment(e))return e;"error"!==e.type&&c.throwArgumentError("invalid error object","value",e);var r={type:e.type,name:O(e.name),inputs:e.inputs?e.inputs.map(g.fromObject):[]};return R(new t(l,r))},t.fromString=function(e){var r={type:"error"},n=e.match(P);return n||c.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&O(r.name),r.inputs=b(n[2],!1),R(t.fromObject(r))},t.isErrorFragment=function(e){return e&&e._isFragment&&"error"===e.type},t}(y);function A(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}r.ErrorFragment=T;var C=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function O(e){return e&&e.match(C)||c.throwArgumentError('invalid identifier "'+e+'"',"value",e),e}var P=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$")}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[657,{"./abi-coder":644,"./fragments":656,"./interface":658},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionDescription=r.LogDescription=r.checkResultErrors=r.Indexed=r.Interface=r.defaultAbiCoder=r.AbiCoder=r.FormatTypes=r.ParamType=r.FunctionFragment=r.Fragment=r.EventFragment=r.ErrorFragment=r.ConstructorFragment=void 0;var n=e("./fragments");Object.defineProperty(r,"ConstructorFragment",{enumerable:!0,get:function(){return n.ConstructorFragment}}),Object.defineProperty(r,"ErrorFragment",{enumerable:!0,get:function(){return n.ErrorFragment}}),Object.defineProperty(r,"EventFragment",{enumerable:!0,get:function(){return n.EventFragment}}),Object.defineProperty(r,"FormatTypes",{enumerable:!0,get:function(){return n.FormatTypes}}),Object.defineProperty(r,"Fragment",{enumerable:!0,get:function(){return n.Fragment}}),Object.defineProperty(r,"FunctionFragment",{enumerable:!0,get:function(){return n.FunctionFragment}}),Object.defineProperty(r,"ParamType",{enumerable:!0,get:function(){return n.ParamType}});var i=e("./abi-coder");Object.defineProperty(r,"AbiCoder",{enumerable:!0,get:function(){return i.AbiCoder}}),Object.defineProperty(r,"defaultAbiCoder",{enumerable:!0,get:function(){return i.defaultAbiCoder}});var o=e("./interface");Object.defineProperty(r,"checkResultErrors",{enumerable:!0,get:function(){return o.checkResultErrors}}),Object.defineProperty(r,"Indexed",{enumerable:!0,get:function(){return o.Indexed}}),Object.defineProperty(r,"Interface",{enumerable:!0,get:function(){return o.Interface}}),Object.defineProperty(r,"LogDescription",{enumerable:!0,get:function(){return o.LogDescription}}),Object.defineProperty(r,"TransactionDescription",{enumerable:!0,get:function(){return o.TransactionDescription}})}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[6579,{"readable-stream":6594},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.ReadableWebToNodeStream=void 0;const n=e("readable-stream");class i extends n.Readable{constructor(e){super(),this.bytesRead=0,this.released=!1,this.reader=e.getReader()}async _read(){if(this.released)return void this.push(null);this.pendingRead=this.reader.read();const e=await this.pendingRead;delete this.pendingRead,e.done||this.released?this.push(null):(this.bytesRead+=e.value.length,this.push(e.value))}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}r.ReadableWebToNodeStream=i}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream"}],[658,{"./_version":643,"./abi-coder":644,"./coders/abstract-coder":645,"./fragments":656,"@ethersproject/address":664,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/hash":687,"@ethersproject/keccak256":700,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Interface=r.Indexed=r.ErrorDescription=r.TransactionDescription=r.LogDescription=r.checkResultErrors=void 0;var o=e("@ethersproject/address"),a=e("@ethersproject/bignumber"),s=e("@ethersproject/bytes"),u=e("@ethersproject/hash"),c=e("@ethersproject/keccak256"),l=e("@ethersproject/properties"),f=e("./abi-coder"),h=e("./coders/abstract-coder");Object.defineProperty(r,"checkResultErrors",{enumerable:!0,get:function(){return h.checkResultErrors}});var d=e("./fragments"),p=e("@ethersproject/logger"),m=e("./_version"),g=new p.Logger(m.version),b=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(l.Description);r.LogDescription=b;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(l.Description);r.TransactionDescription=y;var v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(l.Description);r.ErrorDescription=v;var _=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.isIndexed=function(e){return!(!e||!e._isIndexed)},t}(l.Description);r.Indexed=_;var w={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function E(e,t){var r=new Error("deferred error during ABI decoding triggered accessing "+e);return r.error=t,r}var k=function(){function e(e){var t=this.constructor,r=this,n=[];n="string"==typeof e?JSON.parse(e):e,(0,l.defineReadOnly)(this,"fragments",n.map((function(e){return d.Fragment.from(e)})).filter((function(e){return null!=e}))),(0,l.defineReadOnly)(this,"_abiCoder",(0,l.getStatic)(t,"getAbiCoder")()),(0,l.defineReadOnly)(this,"functions",{}),(0,l.defineReadOnly)(this,"errors",{}),(0,l.defineReadOnly)(this,"events",{}),(0,l.defineReadOnly)(this,"structs",{}),this.fragments.forEach((function(e){var t=null;switch(e.type){case"constructor":return r.deploy?void g.warn("duplicate definition - constructor"):void(0,l.defineReadOnly)(r,"deploy",e);case"function":t=r.functions;break;case"event":t=r.events;break;case"error":t=r.errors;break;default:return}var n=e.format();t[n]?g.warn("duplicate definition - "+n):t[n]=e})),this.deploy||(0,l.defineReadOnly)(this,"deploy",d.ConstructorFragment.from({payable:!1,type:"constructor"})),(0,l.defineReadOnly)(this,"_isInterface",!0)}return e.prototype.format=function(e){e||(e=d.FormatTypes.full),e===d.FormatTypes.sighash&&g.throwArgumentError("interface does not support formatting sighash","format",e);var t=this.fragments.map((function(t){return t.format(e)}));return e===d.FormatTypes.json?JSON.stringify(t.map((function(e){return JSON.parse(e)}))):t},e.getAbiCoder=function(){return f.defaultAbiCoder},e.getAddress=function(e){return(0,o.getAddress)(e)},e.getSighash=function(e){return(0,s.hexDataSlice)((0,u.id)(e.format()),0,4)},e.getEventTopic=function(e){return(0,u.id)(e.format())},e.prototype.getFunction=function(e){if((0,s.isHexString)(e)){for(var t in this.functions)if(e===this.getSighash(t))return this.functions[t];g.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){var r=e.trim(),n=Object.keys(this.functions).filter((function(e){return e.split("(")[0]===r}));return 0===n.length?g.throwArgumentError("no matching function","name",r):n.length>1&&g.throwArgumentError("multiple matching functions","name",r),this.functions[n[0]]}var i=this.functions[d.FunctionFragment.fromString(e).format()];return i||g.throwArgumentError("no matching function","signature",e),i},e.prototype.getEvent=function(e){if((0,s.isHexString)(e)){var t=e.toLowerCase();for(var r in this.events)if(t===this.getEventTopic(r))return this.events[r];g.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.events).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?g.throwArgumentError("no matching event","name",n):i.length>1&&g.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}var o=this.events[d.EventFragment.fromString(e).format()];return o||g.throwArgumentError("no matching event","signature",e),o},e.prototype.getError=function(e){if((0,s.isHexString)(e)){var t=(0,l.getStatic)(this.constructor,"getSighash");for(var r in this.errors){if(e===t(this.errors[r]))return this.errors[r]}g.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){var n=e.trim(),i=Object.keys(this.errors).filter((function(e){return e.split("(")[0]===n}));return 0===i.length?g.throwArgumentError("no matching error","name",n):i.length>1&&g.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}var o=this.errors[d.FunctionFragment.fromString(e).format()];return o||g.throwArgumentError("no matching error","signature",e),o},e.prototype.getSighash=function(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(t){try{e=this.getError(e)}catch(e){throw t}}return(0,l.getStatic)(this.constructor,"getSighash")(e)},e.prototype.getEventTopic=function(e){return"string"==typeof e&&(e=this.getEvent(e)),(0,l.getStatic)(this.constructor,"getEventTopic")(e)},e.prototype._decodeParams=function(e,t){return this._abiCoder.decode(e,t)},e.prototype._encodeParams=function(e,t){return this._abiCoder.encode(e,t)},e.prototype.encodeDeploy=function(e){return this._encodeParams(this.deploy.inputs,e||[])},e.prototype.decodeErrorResult=function(e,t){"string"==typeof e&&(e=this.getError(e));var r=(0,s.arrayify)(t);return(0,s.hexlify)(r.slice(0,4))!==this.getSighash(e)&&g.throwArgumentError("data signature does not match error "+e.name+".","data",(0,s.hexlify)(r)),this._decodeParams(e.inputs,r.slice(4))},e.prototype.encodeErrorResult=function(e,t){return"string"==typeof e&&(e=this.getError(e)),(0,s.hexlify)((0,s.concat)([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))},e.prototype.decodeFunctionData=function(e,t){"string"==typeof e&&(e=this.getFunction(e));var r=(0,s.arrayify)(t);return(0,s.hexlify)(r.slice(0,4))!==this.getSighash(e)&&g.throwArgumentError("data signature does not match function "+e.name+".","data",(0,s.hexlify)(r)),this._decodeParams(e.inputs,r.slice(4))},e.prototype.encodeFunctionData=function(e,t){return"string"==typeof e&&(e=this.getFunction(e)),(0,s.hexlify)((0,s.concat)([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))},e.prototype.decodeFunctionResult=function(e,t){"string"==typeof e&&(e=this.getFunction(e));var r=(0,s.arrayify)(t),n=null,i="",o=null,a=null,u=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(f){}break;case 4:var c=(0,s.hexlify)(r.slice(0,4)),l=w[c];if(l)o=this._abiCoder.decode(l.inputs,r.slice(4)),a=l.name,u=l.signature,l.reason&&(n=o[0]),"Error"===a?i="; VM Exception while processing transaction: reverted with reason string "+JSON.stringify(o[0]):"Panic"===a&&(i="; VM Exception while processing transaction: reverted with panic code "+o[0]);else try{var f=this.getError(c);o=this._abiCoder.decode(f.inputs,r.slice(4)),a=f.name,u=f.format()}catch(f){}}return g.throwError("call revert exception"+i,p.Logger.errors.CALL_EXCEPTION,{method:e.format(),data:(0,s.hexlify)(t),errorArgs:o,errorName:a,errorSignature:u,reason:n})},e.prototype.encodeFunctionResult=function(e,t){return"string"==typeof e&&(e=this.getFunction(e)),(0,s.hexlify)(this._abiCoder.encode(e.outputs,t||[]))},e.prototype.encodeFilterTopics=function(e,t){var r=this;"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&g.throwError("too many arguments for "+e.format(),p.Logger.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});var n=[];e.anonymous||n.push(this.getEventTopic(e));var i=function(e,t){return"string"===e.type?(0,u.id)(t):"bytes"===e.type?(0,c.keccak256)((0,s.hexlify)(t)):("bool"===e.type&&"boolean"==typeof t&&(t=t?"0x01":"0x00"),e.type.match(/^u?int/)&&(t=a.BigNumber.from(t).toHexString()),"address"===e.type&&r._abiCoder.encode(["address"],[t]),(0,s.hexZeroPad)((0,s.hexlify)(t),32))};for(t.forEach((function(t,r){var o=e.inputs[r];o.indexed?null==t?n.push(null):"array"===o.baseType||"tuple"===o.baseType?g.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?n.push(t.map((function(e){return i(o,e)}))):n.push(i(o,t)):null!=t&&g.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)}));n.length&&null===n[n.length-1];)n.pop();return n},e.prototype.encodeEventLog=function(e,t){var r=this;"string"==typeof e&&(e=this.getEvent(e));var n=[],i=[],o=[];return e.anonymous||n.push(this.getEventTopic(e)),t.length!==e.inputs.length&&g.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((function(e,a){var s=t[a];if(e.indexed)if("string"===e.type)n.push((0,u.id)(s));else if("bytes"===e.type)n.push((0,c.keccak256)(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(r._abiCoder.encode([e.type],[s]))}else i.push(e),o.push(s)})),{data:this._abiCoder.encode(i,o),topics:n}},e.prototype.decodeEventLog=function(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){var n=this.getEventTopic(e);(0,s.isHexString)(r[0],32)&&r[0].toLowerCase()===n||g.throwError("fragment/topic mismatch",p.Logger.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:n,value:r[0]}),r=r.slice(1)}var i=[],o=[],a=[];e.inputs.forEach((function(e,t){e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(i.push(d.ParamType.fromObject({type:"bytes32",name:e.name})),a.push(!0)):(i.push(e),a.push(!1)):(o.push(e),a.push(!1))}));var u=null!=r?this._abiCoder.decode(i,(0,s.concat)(r)):null,c=this._abiCoder.decode(o,t,!0),l=[],f=0,h=0;e.inputs.forEach((function(e,t){if(e.indexed)if(null==u)l[t]=new _({_isIndexed:!0,hash:null});else if(a[t])l[t]=new _({_isIndexed:!0,hash:u[h++]});else try{l[t]=u[h++]}catch(e){l[t]=e}else try{l[t]=c[f++]}catch(e){l[t]=e}if(e.name&&null==l[e.name]){var r=l[t];r instanceof Error?Object.defineProperty(l,e.name,{enumerable:!0,get:function(){throw E("property "+JSON.stringify(e.name),r)}}):l[e.name]=r}}));for(var m=function(e){var t=l[e];t instanceof Error&&Object.defineProperty(l,e,{enumerable:!0,get:function(){throw E("index "+e,t)}})},b=0;b<l.length;b++)m(b);return Object.freeze(l)},e.prototype.parseTransaction=function(e){var t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new y({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:a.BigNumber.from(e.value||"0")}):null},e.prototype.parseLog=function(e){var t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new b({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})},e.prototype.parseError=function(e){var t=(0,s.hexlify)(e),r=this.getError(t.substring(0,10).toLowerCase());return r?new v({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null},e.isInterface=function(e){return!(!e||!e._isInterface)},e}();r.Interface=k}}},{package:"@metamask/rpc-methods>@metamask/controllers>@ethersproject/abi"}],[6580,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,s;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6581,{"./_stream_readable":6583,"./_stream_writable":6585,_process:6295,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6582,{"./_stream_transform":6584,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6583,{"../errors":6580,"./_stream_duplex":6581,"./internal/streams/async_iterator":6586,"./internal/streams/buffer_list":6587,"./internal/streams/destroy":6588,"./internal/streams/from":6590,"./internal/streams/state":6592,"./internal/streams/stream":6593,_process:6295,buffer:2438,events:2439,inherits:5299,"string_decoder/":6783,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=S,S.ReadableState=k;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),a=e("buffer").Buffer,s=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(n=n||e("./_stream_duplex"),!(this instanceof S))return new S(t);var r=this instanceof n;this._readableState=new k(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function R(e,t,r,n,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,c);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof s||"string"==typeof t||t===undefined||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)c.endEmitted?w(e,new _):T(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?T(e,c,t,!1):x(e,c)):T(e,c,t,!1)}else n||(c.reading=!1,x(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),x(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),R(this,e,t,!1,r)},S.prototype.unshift=function(e){return R(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){u("readable nexttick read 0"),e.read(0)}function L(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(D,t,e))}function D(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):O(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){w(this,new v("_read()"))},S.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function s(t,r){u("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",l);var f=!1;function h(t){u("ondata");var r=e.write(t);u("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function d(t){u("onerror",t),g(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",m),g()}function m(){u("onfinish"),e.removeListener("close",p),g()}function g(){u("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),o.flowing||(u("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||r.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(N,this),n},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(N,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6584,{"../errors":6580,"./_stream_duplex":6581,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6585,{"../errors":6580,"./_stream_duplex":6581,"./internal/streams/destroy":6588,"./internal/streams/state":6592,"./internal/streams/stream":6593,_process:6295,buffer:2438,inherits:5299,"util-deprecate":6887},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=k;var o={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),s=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function k(t,o,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=o instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(P,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),P(e,t))}(e,n,i,t,o);else{var a=C(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(T,e,n,a,o):T(e,n,a,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(S,this))return new S(t);this._writableState=new k(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function R(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),P(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,R(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(R(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(S,a),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof k)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,c=!o.objectMode&&(i=e,s.isBuffer(i)||i instanceof u);return c&&!s.isBuffer(e)&&(e=function(e){return s.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new v;w(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var o;return null===n?o=new y:"string"==typeof n||t.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o||(w(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=s.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,u,n,i,o);return c}(this,o,c,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6586,{"./end-of-stream":6589,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[a]=null,e[s]=null,t(d(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(d(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(undefined,!0)):t[f](r,n)}),n)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[a]=null,r[s]=null,e(d(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[l]=null,r[a]=null,r[s]=null,t(e)),void(r[u]=e)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(d(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6587,{buffer:2438,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=e("buffer").Buffer,s=e("util").inspect,u=s&&s.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6588,{_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6589,{"../../../errors":6580},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6590,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6591,{"../../../errors":6580,"./end-of-stream":6589},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(t,r,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(l)}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6592,{"../../../errors":6580},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6593,{events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6594,{"./lib/_stream_duplex.js":6581,"./lib/_stream_passthrough.js":6582,"./lib/_stream_readable.js":6583,"./lib/_stream_transform.js":6584,"./lib/_stream_writable.js":6585,"./lib/internal/streams/end-of-stream.js":6589,"./lib/internal/streams/pipeline.js":6591},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snap-controllers>readable-web-to-node-stream>readable-stream"}],[6595,{ms:6081},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=a;var n=e("ms"),i=a.prototype,o=new Date%1e9;function a(e){e=e||{},this.id=e.id||(1e9*Math.random()>>>0)+o++,this.max=e.max||Infinity,this.items=e.items||[],this._lookup={},this.size=this.items.length,this.lastModified=new Date(e.lastModified||new Date);for(var t,r,n=this.items.length;n--;)t=this.items[n],r=new Date(t.expires)-new Date,this._lookup[t.key]=t,r>0?this.expire(t.key,r):r<=0&&this.delete(t.key)}i.has=function(e){return e in this._lookup},i.get=function(e){if(!this.has(e))return null;var t=this._lookup[e];return t.refresh&&this.expire(e,t.refresh),this.items.splice(this.items.indexOf(t),1),this.items.push(t),t.value},i.meta=function(e){if(!this.has(e))return null;var t=this._lookup[e];return"meta"in t?t.meta:null},i.set=function(e,t,r){var n=this._lookup[e],i=this._lookup[e]={key:e,value:t};return this.lastModified=new Date,n?(clearTimeout(n.timeout),this.items.splice(this.items.indexOf(n),1,i)):(this.size>=this.max&&this.delete(this.items[0].key),this.items.push(i),this.size++),r&&("ttl"in r&&this.expire(e,r.ttl),"meta"in r&&(i.meta=r.meta),r.refresh&&(i.refresh=r.ttl)),this},i.delete=function(e){var t=this._lookup[e];return!!t&&(this.lastModified=new Date,this.items.splice(this.items.indexOf(t),1),clearTimeout(t.timeout),delete this._lookup[e],this.size--,this)},i.expire=function(e,t){var r=t||0,i=this._lookup[e];if(!i)return this;if("string"==typeof r&&(r=n(t)),"number"!=typeof r)throw new TypeError("Expiration time must be a string or number.");return clearTimeout(i.timeout),i.timeout=setTimeout(this.delete.bind(this,i.key),r),i.expires=Number(new Date)+r,this},i.clear=function(){for(var e=this.items.length;e--;)this.delete(this.items[e].key);return this},i.toJSON=function(){for(var e,t=new Array(this.items.length),r=t.length;r--;)e=this.items[r],t[r]={key:e.key,meta:e.meta,value:e.value,expires:e.expires,refresh:e.refresh};return{id:this.id,max:isFinite(this.max)?this.max:undefined,lastModified:this.lastModified,items:t}}}}},{package:"3box>ipfs>receptacle"}],[66,{"./util":90,loglevel:6059,"webextension-polyfill":7029},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=a(e("webextension-polyfill")),i=a(e("loglevel")),o=e("./util");function a(e){return e&&e.__esModule?e:{default:e}}r.default=class{constructor(){this.isSupported=Boolean(n.default.storage.local),this.isSupported||i.default.error("Storage local API not available.")}async get(){if(!this.isSupported)return undefined;const e=await this._get();return t=e,0===Object.keys(t).length?undefined:e;var t}async set(e){return this._set(e)}_get(){const{local:e}=n.default.storage;return new Promise(((t,r)=>{e.get(null).then((e=>{const n=(0,o.checkForError)();n?r(n):t(e)}))}))}_set(e){const{local:t}=n.default.storage;return new Promise(((r,n)=>{t.set(e).then((()=>{const e=(0,o.checkForError)();e?n(e):r()}))}))}}}}},{package:"$root$"}],[6603,{url:6883},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("url");t.exports=function(e,t,r,i){var o;return r=r||{},o=(e=n.parse(e,!1,!0)).protocol?e.protocol:(r[o=t.protocol?t.protocol.replace(/:$/,""):"http"]||i||o)+":",e.host&&":"===e.host[0]&&(e.host=null),e.hostname?n.format({protocol:o,slashes:!0,hostname:e.hostname,port:e.port,pathname:e.pathname,search:e.search}):(e.host=t.host,e.port?n.format({protocol:o,slashes:!0,host:t.hostname+":"+e.port,port:e.port,pathname:e.pathname,search:e.search}):e.pathname?n.format({protocol:o,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.pathname=t.pathname,e.search?n.format({protocol:o,slashes:!0,host:e.host,pathname:e.pathname,search:e.search}):(e.search=t.search,e.format(e))))}}}},{package:"3box>ipfs>libp2p-websockets>pull-ws>relative-url"}],[6604,{},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=function(e){return String(e).replace(r.expr,"")}).expr=/\/+$/}}},{package:"analytics-node>remove-trailing-slash"}],[6609,{"./time":6610},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./time");function i(e,t,r){var i=this;this._started=n(),this._rescheduled=0,this._scheduled=t,this._args=r,this._timer=setTimeout((function t(){i._rescheduled>0?(i._scheduled=i._rescheduled-(n()-i._started),i._timer=setTimeout(t,i._scheduled),i._rescheduled=0):e.apply(null,i._args)}),t)}i.prototype.reschedule=function(e){var t=n();return!(t+e-(this._started+this._scheduled)<0)&&(this._started=t,this._rescheduled=e,!0)},i.prototype.clear=function(){clearTimeout(this._timer)},t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("timeout needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new i(arguments[0],arguments[1],e)}}}},{package:"3box>ipfs>libp2p>libp2p-switch>retimer"}],[6610,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){return Date.now()}}}},{package:"3box>ipfs>libp2p>libp2p-switch>retimer"}],[6617,{"truncate-utf8-bytes":6868},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("truncate-utf8-bytes"),i=/[\/\?<>\\:\*\|"]/g,o=/[\x00-\x1f\x80-\x9f]/g,a=/^\.+$/,s=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,u=/[\. ]+$/;function c(e,t){if("string"!=typeof e)throw new Error("Input must be string");var r=e.replace(i,t).replace(o,t).replace(a,t).replace(s,t).replace(u,t);return n(r,255)}t.exports=function(e,t){var r=t&&t.replacement||"",n=c(e,r);return""===r?n:c(n,"")}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename"}],[6625,{buffer:2438,pbkdf2:6275},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("pbkdf2").pbkdf2Sync,i=2147483647;function o(e,t,n,i,o){if(r.isBuffer(e)&&r.isBuffer(n))e.copy(n,i,t,t+o);else for(;o--;)n[i++]=e[t++]}t.exports=function(e,t,a,s,u,c,l){if(0===a||0!=(a&a-1))throw Error("N must be > 0 and a power of 2");if(a>i/128/s)throw Error("Parameter N is too large");if(s>i/128/u)throw Error("Parameter r is too large");var f,h=new r(256*s),d=new r(128*s*a),p=new Int32Array(16),m=new Int32Array(16),g=new r(64),b=n(e,t,1,128*u*s,"sha256");if(l){var y=u*a*2,v=0;f=function(){++v%1e3==0&&l({current:v,total:y,percent:v/y*100})}}for(var _=0;_<u;_++)w(b,128*_*s,s,a,d,h);return n(e,b,1,c,"sha256");function w(e,t,r,n,i,o){var a,s=128*r;for(e.copy(o,0,t,t+s),a=0;a<n;a++)o.copy(i,a*s,0,0+s),E(o,0,s,r),f&&f();for(a=0;a<n;a++){var u=0+64*(2*r-1);R(i,(o.readUInt32LE(u)&n-1)*s,o,0,s),E(o,0,s,r),f&&f()}o.copy(e,t,0,0+s)}function E(e,t,r,n){var i;for(o(e,t+64*(2*n-1),g,0,64),i=0;i<2*n;i++)R(e,64*i,g,0,64),S(g),o(g,0,e,r+64*i,64);for(i=0;i<n;i++)o(e,r+2*i*64,e,t+64*i,64);for(i=0;i<n;i++)o(e,r+64*(2*i+1),e,t+64*(i+n),64)}function k(e,t){return e<<t|e>>>32-t}function S(e){var t;for(t=0;t<16;t++)p[t]=(255&e[4*t+0])<<0,p[t]|=(255&e[4*t+1])<<8,p[t]|=(255&e[4*t+2])<<16,p[t]|=(255&e[4*t+3])<<24;for(o(p,0,m,0,16),t=8;t>0;t-=2)m[4]^=k(m[0]+m[12],7),m[8]^=k(m[4]+m[0],9),m[12]^=k(m[8]+m[4],13),m[0]^=k(m[12]+m[8],18),m[9]^=k(m[5]+m[1],7),m[13]^=k(m[9]+m[5],9),m[1]^=k(m[13]+m[9],13),m[5]^=k(m[1]+m[13],18),m[14]^=k(m[10]+m[6],7),m[2]^=k(m[14]+m[10],9),m[6]^=k(m[2]+m[14],13),m[10]^=k(m[6]+m[2],18),m[3]^=k(m[15]+m[11],7),m[7]^=k(m[3]+m[15],9),m[11]^=k(m[7]+m[3],13),m[15]^=k(m[11]+m[7],18),m[1]^=k(m[0]+m[3],7),m[2]^=k(m[1]+m[0],9),m[3]^=k(m[2]+m[1],13),m[0]^=k(m[3]+m[2],18),m[6]^=k(m[5]+m[4],7),m[7]^=k(m[6]+m[5],9),m[4]^=k(m[7]+m[6],13),m[5]^=k(m[4]+m[7],18),m[11]^=k(m[10]+m[9],7),m[8]^=k(m[11]+m[10],9),m[9]^=k(m[8]+m[11],13),m[10]^=k(m[9]+m[8],18),m[12]^=k(m[15]+m[14],7),m[13]^=k(m[12]+m[15],9),m[14]^=k(m[13]+m[12],13),m[15]^=k(m[14]+m[13],18);for(t=0;t<16;++t)p[t]=m[t]+p[t];for(t=0;t<16;t++){var r=4*t;e[r+0]=p[t]>>0&255,e[r+1]=p[t]>>8&255,e[r+2]=p[t]>>16&255,e[r+3]=p[t]>>24&255}}function R(e,t,r,n,i){for(var o=0;o<i;o++)r[n+o]^=e[t+o]}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"ethereumjs-wallet>scryptsy"}],[6626,{"./lib":6631,"./lib/elliptic":6630},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/elliptic"))}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6627,{"./lib":6631,"./lib/js":6637},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib")(e("./lib/js"))}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6628,{"../../is-buffer/index.js":5584},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=Object.prototype.toString;r.isArray=function(e,t){if(!Array.isArray(e))throw TypeError(t)},r.isBoolean=function(e,r){if("[object Boolean]"!==t.call(e))throw TypeError(r)},r.isBuffer=function(t,r){if(!e.isBuffer(t))throw TypeError(r)},r.isFunction=function(e,r){if("[object Function]"!==t.call(e))throw TypeError(r)},r.isNumber=function(e,r){if("[object Number]"!==t.call(e))throw TypeError(r)},r.isObject=function(e,r){if("[object Object]"!==t.call(e))throw TypeError(r)},r.isBufferLength=function(e,t,r){if(e.length!==t)throw RangeError(r)},r.isBufferLength2=function(e,t,r,n){if(e.length!==t&&e.length!==r)throw RangeError(n)},r.isLengthGTZero=function(e,t){if(0===e.length)throw RangeError(t)},r.isNumberInInterval=function(e,t,r,n){if(e<=t||e>=r)throw RangeError(n)}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6629,{bip66:2327,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("bip66"),o=n.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),a=n.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);r.privateKeyExport=function(e,t,r){var i=n.from(r?o:a);return e.copy(i,r?8:9),t.copy(i,r?181:214),i},r.privateKeyImport=function(e){var t=e.length,r=0;if(!(t<r+1||48!==e[r])&&!(t<(r+=1)+1)&&128&e[r]){var n=127&e[r];if(r+=1,!(n<1||n>2||t<r+n)){var i=e[r+n-1]|(n>1?e[r+n-2]<<8:0);if(!(t<(r+=n)+i||t<r+3||2!==e[r]||1!==e[r+1]||1!==e[r+2]||t<(r+=3)+2||4!==e[r]||e[r+1]>32||t<r+2+e[r+1]))return e.slice(r+2,r+2+e[r+1])}}},r.signatureExport=function(e){for(var t=n.concat([n.from([0]),e.r]),r=33,o=0;r>1&&0===t[o]&&!(128&t[o+1]);--r,++o);for(var a=n.concat([n.from([0]),e.s]),s=33,u=0;s>1&&0===a[u]&&!(128&a[u+1]);--s,++u);return i.encode(t.slice(o),a.slice(u))},r.signatureImport=function(e){var t=n.alloc(32,0),r=n.alloc(32,0);try{var o=i.decode(e);if(33===o.r.length&&0===o.r[0]&&(o.r=o.r.slice(1)),o.r.length>32)throw new Error("R length is too long");if(33===o.s.length&&0===o.s[0]&&(o.s=o.s.slice(1)),o.s.length>32)throw new Error("S length is too long")}catch(e){return}return o.r.copy(t,32-o.r.length),o.s.copy(r,32-o.s.length),{r:t,s:r}},r.signatureImportLax=function(e){var t=n.alloc(32,0),r=n.alloc(32,0),i=e.length,o=0;if(48===e[o++]){var a=e[o++];if(!(128&a&&(o+=a-128)>i)&&2===e[o++]){var s=e[o++];if(128&s){if(o+(a=s-128)>i)return;for(;a>0&&0===e[o];o+=1,a-=1);for(s=0;a>0;o+=1,a-=1)s=(s<<8)+e[o]}if(!(s>i-o)){var u=o;if(o+=s,2===e[o++]){var c=e[o++];if(128&c){if(o+(a=c-128)>i)return;for(;a>0&&0===e[o];o+=1,a-=1);for(c=0;a>0;o+=1,a-=1)c=(c<<8)+e[o]}if(!(c>i-o)){var l=o;for(o+=c;s>0&&0===e[u];s-=1,u+=1);if(!(s>32)){var f=e.slice(u,u+s);for(f.copy(t,32-f.length);c>0&&0===e[l];c-=1,l+=1);if(!(c>32)){var h=e.slice(l,l+c);return h.copy(r,32-h.length),{r:t,s:r}}}}}}}}}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6630,{"../messages.json":6638,"bn.js":2394,"create-hash":2553,elliptic:2685,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),o=e("bn.js"),a=e("elliptic").ec,s=e("../messages.json"),u=new a("secp256k1"),c=u.curve;function l(e){var t=e[0];switch(t){case 2:case 3:return 33!==e.length?null:function(e,t){var r=new o(t);if(r.cmp(c.p)>=0)return null;var n=(r=r.toRed(c.red)).redSqr().redIMul(r).redIAdd(c.b).redSqrt();return 3===e!==n.isOdd()&&(n=n.redNeg()),u.keyPair({pub:{x:r,y:n}})}(t,e.slice(1,33));case 4:case 6:case 7:return 65!==e.length?null:function(e,t,r){var n=new o(t),i=new o(r);if(n.cmp(c.p)>=0||i.cmp(c.p)>=0)return null;if(n=n.toRed(c.red),i=i.toRed(c.red),(6===e||7===e)&&i.isOdd()!==(7===e))return null;var a=n.redSqr().redIMul(n);return i.redSqr().redISub(a.redIAdd(c.b)).isZero()?u.keyPair({pub:{x:n,y:i}}):null}(t,e.slice(1,33),e.slice(33,65));default:return null}}r.privateKeyVerify=function(e){var t=new o(e);return t.cmp(c.n)<0&&!t.isZero()},r.privateKeyExport=function(e,t){var r=new o(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.privateKeyNegate=function(e){var t=new o(e);return t.isZero()?n.alloc(32):c.n.sub(t).umod(c.n).toArrayLike(n,"be",32)},r.privateKeyModInverse=function(e){var t=new o(e);if(t.cmp(c.n)>=0||t.isZero())throw new Error(s.EC_PRIVATE_KEY_RANGE_INVALID);return t.invm(c.n).toArrayLike(n,"be",32)},r.privateKeyTweakAdd=function(e,t){var r=new o(t);if(r.cmp(c.n)>=0)throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(new o(e)),r.cmp(c.n)>=0&&r.isub(c.n),r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toArrayLike(n,"be",32)},r.privateKeyTweakMul=function(e,t){var r=new o(t);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);return r.imul(new o(e)),r.cmp(c.n)&&(r=r.umod(c.n)),r.toArrayLike(n,"be",32)},r.publicKeyCreate=function(e,t){var r=new o(e);if(r.cmp(c.n)>=0||r.isZero())throw new Error(s.EC_PUBLIC_KEY_CREATE_FAIL);return n.from(u.keyFromPrivate(e).getPublic(t,!0))},r.publicKeyConvert=function(e,t){var r=l(e);if(null===r)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return n.from(r.getPublic(t,!0))},r.publicKeyVerify=function(e){return null!==l(e)},r.publicKeyTweakAdd=function(e,t,r){var i=l(e);if(null===i)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(c.n)>=0)throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var a=c.g.mul(t).add(i.pub);if(a.isInfinity())throw new Error(s.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return n.from(a.encode(!0,r))},r.publicKeyTweakMul=function(e,t,r){var i=l(e);if(null===i)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);if((t=new o(t)).cmp(c.n)>=0||t.isZero())throw new Error(s.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.from(i.pub.mul(t).encode(!0,r))},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),i=0;i<e.length;++i)if(r[i]=l(e[i]),null===r[i])throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);for(var o=r[0].pub,a=1;a<r.length;++a)o=o.add(r[a].pub);if(o.isInfinity())throw new Error(s.EC_PUBLIC_KEY_COMBINE_FAIL);return n.from(o.encode(!0,t))},r.signatureNormalize=function(e){var t=new o(e.slice(0,32)),r=new o(e.slice(32,64));if(t.cmp(c.n)>=0||r.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return 1===r.cmp(u.nh)&&c.n.sub(r).toArrayLike(n,"be",32).copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(new o(t).cmp(c.n)>=0||new o(r).cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=new o(e.r);t.cmp(c.n)>=0&&(t=new o(0));var r=new o(e.s);return r.cmp(c.n)>=0&&(r=new o(0)),n.concat([t.toArrayLike(n,"be",32),r.toArrayLike(n,"be",32)])},r.sign=function(e,t,r,i){if("function"==typeof r){var a=r;r=function(r){var u=a(e,t,null,i,r);if(!n.isBuffer(u)||32!==u.length)throw new Error(s.ECDSA_SIGN_FAIL);return new o(u)}}var l=new o(t);if(l.cmp(c.n)>=0||l.isZero())throw new Error(s.ECDSA_SIGN_FAIL);var f=u.sign(e,t,{canonical:!0,k:r,pers:i});return{signature:n.concat([f.r.toArrayLike(n,"be",32),f.s.toArrayLike(n,"be",32)]),recovery:f.recoveryParam}},r.verify=function(e,t,r){var n={r:t.slice(0,32),s:t.slice(32,64)},i=new o(n.r),a=new o(n.s);if(i.cmp(c.n)>=0||a.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);if(1===a.cmp(u.nh)||i.isZero()||a.isZero())return!1;var f=l(r);if(null===f)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);return u.verify(e,n,{x:f.pub.x,y:f.pub.y})},r.recover=function(e,t,r,i){var a={r:t.slice(0,32),s:t.slice(32,64)},l=new o(a.r),f=new o(a.s);if(l.cmp(c.n)>=0||f.cmp(c.n)>=0)throw new Error(s.ECDSA_SIGNATURE_PARSE_FAIL);try{if(l.isZero()||f.isZero())throw new Error;var h=u.recoverPubKey(e,a,r);return n.from(h.encode(!0,i))}catch(e){throw new Error(s.ECDSA_RECOVER_FAIL)}},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var i=l(e);if(null===i)throw new Error(s.EC_PUBLIC_KEY_PARSE_FAIL);var a=new o(t);if(a.cmp(c.n)>=0||a.isZero())throw new Error(s.ECDH_FAIL);return n.from(i.pub.mul(a).encode(!0,r))}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6631,{"./assert":6628,"./der":6629,"./messages.json":6638},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./assert"),i=e("./der"),o=e("./messages.json");function a(e,t){return e===undefined?t:(n.isBoolean(e,o.COMPRESSED_TYPE_INVALID),e)}t.exports=function(e){return{privateKeyVerify:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),32===t.length&&e.privateKeyVerify(t)},privateKeyExport:function(t,r){n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r=a(r,!0);var s=e.privateKeyExport(t,r);return i.privateKeyExport(t,s,r)},privateKeyImport:function(t){if(n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),(t=i.privateKeyImport(t))&&32===t.length&&e.privateKeyVerify(t))return t;throw new Error(o.EC_PRIVATE_KEY_IMPORT_DER_FAIL)},privateKeyNegate:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyNegate(t)},privateKeyModInverse:function(t){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.privateKeyModInverse(t)},privateKeyTweakAdd:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakAdd(t,r)},privateKeyTweakMul:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),e.privateKeyTweakMul(t,r)},publicKeyCreate:function(t,r){return n.isBuffer(t,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(t,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),r=a(r,!0),e.publicKeyCreate(t,r)},publicKeyConvert:function(t,r){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),r=a(r,!0),e.publicKeyConvert(t,r)},publicKeyVerify:function(t){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),e.publicKeyVerify(t)},publicKeyTweakAdd:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),i=a(i,!0),e.publicKeyTweakAdd(t,r,i)},publicKeyTweakMul:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.TWEAK_TYPE_INVALID),n.isBufferLength(r,32,o.TWEAK_LENGTH_INVALID),i=a(i,!0),e.publicKeyTweakMul(t,r,i)},publicKeyCombine:function(t,r){n.isArray(t,o.EC_PUBLIC_KEYS_TYPE_INVALID),n.isLengthGTZero(t,o.EC_PUBLIC_KEYS_LENGTH_INVALID);for(var i=0;i<t.length;++i)n.isBuffer(t[i],o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t[i],33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID);return r=a(r,!0),e.publicKeyCombine(t,r)},signatureNormalize:function(t){return n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),e.signatureNormalize(t)},signatureExport:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(t,64,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=e.signatureExport(t);return i.signatureExport(r)},signatureImport:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImport(t);if(r)return e.signatureImport(r);throw new Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},signatureImportLax:function(t){n.isBuffer(t,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isLengthGTZero(t,o.ECDSA_SIGNATURE_LENGTH_INVALID);var r=i.signatureImportLax(t);if(r)return e.signatureImport(r);throw new Error(o.ECDSA_SIGNATURE_PARSE_DER_FAIL)},sign:function(t,r,i){n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID);var a=null,s=null;return i!==undefined&&(n.isObject(i,o.OPTIONS_TYPE_INVALID),i.data!==undefined&&(n.isBuffer(i.data,o.OPTIONS_DATA_TYPE_INVALID),n.isBufferLength(i.data,32,o.OPTIONS_DATA_LENGTH_INVALID),a=i.data),i.noncefn!==undefined&&(n.isFunction(i.noncefn,o.OPTIONS_NONCEFN_TYPE_INVALID),s=i.noncefn)),e.sign(t,r,s,a)},verify:function(t,r,i){return n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),n.isBuffer(i,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(i,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),e.verify(t,r,i)},recover:function(t,r,i,s){return n.isBuffer(t,o.MSG32_TYPE_INVALID),n.isBufferLength(t,32,o.MSG32_LENGTH_INVALID),n.isBuffer(r,o.ECDSA_SIGNATURE_TYPE_INVALID),n.isBufferLength(r,64,o.ECDSA_SIGNATURE_LENGTH_INVALID),n.isNumber(i,o.RECOVERY_ID_TYPE_INVALID),n.isNumberInInterval(i,-1,4,o.RECOVERY_ID_VALUE_INVALID),s=a(s,!0),e.recover(t,r,i,s)},ecdh:function(t,r){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),e.ecdh(t,r)},ecdhUnsafe:function(t,r,i){return n.isBuffer(t,o.EC_PUBLIC_KEY_TYPE_INVALID),n.isBufferLength2(t,33,65,o.EC_PUBLIC_KEY_LENGTH_INVALID),n.isBuffer(r,o.EC_PRIVATE_KEY_TYPE_INVALID),n.isBufferLength(r,32,o.EC_PRIVATE_KEY_LENGTH_INVALID),i=a(i,!0),e.ecdhUnsafe(t,r,i)}}}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6632,{"./optimized":6633,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./optimized");function o(){this.negative=0,this.words=null,this.length=0}o.fromNumber=function(e){var t=new o;return t.words=[67108863&e],t.length=1,t},o.fromBuffer=function(e){var t=new o;return t.words=new Array(10),t.words[0]=(3&e[28])<<24|e[29]<<16|e[30]<<8|e[31],t.words[1]=(15&e[25])<<22|e[26]<<14|e[27]<<6|e[28]>>>2,t.words[2]=(63&e[22])<<20|e[23]<<12|e[24]<<4|e[25]>>>4,t.words[3]=(255&e[19])<<18|e[20]<<10|e[21]<<2|e[22]>>>6,t.words[4]=(3&e[15])<<24|e[16]<<16|e[17]<<8|e[18],t.words[5]=(15&e[12])<<22|e[13]<<14|e[14]<<6|e[15]>>>2,t.words[6]=(63&e[9])<<20|e[10]<<12|e[11]<<4|e[12]>>>4,t.words[7]=(255&e[6])<<18|e[7]<<10|e[8]<<2|e[9]>>>6,t.words[8]=(3&e[2])<<24|e[3]<<16|e[4]<<8|e[5],t.words[9]=e[0]<<14|e[1]<<6|e[2]>>>2,t.length=10,t.strip()},o.prototype.toBuffer=function(){for(var e=this.words,t=this.length;t<10;++t)e[t]=0;return n.from([e[9]>>>14&255,e[9]>>>6&255,(63&e[9])<<2|e[8]>>>24&3,e[8]>>>16&255,e[8]>>>8&255,255&e[8],e[7]>>>18&255,e[7]>>>10&255,e[7]>>>2&255,(3&e[7])<<6|e[6]>>>20&63,e[6]>>>12&255,e[6]>>>4&255,(15&e[6])<<4|e[5]>>>22&15,e[5]>>>14&255,e[5]>>>6&255,(63&e[5])<<2|e[4]>>>24&3,e[4]>>>16&255,e[4]>>>8&255,255&e[4],e[3]>>>18&255,e[3]>>>10&255,e[3]>>>2&255,(3&e[3])<<6|e[2]>>>20&63,e[2]>>>12&255,e[2]>>>4&255,(15&e[2])<<4|e[1]>>>22&15,e[1]>>>14&255,e[1]>>>6&255,(63&e[1])<<2|e[0]>>>24&3,e[0]>>>16&255,e[0]>>>8&255,255&e[0]])},o.prototype.clone=function(){var e=new o;e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];return e.length=this.length,e.negative=this.negative,e},o.prototype.strip=function(){for(;this.length>1&&0==(0|this.words[this.length-1]);)this.length--;return this},o.prototype.normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.ucmp=function(e){if(this.length!==e.length)return this.length>e.length?1:-1;for(var t=this.length-1;t>=0;--t)if(this.words[t]!==e.words[t])return this.words[t]>e.words[t]?1:-1;return 0},o.prototype.gtOne=function(){return this.length>1||this.words[0]>1},o.prototype.isOverflow=function(){return this.ucmp(o.n)>=0},o.prototype.isHigh=function(){return 1===this.ucmp(o.nh)},o.prototype.bitLengthGT256=function(){return this.length>10||10===this.length&&this.words[9]>4194303},o.prototype.iuaddn=function(e){this.words[0]+=e;for(var t=0;this.words[t]>67108863&&t<this.length;++t)this.words[t]-=67108864,this.words[t+1]+=1;return t===this.length&&(this.words[t]=1,this.length+=1),this},o.prototype.iadd=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.isub(e),this.negative^=1):(e.negative=0,this.isub(e),e.negative=1),this.normSign();var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0,i=0;n<r.length;++n){var o=t.words[n]+r.words[n]+i;this.words[n]=67108863&o,i=o>>>26}for(;0!==i&&n<t.length;++n)o=t.words[n]+i,this.words[n]=67108863&o,i=o>>>26;if(this.length=t.length,0!==i)this.words[this.length++]=i;else if(t!==this)for(;n<t.length;++n)this.words[n]=t.words[n];return this},o.prototype.add=function(e){return this.clone().iadd(e)},o.prototype.isub=function(e){if(this.negative!==e.negative)return 0!==this.negative?(this.negative=0,this.iadd(e),this.negative=1):(e.negative=0,this.iadd(e),e.negative=1),this.normSign();var t,r,n=this.ucmp(e);if(0===n)return this.negative=0,this.words[0]=0,this.length=1,this;n>0?(t=this,r=e):(t=e,r=this);for(var i=0,o=0;i<r.length;++i){var a=t.words[i]-r.words[i]+o;o=a>>26,this.words[i]=67108863&a}for(;0!==o&&i<t.length;++i)o=(a=t.words[i]+o)>>26,this.words[i]=67108863&a;if(0===o&&i<t.length&&t!==this)for(;i<t.length;++i)this.words[i]=t.words[i];return this.length=Math.max(this.length,i),t!==this&&(this.negative^=1),this.strip().normSign()},o.prototype.sub=function(e){return this.clone().isub(e)},o.umulTo=function(e,t,r){r.length=e.length+t.length-1;var n=e.words[0]*t.words[0],i=n/67108864|0;r.words[0]=67108863&n;for(var o=1,a=r.length;o<a;o++){for(var s=i>>>26,u=67108863&i,c=Math.max(0,o-e.length+1),l=Math.min(o,t.length-1);c<=l;c++){var f=o-c,h=e.words[f]*t.words[c]+u;s+=h/67108864|0,u=67108863&h}r.words[o]=u,i=s}return 0!==i&&(r.words[r.length++]=i),r.strip()},o.umulTo10x10=Math.imul?i.umulTo10x10:o.umulTo,o.umulnTo=function(e,t,r){if(0===t)return r.words=[0],r.length=1,r;for(var n=0,i=0;n<e.length;++n){var o=e.words[n]*t+i;r.words[n]=67108863&o,i=o/67108864|0}return i>0?(r.words[n]=i,r.length=e.length+1):r.length=e.length,r},o.prototype.umul=function(e){var t=new o;return t.words=new Array(this.length+e.length),10===this.length&&10===e.length?o.umulTo10x10(this,e,t):1===this.length?o.umulnTo(e,this.words[0],t):1===e.length?o.umulnTo(this,e.words[0],t):o.umulTo(this,e,t)},o.prototype.isplit=function(e){e.length=Math.min(this.length,9);for(var t=0;t<e.length;++t)e.words[t]=this.words[t];if(this.length<=9)return this.words[0]=0,this.length=1,this;var r=this.words[9];for(e.words[e.length++]=4194303&r,t=10;t<this.length;++t){var n=this.words[t];this.words[t-10]=(4194303&n)<<4|r>>>22,r=n}return r>>>=22,this.words[t-10]=r,0===r&&this.length>10?this.length-=10:this.length-=9,this},o.prototype.fireduce=function(){return this.isOverflow()&&this.isub(o.n),this},o.prototype.ureduce=function(){var e=this.clone().isplit(o.tmp).umul(o.nc).iadd(o.tmp);return e.bitLengthGT256()&&(e=e.isplit(o.tmp).umul(o.nc).iadd(o.tmp)).bitLengthGT256()&&(e=e.isplit(o.tmp).umul(o.nc).iadd(o.tmp)),e.fireduce()},o.prototype.ishrn=function(e){for(var t=(1<<e)-1,r=26-e,n=this.length-1,i=0;n>=0;--n){var o=this.words[n];this.words[n]=i<<r|o>>>e,i=o&t}return this.length>1&&0===this.words[this.length-1]&&(this.length-=1),this},o.prototype.uinvm=function(){for(var e=this.clone(),t=o.n.clone(),r=o.fromNumber(1),n=o.fromNumber(0),i=o.fromNumber(0),a=o.fromNumber(1);e.isEven()&&t.isEven();){for(var s=1,u=1;0==(e.words[0]&u)&&0==(t.words[0]&u)&&s<26;++s,u<<=1);e.ishrn(s),t.ishrn(s)}for(var c=t.clone(),l=e.clone();!e.isZero();){for(var f=0,h=1;0==(e.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(e.ishrn(f);f-- >0;)(r.isOdd()||n.isOdd())&&(r.iadd(c),n.isub(l)),r.ishrn(1),n.ishrn(1);for(var d=0,p=1;0==(t.words[0]&p)&&d<26;++d,p<<=1);if(d>0)for(t.ishrn(d);d-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(c),a.isub(l)),i.ishrn(1),a.ishrn(1);e.ucmp(t)>=0?(e.isub(t),r.isub(i),n.isub(a)):(t.isub(e),i.isub(r),a.isub(n))}if(1===i.negative){i.negative=0;var m=i.ureduce();return m.negative^=1,m.normSign().iadd(o.n)}return i.ureduce()},o.prototype.imulK=function(){this.words[this.length]=0,this.words[this.length+1]=0,this.length+=2;for(var e=0,t=0;e<this.length;++e){var r=0|this.words[e];t+=977*r,this.words[e]=67108863&t,t=64*r+(t/67108864|0)}return 0===this.words[this.length-1]&&(this.length-=1,0===this.words[this.length-1]&&(this.length-=1)),this},o.prototype.redIReduce=function(){this.isplit(o.tmp).imulK().iadd(o.tmp),this.bitLengthGT256()&&this.isplit(o.tmp).imulK().iadd(o.tmp);var e=this.ucmp(o.p);return 0===e?(this.words[0]=0,this.length=1):e>0?this.isub(o.p):this.strip(),this},o.prototype.redNeg=function(){return this.isZero()?o.fromNumber(0):o.p.sub(this)},o.prototype.redAdd=function(e){return this.clone().redIAdd(e)},o.prototype.redIAdd=function(e){return this.iadd(e),this.ucmp(o.p)>=0&&this.isub(o.p),this},o.prototype.redIAdd7=function(){return this.iuaddn(7),this.ucmp(o.p)>=0&&this.isub(o.p),this},o.prototype.redSub=function(e){return this.clone().redISub(e)},o.prototype.redISub=function(e){return this.isub(e),0!==this.negative&&this.iadd(o.p),this},o.prototype.redMul=function(e){return this.umul(e).redIReduce()},o.prototype.redSqr=function(){return this.umul(this).redIReduce()},o.prototype.redSqrt=function(){if(this.isZero())return this.clone();for(var e=this.redSqr(),t=e.redSqr(),r=t.redSqr().redMul(t),n=r.redMul(e),i=n.redMul(this),o=i,a=0;a<54;++a)o=o.redSqr().redSqr().redSqr().redSqr().redMul(i);for(o=o.redSqr().redSqr().redSqr().redSqr().redMul(n),a=0;a<5;++a)o=o.redSqr().redSqr().redSqr().redSqr().redMul(i);return 0===(o=(o=o.redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().redSqr().redSqr().redSqr().redSqr().redSqr().redMul(r)).redSqr().ucmp(this)?o:null},o.prototype.redInvm=function(){for(var e,t=this.clone(),r=o.p.clone(),n=o.fromNumber(1),i=o.fromNumber(0);t.gtOne()&&r.gtOne();){for(var a=0,s=1;0==(t.words[0]&s)&&a<26;++a,s<<=1);if(a>0)for(t.ishrn(a);a-- >0;)n.isOdd()&&n.iadd(o.p),n.ishrn(1);for(var u=0,c=1;0==(r.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(r.ishrn(u);u-- >0;)i.isOdd()&&i.iadd(o.p),i.ishrn(1);t.ucmp(r)>=0?(t.isub(r),n.isub(i)):(r.isub(t),i.isub(n))}return 0!==(e=1===t.length&&1===t.words[0]?n:i).negative&&e.iadd(o.p),0!==e.negative?(e.negative=0,e.redIReduce().redNeg()):e.redIReduce()},o.prototype.getNAF=function(e){for(var t=[],r=1<<e+1,n=r-1,i=r>>1,o=this.clone();!o.isZero();){for(var a=0,s=1;0==(o.words[0]&s)&&a<26;++a,s<<=1)t.push(0);if(0!==a)o.ishrn(a);else{var u=o.words[0]&n;if(u>=i)t.push(i-u),o.iuaddn(u-i).ishrn(1);else if(t.push(u),o.words[0]-=u,!o.isZero()){for(a=e-1;a>0;--a)t.push(0);o.ishrn(e)}}}return t},o.prototype.inspect=function(){if(this.isZero())return"0";for(var e=this.toBuffer().toString("hex"),t=0;"0"===e[t];++t);return e.slice(t)},o.n=o.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141","hex")),o.nh=o.n.clone().ishrn(1),o.nc=o.fromBuffer(n.from("000000000000000000000000000000014551231950B75FC4402DA1732FC9BEBF","hex")),o.p=o.fromBuffer(n.from("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F","hex")),o.psn=o.p.sub(o.n),o.tmp=new o,o.tmp.words=new Array(10),o.fromNumber(1).words[3]=0,t.exports=o}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6633,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.umulTo10x10=function(e,t,r){var n,i,o,a=e.words,s=t.words,u=r.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,m=d>>>13,g=0|a[2],b=8191&g,y=g>>>13,v=0|a[3],_=8191&v,w=v>>>13,E=0|a[4],k=8191&E,S=E>>>13,R=0|a[5],T=8191&R,A=R>>>13,C=0|a[6],O=8191&C,P=C>>>13,x=0|a[7],I=8191&x,N=x>>>13,M=0|a[8],L=8191&M,j=M>>>13,F=0|a[9],B=8191&F,D=F>>>13,U=0|s[0],z=8191&U,V=U>>>13,q=0|s[1],G=8191&q,W=q>>>13,K=0|s[2],H=8191&K,Y=K>>>13,Q=0|s[3],J=8191&Q,Z=Q>>>13,$=0|s[4],X=8191&$,ee=$>>>13,te=0|s[5],re=8191&te,ne=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,me=de>>>13;r.length=19,n=Math.imul(f,z),i=Math.imul(f,V);var ge=c+n+((8191&(i+=Math.imul(h,z)))<<13);c=(o=Math.imul(h,V))+(i>>>13)+(ge>>>26),ge&=67108863,n=Math.imul(p,z),i=Math.imul(p,V),i+=Math.imul(m,z),o=Math.imul(m,V),n+=Math.imul(f,G),i+=Math.imul(f,W);var be=c+n+((8191&(i+=Math.imul(h,G)))<<13);c=(o+=Math.imul(h,W))+(i>>>13)+(be>>>26),be&=67108863,n=Math.imul(b,z),i=Math.imul(b,V),i+=Math.imul(y,z),o=Math.imul(y,V),n+=Math.imul(p,G),i+=Math.imul(p,W),i+=Math.imul(m,G),o+=Math.imul(m,W),n+=Math.imul(f,H),i+=Math.imul(f,Y);var ye=c+n+((8191&(i+=Math.imul(h,H)))<<13);c=(o+=Math.imul(h,Y))+(i>>>13)+(ye>>>26),ye&=67108863,n=Math.imul(_,z),i=Math.imul(_,V),i+=Math.imul(w,z),o=Math.imul(w,V),n+=Math.imul(b,G),i+=Math.imul(b,W),i+=Math.imul(y,G),o+=Math.imul(y,W),n+=Math.imul(p,H),i+=Math.imul(p,Y),i+=Math.imul(m,H),o+=Math.imul(m,Y),n+=Math.imul(f,J),i+=Math.imul(f,Z);var ve=c+n+((8191&(i+=Math.imul(h,J)))<<13);c=(o+=Math.imul(h,Z))+(i>>>13)+(ve>>>26),ve&=67108863,n=Math.imul(k,z),i=Math.imul(k,V),i+=Math.imul(S,z),o=Math.imul(S,V),n+=Math.imul(_,G),i+=Math.imul(_,W),i+=Math.imul(w,G),o+=Math.imul(w,W),n+=Math.imul(b,H),i+=Math.imul(b,Y),i+=Math.imul(y,H),o+=Math.imul(y,Y),n+=Math.imul(p,J),i+=Math.imul(p,Z),i+=Math.imul(m,J),o+=Math.imul(m,Z),n+=Math.imul(f,X),i+=Math.imul(f,ee);var _e=c+n+((8191&(i+=Math.imul(h,X)))<<13);c=(o+=Math.imul(h,ee))+(i>>>13)+(_e>>>26),_e&=67108863,n=Math.imul(T,z),i=Math.imul(T,V),i+=Math.imul(A,z),o=Math.imul(A,V),n+=Math.imul(k,G),i+=Math.imul(k,W),i+=Math.imul(S,G),o+=Math.imul(S,W),n+=Math.imul(_,H),i+=Math.imul(_,Y),i+=Math.imul(w,H),o+=Math.imul(w,Y),n+=Math.imul(b,J),i+=Math.imul(b,Z),i+=Math.imul(y,J),o+=Math.imul(y,Z),n+=Math.imul(p,X),i+=Math.imul(p,ee),i+=Math.imul(m,X),o+=Math.imul(m,ee),n+=Math.imul(f,re),i+=Math.imul(f,ne);var we=c+n+((8191&(i+=Math.imul(h,re)))<<13);c=(o+=Math.imul(h,ne))+(i>>>13)+(we>>>26),we&=67108863,n=Math.imul(O,z),i=Math.imul(O,V),i+=Math.imul(P,z),o=Math.imul(P,V),n+=Math.imul(T,G),i+=Math.imul(T,W),i+=Math.imul(A,G),o+=Math.imul(A,W),n+=Math.imul(k,H),i+=Math.imul(k,Y),i+=Math.imul(S,H),o+=Math.imul(S,Y),n+=Math.imul(_,J),i+=Math.imul(_,Z),i+=Math.imul(w,J),o+=Math.imul(w,Z),n+=Math.imul(b,X),i+=Math.imul(b,ee),i+=Math.imul(y,X),o+=Math.imul(y,ee),n+=Math.imul(p,re),i+=Math.imul(p,ne),i+=Math.imul(m,re),o+=Math.imul(m,ne),n+=Math.imul(f,oe),i+=Math.imul(f,ae);var Ee=c+n+((8191&(i+=Math.imul(h,oe)))<<13);c=(o+=Math.imul(h,ae))+(i>>>13)+(Ee>>>26),Ee&=67108863,n=Math.imul(I,z),i=Math.imul(I,V),i+=Math.imul(N,z),o=Math.imul(N,V),n+=Math.imul(O,G),i+=Math.imul(O,W),i+=Math.imul(P,G),o+=Math.imul(P,W),n+=Math.imul(T,H),i+=Math.imul(T,Y),i+=Math.imul(A,H),o+=Math.imul(A,Y),n+=Math.imul(k,J),i+=Math.imul(k,Z),i+=Math.imul(S,J),o+=Math.imul(S,Z),n+=Math.imul(_,X),i+=Math.imul(_,ee),i+=Math.imul(w,X),o+=Math.imul(w,ee),n+=Math.imul(b,re),i+=Math.imul(b,ne),i+=Math.imul(y,re),o+=Math.imul(y,ne),n+=Math.imul(p,oe),i+=Math.imul(p,ae),i+=Math.imul(m,oe),o+=Math.imul(m,ae),n+=Math.imul(f,ue),i+=Math.imul(f,ce);var ke=c+n+((8191&(i+=Math.imul(h,ue)))<<13);c=(o+=Math.imul(h,ce))+(i>>>13)+(ke>>>26),ke&=67108863,n=Math.imul(L,z),i=Math.imul(L,V),i+=Math.imul(j,z),o=Math.imul(j,V),n+=Math.imul(I,G),i+=Math.imul(I,W),i+=Math.imul(N,G),o+=Math.imul(N,W),n+=Math.imul(O,H),i+=Math.imul(O,Y),i+=Math.imul(P,H),o+=Math.imul(P,Y),n+=Math.imul(T,J),i+=Math.imul(T,Z),i+=Math.imul(A,J),o+=Math.imul(A,Z),n+=Math.imul(k,X),i+=Math.imul(k,ee),i+=Math.imul(S,X),o+=Math.imul(S,ee),n+=Math.imul(_,re),i+=Math.imul(_,ne),i+=Math.imul(w,re),o+=Math.imul(w,ne),n+=Math.imul(b,oe),i+=Math.imul(b,ae),i+=Math.imul(y,oe),o+=Math.imul(y,ae),n+=Math.imul(p,ue),i+=Math.imul(p,ce),i+=Math.imul(m,ue),o+=Math.imul(m,ce),n+=Math.imul(f,fe),i+=Math.imul(f,he);var Se=c+n+((8191&(i+=Math.imul(h,fe)))<<13);c=(o+=Math.imul(h,he))+(i>>>13)+(Se>>>26),Se&=67108863,n=Math.imul(B,z),i=Math.imul(B,V),i+=Math.imul(D,z),o=Math.imul(D,V),n+=Math.imul(L,G),i+=Math.imul(L,W),i+=Math.imul(j,G),o+=Math.imul(j,W),n+=Math.imul(I,H),i+=Math.imul(I,Y),i+=Math.imul(N,H),o+=Math.imul(N,Y),n+=Math.imul(O,J),i+=Math.imul(O,Z),i+=Math.imul(P,J),o+=Math.imul(P,Z),n+=Math.imul(T,X),i+=Math.imul(T,ee),i+=Math.imul(A,X),o+=Math.imul(A,ee),n+=Math.imul(k,re),i+=Math.imul(k,ne),i+=Math.imul(S,re),o+=Math.imul(S,ne),n+=Math.imul(_,oe),i+=Math.imul(_,ae),i+=Math.imul(w,oe),o+=Math.imul(w,ae),n+=Math.imul(b,ue),i+=Math.imul(b,ce),i+=Math.imul(y,ue),o+=Math.imul(y,ce),n+=Math.imul(p,fe),i+=Math.imul(p,he),i+=Math.imul(m,fe),o+=Math.imul(m,he),n+=Math.imul(f,pe),i+=Math.imul(f,me);var Re=c+n+((8191&(i+=Math.imul(h,pe)))<<13);c=(o+=Math.imul(h,me))+(i>>>13)+(Re>>>26),Re&=67108863,n=Math.imul(B,G),i=Math.imul(B,W),i+=Math.imul(D,G),o=Math.imul(D,W),n+=Math.imul(L,H),i+=Math.imul(L,Y),i+=Math.imul(j,H),o+=Math.imul(j,Y),n+=Math.imul(I,J),i+=Math.imul(I,Z),i+=Math.imul(N,J),o+=Math.imul(N,Z),n+=Math.imul(O,X),i+=Math.imul(O,ee),i+=Math.imul(P,X),o+=Math.imul(P,ee),n+=Math.imul(T,re),i+=Math.imul(T,ne),i+=Math.imul(A,re),o+=Math.imul(A,ne),n+=Math.imul(k,oe),i+=Math.imul(k,ae),i+=Math.imul(S,oe),o+=Math.imul(S,ae),n+=Math.imul(_,ue),i+=Math.imul(_,ce),i+=Math.imul(w,ue),o+=Math.imul(w,ce),n+=Math.imul(b,fe),i+=Math.imul(b,he),i+=Math.imul(y,fe),o+=Math.imul(y,he),n+=Math.imul(p,pe),i+=Math.imul(p,me);var Te=c+n+((8191&(i+=Math.imul(m,pe)))<<13);c=(o+=Math.imul(m,me))+(i>>>13)+(Te>>>26),Te&=67108863,n=Math.imul(B,H),i=Math.imul(B,Y),i+=Math.imul(D,H),o=Math.imul(D,Y),n+=Math.imul(L,J),i+=Math.imul(L,Z),i+=Math.imul(j,J),o+=Math.imul(j,Z),n+=Math.imul(I,X),i+=Math.imul(I,ee),i+=Math.imul(N,X),o+=Math.imul(N,ee),n+=Math.imul(O,re),i+=Math.imul(O,ne),i+=Math.imul(P,re),o+=Math.imul(P,ne),n+=Math.imul(T,oe),i+=Math.imul(T,ae),i+=Math.imul(A,oe),o+=Math.imul(A,ae),n+=Math.imul(k,ue),i+=Math.imul(k,ce),i+=Math.imul(S,ue),o+=Math.imul(S,ce),n+=Math.imul(_,fe),i+=Math.imul(_,he),i+=Math.imul(w,fe),o+=Math.imul(w,he),n+=Math.imul(b,pe),i+=Math.imul(b,me);var Ae=c+n+((8191&(i+=Math.imul(y,pe)))<<13);c=(o+=Math.imul(y,me))+(i>>>13)+(Ae>>>26),Ae&=67108863,n=Math.imul(B,J),i=Math.imul(B,Z),i+=Math.imul(D,J),o=Math.imul(D,Z),n+=Math.imul(L,X),i+=Math.imul(L,ee),i+=Math.imul(j,X),o+=Math.imul(j,ee),n+=Math.imul(I,re),i+=Math.imul(I,ne),i+=Math.imul(N,re),o+=Math.imul(N,ne),n+=Math.imul(O,oe),i+=Math.imul(O,ae),i+=Math.imul(P,oe),o+=Math.imul(P,ae),n+=Math.imul(T,ue),i+=Math.imul(T,ce),i+=Math.imul(A,ue),o+=Math.imul(A,ce),n+=Math.imul(k,fe),i+=Math.imul(k,he),i+=Math.imul(S,fe),o+=Math.imul(S,he),n+=Math.imul(_,pe),i+=Math.imul(_,me);var Ce=c+n+((8191&(i+=Math.imul(w,pe)))<<13);c=(o+=Math.imul(w,me))+(i>>>13)+(Ce>>>26),Ce&=67108863,n=Math.imul(B,X),i=Math.imul(B,ee),i+=Math.imul(D,X),o=Math.imul(D,ee),n+=Math.imul(L,re),i+=Math.imul(L,ne),i+=Math.imul(j,re),o+=Math.imul(j,ne),n+=Math.imul(I,oe),i+=Math.imul(I,ae),i+=Math.imul(N,oe),o+=Math.imul(N,ae),n+=Math.imul(O,ue),i+=Math.imul(O,ce),i+=Math.imul(P,ue),o+=Math.imul(P,ce),n+=Math.imul(T,fe),i+=Math.imul(T,he),i+=Math.imul(A,fe),o+=Math.imul(A,he),n+=Math.imul(k,pe),i+=Math.imul(k,me);var Oe=c+n+((8191&(i+=Math.imul(S,pe)))<<13);c=(o+=Math.imul(S,me))+(i>>>13)+(Oe>>>26),Oe&=67108863,n=Math.imul(B,re),i=Math.imul(B,ne),i+=Math.imul(D,re),o=Math.imul(D,ne),n+=Math.imul(L,oe),i+=Math.imul(L,ae),i+=Math.imul(j,oe),o+=Math.imul(j,ae),n+=Math.imul(I,ue),i+=Math.imul(I,ce),i+=Math.imul(N,ue),o+=Math.imul(N,ce),n+=Math.imul(O,fe),i+=Math.imul(O,he),i+=Math.imul(P,fe),o+=Math.imul(P,he),n+=Math.imul(T,pe),i+=Math.imul(T,me);var Pe=c+n+((8191&(i+=Math.imul(A,pe)))<<13);c=(o+=Math.imul(A,me))+(i>>>13)+(Pe>>>26),Pe&=67108863,n=Math.imul(B,oe),i=Math.imul(B,ae),i+=Math.imul(D,oe),o=Math.imul(D,ae),n+=Math.imul(L,ue),i+=Math.imul(L,ce),i+=Math.imul(j,ue),o+=Math.imul(j,ce),n+=Math.imul(I,fe),i+=Math.imul(I,he),i+=Math.imul(N,fe),o+=Math.imul(N,he),n+=Math.imul(O,pe),i+=Math.imul(O,me);var xe=c+n+((8191&(i+=Math.imul(P,pe)))<<13);c=(o+=Math.imul(P,me))+(i>>>13)+(xe>>>26),xe&=67108863,n=Math.imul(B,ue),i=Math.imul(B,ce),i+=Math.imul(D,ue),o=Math.imul(D,ce),n+=Math.imul(L,fe),i+=Math.imul(L,he),i+=Math.imul(j,fe),o+=Math.imul(j,he),n+=Math.imul(I,pe),i+=Math.imul(I,me);var Ie=c+n+((8191&(i+=Math.imul(N,pe)))<<13);c=(o+=Math.imul(N,me))+(i>>>13)+(Ie>>>26),Ie&=67108863,n=Math.imul(B,fe),i=Math.imul(B,he),i+=Math.imul(D,fe),o=Math.imul(D,he),n+=Math.imul(L,pe),i+=Math.imul(L,me);var Ne=c+n+((8191&(i+=Math.imul(j,pe)))<<13);c=(o+=Math.imul(j,me))+(i>>>13)+(Ne>>>26),Ne&=67108863,n=Math.imul(B,pe),i=Math.imul(B,me);var Me=c+n+((8191&(i+=Math.imul(D,pe)))<<13);return c=(o=Math.imul(D,me))+(i>>>13)+(Me>>>26),Me&=67108863,u[0]=ge,u[1]=be,u[2]=ye,u[3]=ve,u[4]=_e,u[5]=we,u[6]=Ee,u[7]=ke,u[8]=Se,u[9]=Re,u[10]=Te,u[11]=Ae,u[12]=Ce,u[13]=Oe,u[14]=Pe,u[15]=xe,u[16]=Ie,u[17]=Ne,u[18]=Me,0!==c&&(u[19]=c,r.length++),r}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6634,{"./bn":6632},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./bn");function i(e,t,r){null===e&&null===t&&null===r?(this.x=i.one,this.y=i.one,this.z=i.zero):(this.x=e,this.y=t,this.z=r),this.zOne=this.z===i.one}i.zero=n.fromNumber(0),i.one=n.fromNumber(1),i.prototype.neg=function(){return this.inf?this:new i(this.x,this.y.redNeg(),this.z)},i.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),o=e.x.redMul(r),a=this.y.redMul(t).redMul(e.z),s=e.y.redMul(r).redMul(this.z),u=n.redSub(o),c=a.redSub(s);if(u.isZero())return c.isZero()?this.dbl():new i(null,null,null);var l=u.redSqr(),f=n.redMul(l),h=l.redMul(u),d=c.redSqr().redIAdd(h).redISub(f).redISub(f);return new i(d,c.redMul(f.redISub(d)).redISub(a.redMul(h)),this.z.redMul(e.z).redMul(u))},i.prototype.mixedAdd=function(e){if(this.inf)return e.toECJPoint();if(e.inf)return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),o=this.y,a=e.y.redMul(t).redMul(this.z),s=r.redSub(n),u=o.redSub(a);if(s.isZero())return u.isZero()?this.dbl():new i(null,null,null);var c=s.redSqr(),l=r.redMul(c),f=c.redMul(s),h=u.redSqr().redIAdd(f).redISub(l).redISub(l);return new i(h,u.redMul(l.redISub(h)).redISub(o.redMul(f)),this.z.redMul(s))},i.prototype.dbl=function(){if(this.inf)return this;var e,t,r;if(this.zOne){var n=this.x.redSqr(),o=this.y.redSqr(),a=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(n).redISub(a);s=s.redIAdd(s);var u=n.redAdd(n).redIAdd(n),c=u.redSqr().redISub(s).redISub(s),l=a.redIAdd(a).redIAdd(a).redIAdd(a);e=c,t=u.redMul(s.redISub(c)).redISub(l),r=this.y.redAdd(this.y)}else{var f=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),p=this.x.redAdd(h).redSqr().redISub(f).redISub(d);p=p.redIAdd(p);var m=f.redAdd(f).redIAdd(f),g=m.redSqr(),b=d.redIAdd(d).redIAdd(d).redIAdd(d);e=g.redISub(p).redISub(p),t=m.redMul(p.redISub(e)).redISub(b),r=(r=this.y.redMul(this.z)).redIAdd(r)}return new i(e,t,r)},i.prototype.dblp=function(e){if(0===e||this.inf)return this;for(var t=this,r=0;r<e;r++)t=t.dbl();return t},Object.defineProperty(i.prototype,"inf",{enumerable:!0,get:function(){return this.z.isZero()}}),t.exports=i}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6635,{"./bn":6632,"./ecjpoint":6634,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./bn"),o=e("./ecjpoint");function a(e,t){null===e&&null===t?(this.x=this.y=null,this.inf=!0):(this.x=e,this.y=t,this.inf=!1)}a.fromPublicKey=function(e){var t,r,n=e[0];return 33!==e.length||2!==n&&3!==n?65!==e.length||4!==n&&6!==n&&7!==n?null:(t=i.fromBuffer(e.slice(1,33)),r=i.fromBuffer(e.slice(33,65)),t.ucmp(i.p)>=0||r.ucmp(i.p)>=0?null:6!==n&&7!==n||r.isOdd()===(7===n)?0!==t.redSqr().redMul(t).redIAdd7().ucmp(r.redSqr())?null:new a(t,r):null):(t=i.fromBuffer(e.slice(1,33))).ucmp(i.p)>=0||null===(r=t.redSqr().redMul(t).redIAdd7().redSqrt())?null:(3===n!==r.isOdd()&&(r=r.redNeg()),new a(t,r))},a.prototype.toPublicKey=function(e){var t,r=this.x,i=this.y;return e?((t=n.alloc(33))[0]=i.isOdd()?3:2,r.toBuffer().copy(t,1)):((t=n.alloc(65))[0]=4,r.toBuffer().copy(t,1),i.toBuffer().copy(t,33)),t},a.fromECJPoint=function(e){if(e.inf)return new a(null,null);var t=e.z.redInvm(),r=t.redSqr();return new a(e.x.redMul(r),e.y.redMul(r).redMul(t))},a.prototype.toECJPoint=function(){return this.inf?new o(null,null,null):new o(this.x,this.y,o.one)},a.prototype.neg=function(){return this.inf?this:new a(this.x,this.y.redNeg())},a.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(0===this.x.ucmp(e.x))return 0===this.y.ucmp(e.y)?this.dbl():new a(null,null);var t=this.y.redSub(e.y);t.isZero()||(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x);return new a(r,t.redMul(this.x.redSub(r)).redISub(this.y))},a.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.isZero())return new a(null,null);var t=this.x.redSqr(),r=t.redAdd(t).redIAdd(t).redMul(e.redInvm()),n=r.redSqr().redISub(this.x.redAdd(this.x));return new a(n,r.redMul(this.x.redSub(n)).redISub(this.y))},a.prototype.mul=function(e){for(var t=this._getNAFPoints(4),r=t.points,n=e.getNAF(t.wnd),i=new o(null,null,null),s=n.length-1;s>=0;s--){for(var u=0;s>=0&&0===n[s];s--,++u);if(s>=0&&(u+=1),i=i.dblp(u),s<0)break;var c=n[s];i=c>0?i.mixedAdd(r[c-1>>1]):i.mixedAdd(r[-c-1>>1].neg())}return a.fromECJPoint(i)},a.prototype._getNAFPoints1=function(){return{wnd:1,points:[this]}},a.prototype._getNAFPoints=function(e){var t=new Array((1<<e)-1);t[0]=this;for(var r=this.dbl(),n=1;n<t.length;++n)t[n]=t[n-1].add(r);return{wnd:e,points:t}},t.exports=a}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6636,{"./bn":6632,"./ecjpoint":6634,"./ecpoint":6635,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("./bn"),o=e("./ecpoint"),a=e("./ecjpoint");function s(){this.x=i.fromBuffer(n.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=i.fromBuffer(n.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this.precomputed=undefined}s.prototype._precompute=function(){if(this.precomputed===undefined){for(var e=new o(this.x,this.y),t=new Array(1+Math.ceil(64.25)),r=t[0]=e,n=1;n<t.length;++n){for(var i=0;i<4;i++)r=r.dbl();t[n]=r}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map((function(e){return e.neg()}))}}}},s.prototype.mul=function(e){this._precompute();for(var t=this.precomputed.doubles.step,r=this.precomputed.doubles.points,n=this.precomputed.doubles.negpoints,i=e.getNAF(1),s=((1<<t+1)-(t%2==0?2:1))/3,u=[],c=0;c<i.length;c+=t){for(var l=0,f=c+t-1;f>=c;f--)l=(l<<1)+i[f];u.push(l)}for(var h=new a(null,null,null),d=new a(null,null,null),p=s;p>0;p--){for(var m=0;m<u.length;m++)u[m]===p?d=d.mixedAdd(r[m]):u[m]===-p&&(d=d.mixedAdd(n[m]));h=h.add(d)}return o.fromECJPoint(h)},s.prototype.mulAdd=function(e,t,r){this._precompute();for(var n=this.precomputed.naf,i=t._getNAFPoints1(),o=[n.points,i.points],s=[e.getNAF(n.wnd),r.getNAF(i.wnd)],u=new a(null,null,null),c=[null,null],l=Math.max(s[0].length,s[1].length);l>=0;l--){for(var f=0;l>=0&&(c[0]=0|s[0][l],c[1]=0|s[1][l],0===c[0]&&0===c[1]);++f,--l);if(l>=0&&(f+=1),u=u.dblp(f),l<0)break;for(var h=0;h<2;h++){var d,p=c[h];0!==p&&(p>0?d=o[h][p>>1]:p<0&&(d=o[h][-p>>1].neg()),u=d.z===undefined?u.mixedAdd(d):u.add(d))}}return u},t.exports=new s}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6637,{"../messages.json":6638,"./bn":6632,"./ecpoint":6635,"./ecpointg":6636,"create-hash":2553,"drbg.js/hmac":2681,"safe-buffer":6615},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("safe-buffer").Buffer,i=e("create-hash"),o=e("drbg.js/hmac"),a=e("../messages.json"),s=e("./bn"),u=e("./ecpoint"),c=e("./ecpointg");r.privateKeyVerify=function(e){var t=s.fromBuffer(e);return!(t.isOverflow()||t.isZero())},r.privateKeyExport=function(e,t){var r=s.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(a.EC_PRIVATE_KEY_EXPORT_DER_FAIL);return c.mul(r).toPublicKey(t)},r.privateKeyNegate=function(e){var t=s.fromBuffer(e);return t.isZero()?n.alloc(32):(t.ucmp(s.n)>0&&t.isub(s.n),s.n.sub(t).toBuffer())},r.privateKeyModInverse=function(e){var t=s.fromBuffer(e);if(t.isOverflow()||t.isZero())throw new Error(a.EC_PRIVATE_KEY_RANGE_INVALID);return t.uinvm().toBuffer()},r.privateKeyTweakAdd=function(e,t){var r=s.fromBuffer(t);if(r.isOverflow())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);if(r.iadd(s.fromBuffer(e)),r.isOverflow()&&r.isub(s.n),r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_ADD_FAIL);return r.toBuffer()},r.privateKeyTweakMul=function(e,t){var r=s.fromBuffer(t);if(r.isOverflow()||r.isZero())throw new Error(a.EC_PRIVATE_KEY_TWEAK_MUL_FAIL);var n=s.fromBuffer(e);return r.umul(n).ureduce().toBuffer()},r.publicKeyCreate=function(e,t){var r=s.fromBuffer(e);if(r.isOverflow()||r.isZero())throw new Error(a.EC_PUBLIC_KEY_CREATE_FAIL);return c.mul(r).toPublicKey(t)},r.publicKeyConvert=function(e,t){var r=u.fromPublicKey(e);if(null===r)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);return r.toPublicKey(t)},r.publicKeyVerify=function(e){return null!==u.fromPublicKey(e)},r.publicKeyTweakAdd=function(e,t,r){var n=u.fromPublicKey(e);if(null===n)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=s.fromBuffer(t)).isOverflow())throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);var i=c.mul(t).add(n);if(i.inf)throw new Error(a.EC_PUBLIC_KEY_TWEAK_ADD_FAIL);return i.toPublicKey(r)},r.publicKeyTweakMul=function(e,t,r){var n=u.fromPublicKey(e);if(null===n)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);if((t=s.fromBuffer(t)).isOverflow()||t.isZero())throw new Error(a.EC_PUBLIC_KEY_TWEAK_MUL_FAIL);return n.mul(t).toPublicKey(r)},r.publicKeyCombine=function(e,t){for(var r=new Array(e.length),n=0;n<e.length;++n)if(r[n]=u.fromPublicKey(e[n]),null===r[n])throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);for(var i=r[0],o=1;o<r.length;++o)i=i.add(r[o]);if(i.inf)throw new Error(a.EC_PUBLIC_KEY_COMBINE_FAIL);return i.toPublicKey(t)},r.signatureNormalize=function(e){var t=s.fromBuffer(e.slice(0,32)),r=s.fromBuffer(e.slice(32,64));if(t.isOverflow()||r.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);var i=n.from(e);return r.isHigh()&&s.n.sub(r).toBuffer().copy(i,32),i},r.signatureExport=function(e){var t=e.slice(0,32),r=e.slice(32,64);if(s.fromBuffer(t).isOverflow()||s.fromBuffer(r).isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);return{r:t,s:r}},r.signatureImport=function(e){var t=s.fromBuffer(e.r);t.isOverflow()&&(t=s.fromNumber(0));var r=s.fromBuffer(e.s);return r.isOverflow()&&(r=s.fromNumber(0)),n.concat([t.toBuffer(),r.toBuffer()])},r.sign=function(e,t,r,i){var u=s.fromBuffer(t);if(u.isOverflow()||u.isZero())throw new Error(a.ECDSA_SIGN_FAIL);if(null===r){var l=new o("sha256",t,e,i);r=function(){return l.generate(32)}}for(var f=s.fromBuffer(e),h=0;;++h){var d=r(e,t,null,i,h);if(!n.isBuffer(d)||32!==d.length)throw new Error(a.ECDSA_SIGN_FAIL);var p=s.fromBuffer(d);if(!p.isOverflow()&&!p.isZero()){var m=c.mul(p),g=m.x.fireduce();if(!g.isZero()){var b=p.uinvm().umul(g.umul(u).ureduce().iadd(f).fireduce()).ureduce();if(!b.isZero()){var y=(0!==m.x.ucmp(g)?2:0)|(m.y.isOdd()?1:0);return b.isHigh()&&(b=s.n.sub(b),y^=1),{signature:n.concat([g.toBuffer(),b.toBuffer()]),recovery:y}}}}}},r.verify=function(e,t,r){var n=s.fromBuffer(t.slice(0,32)),i=s.fromBuffer(t.slice(32,64));if(n.isOverflow()||i.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);if(i.isHigh()||n.isZero()||i.isZero())return!1;var o=u.fromPublicKey(r);if(null===o)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var l=i.uinvm(),f=l.umul(s.fromBuffer(e)).ureduce(),h=l.umul(n).ureduce(),d=c.mulAdd(f,o,h);if(d.inf)return!1;var p=d.z.redSqr();return 0===n.redMul(p).ucmp(d.x)||!(n.ucmp(s.psn)>=0)&&0===n.iadd(s.psn).redMul(p).ucmp(d.x)},r.recover=function(e,t,r,i){var o=s.fromBuffer(t.slice(0,32)),l=s.fromBuffer(t.slice(32,64));if(o.isOverflow()||l.isOverflow())throw new Error(a.ECDSA_SIGNATURE_PARSE_FAIL);do{if(o.isZero()||l.isZero())break;var f=o;if(r>>1){if(f.ucmp(s.psn)>=0)break;f=o.add(s.n)}var h=n.concat([n.from([2+(1&r)]),f.toBuffer()]),d=u.fromPublicKey(h);if(null===d)break;var p=o.uinvm(),m=s.n.sub(s.fromBuffer(e)).umul(p).ureduce(),g=l.umul(p).ureduce();return u.fromECJPoint(c.mulAdd(m,d,g)).toPublicKey(i)}while(0);throw new Error(a.ECDSA_RECOVER_FAIL)},r.ecdh=function(e,t){var n=r.ecdhUnsafe(e,t,!0);return i("sha256").update(n).digest()},r.ecdhUnsafe=function(e,t,r){var n=u.fromPublicKey(e);if(null===n)throw new Error(a.EC_PUBLIC_KEY_PARSE_FAIL);var i=s.fromBuffer(t);if(i.isOverflow()||i.isZero())throw new Error(a.ECDH_FAIL);return n.mul(i).toPublicKey(r)}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6638,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={COMPRESSED_TYPE_INVALID:"compressed should be a boolean",EC_PRIVATE_KEY_TYPE_INVALID:"private key should be a Buffer",EC_PRIVATE_KEY_LENGTH_INVALID:"private key length is invalid",EC_PRIVATE_KEY_RANGE_INVALID:"private key range is invalid",EC_PRIVATE_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting private key is invalid",EC_PRIVATE_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PRIVATE_KEY_EXPORT_DER_FAIL:"couldn't export to DER format",EC_PRIVATE_KEY_IMPORT_DER_FAIL:"couldn't import from DER format",EC_PUBLIC_KEYS_TYPE_INVALID:"public keys should be an Array",EC_PUBLIC_KEYS_LENGTH_INVALID:"public keys Array should have at least 1 element",EC_PUBLIC_KEY_TYPE_INVALID:"public key should be a Buffer",EC_PUBLIC_KEY_LENGTH_INVALID:"public key length is invalid",EC_PUBLIC_KEY_PARSE_FAIL:"the public key could not be parsed or is invalid",EC_PUBLIC_KEY_CREATE_FAIL:"private was invalid, try again",EC_PUBLIC_KEY_TWEAK_ADD_FAIL:"tweak out of range or resulting public key is invalid",EC_PUBLIC_KEY_TWEAK_MUL_FAIL:"tweak out of range",EC_PUBLIC_KEY_COMBINE_FAIL:"the sum of the public keys is not valid",ECDH_FAIL:"scalar was invalid (zero or overflow)",ECDSA_SIGNATURE_TYPE_INVALID:"signature should be a Buffer",ECDSA_SIGNATURE_LENGTH_INVALID:"signature length is invalid",ECDSA_SIGNATURE_PARSE_FAIL:"couldn't parse signature",ECDSA_SIGNATURE_PARSE_DER_FAIL:"couldn't parse DER signature",ECDSA_SIGNATURE_SERIALIZE_DER_FAIL:"couldn't serialize signature to DER format",ECDSA_SIGN_FAIL:"nonce generation function failed or private key is invalid",ECDSA_RECOVER_FAIL:"couldn't recover public key from signature",MSG32_TYPE_INVALID:"message should be a Buffer",MSG32_LENGTH_INVALID:"message length is invalid",OPTIONS_TYPE_INVALID:"options should be an Object",OPTIONS_DATA_TYPE_INVALID:"options.data should be a Buffer",OPTIONS_DATA_LENGTH_INVALID:"options.data length is invalid",OPTIONS_NONCEFN_TYPE_INVALID:"options.noncefn should be a Function",RECOVERY_ID_TYPE_INVALID:"recovery should be a Number",RECOVERY_ID_VALUE_INVALID:"recovery should have value between -1 and 4",TWEAK_TYPE_INVALID:"tweak should be a Buffer",TWEAK_LENGTH_INVALID:"tweak length is invalid"}}}},{package:"eth-trezor-keyring>hdkey>secp256k1"}],[6696,{"./lib/index":6700},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./lib/index")}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6697,{"./random/random-from-seed":6703},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,o,a=e("./random/random-from-seed"),s="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function u(){o=!1}function c(e){if(e){if(e!==n){if(e.length!==s.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,r){return t!==r.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+s.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,u()}}else n!==s&&(n=s,u())}function l(){return o||(o=function(){n||c(s);for(var e,t=n.split(""),r=[],i=a.nextValue();t.length>0;)i=a.nextValue(),e=Math.floor(i*t.length),r.push(t.splice(e,1)[0]);return r.join("")}())}t.exports={get:function(){return n||s},characters:function(e){return c(e),n},seed:function(e){a.seed(e),i!==e&&(u(),i=e)},lookup:function(e){return l()[e]},shuffled:l}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6698,{"./alphabet":6697,"./generate":6699},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,o=e("./generate");e("./alphabet");t.exports=function(e){var t="",r=Math.floor(.001*(Date.now()-1459707606518));return r===i?n++:(n=0,i=r),t+=o(6),t+=o(e),n>0&&(t+=o(n)),t+=o(r)}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6699,{"./alphabet":6697,"./random/random-byte":6702,"nanoid/format":6133},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./alphabet"),i=e("./random/random-byte"),o=e("nanoid/format");t.exports=function(e){for(var t,r=0,a="";!t;)a+=o(i,n.get(),1),t=e<Math.pow(16,r+1),r++;return a}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[67,{"../../../shared/constants/app":7055,"../../../shared/constants/metametrics":7059,"../../../shared/modules/random-id":7085,"../metamask-controller":91,"@metamask/obs-store":1471,buffer:2438,"eth-rpc-errors":2821,"ethereumjs-util":2896,events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0,r.normalizeMsgData=d;var n=f(e("events")),i=e("@metamask/obs-store"),o=e("ethereumjs-util"),a=e("eth-rpc-errors"),s=e("../../../shared/constants/app"),u=e("../metamask-controller"),c=f(e("../../../shared/modules/random-id")),l=e("../../../shared/constants/metametrics");function f(e){return e&&e.__esModule?e:{default:e}}class h extends n.default{constructor({metricsEvent:e}){super(),this.memStore=new i.ObservableStore({unapprovedMsgs:{},unapprovedMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}async addUnapprovedMessageAsync(e,t){const r=this.addUnapprovedMessage(e,t);return await new Promise(((t,n)=>{this.once(`${r}:finished`,(r=>{switch(r.status){case"signed":return t(r.rawSig);case"rejected":return n(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return n(new Error(`MetaMask Message Signature: ${r.error}`));default:return n(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){t&&(e.origin=t.origin),e.data=d(e.data);const r=(new Date).getTime(),n=(0,c.default)(),i={id:n,msgParams:e,time:r,status:"unapproved",type:s.MESSAGE_TYPE.ETH_SIGN};return this.addMsg(i),this.emit("update"),n}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const r=this.getMsg(e);r.rawSig=t,this._updateMsg(r),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const r=this.getMsg(e);this.metricsEvent({event:t,category:l.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:r.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`MessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedMsgs:e,unapprovedMsgCount:t}),this.emit(u.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}}function d(e){return"0x"===e.slice(0,2)?e:(0,o.bufferToHex)(t.from(e,"utf8"))}r.default=h}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[6700,{"./alphabet":6697,"./build":6698,"./is-valid":6701,"./util/cluster-worker-id":6704},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./alphabet"),i=e("./build"),o=e("./is-valid"),a=e("./util/cluster-worker-id")||0;function s(){return i(a)}t.exports=s,t.exports.generate=s,t.exports.seed=function(e){return n.seed(e),t.exports},t.exports.worker=function(e){return a=e,t.exports},t.exports.characters=function(e){return e!==undefined&&n.characters(e),n.shuffled()},t.exports.isValid=o}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6701,{"./alphabet":6697},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./alphabet");t.exports=function(e){return!(!e||"string"!=typeof e||e.length<6)&&!new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e)}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6702,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i="object"==typeof window&&(window.crypto||window.msCrypto);n=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],r=0;r<e;r++)t.push(Math.floor(256*Math.random()));return t},t.exports=n}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6703,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=1;t.exports={nextValue:function(){return(n=(9301*n+49297)%233280)/233280},seed:function(e){n=e}}}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6704,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=0}}},{package:"3box>ipfs-postmsg-proxy>shortid"}],[6705,{varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("varint");r.encode=function e(t,r,i){t=t>=0?2*t:-2*t-1;var o=n.encode(t,r,i);return e.bytes=n.encode.bytes,o},r.decode=function e(t,r){var i=n.decode(t,r);return e.bytes=n.decode.bytes,1&i?(i+1)/-2:i/2},r.encodingLength=function(e){return n.encodingLength(e>=0?2*e:-2*e-1)}}}},{package:"3box>ipfs>protons>signed-varint"}],[6706,{buffer:2438,debug:2622,"get-browser-rtc":5073,inherits:5299,randombytes:6430,"readable-stream":6721},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){t.exports=c;var n=e("debug")("simple-peer"),i=e("get-browser-rtc"),o=e("inherits"),a=e("randombytes"),s=e("readable-stream"),u=65536;function c(e){var t=this;if(!(t instanceof c))return new c(e);if(t._id=a(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),s.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||a(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||c.channelConfig,t.config=Object.assign({},c.config,e.config),t.offerOptions=e.offerOptions||{},t.answerOptions=e.answerOptions||{},t.sdpTransform=e.sdpTransform||function(e){return e},t.streams=e.streams||(e.stream?[e.stream]:[]),t.trickle=e.trickle===undefined||e.trickle,t.allowHalfTrickle=e.allowHalfTrickle!==undefined&&e.allowHalfTrickle,t.iceCompleteTimeout=e.iceCompleteTimeout||5e3,t.destroyed=!1,t._connected=!1,t.remoteAddress=undefined,t.remoteFamily=undefined,t.remotePort=undefined,t.localAddress=undefined,t.localFamily=undefined,t.localPort=undefined,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!t._wrtc)throw"undefined"==typeof window?f("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):f("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._iceCompleteTimer=null,t._channel=null,t._pendingCandidates=[],t._isNegotiating=!t.initiator,t._batchedNegotiation=!1,t._queuedNegotiation=!1,t._sendersAwaitingStable=[],t._senderMap=new Map,t._firstStable=!0,t._closingInterval=null,t._remoteTracks=[],t._remoteStreams=[],t._chunk=null,t._cb=null,t._interval=null;try{t._pc=new t._wrtc.RTCPeerConnection(t.config)}catch(e){return void setTimeout((()=>t.destroy(e)),0)}t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceStateChange()},t._pc.onicegatheringstatechange=function(){t._onIceStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.initiator?t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}):t._pc.ondatachannel=function(e){t._setupData(e)},t.streams&&t.streams.forEach((function(e){t.addStream(e)})),t._pc.ontrack=function(e){t._onTrack(e)},t.initiator&&t._needsNegotiation(),t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function l(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function f(e,t){var r=new Error(e);return r.code=t,r}o(c,s.Duplex),c.WEBRTC_SUPPORT=!!i(),c.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},c.channelConfig={},Object.defineProperty(c.prototype,"bufferSize",{get:function(){return this._channel&&this._channel.bufferedAmount||0}}),Object.defineProperty(c.prototype,"connected",{get:function(){return this._connected&&"open"===this._channel.readyState}}),c.prototype.address=function(){var e=this;return{port:e.localPort,family:e.localFamily,address:e.localAddress}},c.prototype.signal=function(e){var t=this;if(t.destroyed)throw f("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}t._debug("signal()"),e.renegotiate&&t.initiator&&(t._debug("got request to renegotiate"),t._needsNegotiation()),e.transceiverRequest&&t.initiator&&(t._debug("got request for transceiver"),t.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(t._pc.localDescription&&t._pc.localDescription.type&&t._pc.remoteDescription&&t._pc.remoteDescription.type?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e)).then((function(){t.destroyed||(t._pendingCandidates.forEach((function(e){t._addIceCandidate(e)})),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())})).catch((function(e){t.destroy(f(e,"ERR_SET_REMOTE_DESCRIPTION"))})),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||t.destroy(f("signal() called with invalid signal data","ERR_SIGNALING"))},c.prototype._addIceCandidate=function(e){var t=this,r=new t._wrtc.RTCIceCandidate(e);t._pc.addIceCandidate(r).catch((function(e){var n;!r.address||r.address.endsWith(".local")?(n="Ignoring unsupported ICE candidate.",console.warn(n)):t.destroy(f(e,"ERR_ADD_ICE_CANDIDATE"))}))},c.prototype.send=function(e){this._channel.send(e)},c.prototype.addTransceiver=function(e,t){var r=this;if(r._debug("addTransceiver()"),r.initiator)try{r._pc.addTransceiver(e,t),r._needsNegotiation()}catch(e){r.destroy(e)}else r.emit("signal",{transceiverRequest:{kind:e,init:t}})},c.prototype.addStream=function(e){var t=this;t._debug("addStream()"),e.getTracks().forEach((function(r){t.addTrack(r,e)}))},c.prototype.addTrack=function(e,t){var r=this;r._debug("addTrack()");var n=r._senderMap.get(e)||new Map,i=n.get(t);i?i.removed?r.destroy(f("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED")):r.destroy(f("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED")):(i=r._pc.addTrack(e,t),n.set(t,i),r._senderMap.set(e,n),r._needsNegotiation())},c.prototype.replaceTrack=function(e,t,r){var n=this;n._debug("replaceTrack()");var i=n._senderMap.get(e),o=i?i.get(r):null;o||n.destroy(f("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED")),t&&n._senderMap.set(t,i),null!=o.replaceTrack?o.replaceTrack(t):n.destroy(f("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))},c.prototype.removeTrack=function(e,t){var r=this;r._debug("removeSender()");var n=r._senderMap.get(e),i=n?n.get(t):null;i||r.destroy(f("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED"));try{i.removed=!0,r._pc.removeTrack(i)}catch(e){"NS_ERROR_UNEXPECTED"===e.name?r._sendersAwaitingStable.push(i):r.destroy(e)}r._needsNegotiation()},c.prototype.removeStream=function(e){var t=this;t._debug("removeSenders()"),e.getTracks().forEach((function(r){t.removeTrack(r,e)}))},c.prototype._needsNegotiation=function(){var e=this;e._debug("_needsNegotiation"),e._batchedNegotiation||(e._batchedNegotiation=!0,setTimeout((function(){e._batchedNegotiation=!1,e._debug("starting batched negotiation"),e.negotiate()}),0))},c.prototype.negotiate=function(){var e=this;e.initiator?e._isNegotiating?(e._queuedNegotiation=!0,e._debug("already negotiating, queueing")):(e._debug("start negotiation"),setTimeout((()=>{e._createOffer()}),0)):e._isNegotiating||(e._debug("requesting negotiation from initiator"),e.emit("signal",{renegotiate:!0})),e._isNegotiating=!0},c.prototype.destroy=function(e){this._destroy(e,(function(){}))},c.prototype._destroy=function(e,t){var r=this;if(!r.destroyed){if(r._debug("destroy (error: %s)",e&&(e.message||e)),r.readable=r.writable=!1,r._readableState.ended||r.push(null),r._writableState.finished||r.end(),r.destroyed=!0,r._connected=!1,r._pcReady=!1,r._channelReady=!1,r._remoteTracks=null,r._remoteStreams=null,r._senderMap=null,clearInterval(r._closingInterval),r._closingInterval=null,clearInterval(r._interval),r._interval=null,r._chunk=null,r._cb=null,r._onFinishBound&&r.removeListener("finish",r._onFinishBound),r._onFinishBound=null,r._channel){try{r._channel.close()}catch(e){}r._channel.onmessage=null,r._channel.onopen=null,r._channel.onclose=null,r._channel.onerror=null}if(r._pc){try{r._pc.close()}catch(e){}r._pc.oniceconnectionstatechange=null,r._pc.onicegatheringstatechange=null,r._pc.onsignalingstatechange=null,r._pc.onicecandidate=null,r._pc.ontrack=null,r._pc.ondatachannel=null}r._pc=null,r._channel=null,e&&r.emit("error",e),r.emit("close"),t()}},c.prototype._setupData=function(e){var t=this;if(!e.channel)return t.destroy(f("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=u),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()},t._channel.onerror=function(e){t.destroy(f(e,"ERR_DATA_CHANNEL"))};var r=!1;t._closingInterval=setInterval((function(){t._channel&&"closing"===t._channel.readyState?(r&&t._onChannelClose(),r=!0):r=!1}),5e3)},c.prototype._read=function(){},c.prototype._write=function(e,t,r){var n=this;if(n.destroyed)return r(f("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(n._connected){try{n.send(e)}catch(e){return n.destroy(f(e,"ERR_DATA_CHANNEL"))}n._channel.bufferedAmount>u?(n._debug("start backpressure: bufferedAmount %d",n._channel.bufferedAmount),n._cb=r):r(null)}else n._debug("write before connect"),n._chunk=e,n._cb=r},c.prototype._onFinish=function(){var e=this;function t(){setTimeout((function(){e.destroy()}),1e3)}e.destroyed||(e._connected?t():e.once("connect",t))},c.prototype._startIceCompleteTimeout=function(){var e=this;e.destroyed||e._iceCompleteTimer||(e._debug("started iceComplete timeout"),e._iceCompleteTimer=setTimeout((function(){e._iceComplete||(e._iceComplete=!0,e._debug("iceComplete timeout completed"),e.emit("iceTimeout"),e.emit("_iceComplete"))}),e.iceCompleteTimeout))},c.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(e.offerOptions).then((function(t){function r(){if(!e.destroyed){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp})}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e._debug("createOffer success"),e.destroyed)return;e.trickle||e._iceComplete?r():e.once("_iceComplete",r)})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(f(t,"ERR_CREATE_OFFER"))}))},c.prototype._requestMissingTransceivers=function(){var e=this;e._pc.getTransceivers&&e._pc.getTransceivers().forEach((t=>{t.mid||!t.sender.track||t.requested||(t.requested=!0,e.addTransceiver(t.sender.track.kind))}))},c.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(e.answerOptions).then((function(t){function r(){if(!e.destroyed){var r=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:r.type,sdp:r.sdp}),e.initiator||e._requestMissingTransceivers()}}e.destroyed||(e.trickle||e.allowHalfTrickle||(t.sdp=l(t.sdp)),t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t).then((function(){if(e.destroyed)return;e.trickle||e._iceComplete?r():e.once("_iceComplete",r)})).catch((function(t){e.destroy(f(t,"ERR_SET_LOCAL_DESCRIPTION"))})))})).catch((function(t){e.destroy(f(t,"ERR_CREATE_ANSWER"))}))},c.prototype._onIceStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceConnectionState,r=e._pc.iceGatheringState;e._debug("iceStateChange (connection: %s) (gathering: %s)",t,r),e.emit("iceStateChange",t,r),"connected"!==t&&"completed"!==t||(e._pcReady=!0,e._maybeReady()),"failed"===t&&e.destroy(f("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===t&&e.destroy(f("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}},c.prototype.getStats=function(e){var t=this;function r(e){return"[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach((function(t){Object.assign(e,t)})),e}0===t._pc.getStats.length?t._pc.getStats().then((function(t){var n=[];t.forEach((function(e){n.push(r(e))})),e(null,n)}),(function(t){e(t)})):t._isReactNativeWebrtc?t._pc.getStats(null,(function(t){var n=[];t.forEach((function(e){n.push(r(e))})),e(null,n)}),(function(t){e(t)})):t._pc.getStats.length>0?t._pc.getStats((function(n){if(!t.destroyed){var i=[];n.result().forEach((function(e){var t={};e.names().forEach((function(r){t[r]=e.stat(r)})),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,i.push(r(t))})),e(null,i)}}),(function(t){e(t)})):e(null,[])},c.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e._connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,function t(){e.destroyed||e.getStats((function(r,n){if(!e.destroyed){r&&(n=[]);var i={},o={},a={},s=!1;if(n.forEach((function(e){"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(i[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(o[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)})),n.forEach((function(e){"transport"===e.type&&e.selectedCandidatePairId&&c(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&c(e)})),s||Object.keys(a).length&&!Object.keys(o).length){if(e._connecting=!1,e._connected=!0,e._chunk){try{e.send(e._chunk)}catch(r){return e.destroy(f(r,"ERR_DATA_CHANNEL"))}e._chunk=null,e._debug('sent chunk from "write before connect"');var u=e._cb;e._cb=null,u(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval((function(){e._onInterval()}),150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}else setTimeout(t,100)}function c(t){s=!0;var r=o[t.localCandidateId];r&&(r.ip||r.address)?(e.localAddress=r.ip||r.address,e.localPort=Number(r.port)):r&&r.ipAddress?(e.localAddress=r.ipAddress,e.localPort=Number(r.portNumber)):"string"==typeof t.googLocalAddress&&(r=t.googLocalAddress.split(":"),e.localAddress=r[0],e.localPort=Number(r[1])),e.localAddress&&(e.localFamily=e.localAddress.includes(":")?"IPv6":"IPv4");var n=i[t.remoteCandidateId];n&&(n.ip||n.address)?(e.remoteAddress=n.ip||n.address,e.remotePort=Number(n.port)):n&&n.ipAddress?(e.remoteAddress=n.ipAddress,e.remotePort=Number(n.portNumber)):"string"==typeof t.googRemoteAddress&&(n=t.googRemoteAddress.split(":"),e.remoteAddress=n[0],e.remotePort=Number(n[1])),e.remoteAddress&&(e.remoteFamily=e.remoteAddress.includes(":")?"IPv6":"IPv4"),e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}}))}())},c.prototype._onInterval=function(){var e=this;!e._cb||!e._channel||e._channel.bufferedAmount>u||e._onChannelBufferedAmountLow()},c.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||("stable"!==e._pc.signalingState||e._firstStable||(e._isNegotiating=!1,e._debug("flushing sender queue",e._sendersAwaitingStable),e._sendersAwaitingStable.forEach((function(t){e._pc.removeTrack(t),e._queuedNegotiation=!0})),e._sendersAwaitingStable=[],e._queuedNegotiation&&(e._debug("flushing negotiation queue"),e._queuedNegotiation=!1,e._needsNegotiation()),e._debug("negotiate"),e.emit("negotiate")),e._firstStable=!1,e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},c.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||t._iceComplete||(t._iceComplete=!0,t.emit("_iceComplete")),e.candidate&&t._startIceCompleteTimeout())},c.prototype._onChannelMessage=function(e){if(!this.destroyed){var t=e.data;t instanceof ArrayBuffer&&(t=r.from(t)),this.push(t)}},c.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},c.prototype._onChannelOpen=function(){var e=this;e._connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},c.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e.destroy())},c.prototype._onTrack=function(e){var t=this;t.destroyed||e.streams.forEach((function(r){t._debug("on track"),t.emit("track",e.track,r),t._remoteTracks.push({track:e.track,stream:r}),t._remoteStreams.some((function(e){return e.id===r.id}))||(t._remoteStreams.push(r),setTimeout((function(){t.emit("stream",r)}),0))}))},c.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],n.apply(null,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer"}],[6707,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,s;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6708,{"./_stream_readable":6710,"./_stream_writable":6712,_process:6295,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6709,{"./_stream_transform":6711,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6710,{"../errors":6707,"./_stream_duplex":6708,"./internal/streams/async_iterator":6713,"./internal/streams/buffer_list":6714,"./internal/streams/destroy":6715,"./internal/streams/from":6717,"./internal/streams/state":6719,"./internal/streams/stream":6720,_process:6295,buffer:2438,events:2439,inherits:5299,"string_decoder/":6783,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=S,S.ReadableState=k;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),a=e("buffer").Buffer,s=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(n=n||e("./_stream_duplex"),!(this instanceof S))return new S(t);var r=this instanceof n;this._readableState=new k(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function R(e,t,r,n,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,c);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof s||"string"==typeof t||t===undefined||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)c.endEmitted?w(e,new _):T(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?T(e,c,t,!1):x(e,c)):T(e,c,t,!1)}else n||(c.reading=!1,x(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),x(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),R(this,e,t,!1,r)},S.prototype.unshift=function(e){return R(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){u("readable nexttick read 0"),e.read(0)}function L(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(D,t,e))}function D(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):O(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){w(this,new v("_read()"))},S.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function s(t,r){u("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",l);var f=!1;function h(t){u("ondata");var r=e.write(t);u("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function d(t){u("onerror",t),g(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",m),g()}function m(){u("onfinish"),e.removeListener("close",p),g()}function g(){u("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),o.flowing||(u("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||r.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(N,this),n},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(N,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6711,{"../errors":6707,"./_stream_duplex":6708,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6712,{"../errors":6707,"./_stream_duplex":6708,"./internal/streams/destroy":6715,"./internal/streams/state":6719,"./internal/streams/stream":6720,_process:6295,buffer:2438,inherits:5299,"util-deprecate":6887},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=k;var o={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),s=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function k(t,o,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=o instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(P,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),P(e,t))}(e,n,i,t,o);else{var a=C(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(T,e,n,a,o):T(e,n,a,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(S,this))return new S(t);this._writableState=new k(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function R(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),P(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,R(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(R(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(S,a),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof k)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,c=!o.objectMode&&(i=e,s.isBuffer(i)||i instanceof u);return c&&!s.isBuffer(e)&&(e=function(e){return s.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new v;w(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var o;return null===n?o=new y:"string"==typeof n||t.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o||(w(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=s.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,u,n,i,o);return c}(this,o,c,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6713,{"./end-of-stream":6716,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[a]=null,e[s]=null,t(d(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(d(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(undefined,!0)):t[f](r,n)}),n)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[a]=null,r[s]=null,e(d(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[l]=null,r[a]=null,r[s]=null,t(e)),void(r[u]=e)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(d(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6714,{buffer:2438,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=e("buffer").Buffer,s=e("util").inspect,u=s&&s.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6715,{_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6716,{"../../../errors":6707},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6717,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6718,{"../../../errors":6707,"./end-of-stream":6716},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(t,r,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(l)}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6719,{"../../../errors":6707},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6720,{events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6721,{"./lib/_stream_duplex.js":6708,"./lib/_stream_passthrough.js":6709,"./lib/_stream_readable.js":6710,"./lib/_stream_transform.js":6711,"./lib/_stream_writable.js":6712,"./lib/internal/streams/end-of-stream.js":6716,"./lib/internal/streams/pipeline.js":6718},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"3box>ipfs>libp2p-webrtc-star>simple-peer>readable-stream"}],[6724,{"./manager":6725,"./socket":6727,"./url":6728,debug:6729,"socket.io-parser":6733},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./url"),i=e("socket.io-parser"),o=e("./manager"),a=e("debug")("socket.io-client");t.exports=r=u;var s=r.managers={};function u(e,t){"object"==typeof e&&(t=e,e=undefined),t=t||{};var r,i=n(e),u=i.source,c=i.id,l=i.path,f=s[c]&&l in s[c].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(a("ignoring socket cache for %s",u),r=o(u,t)):(s[c]||(a("new io instance for %s",u),s[c]=o(u,t)),r=s[c]),i.query&&!t.query&&(t.query=i.query),r.socket(i.path,t)}r.protocol=i.protocol,r.connect=u,r.Manager=e("./manager"),r.Socket=e("./socket")}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[6725,{"./on":6726,"./socket":6727,backo2:2309,"component-bind":2513,"component-emitter":2514,debug:6729,"engine.io-client":2710,indexof:5298,"socket.io-parser":6733},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("engine.io-client"),i=e("./socket"),o=e("component-emitter"),a=e("socket.io-parser"),s=e("./on"),u=e("component-bind"),c=e("debug")("socket.io-client:manager"),l=e("indexof"),f=e("backo2"),h=Object.prototype.hasOwnProperty;function d(e,t){if(!(this instanceof d))return new d(e,t);e&&"object"==typeof e&&(t=e,e=undefined),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||Infinity),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var r=t.parser||a;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}t.exports=d,d.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},d.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},d.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(d.prototype),d.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},d.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},d.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},d.prototype.open=d.prototype.connect=function(e,t){if(c("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;c("opening %s",this.uri),this.engine=n(this.uri,this.opts);var r=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=s(r,"open",(function(){i.onopen(),e&&e()})),a=s(r,"error",(function(t){if(c("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var r=new Error("Connection error");r.data=t,e(r)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var u=this._timeout;c("connect attempt will timeout after %d",u),0===u&&o.destroy();var l=setTimeout((function(){c("connect attempt timed out after %d",u),o.destroy(),r.close(),r.emit("error","timeout"),i.emitAll("connect_timeout",u)}),u);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(a),this},d.prototype.onopen=function(){c("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(s(e,"data",u(this,"ondata"))),this.subs.push(s(e,"ping",u(this,"onping"))),this.subs.push(s(e,"pong",u(this,"onpong"))),this.subs.push(s(e,"error",u(this,"onerror"))),this.subs.push(s(e,"close",u(this,"onclose"))),this.subs.push(s(this.decoder,"decoded",u(this,"ondecoded")))},d.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},d.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},d.prototype.ondata=function(e){this.decoder.add(e)},d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror=function(e){c("error",e),this.emitAll("error",e)},d.prototype.socket=function(e,t){var r=this.nsps[e];if(!r){r=new i(this,e,t),this.nsps[e]=r;var n=this;r.on("connecting",o),r.on("connect",(function(){r.id=n.generateId(e)})),this.autoConnect&&o()}function o(){~l(n.connecting,r)||n.connecting.push(r)}return r},d.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},d.prototype.packet=function(e){c("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(r){for(var n=0;n<r.length;n++)t.engine.write(r[n],e.options);t.encoding=!1,t.processPacketQueue()})))},d.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},d.prototype.cleanup=function(){c("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},d.prototype.close=d.prototype.disconnect=function(){c("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},d.prototype.onclose=function(e){c("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},d.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)c("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();c("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var r=setTimeout((function(){e.skipReconnect||(c("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(c("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(c("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(r)}})}},d.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[6726,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t,r){return e.on(t,r),{destroy:function(){e.removeListener(t,r)}}}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[6727,{"./on":6726,"component-bind":2513,"component-emitter":2514,debug:6729,"has-binary2":5233,parseqs:6268,"socket.io-parser":6733,"to-array":6819},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("socket.io-parser"),i=e("component-emitter"),o=e("to-array"),a=e("./on"),s=e("component-bind"),u=e("debug")("socket.io-client:socket"),c=e("parseqs"),l=e("has-binary2");t.exports=d;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function d(e,t,r){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},r&&r.query&&(this.query=r.query),this.io.autoConnect&&this.open()}i(d.prototype),d.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[a(e,"open",s(this,"onopen")),a(e,"packet",s(this,"onpacket")),a(e,"close",s(this,"onclose"))]}},d.prototype.open=d.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},d.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},d.prototype.emit=function(e){if(f.hasOwnProperty(e))return h.apply(this,arguments),this;var t=o(arguments),r={type:(this.flags.binary!==undefined?this.flags.binary:l(t))?n.BINARY_EVENT:n.EVENT,data:t,options:{}};return r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof t[t.length-1]&&(u("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),this.flags={},this},d.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},d.prototype.onopen=function(){if(u("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"==typeof this.query?c.encode(this.query):this.query;u("sending connect packet with query %s",e),this.packet({type:n.CONNECT,query:e})}else this.packet({type:n.CONNECT})},d.prototype.onclose=function(e){u("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},d.prototype.onpacket=function(e){var t=e.nsp===this.nsp,r=e.type===n.ERROR&&"/"===e.nsp;if(t||r)switch(e.type){case n.CONNECT:this.onconnect();break;case n.EVENT:case n.BINARY_EVENT:this.onevent(e);break;case n.ACK:case n.BINARY_ACK:this.onack(e);break;case n.DISCONNECT:this.ondisconnect();break;case n.ERROR:this.emit("error",e.data)}},d.prototype.onevent=function(e){var t=e.data||[];u("emitting event %j",t),null!=e.id&&(u("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},d.prototype.ack=function(e){var t=this,r=!1;return function(){if(!r){r=!0;var i=o(arguments);u("sending ack %j",i),t.packet({type:l(i)?n.BINARY_ACK:n.ACK,id:e,data:i})}}},d.prototype.onack=function(e){var t=this.acks[e.id];"function"==typeof t?(u("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):u("bad ack %s",e.id)},d.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},d.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},d.prototype.ondisconnect=function(){u("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},d.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},d.prototype.close=d.prototype.disconnect=function(){return this.connected&&(u("performing disconnect (%s)",this.nsp),this.packet({type:n.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},d.prototype.compress=function(e){return this.flags.compress=e,this},d.prototype.binary=function(e){return this.flags.binary=e,this}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[6728,{debug:6729,parseuri:6269},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("parseuri"),i=e("debug")("socket.io-client:url");t.exports=function(e,t){var r=e;t=t||"undefined"!=typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),r=n(e));r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443"));r.path=r.path||"/";var o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port,r.href=r.protocol+"://"+o+(t&&t.port===r.port?"":":"+r.port),r}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client"}],[6729,{"./debug":6730,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug"}],[6730,{ms:6731},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){var t;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(t||i);e.diff=o,e.prev=t,e.curr=i,t=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var o=a[u];t=i.call(e,o),a.splice(u,1),u--}return t})),r.formatArgs.call(e,a);var c=n.log||r.log||console.log.bind(console);c.apply(e,a)}}return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),n.destroy=i,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug"}],[6731,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=1e3,i=60*n,o=60*i,a=24*o,s=365.25*a;function u(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}t.exports=function(e,t){t=t||{};var r,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*s;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(r=e,a,"day")||u(r,o,"hour")||u(r,i,"minute")||u(r,n,"second")||r+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>debug>ms"}],[6732,{"./is-buffer":6734,isarray:6737},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("isarray"),i=e("./is-buffer"),o=Object.prototype.toString,a="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===o.call(Blob),s="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===o.call(File);function u(e,t){if(!e)return e;if(i(e)){var r={_placeholder:!0,num:t.length};return t.push(e),r}if(n(e)){for(var o=new Array(e.length),a=0;a<e.length;a++)o[a]=u(e[a],t);return o}if("object"==typeof e&&!(e instanceof Date)){o={};for(var s in e)o[s]=u(e[s],t);return o}return e}function c(e,t){if(!e)return e;if(e&&e._placeholder)return t[e.num];if(n(e))for(var r=0;r<e.length;r++)e[r]=c(e[r],t);else if("object"==typeof e)for(var i in e)e[i]=c(e[i],t);return e}r.deconstructPacket=function(e){var t=[],r=e.data,n=e;return n.data=u(r,t),n.attachments=t.length,{packet:n,buffers:t}},r.reconstructPacket=function(e,t){return e.data=c(e.data,t),e.attachments=undefined,e},r.removeBlobs=function(e,t){var r=0,o=e;!function e(u,c,l){if(!u)return u;if(a&&u instanceof Blob||s&&u instanceof File){r++;var f=new FileReader;f.onload=function(){l?l[c]=this.result:o=this.result,--r||t(o)},f.readAsArrayBuffer(u)}else if(n(u))for(var h=0;h<u.length;h++)e(u[h],h,u);else if("object"==typeof u&&!i(u))for(var d in u)e(u[d],d,u)}(o),r||t(o)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[6733,{"./binary":6732,"./is-buffer":6734,"component-emitter":2514,debug:6735,isarray:6737},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("debug")("socket.io-parser"),i=e("component-emitter"),o=e("./binary"),a=e("isarray"),s=e("./is-buffer");function u(){}r.protocol=4,r.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],r.CONNECT=0,r.DISCONNECT=1,r.EVENT=2,r.ACK=3,r.ERROR=4,r.BINARY_EVENT=5,r.BINARY_ACK=6,r.Encoder=u,r.Decoder=f;var c=r.ERROR+'"encode error"';function l(e){var t=""+e.type;if(r.BINARY_EVENT!==e.type&&r.BINARY_ACK!==e.type||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return c;t+=i}return n("encoded %j as %s",e,t),t}function f(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function d(e){return{type:r.ERROR,data:"parser error: "+e}}u.prototype.encode=function(e,t){(n("encoding packet %j",e),r.BINARY_EVENT===e.type||r.BINARY_ACK===e.type)?function(e,t){function r(e){var r=o.deconstructPacket(e),n=l(r.packet),i=r.buffers;i.unshift(n),t(i)}o.removeBlobs(e,r)}(e,t):t([l(e)])},i(f.prototype),f.prototype.add=function(e){var t;if("string"==typeof e)t=function(e){var t=0,i={type:Number(e.charAt(0))};if(null==r.types[i.type])return d("unknown packet type "+i.type);if(r.BINARY_EVENT===i.type||r.BINARY_ACK===i.type){for(var o=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var s=e.substring(o,t);if(s!=Number(s)||"-"!==e.charAt(t))throw new Error("Illegal attachments");i.attachments=Number(s)}if("/"===e.charAt(t+1)){for(o=t+1;++t;){if(","===(c=e.charAt(t)))break;if(t===e.length)break}i.nsp=e.substring(o,t)}else i.nsp="/";var u=e.charAt(t+1);if(""!==u&&Number(u)==u){for(o=t+1;++t;){var c;if(null==(c=e.charAt(t))||Number(c)!=c){--t;break}if(t===e.length)break}i.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(t));if(!(!1!==l&&(i.type===r.ERROR||a(l))))return d("invalid payload");i.data=l}return n("decoded %s as %j",e,i),i}(e),r.BINARY_EVENT===t.type||r.BINARY_ACK===t.type?(this.reconstructor=new h(t),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",t)):this.emit("decoded",t);else{if(!s(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",t))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[6734,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){t.exports=function(t){return r&&e.isBuffer(t)||n&&(t instanceof ArrayBuffer||function(e){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(t))};var r="function"==typeof e&&"function"==typeof e.isBuffer,n="function"==typeof ArrayBuffer}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser"}],[6735,{"./debug":6736,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){function i(){var e;try{e=r.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(r=t.exports=e("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},r.formatArgs=function(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),!t)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,n)},r.save=function(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}},r.load=i,r.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(i())}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug"}],[6736,{ms:6738},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){var t;function n(){if(n.enabled){var e=n,i=+new Date,o=i-(t||i);e.diff=o,e.prev=t,e.curr=i,t=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var u=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,(function(t,n){if("%%"===t)return t;u++;var i=r.formatters[n];if("function"==typeof i){var o=a[u];t=i.call(e,o),a.splice(u,1),u--}return t})),r.formatArgs.call(e,a);var c=n.log||r.log||console.log.bind(console);c.apply(e,a)}}return n.namespace=e,n.enabled=r.enabled(e),n.useColors=r.useColors(),n.color=function(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}(e),n.destroy=i,"function"==typeof r.init&&r.init(n),r.instances.push(n),n}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}(r=t.exports=n.debug=n.default=n).coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){r.enable("")},r.enable=function(e){var t;r.save(e),r.names=[],r.skips=[];var n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&("-"===(e=n[t].replace(/\*/g,".*?"))[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var o=r.instances[t];o.enabled=r.enabled(o.namespace)}},r.enabled=function(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug"}],[6737,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>isarray"}],[6738,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=1e3,i=60*n,o=60*i,a=24*o,s=365.25*a;function u(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}t.exports=function(e,t){t=t||{};var r,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*s;case"days":case"day":case"d":return r*a;case"hours":case"hour":case"hrs":case"hr":case"h":return r*o;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return undefined}}(e);if("number"===c&&!1===isNaN(e))return t.long?u(r=e,a,"day")||u(r,o,"hour")||u(r,i,"minute")||u(r,n,"second")||r+" ms":function(e){if(e>=a)return Math.round(e/a)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=i)return Math.round(e/i)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>socket.io-parser>debug>ms"}],[6739,{"./common":6740,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}r.log=function(){var e;return"object"===("undefined"==typeof console?"undefined":i(console))&&console.log&&(e=console).log.apply(e,arguments)},r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=function(){var e;try{e=r.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},r.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},r.storage=function(){try{return localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.exports=e("./common")(r),t.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>debug"}],[6740,{ms:6081},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(t){function r(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var t;function a(){if(a.enabled){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];var o=a,s=Number(new Date),u=s-(t||s);o.diff=u,o.prev=t,o.curr=s,t=s,r[0]=n.coerce(r[0]),"string"!=typeof r[0]&&r.unshift("%O");var c=0;r[0]=r[0].replace(/%([a-zA-Z%])/g,(function(e,t){if("%%"===e)return e;c++;var i=n.formatters[t];if("function"==typeof i){var a=r[c];e=i.call(o,a),r.splice(c,1),c--}return e})),n.formatArgs.call(o,r);var l=o.log||n.log;l.apply(o,r)}}return a.namespace=e,a.enabled=n.enabled(e),a.useColors=n.useColors(),a.color=r(e),a.destroy=i,a.extend=o,"function"==typeof n.init&&n.init(a),n.instances.push(a),a}function i(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function o(e,t){return n(this.namespace+(void 0===t?":":t)+e)}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){n.enable("")},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var o=n.instances[t];o.enabled=n.enabled(o.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),Object.keys(t).forEach((function(e){n[e]=t[e]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=r,n.enable(n.load()),n}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>debug"}],[6741,{"./v1":6744,"./v4":6745},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./v1"),i=e("./v4"),o=i;o.v1=n,o.v4=i,t.exports=o}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[6742,{},function(){with(this)return function(){"use strict";return function(e,t,r){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);t.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[6743,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);t.exports=function(){return n(i),i}}else{var o=new Array(16);t.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[6744,{"./lib/bytesToUuid":6742,"./lib/rng":6743},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i,o=e("./lib/rng"),a=e("./lib/bytesToUuid"),s=0,u=0;t.exports=function(e,t,r){var c=t&&r||0,l=t||[],f=(e=e||{}).node||n,h=e.clockseq!==undefined?e.clockseq:i;if(null==f||null==h){var d=o();null==f&&(f=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==h&&(h=i=16383&(d[6]<<8|d[7]))}var p=e.msecs!==undefined?e.msecs:(new Date).getTime(),m=e.nsecs!==undefined?e.nsecs:u+1,g=p-s+(m-u)/1e4;if(g<0&&e.clockseq===undefined&&(h=h+1&16383),(g<0||p>s)&&e.nsecs===undefined&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=p,u=m,i=h;var b=(1e4*(268435455&(p+=122192928e5))+m)%4294967296;l[c++]=b>>>24&255,l[c++]=b>>>16&255,l[c++]=b>>>8&255,l[c++]=255&b;var y=p/4294967296*1e4&268435455;l[c++]=y>>>8&255,l[c++]=255&y,l[c++]=y>>>24&15|16,l[c++]=y>>>16&255,l[c++]=h>>>8|128,l[c++]=255&h;for(var v=0;v<6;++v)l[c+v]=f[v];return t||a(l)}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[6745,{"./lib/bytesToUuid":6742,"./lib/rng":6743},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/rng"),i=e("./lib/bytesToUuid");t.exports=function(e,t,r){var o=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[o+s]=a[s];return t||i(a)}}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream>uuid"}],[6746,{buffer:2438,"data-queue":2600,debug:6739,"pull-stream":6353,uuid:6741},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("data-queue"),i=e("uuid"),o=e("pull-stream"),a=(e,t)=>"socket.io-pull-stream."+e+(t?"."+t:""),s=e("debug")("socket.io-pull-stream");function u(e,t){if(null==t)return t;try{return e(t)}catch(e){return console.error("Codec Error"),console.error(e),!1}}const c={hex:{encode:e=>e.toString("hex"),decode:e=>r.from(e,"hex")},plain:{encode:e=>e,decode:e=>e},buffer:{encode:e=>r.from(e),decode:e=>r.from(e)}};function l(e){if(e||(e="plain"),"object"==typeof e)return e;const t=c[e];if(!t)throw new Error("Invalid codec "+e);return t}t.exports=function(e,t){e.createSink||(e.sioplog=e.id?s.bind(s,"["+e.id+"]"):s,e.createSink=(r,o)=>{r||(r=i());const s=function(e,t,r){const i=n(),o=e.sioplog.bind(e.sioplog,"  sink("+t+")"),s=l(r.codec).encode;let c;function f(e){i.append({err:e}),c=e}return o("create sink"),e.once(a("accept",t),(()=>{o("start transmission"),function r(){i.get(((n,c)=>{let{data:l,err:f}=c||{};if(n&&(f=n),o("send",f&&!0===f?"finish":f?"error":l?"data":"<invalid>"),f&&!n&&i.error(f),f)return e.emit(a("error",t),f);l&&e.emit(a("queue",t),u(s,l)),r()}))}()})),e.once("disconnect",(()=>f(!0))),function(e){e(null,(function t(r,n){return r?f(r):c?e(c,t):(i.append({data:n}),void e(null,t))}))}}(e,r,t||o);return s.id=r,s},e.createSource=(r,i)=>{const o=function(e,t,r){const i=n(),o=e.sioplog.bind(e.sioplog,"source("+t+")"),s=l(r.codec).decode;function c(){e.removeAllListeners(a("error",t)),e.removeAllListeners(a("queue",t))}return o("create source"),e.emit(a("accept",t)),e.on(a("error",t),(e=>{o(!0===e?"finish":"error"),c(),i.append({end:e})})),e.on(a("queue",t),(e=>{o("queue data"),i.append({data:u(s,e)})})),e.once("disconnect",(()=>{c(),i.append({end:!0})})),function(e,t){if(o("reading"),e)return t(e);i.get(((e,r)=>e?t(e):r.end?(i.error(r.end),t(r.end)):t(null,r.data)))}}(e,r,t||i);return o.id=r,o},e.createProxy=(t,r,n)=>{o(e.createSource(t,n),r.createSink(t,n))})}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-websocket-star-multi>libp2p-websocket-star>socket.io-pull-stream"}],[6747,{"is-plain-obj":5598},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("is-plain-obj");t.exports=(e,t)=>{if(!n(e))throw new TypeError("Expected a plain object");if("function"==typeof(t=t||{}))throw new TypeError("Specify the compare function as an option instead");const r=t.deep,i=[],o=[],a=e=>{const s=i.indexOf(e);if(-1!==s)return o[s];const u={},c=Object.keys(e).sort(t.compare);i.push(e),o.push(u);for(let t=0;t<c.length;t++){const i=c[t],o=e[i];if(r&&Array.isArray(o)){const e=[];for(let t=0;t<o.length;t++)e[t]=n(o[t])?a(o[t]):o[t];u[i]=e}else u[i]=r&&n(o)?a(o):o}return u};return a(e)}}}},{package:"3box>ipfs>ipfs-repo>sort-keys"}],[6748,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){return e+i(t)}function i(e){let t=e;return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),16843009*(t+(t>>4)&252645135)>>24}function o(e,t){return e[0]-t[0]}function a(e){return e[1]}t.exports=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(e,t){let r=this._internalPositionFor(e,!1);if(t===undefined)-1!==r&&(this._unsetInternalPos(r),this._unsetBit(e),this._changedLength=!0,this._changedData=!0);else{let n=!1;-1===r?(r=this._data.length,this._setBit(e),this._changedData=!0):n=!0,this._setInternalPos(r,e,t,n),this._changedLength=!0}}unset(e){this.set(e,undefined)}get(e){this._sortData();const t=this._internalPositionFor(e,!0);return-1===t?undefined:this._data[t][1]}push(e){return this.set(this.length,e),this.length}get length(){if(this._sortData(),this._changedLength){const e=this._data[this._data.length-1];this._length=e?e[0]+1:0,this._changedLength=!1}return this._length}forEach(e){let t=0;for(;t<this.length;)e(this.get(t),t,this),t++}map(e){let t=0,r=new Array(this.length);for(;t<this.length;)r[t]=e(this.get(t),t,this),t++;return r}reduce(e,t){let r=0,n=t;for(;r<this.length;){n=e(n,this.get(r),r),r++}return n}find(e){let t,r,n=0;for(;n<this.length&&!t;)r=this.get(n),t=e(r),n++;return t?r:undefined}_internalPositionFor(e,t){const r=this._bytePosFor(e,t);if(r>=this._bitArrays.length)return-1;const o=this._bitArrays[r],a=e-7*r;if(!((o&1<<a)>0))return-1;return this._bitArrays.slice(0,r).reduce(n,0)+i(o&~(4294967295<<a+1))-1}_bytePosFor(e,t){const r=Math.floor(e/7),n=r+1;for(;!t&&this._bitArrays.length<n;)this._bitArrays.push(0);return r}_setBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]|=1<<e-7*t}_unsetBit(e){const t=this._bytePosFor(e,!1);this._bitArrays[t]&=~(1<<e-7*t)}_setInternalPos(e,t,r,n){const i=this._data,o=[t,r];if(n)this._sortData(),i[e]=o;else{if(i.length)if(i[i.length-1][0]>=t)i.push(o);else if(i[0][0]<=t)i.unshift(o);else{const e=Math.round(i.length/2);this._data=i.slice(0,e).concat(o).concat(i.slice(e))}else this._data.push(o);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(e){this._data.splice(e,1)}_sortData(){this._changedData&&this._data.sort(o),this._changedData=!1}bitField(){const e=[];let t,r=8,n=0,i=0;const o=this._bitArrays.slice();for(;o.length||n;){0===n&&(t=o.shift(),n=7);const a=Math.min(n,r);i|=(t&~(255<<a))<<8-r,t>>>=a,n-=a,r-=a,r&&(n||o.length)||(e.push(i),i=0,r=8)}for(var a=e.length-1;a>0;a--){if(0!==e[a])break;e.pop()}return e}compactArray(){return this._sortData(),this._data.map(a)}}}}},{package:"3box>ipfs>ipfs-mfs>hamt-sharding>sparse-array"}],[6749,{},function(){with(this)return function(){"use strict";return function(e,t,r){
//! stable.js 0.1.8, https://github.com/Two-Screen/stable
//!  2018 Angry Bytes and contributors. MIT licensed.
!function(e,n){"object"==typeof r&&void 0!==t?t.exports=n():"function"==typeof define&&define.amd?define(n):e.stable=n()}(this,(function(){var e=function(e,r){return t(e.slice(),r)};function t(e,t){"function"!=typeof t&&(t=function(e,t){return String(e).localeCompare(t)});var n=e.length;if(n<=1)return e;for(var i=new Array(n),o=1;o<n;o*=2){r(e,t,o,i);var a=e;e=i,i=a}return e}e.inplace=function(e,n){var i=t(e,n);return i!==e&&r(i,null,e.length,e),e};var r=function(e,t,r,n){var i,o,a,s,u,c=e.length,l=0,f=2*r;for(i=0;i<c;i+=f)for(a=(o=i+r)+r,o>c&&(o=c),a>c&&(a=c),s=i,u=o;;)if(s<o&&u<a)t(e[s],e[u])<=0?n[l++]=e[s++]:n[l++]=e[u++];else if(s<o)n[l++]=e[s++];else{if(!(u<a))break;n[l++]=e[u++]}};return e}))}}},{package:"@storybook/react>@storybook/store>stable"}],[6750,{"../plugins/json2":6751,"../src/store-engine":6753,"../storages/all":6755},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/store-engine"),i=e("../storages/all"),o=[e("../plugins/json2")];t.exports=n.createStore(i,o)}}},{package:"3box>store"}],[6751,{"./lib/json2":6752},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){return e("./lib/json2"),{}}}}},{package:"3box>store"}],[6752,{},function(){with(this)return function(){"use strict";return function(e,t,r){"object"!=typeof JSON&&(JSON={}),function(){var e,t,r,n,i=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,a=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,s=/(?:^|:|,)(?:\s*\[)+/g,u=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function l(e){return e<10?"0"+e:e}function f(){return this.valueOf()}function h(e){return u.lastIndex=0,u.test(e)?'"'+e.replace(u,(function(e){var t=r[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}function d(r,i){var o,a,s,u,c,l=e,f=i[r];switch(f&&"object"==typeof f&&"function"==typeof f.toJSON&&(f=f.toJSON(r)),"function"==typeof n&&(f=n.call(i,r,f)),typeof f){case"string":return h(f);case"number":return isFinite(f)?String(f):"null";case"boolean":case"null":return String(f);case"object":if(!f)return"null";if(e+=t,c=[],"[object Array]"===Object.prototype.toString.apply(f)){for(u=f.length,o=0;o<u;o+=1)c[o]=d(o,f)||"null";return s=0===c.length?"[]":e?"[\n"+e+c.join(",\n"+e)+"\n"+l+"]":"["+c.join(",")+"]",e=l,s}if(n&&"object"==typeof n)for(u=n.length,o=0;o<u;o+=1)"string"==typeof n[o]&&(s=d(a=n[o],f))&&c.push(h(a)+(e?": ":":")+s);else for(a in f)Object.prototype.hasOwnProperty.call(f,a)&&(s=d(a,f))&&c.push(h(a)+(e?": ":":")+s);return s=0===c.length?"{}":e?"{\n"+e+c.join(",\n"+e)+"\n"+l+"}":"{"+c.join(",")+"}",e=l,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+l(this.getUTCMonth()+1)+"-"+l(this.getUTCDate())+"T"+l(this.getUTCHours())+":"+l(this.getUTCMinutes())+":"+l(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=f,Number.prototype.toJSON=f,String.prototype.toJSON=f),"function"!=typeof JSON.stringify&&(r={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(r,i,o){var a;if(e="",t="","number"==typeof o)for(a=0;a<o;a+=1)t+=" ";else"string"==typeof o&&(t=o);if(n=i,i&&"function"!=typeof i&&("object"!=typeof i||"number"!=typeof i.length))throw new Error("JSON.stringify");return d("",{"":r})}),"function"!=typeof JSON.parse&&(JSON.parse=function(e,t){var r;if(e=String(e),c.lastIndex=0,c.test(e)&&(e=e.replace(c,(function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))),i.test(e.replace(o,"@").replace(a,"]").replace(s,"")))return r=(0,eval)("("+e+")"),"function"==typeof t?function e(r,n){var i,o,a=r[n];if(a&&"object"==typeof a)for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&((o=e(a,i))!==undefined?a[i]=o:delete a[i]);return t.call(r,n,a)}({"":r},""):r;throw new SyntaxError("JSON.parse")})}()}}},{package:"3box>store"}],[6753,{"./util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./util"),i=n.slice,o=n.pluck,a=n.each,s=n.bind,u=n.create,c=n.isList,l=n.isFunction,f=n.isObject;t.exports={createStore:d};var h={version:"2.0.12",enabled:!1,get:function(e,t){var r=this.storage.read(this._namespacePrefix+e);return this._deserialize(r,t)},set:function(e,t){return t===undefined?this.remove(e):(this.storage.write(this._namespacePrefix+e,this._serialize(t)),t)},remove:function(e){this.storage.remove(this._namespacePrefix+e)},each:function(e){var t=this;this.storage.each((function(r,n){e.call(t,t._deserialize(r),(n||"").replace(t._namespaceRegexp,""))}))},clearAll:function(){this.storage.clearAll()},hasNamespace:function(e){return this._namespacePrefix=="__storejs_"+e+"_"},createStore:function(){return d.apply(this,arguments)},addPlugin:function(e){this._addPlugin(e)},namespace:function(e){return d(this.storage,this.plugins,e)}};function d(e,t,r){r||(r=""),e&&!c(e)&&(e=[e]),t&&!c(t)&&(t=[t]);var n=r?"__storejs_"+r+"_":"",d=r?new RegExp("^"+n):null;if(!/^[a-zA-Z0-9_\-]*$/.test(r))throw new Error("store.js namespaces can only have alphanumerics + underscores and dashes");var p={_namespacePrefix:n,_namespaceRegexp:d,_testStorage:function(e){try{var t="__storejs__test__";e.write(t,t);var r=e.read(t)===t;return e.remove(t),r}catch(e){return!1}},_assignPluginFnProp:function(e,t){var r=this[t];this[t]=function(){var t=i(arguments,0),n=this;function o(){if(r)return a(arguments,(function(e,r){t[r]=e})),r.apply(n,t)}var s=[o].concat(t);return e.apply(n,s)}},_serialize:function(e){return JSON.stringify(e)},_deserialize:function(e,t){if(!e)return t;var r="";try{r=JSON.parse(e)}catch(t){r=e}return r!==undefined?r:t},_addStorage:function(e){this.enabled||this._testStorage(e)&&(this.storage=e,this.enabled=!0)},_addPlugin:function(e){var t=this;if(c(e))a(e,(function(e){t._addPlugin(e)}));else if(!o(this.plugins,(function(t){return e===t}))){if(this.plugins.push(e),!l(e))throw new Error("Plugins must be function values that return objects");var r=e.call(this);if(!f(r))throw new Error("Plugins must return an object of function properties");a(r,(function(r,n){if(!l(r))throw new Error("Bad plugin property: "+n+" from plugin "+e.name+". Plugins should only return functions.");t._assignPluginFnProp(r,n)}))}},addStorage:function(e){!function(){var e="undefined"==typeof console?null:console;if(e){(e.warn?e.warn:e.log).apply(e,arguments)}}("store.addStorage(storage) is deprecated. Use createStore([storages])"),this._addStorage(e)}},m=u(p,h,{plugins:[]});return m.raw={},a(m,(function(e,t){l(e)&&(m.raw[t]=s(m,e))})),a(e,(function(e){m._addStorage(e)})),a(t,(function(e){m._addPlugin(e)})),m}}}},{package:"3box>store"}],[6754,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Object.assign?Object.assign:function(e,t,r,n){for(var i=1;i<arguments.length;i++)u(Object(arguments[i]),(function(t,r){e[r]=t}));return e},i=function(){if(Object.create)return function(e,t,r,i){var o=s(arguments,1);return n.apply(this,[Object.create(e)].concat(o))};{function e(){}return function(t,r,i,o){var a=s(arguments,1);return e.prototype=t,n.apply(this,[new e].concat(a))}}}(),o=String.prototype.trim?function(e){return String.prototype.trim.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a="undefined"!=typeof window?window:global;function s(e,t){return Array.prototype.slice.call(e,t||0)}function u(e,t){c(e,(function(e,r){return t(e,r),!1}))}function c(e,t){if(l(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return e[r]}else for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return e[n]}function l(e){return null!=e&&"function"!=typeof e&&"number"==typeof e.length}t.exports={assign:n,create:i,trim:o,bind:function(e,t){return function(){return t.apply(e,Array.prototype.slice.call(arguments,0))}},slice:s,each:u,map:function(e,t){var r=l(e)?[]:{};return c(e,(function(e,n){return r[n]=t(e,n),!1})),r},pluck:c,isList:l,isFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},isObject:function(e){return e&&"[object Object]"==={}.toString.call(e)},Global:a}}}},{package:"3box>store"}],[6755,{"./cookieStorage":6756,"./localStorage":6757,"./memoryStorage":6758,"./oldFF-globalStorage":6759,"./oldIE-userDataStorage":6760,"./sessionStorage":6761},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=[e("./localStorage"),e("./oldFF-globalStorage"),e("./oldIE-userDataStorage"),e("./cookieStorage"),e("./sessionStorage"),e("./memoryStorage")]}}},{package:"3box>store"}],[6756,{"../src/util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/util"),i=n.Global,o=n.trim;t.exports={name:"cookieStorage",read:function(e){if(!e||!c(e))return null;var t="(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*";return unescape(a.cookie.replace(new RegExp(t),"$1"))},write:function(e,t){if(!e)return;a.cookie=escape(e)+"="+escape(t)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"},each:s,remove:u,clearAll:function(){s((function(e,t){u(t)}))}};var a=i.document;function s(e){for(var t=a.cookie.split(/; ?/g),r=t.length-1;r>=0;r--)if(o(t[r])){var n=t[r].split("="),i=unescape(n[0]);e(unescape(n[1]),i)}}function u(e){e&&c(e)&&(a.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/")}function c(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(a.cookie)}}}},{package:"3box>store"}],[6757,{"../src/util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/util").Global;function i(){return n.localStorage}function o(e){return i().getItem(e)}t.exports={name:"localStorage",read:o,write:function(e,t){return i().setItem(e,t)},each:function(e){for(var t=i().length-1;t>=0;t--){var r=i().key(t);e(o(r),r)}},remove:function(e){return i().removeItem(e)},clearAll:function(){return i().clear()}}}}},{package:"3box>store"}],[6758,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={name:"memoryStorage",read:function(e){return n[e]},write:function(e,t){n[e]=t},each:function(e){for(var t in n)n.hasOwnProperty(t)&&e(n[t],t)},remove:function(e){delete n[e]},clearAll:function(e){n={}}};var n={}}}},{package:"3box>store"}],[6759,{"../src/util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/util").Global;t.exports={name:"oldFF-globalStorage",read:function(e){return i[e]},write:function(e,t){i[e]=t},each:o,remove:function(e){return i.removeItem(e)},clearAll:function(){o((function(e,t){delete i[e]}))}};var i=n.globalStorage;function o(e){for(var t=i.length-1;t>=0;t--){var r=i.key(t);e(i[r],r)}}}}},{package:"3box>store"}],[6760,{"../src/util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/util").Global;t.exports={name:"oldIE-userDataStorage",write:function(e,t){if(s)return;var r=c(e);a((function(e){e.setAttribute(r,t),e.save(i)}))},read:function(e){if(s)return;var t=c(e),r=null;return a((function(e){r=e.getAttribute(t)})),r},each:function(e){a((function(t){for(var r=t.XMLDocument.documentElement.attributes,n=r.length-1;n>=0;n--){var i=r[n];e(t.getAttribute(i.name),i.name)}}))},remove:function(e){var t=c(e);a((function(e){e.removeAttribute(t),e.save(i)}))},clearAll:function(){a((function(e){var t=e.XMLDocument.documentElement.attributes;e.load(i);for(var r=t.length-1;r>=0;r--)e.removeAttribute(t[r].name);e.save(i)}))}};var i="storejs",o=n.document,a=function(){if(!o||!o.documentElement||!o.documentElement.addBehavior)return null;var e,t,r,n="script";try{(t=new ActiveXObject("htmlfile")).open(),t.write("<"+n+">document.w=window</"+n+'><iframe src="/favicon.ico"></iframe>'),t.close(),e=t.w.frames[0].document,r=e.createElement("div")}catch(t){r=o.createElement("div"),e=o.body}return function(t){var n=[].slice.call(arguments,0);n.unshift(r),e.appendChild(r),r.addBehavior("#default#userData"),r.load(i),t.apply(this,n),e.removeChild(r)}}(),s=(n.navigator?n.navigator.userAgent:"").match(/ (MSIE 8|MSIE 9|MSIE 10)\./);var u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");function c(e){return e.replace(/^\d/,"___$&").replace(u,"___")}}}},{package:"3box>store"}],[6761,{"../src/util":6754},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../src/util").Global;function i(){return n.sessionStorage}function o(e){return i().getItem(e)}t.exports={name:"sessionStorage",read:o,write:function(e,t){return i().setItem(e,t)},each:function(e){for(var t=i().length-1;t>=0;t--){var r=i().key(t);e(o(r),r)}},remove:function(e){return i().removeItem(e)},clearAll:function(){return i().clear()}}}}},{package:"3box>store"}],[6781,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(function(e){if(e.buffer.length)return e.buffer.head?e.buffer.head.data.length:e.buffer[0].length;return e.length}(t)):null}}}},{package:"duplexify>stream-shift"}],[6782,{_process:6295,looper:6061,"pull-stream/pull":6354},function(){with(this)return function(){"use strict";return function(e,t,r){(function(n){(function(){e("pull-stream/pull");var i=e("looper");function o(e){e.destroy?e.destroy():console.error("warning, stream-to-pull-stream: \n"+"the wrapped node-stream does not implement `destroy`, \n"+"this may cause resource leaks.")}function a(e,t,r){var a,s,u=!1;function c(){s||(s=!0,r&&r(!0===a?null:a))}function l(){u||(u=!0,h(),a?c():e(a=!0,c))}function f(t){h(),a||e(a=t,c)}function h(){t.on("finish",l),t.removeListener("close",l),t.removeListener("error",f)}t.on("close",l),t.on("finish",l),t.on("error",f),n.nextTick((function(){i((function(r){e(null,(function(e,n){if(a=a||e,!0===e)return t._isStdio?c():t.end();if(a=a||e)return o(t),c();t._isStdio?t.write(n,(function(){r()})):!1===t.write(n)?t.once("drain",r):r()}))}))}))}function s(e){var t,r=[],n=[],i=!1;function a(){for(;(r.length||t)&&n.length;)n.shift()(r.length?null:t,r.shift());!r.length&&i&&(i=!1,e.resume())}return e.on("data",(function(t){r.push(t),a(),r.length&&e.pause&&(i=!0,e.pause())})),e.on("end",(function(){t=!0,a()})),e.on("close",(function(){t=!0,a()})),e.on("error",(function(e){t=e,a()})),function(r,i){if(!i)throw new Error("*must* provide cb");if(r){function s(){for(;n.length;)n.shift()(r);i(r)}if(t)return s();e.once("close",s),o(e)}else n.push(i),a()}}var u=s,c=function(e,t){return function(r){return a(r,e,t)}},l=function(e){return s(e)};(r=t.exports=function(e,t){return e.writable&&e.write?e.readable?function(r){return a(r,e,t),s(e)}:c(e,t):l(e)}).sink=c,r.source=l,r.read=u,r.read1=s,r.read2=function(e){var t,r=!1,n=!1;function i(){var r=e.read();if(null!==r&&t){var n=t;t=null,n(null,r)}}return e.on("readable",(function(){n=!0,t&&i()})).on("end",(function(){r=!0,t&&t(r)})).on("error",(function(e){r=e,t&&t(r)})),function(e,o){t=o,r?o(r):n&&i()}},r.duplex=function(e,t){return{source:l(e),sink:c(e,t)}},r.transform=function(e){return function(t){var r=l(e);return c(e)(t),r}}}).call(this)}).call(this,e("_process"))}}},{package:"3box>ipfs>stream-to-pull-stream"}],[6787,{},function(){with(this)return function(){"use strict";return function(e,t,r){const n=()=>!0,i=["newListener","removeListener"],o=e=>!i.includes(e);t.exports=function(e,t){let r=(t=t||{}).eventFilter||n;if("skipInternal"===r&&(r=o),"function"!=typeof r)throw new Error("createEventEmitterProxy - Invalid eventFilter");let i=e;return new Proxy({},{get:(e,t)=>"setTarget"===t?a:i[t],set:(e,t,r)=>"setTarget"===t?(a=r,!0):(i[t]=r,!0)});function a(e){const t=i;i=e,t.eventNames().filter(r).forEach((r=>{(function(e,t){if(e.rawListeners)return e.rawListeners(t);let r=e._events[t]||[];Array.isArray(r)||(r=[r]);return r.slice()})(t,r).forEach((t=>e.on(r,t)))})),t.removeAllListeners()}}}}},{package:"swappable-obj-proxy"}],[6788,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){let t=e;return new Proxy({},{get:(e,n)=>"setTarget"===n?r:t[n],set:(e,n,i)=>"setTarget"===n?(r=i,!0):(t[n]=i,!0)});function r(e){t=e}}}}},{package:"swappable-obj-proxy"}],[6789,{"./createEventEmitterProxy":6787,"./createSwappableProxy":6788},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("./createSwappableProxy"),i=e("./createEventEmitterProxy");t.exports={createSwappableProxy:n,createEventEmitterProxy:i}}}},{package:"swappable-obj-proxy"}],[6790,{"./headers":6791,bl:6794,"readable-stream":6809,util:2444},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("util"),i=e("bl"),o=e("./headers"),a=e("readable-stream").Writable,s=e("readable-stream").PassThrough,u=function(){},c=function(e){return(e&=511)&&512-e},l=function(e,t){this._parent=e,this.offset=t,s.call(this,{autoDestroy:!1})};n.inherits(l,s),l.prototype.destroy=function(e){this._parent.destroy(e)};var f=function(e){if(!(this instanceof f))return new f(e);a.call(this,e),e=e||{},this._offset=0,this._buffer=i(),this._missing=0,this._partial=!1,this._onparse=u,this._header=null,this._stream=null,this._overflow=null,this._cb=null,this._locked=!1,this._destroyed=!1,this._pax=null,this._paxGlobal=null,this._gnuLongPath=null,this._gnuLongLinkPath=null;var t=this,r=t._buffer,n=function(){t._continue()},s=function(e){if(t._locked=!1,e)return t.destroy(e);t._stream||n()},h=function(){t._stream=null;var e=c(t._header.size);e?t._parse(e,d):t._parse(512,y),t._locked||n()},d=function(){t._buffer.consume(c(t._header.size)),t._parse(512,y),n()},p=function(){var e=t._header.size;t._paxGlobal=o.decodePax(r.slice(0,e)),r.consume(e),h()},m=function(){var e=t._header.size;t._pax=o.decodePax(r.slice(0,e)),t._paxGlobal&&(t._pax=Object.assign({},t._paxGlobal,t._pax)),r.consume(e),h()},g=function(){var n=t._header.size;this._gnuLongPath=o.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},b=function(){var n=t._header.size;this._gnuLongLinkPath=o.decodeLongPath(r.slice(0,n),e.filenameEncoding),r.consume(n),h()},y=function(){var i,a=t._offset;try{i=t._header=o.decode(r.slice(0,512),e.filenameEncoding,e.allowUnknownFormat)}catch(e){t.emit("error",e)}return r.consume(512),i?"gnu-long-path"===i.type?(t._parse(i.size,g),void n()):"gnu-long-link-path"===i.type?(t._parse(i.size,b),void n()):"pax-global-header"===i.type?(t._parse(i.size,p),void n()):"pax-header"===i.type?(t._parse(i.size,m),void n()):(t._gnuLongPath&&(i.name=t._gnuLongPath,t._gnuLongPath=null),t._gnuLongLinkPath&&(i.linkname=t._gnuLongLinkPath,t._gnuLongLinkPath=null),t._pax&&(t._header=i=function(e,t){return t.path&&(e.name=t.path),t.linkpath&&(e.linkname=t.linkpath),t.size&&(e.size=parseInt(t.size,10)),e.pax=t,e}(i,t._pax),t._pax=null),t._locked=!0,i.size&&"directory"!==i.type?(t._stream=new l(t,a),t.emit("entry",i,t._stream,s),t._parse(i.size,h),void n()):(t._parse(512,y),void t.emit("entry",i,function(e,t){var r=new l(e,t);return r.end(),r}(t,a),s))):(t._parse(512,y),void n())};this._onheader=y,this._parse(512,y)};n.inherits(f,a),f.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.emit("close"))},f.prototype._parse=function(e,t){this._destroyed||(this._offset+=e,this._missing=e,t===this._onheader&&(this._partial=!1),this._onparse=t)},f.prototype._continue=function(){if(!this._destroyed){var e=this._cb;this._cb=u,this._overflow?this._write(this._overflow,undefined,e):e()}},f.prototype._write=function(e,t,r){if(!this._destroyed){var n=this._stream,i=this._buffer,o=this._missing;if(e.length&&(this._partial=!0),e.length<o)return this._missing-=e.length,this._overflow=null,n?n.write(e,r):(i.append(e),r());this._cb=r,this._missing=0;var a=null;e.length>o&&(a=e.slice(o),e=e.slice(0,o)),n?n.end(e):i.append(e),this._overflow=a,this._onparse()}},f.prototype._final=function(e){if(this._partial)return this.destroy(new Error("Unexpected end of data"));e()},t.exports=f}}},{package:"@metamask/snap-controllers>tar-stream"}],[6791,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){var t=e.alloc,n="0".charCodeAt(0),i=e.from("ustar\0","binary"),o=e.from("00","binary"),a=e.from("ustar ","binary"),s=e.from(" \0","binary"),u=parseInt("7777",8),c=257,l=function(e,t,r,n){for(;r<n;r++)if(e[r]===t)return r;return n},f=function(e){for(var t=256,r=0;r<148;r++)t+=e[r];for(var n=156;n<512;n++)t+=e[n];return t},h=function(e,t){return(e=e.toString(8)).length>t?"7777777777777777777".slice(0,t)+" ":"0000000000000000000".slice(0,t-e.length)+e+" "};var d=function(e,t,r){if(128&(e=e.slice(t,t+r))[t=0])return function(e){var t;if(128===e[0])t=!0;else{if(255!==e[0])return null;t=!1}for(var r=[],n=e.length-1;n>0;n--){var i=e[n];t?r.push(i):r.push(255-i)}var o=0,a=r.length;for(n=0;n<a;n++)o+=r[n]*Math.pow(256,n);return t?o:-1*o}(e);for(;t<e.length&&32===e[t];)t++;for(var n=(i=l(e,32,t,e.length),o=e.length,a=e.length,"number"!=typeof i?a:(i=~~i)>=o?o:i>=0||(i+=o)>=0?i:0);t<n&&0===e[t];)t++;return n===t?0:parseInt(e.slice(t,n).toString(),8);var i,o,a},p=function(e,t,r,n){return e.slice(t,l(e,0,t,t+r)).toString(n)},m=function(t){var r=e.byteLength(t),n=Math.floor(Math.log(r)/Math.log(10))+1;return r+n>=Math.pow(10,n)&&n++,r+n+t};r.decodeLongPath=function(e,t){return p(e,0,e.length,t)},r.encodePax=function(t){var r="";t.name&&(r+=m(" path="+t.name+"\n")),t.linkname&&(r+=m(" linkpath="+t.linkname+"\n"));var n=t.pax;if(n)for(var i in n)r+=m(" "+i+"="+n[i]+"\n");return e.from(r)},r.decodePax=function(e){for(var t={};e.length;){for(var r=0;r<e.length&&32!==e[r];)r++;var n=parseInt(e.slice(0,r).toString(),10);if(!n)return t;var i=e.slice(r+1,n-1).toString(),o=i.indexOf("=");if(-1===o)return t;t[i.slice(0,o)]=i.slice(o+1),e=e.slice(n)}return t},r.encode=function(r){var a=t(512),s=r.name,l="";if(5===r.typeflag&&"/"!==s[s.length-1]&&(s+="/"),e.byteLength(s)!==s.length)return null;for(;e.byteLength(s)>100;){var d=s.indexOf("/");if(-1===d)return null;l+=l?"/"+s.slice(0,d):s.slice(0,d),s=s.slice(d+1)}return e.byteLength(s)>100||e.byteLength(l)>155||r.linkname&&e.byteLength(r.linkname)>100?null:(a.write(s),a.write(h(r.mode&u,6),100),a.write(h(r.uid,6),108),a.write(h(r.gid,6),116),a.write(h(r.size,11),124),a.write(h(r.mtime.getTime()/1e3|0,11),136),a[156]=n+function(e){switch(e){case"file":return 0;case"link":return 1;case"symlink":return 2;case"character-device":return 3;case"block-device":return 4;case"directory":return 5;case"fifo":return 6;case"contiguous-file":return 7;case"pax-header":return 72}return 0}(r.type),r.linkname&&a.write(r.linkname,157),i.copy(a,c),o.copy(a,263),r.uname&&a.write(r.uname,265),r.gname&&a.write(r.gname,297),a.write(h(r.devmajor||0,6),329),a.write(h(r.devminor||0,6),337),l&&a.write(l,345),a.write(h(f(a),6),148),a)},r.decode=function(e,t,r){var o=0===e[156]?0:e[156]-n,u=p(e,0,100,t),l=d(e,100,8),h=d(e,108,8),m=d(e,116,8),g=d(e,124,12),b=d(e,136,12),y=function(e){switch(e){case 0:return"file";case 1:return"link";case 2:return"symlink";case 3:return"character-device";case 4:return"block-device";case 5:return"directory";case 6:return"fifo";case 7:return"contiguous-file";case 72:return"pax-header";case 55:return"pax-global-header";case 27:return"gnu-long-link-path";case 28:case 30:return"gnu-long-path"}return null}(o),v=0===e[157]?null:p(e,157,100,t),_=p(e,265,32),w=p(e,297,32),E=d(e,329,8),k=d(e,337,8),S=f(e);if(256===S)return null;if(S!==d(e,148,8))throw new Error("Invalid tar header. Maybe the tar is corrupted or it needs to be gunzipped?");if(0===i.compare(e,c,263))e[345]&&(u=p(e,345,155,t)+"/"+u);else if(0===a.compare(e,c,263)&&0===s.compare(e,263,265));else if(!r)throw new Error("Invalid tar header: unknown format.");return 0===o&&u&&"/"===u[u.length-1]&&(o=5),{name:u,mode:l,uid:h,gid:m,size:g,mtime:new Date(1e3*b),type:y,linkname:v,uname:_,gname:w,devmajor:E,devminor:k}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>tar-stream"}],[6792,{"./extract":6790,"./pack":6810},function(){with(this)return function(){"use strict";return function(e,t,r){r.extract=e("./extract"),r.pack=e("./pack")}}},{package:"@metamask/snap-controllers>tar-stream"}],[6793,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){const{Buffer:n}=e("buffer"),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const n=t+this._bufs[r].length;if(e<n||r===this._bufs.length-1)return[r,e-t];t=n}},o.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let e=0;e<t;e++)r+=this._bufs[e].length;return r},o.prototype.get=function(e){if(e>this.length||e<0)return undefined;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||r<0)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||n.alloc(0);if(i<=0)return e||n.alloc(0);const o=!!e,a=this._offset(r),s=i-r;let u=s,c=o&&t||0,l=a[1];if(0===r&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:n.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(u<=this._bufs[a[0]].length-l)return o?this._bufs[a[0]].copy(e,t,l,l+u):this._bufs[a[0]].slice(l,l+u);o||(e=n.allocUnsafe(s));for(let t=a[0];t<this._bufs.length;t++){const r=this._bufs[t].length-l;if(!(u>r)){this._bufs[t].copy(e,c,l,l+u),c+=r;break}this._bufs[t].copy(e,c,l),c+=r,u-=r,l&&(l=0)}return e.length>c?e.slice(0,c):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const r=this._offset(e),n=this._offset(t),i=this._bufs.slice(r[0],n[0]+1);return 0===n[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,n[1]),0!==r[1]&&(i[0]=i[0].slice(r[1])),this._new(i)},o.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(n.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(n.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,r){if(r===undefined&&"string"==typeof t&&(r=t,t=undefined),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=n.from([e]):"string"==typeof e?e=n.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=n.from(e.buffer,e.byteOffset,e.byteLength):n.isBuffer(e)||(e=n.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],a=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;a<t.length;){if(t.length-a>=e.length){const r=t.indexOf(e,a);if(-1!==r)return this._reverseOffset([o,r]);a=t.length-e.length+1}else{const t=this._reverseOffset([o,a]);if(this._match(t,e))return t;a++}}a=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},t.exports=o}}},{package:"@metamask/snap-controllers>tar-stream>bl"}],[6794,{"./BufferList":6793,inherits:5299,"readable-stream":6809},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("readable-stream").Duplex,i=e("inherits"),o=e("./BufferList");function a(e){if(!(this instanceof a))return new a(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),n.call(this)}i(a,n),Object.assign(a.prototype,o.prototype),a.prototype._new=function(e){return new a(e)},a.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},a.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},a.prototype.end=function(e){n.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},a.prototype._isBufferList=function(e){return e instanceof a||e instanceof o||a.isBufferList(e)},a.isBufferList=o.isBufferList,t.exports=a,t.exports.BufferListStream=a,t.exports.BufferList=o}}},{package:"@metamask/snap-controllers>tar-stream>bl"}],[6795,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n={};function i(e,t,r){r||(r=Error);var i=function(e){var r,n;function i(r,n,i){return e.call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,n,i))||this}return n=e,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n,i}(r);i.prototype.name=r.name,i.prototype.code=e,n[e]=i}function o(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,r){var n,i,a,s;if("string"==typeof t&&(i="not ",t.substr(!a||a<0?0:+a,i.length)===i)?(n="must not be",t=t.replace(/^not /,"")):n="must be",function(e,t,r){return(r===undefined||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(n," ").concat(o(t,"type"));else{var u=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(u," ").concat(n," ").concat(o(t,"type"))}return s+=". Received type ".concat(typeof r)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=n}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6796,{"./_stream_readable":6798,"./_stream_writable":6800,_process:6295,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var a=n(o.prototype),s=0;s<a.length;s++){var u=a[s];c.prototype[u]||(c.prototype[u]=o.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",l)))}function l(){this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){this._readableState!==undefined&&this._writableState!==undefined&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6797,{"./_stream_transform":6799,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=i;var n=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}e("inherits")(i,n),i.prototype._transform=function(e,t,r){r(null,e)}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6798,{"../errors":6795,"./_stream_duplex":6796,"./internal/streams/async_iterator":6801,"./internal/streams/buffer_list":6802,"./internal/streams/destroy":6803,"./internal/streams/from":6805,"./internal/streams/state":6807,"./internal/streams/stream":6808,_process:6295,buffer:2438,events:2439,inherits:5299,"string_decoder/":6783,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;t.exports=S,S.ReadableState=k;e("events").EventEmitter;var i=function(e,t){return e.listeners(t).length},o=e("./internal/streams/stream"),a=e("buffer").Buffer,s=global.Uint8Array||function(){};var u,c=e("util");u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,f,h,d=e("./internal/streams/buffer_list"),p=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,g=e("../errors").codes,b=g.ERR_INVALID_ARG_TYPE,y=g.ERR_STREAM_PUSH_AFTER_EOF,v=g.ERR_METHOD_NOT_IMPLEMENTED,_=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,o);var w=p.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(t,r,i){n=n||e("./_stream_duplex"),t=t||{},"boolean"!=typeof i&&(i=r instanceof n),this.objectMode=!!t.objectMode,i&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",i),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(l||(l=e("string_decoder/").StringDecoder),this.decoder=new l(t.encoding),this.encoding=t.encoding)}function S(t){if(n=n||e("./_stream_duplex"),!(this instanceof S))return new S(t);var r=this instanceof n;this._readableState=new k(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),o.call(this)}function R(e,t,r,n,i){u("readableAddChunk",t);var o,c=e._readableState;if(null===t)c.reading=!1,function(e,t){if(u("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}(e,c);else if(i||(o=function(e,t){var r;n=t,a.isBuffer(n)||n instanceof s||"string"==typeof t||t===undefined||e.objectMode||(r=new b("chunk",["string","Buffer","Uint8Array"],t));var n;return r}(c,t)),o)w(e,o);else if(c.objectMode||t&&t.length>0)if("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===a.prototype||(t=function(e){return a.from(e)}(t)),n)c.endEmitted?w(e,new _):T(e,c,t,!0);else if(c.ended)w(e,new y);else{if(c.destroyed)return!1;c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?T(e,c,t,!1):x(e,c)):T(e,c,t,!1)}else n||(c.reading=!1,x(e,c));return!c.ended&&(c.length<c.highWaterMark||0===c.length)}function T(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),x(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==undefined&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=p.destroy,S.prototype._undestroy=p.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=a.from(e,t),t=""),r=!0),R(this,e,t,!1,r)},S.prototype.unshift=function(e){return R(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){l||(l=e("string_decoder/").StringDecoder);var r=new l(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=r.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var A=1073741824;function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function x(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(I,e,t))}function I(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(u("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function N(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){u("readable nexttick read 0"),e.read(0)}function L(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function F(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(D,t,e))}function D(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function U(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}S.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):O(this),null;if(0===(e=C(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(r,t))),null===(n=e>0?F(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},S.prototype._read=function(e){w(this,new v("_read()"))},S.prototype.pipe=function(e,t){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,u("pipe count=%d opts=%j",o.pipesCount,t);var a=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:g;function s(t,r){u("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),e.removeListener("close",p),e.removeListener("finish",m),e.removeListener("drain",l),e.removeListener("error",d),e.removeListener("unpipe",s),n.removeListener("end",c),n.removeListener("end",g),n.removeListener("data",h),f=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function c(){u("onend"),e.end()}o.endEmitted?r.nextTick(a):n.once("end",a),e.on("unpipe",s);var l=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",l);var f=!1;function h(t){u("ondata");var r=e.write(t);u("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==U(o.pipes,e))&&!f&&(u("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function d(t){u("onerror",t),g(),e.removeListener("error",d),0===i(e,"error")&&w(e,t)}function p(){e.removeListener("finish",m),g()}function m(){u("onfinish"),e.removeListener("close",p),g()}function g(){u("unpipe"),n.unpipe(e)}return n.on("data",h),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",d),e.once("close",p),e.once("finish",m),e.emit("pipe",n),o.flowing||(u("pipe resume"),n.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=U(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},S.prototype.on=function(e,t){var n=o.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||r.nextTick(M,this))),n},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var n=o.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(N,this),n},S.prototype.removeAllListeners=function(e){var t=o.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&e!==undefined||r.nextTick(N,this),t},S.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(L,e,t))}(this,e)),e.paused=!1,this},S.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(u("wrapped data"),r.decoder&&(i=r.decoder.write(i)),!r.objectMode||null!==i&&i!==undefined)&&((r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause())))})),e)this[i]===undefined&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var o=0;o<E.length;o++)e.on(E[o],this.emit.bind(this,E[o]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return f===undefined&&(f=e("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=F,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,r){return h===undefined&&(h=e("./internal/streams/from")),h(S,t,r)})}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6799,{"../errors":6795,"./_stream_duplex":6796,inherits:5299},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=l;var n=e("../errors").codes,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,u=e("./_stream_duplex");function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function l(e){if(!(this instanceof l))return new l(e);u.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",f)}function f(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,r){h(e,t,r)}))}function h(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(l,u),l.prototype.push=function(e,t){return this._transformState.needTransform=!1,u.prototype.push.call(this,e,t)},l.prototype._transform=function(e,t,r){r(new i("_transform()"))},l.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},l.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},l.prototype._destroy=function(e,t){u.prototype._destroy.call(this,e,(function(e){t(e)}))}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[680,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="contracts/5.7.0"}}},{package:"@eth-optimism/contracts>@ethersproject/contracts"}],[6800,{"../errors":6795,"./_stream_duplex":6796,"./internal/streams/destroy":6803,"./internal/streams/state":6807,"./internal/streams/stream":6808,_process:6295,buffer:2438,inherits:5299,"util-deprecate":6887},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var i;t.exports=S,S.WritableState=k;var o={deprecate:e("util-deprecate")},a=e("./internal/streams/stream"),s=e("buffer").Buffer,u=global.Uint8Array||function(){};var c,l=e("./internal/streams/destroy"),f=e("./internal/streams/state").getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,b=h.ERR_STREAM_DESTROYED,y=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,w=l.errorOrDestroy;function E(){}function k(t,o,a){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=o instanceof i),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=f(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,o=n.writecb;if("function"!=typeof o)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,o){--t.pendingcb,n?(r.nextTick(o,i),r.nextTick(P,e,t),e._writableState.errorEmitted=!0,w(e,i)):(o(i),e._writableState.errorEmitted=!0,w(e,i),P(e,t))}(e,n,i,t,o);else{var a=C(n)||e.destroyed;a||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(T,e,n,a,o):T(e,n,a,o)}}(o,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function S(t){var r=this instanceof(i=i||e("./_stream_duplex"));if(!r&&!c.call(S,this))return new S(t);this._writableState=new k(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),a.call(this)}function R(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new b("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function T(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),P(e,t)}function A(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,o=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var s=0,u=!0;r;)o[s]=r,r.isBuf||(u=!1),r=r.next,s+=1;o.allBuffers=u,R(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,l=r.encoding,f=r.callback;if(R(e,t,!1,t.objectMode?1:c.length,c,l,f),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function O(e,t){e._final((function(r){t.pendingcb--,r&&w(e,r),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var n=C(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(O,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}e("inherits")(S,a),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:o.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer "+"instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!c.call(this,e)||this===S&&(e&&e._writableState instanceof k)}})):c=function(e){return e instanceof this},S.prototype.pipe=function(){w(this,new g)},S.prototype.write=function(e,t,n){var i,o=this._writableState,a=!1,c=!o.objectMode&&(i=e,s.isBuffer(i)||i instanceof u);return c&&!s.isBuffer(e)&&(e=function(e){return s.from(e)}(e)),"function"==typeof t&&(n=t,t=null),c?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof n&&(n=E),o.ending?function(e,t){var n=new v;w(e,n),r.nextTick(t,n)}(this,n):(c||function(e,t,n,i){var o;return null===n?o=new y:"string"==typeof n||t.objectMode||(o=new d("chunk",["string","Buffer"],n)),!o||(w(e,o),r.nextTick(i,o),!1)}(this,o,e,n))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=s.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var u=t.objectMode?1:n.length;t.length+=u;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else R(e,t,!1,u,n,i,o);return c}(this,o,c,e,t,n)),a},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,r){r(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&e!==undefined&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,P(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==undefined&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6801,{"./end-of-stream":6804,_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n;function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),u=Symbol("error"),c=Symbol("ended"),l=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function d(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var r=e[h].read();null!==r&&(e[l]=null,e[a]=null,e[s]=null,t(d(r,!1)))}}function m(e){r.nextTick(p,e)}var g=Object.getPrototypeOf((function(){})),b=Object.setPrototypeOf((i(n={get stream(){return this[h]},next:function(){var e=this,t=this[u];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(d(undefined,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[u]?n(e[u]):t(d(undefined,!0))}))}));var n,i=this[l];if(i)n=new Promise(function(e,t){return function(r,n){e.then((function(){t[c]?r(d(undefined,!0)):t[f](r,n)}),n)}}(i,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(d(o,!1));n=new Promise(this[f])}return this[l]=n,n}},Symbol.asyncIterator,(function(){return this})),i(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(d(undefined,!0))}))}))})),n),g);t.exports=function(e){var t,r=Object.create(b,(i(t={},h,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,u,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,f,{value:function(e,t){var n=r[h].read();n?(r[l]=null,r[a]=null,r[s]=null,e(d(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[l]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[l]=null,r[a]=null,r[s]=null,t(e)),void(r[u]=e)}var n=r[a];null!==n&&(r[l]=null,r[a]=null,r[s]=null,n(d(undefined,!0))),r[c]=!0})),e.on("readable",m.bind(null,r)),r}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6802,{buffer:2438,util:2437},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=e("buffer").Buffer,s=e("util").inspect,u=s&&s.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r,c;return t=e,r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,r,n,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,r=i,n=s,a.prototype.copy.call(t,r,n),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],r&&o(t.prototype,r),c&&o(t,c),e}()}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6803,{_process:6295},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(e,t){i(e,t),n(e)}function n(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,u=this._writableState&&this._writableState.destroyed;return s||u?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(n,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):o?(e.nextTick(n,a),o(t)):e.nextTick(n,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6804,{"../../../errors":6795},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,u=function(){t.writable||l()},c=t._writableState&&t._writableState.finished,l=function(){s=!1,c=!0,a||o.call(t)},f=t._readableState&&t._readableState.endEmitted,h=function(){a=!1,f=!0,s||o.call(t)},d=function(e){o.call(t,e)},p=function(){var e;return a&&!f?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},m=function(){t.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(t)?s&&!t._writableState&&(t.on("end",u),t.on("close",u)):(t.on("complete",l),t.on("abort",p),t.req?m():t.on("request",m)),t.on("end",h),t.on("finish",l),!1!==r.error&&t.on("error",d),t.on("close",p),function(){t.removeListener("complete",l),t.removeListener("abort",p),t.removeListener("request",m),t.req&&t.req.removeListener("finish",l),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("end",h),t.removeListener("error",d),t.removeListener("close",p)}}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6805,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(){throw new Error("Readable.from is not available in the browser")}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6806,{"../../../errors":6795,"./end-of-stream":6804},function(){with(this)return function(){"use strict";return function(e,t,r){var n;var i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function u(t,r,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),n===undefined&&(n=e("./end-of-stream")),n(t,{readable:r,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var u=!1;return function(e){if(!s&&!u)return u=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"))}}function c(e){e()}function l(e,t){return e.pipe(t)}function f(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}t.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=f(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return u(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(l)}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6807,{"../../../errors":6795},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6808,{events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("events").EventEmitter}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[6809,{"./lib/_stream_duplex.js":6796,"./lib/_stream_passthrough.js":6797,"./lib/_stream_readable.js":6798,"./lib/_stream_transform.js":6799,"./lib/_stream_writable.js":6800,"./lib/internal/streams/end-of-stream.js":6804,"./lib/internal/streams/pipeline.js":6806},function(){with(this)return function(){"use strict";return function(e,t,r){(r=t.exports=e("./lib/_stream_readable.js")).Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")}}},{package:"@metamask/snap-controllers>tar-stream>readable-stream"}],[681,{"./_version":680,"@ethersproject/abi":657,"@ethersproject/abstract-provider":660,"@ethersproject/abstract-signer":662,"@ethersproject/address":664,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/logger":702,"@ethersproject/properties":708,"@ethersproject/transactions":749},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.ContractFactory=r.Contract=r.BaseContract=void 0;var u=e("@ethersproject/abi"),c=e("@ethersproject/abstract-provider"),l=e("@ethersproject/abstract-signer"),f=e("@ethersproject/address"),h=e("@ethersproject/bignumber"),d=e("@ethersproject/bytes"),p=e("@ethersproject/properties"),m=e("@ethersproject/transactions"),g=e("@ethersproject/logger"),b=e("./_version"),y=new g.Logger(b.version),v={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0,ccipReadEnabled:!0};function _(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(i){switch(i.label){case 0:return[4,t];case 1:"string"!=typeof(r=i.sent())&&y.throwArgumentError("invalid address or ENS name","name",r);try{return[2,(0,f.getAddress)(r)]}catch(e){}return e||y.throwError("a provider or signer is needed to resolve ENS names",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"}),[4,e.resolveName(r)];case 2:return null==(n=i.sent())&&y.throwArgumentError("resolver or addr is not configured for ENS name","name",r),[2,n]}}))}))}function w(e,t,r){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return Array.isArray(r)?[4,Promise.all(r.map((function(r,n){return w(e,Array.isArray(t)?t[n]:t[r.name],r)})))]:[3,2];case 1:case 3:case 5:case 7:return[2,n.sent()];case 2:return"address"!==r.type?[3,4]:[4,_(e,t)];case 4:return"tuple"!==r.type?[3,6]:[4,w(e,t,r.components)];case 6:return"array"!==r.baseType?[3,8]:Array.isArray(t)?[4,Promise.all(t.map((function(t){return w(e,t,r.arrayChildren)})))]:[2,Promise.reject(y.makeError("invalid value for array",g.Logger.errors.INVALID_ARGUMENT,{argument:"value",value:t}))];case 8:return[2,t]}}))}))}function E(e,t,r){return o(this,void 0,void 0,(function(){var n,i,s,u,c,l,b,v,E,k,S=this;return a(this,(function(R){switch(R.label){case 0:return n={},r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(n=(0,p.shallowCopy)(r.pop())),y.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?n.from?n.from=(0,p.resolveProperties)({override:_(e.signer,n.from),signer:e.signer.getAddress()}).then((function(e){return o(S,void 0,void 0,(function(){return a(this,(function(t){return(0,f.getAddress)(e.signer)!==e.override&&y.throwError("Contract with a Signer cannot override from",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),[2,e.override]}))}))})):n.from=e.signer.getAddress():n.from&&(n.from=_(e.provider,n.from)),[4,(0,p.resolveProperties)({args:w(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:(0,p.resolveProperties)(n)||{}})];case 1:if(i=R.sent(),s=e.interface.encodeFunctionData(t,i.args),u={data:s,to:i.address},null!=(c=i.overrides).nonce&&(u.nonce=h.BigNumber.from(c.nonce).toNumber()),null!=c.gasLimit&&(u.gasLimit=h.BigNumber.from(c.gasLimit)),null!=c.gasPrice&&(u.gasPrice=h.BigNumber.from(c.gasPrice)),null!=c.maxFeePerGas&&(u.maxFeePerGas=h.BigNumber.from(c.maxFeePerGas)),null!=c.maxPriorityFeePerGas&&(u.maxPriorityFeePerGas=h.BigNumber.from(c.maxPriorityFeePerGas)),null!=c.from&&(u.from=c.from),null!=c.type&&(u.type=c.type),null!=c.accessList&&(u.accessList=(0,m.accessListify)(c.accessList)),null==u.gasLimit&&null!=t.gas){for(l=21e3,b=(0,d.arrayify)(s),v=0;v<b.length;v++)l+=4,b[v]&&(l+=64);u.gasLimit=h.BigNumber.from(t.gas).add(l)}return c.value&&((E=h.BigNumber.from(c.value)).isZero()||t.payable||y.throwError("non-payable method cannot override value",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),u.value=E),c.customData&&(u.customData=(0,p.shallowCopy)(c.customData)),c.ccipReadEnabled&&(u.ccipReadEnabled=!!c.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled,(k=Object.keys(n).filter((function(e){return null!=n[e]}))).length&&y.throwError("cannot override "+k.map((function(e){return JSON.stringify(e)})).join(","),g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:k}),[2,u]}}))}))}function k(e,t){var r=t.wait.bind(t);t.wait=function(t){return r(t).then((function(t){return t.events=t.logs.map((function(r){var n=(0,p.deepCopy)(r),i=null;try{i=e.interface.parseLog(r)}catch(e){}return i&&(n.args=i.args,n.decode=function(t,r){return e.interface.decodeEventLog(i.eventFragment,t,r)},n.event=i.name,n.eventSignature=i.signature),n.removeListener=function(){return e.provider},n.getBlock=function(){return e.provider.getBlock(t.blockHash)},n.getTransaction=function(){return e.provider.getTransaction(t.transactionHash)},n.getTransactionReceipt=function(){return Promise.resolve(t)},n})),t}))}}function S(e,t,r){var n=e.signer||e.provider;return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return o(this,void 0,void 0,(function(){var o,s,u,c,l;return a(this,(function(a){switch(a.label){case 0:return o=undefined,i.length!==t.inputs.length+1||"object"!=typeof i[i.length-1]?[3,3]:null==(s=(0,p.shallowCopy)(i.pop())).blockTag?[3,2]:[4,s.blockTag];case 1:o=a.sent(),a.label=2;case 2:delete s.blockTag,i.push(s),a.label=3;case 3:return null==e.deployTransaction?[3,5]:[4,e._deployed(o)];case 4:a.sent(),a.label=5;case 5:return[4,E(e,t,i)];case 6:return u=a.sent(),[4,n.call(u,o)];case 7:c=a.sent();try{return l=e.interface.decodeFunctionResult(t,c),r&&1===t.outputs.length&&(l=l[0]),[2,l]}catch(t){throw t.code===g.Logger.errors.CALL_EXCEPTION&&(t.address=e.address,t.args=i,t.transaction=u),t}return[2]}}))}))}}function R(e,t,r){return t.constant?S(e,t,r):function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return o(this,void 0,void 0,(function(){var n,i;return a(this,(function(o){switch(o.label){case 0:return e.signer||y.throwError("sending a transaction requires a signer",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null==e.deployTransaction?[3,2]:[4,e._deployed()];case 1:o.sent(),o.label=2;case 2:return[4,E(e,t,r)];case 3:return n=o.sent(),[4,e.signer.sendTransaction(n)];case 4:return i=o.sent(),k(e,i),[2,i]}}))}))}}(e,t)}function T(e){return!e.address||null!=e.topics&&0!==e.topics.length?(e.address||"*")+"@"+(e.topics?e.topics.map((function(e){return Array.isArray(e)?e.join("|"):e})).join(":"):""):"*"}var A=function(){function e(e,t){(0,p.defineReadOnly)(this,"tag",e),(0,p.defineReadOnly)(this,"filter",t),this._listeners=[]}return e.prototype.addListener=function(e,t){this._listeners.push({listener:e,once:t})},e.prototype.removeListener=function(e){var t=!1;this._listeners=this._listeners.filter((function(r){return!(!t&&r.listener===e)||(t=!0,!1)}))},e.prototype.removeAllListeners=function(){this._listeners=[]},e.prototype.listeners=function(){return this._listeners.map((function(e){return e.listener}))},e.prototype.listenerCount=function(){return this._listeners.length},e.prototype.run=function(e){var t=this,r=this.listenerCount();return this._listeners=this._listeners.filter((function(r){var n=e.slice();return setTimeout((function(){r.listener.apply(t,n)}),0),!r.once})),r},e.prototype.prepareEvent=function(e){},e.prototype.getEmit=function(e){return[e]},e}(),C=function(e){function t(){return e.call(this,"error",null)||this}return i(t,e),t}(A),O=function(e){function t(t,r,n,i){var o,a={address:t},s=r.getEventTopic(n);return i?(s!==i[0]&&y.throwArgumentError("topic mismatch","topics",i),a.topics=i.slice()):a.topics=[s],o=e.call(this,T(a),a)||this,(0,p.defineReadOnly)(o,"address",t),(0,p.defineReadOnly)(o,"interface",r),(0,p.defineReadOnly)(o,"fragment",n),o}return i(t,e),t.prototype.prepareEvent=function(t){var r=this;e.prototype.prepareEvent.call(this,t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=function(e,t){return r.interface.decodeEventLog(r.fragment,e,t)};try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(e){t.args=null,t.decodeError=e}},t.prototype.getEmit=function(e){var t=(0,u.checkResultErrors)(e.args);if(t.length)throw t[0].error;var r=(e.args||[]).slice();return r.push(e),r},t}(A),P=function(e){function t(t,r){var n=e.call(this,"*",{address:t})||this;return(0,p.defineReadOnly)(n,"address",t),(0,p.defineReadOnly)(n,"interface",r),n}return i(t,e),t.prototype.prepareEvent=function(t){var r=this;e.prototype.prepareEvent.call(this,t);try{var n=this.interface.parseLog(t);t.event=n.name,t.eventSignature=n.signature,t.decode=function(e,t){return r.interface.decodeEventLog(n.eventFragment,e,t)},t.args=n.args}catch(e){}},t}(A),x=function(){function e(e,t,r){var n=this.constructor,i=this;(0,p.defineReadOnly)(this,"interface",(0,p.getStatic)(n,"getInterface")(t)),null==r?((0,p.defineReadOnly)(this,"provider",null),(0,p.defineReadOnly)(this,"signer",null)):l.Signer.isSigner(r)?((0,p.defineReadOnly)(this,"provider",r.provider||null),(0,p.defineReadOnly)(this,"signer",r)):c.Provider.isProvider(r)?((0,p.defineReadOnly)(this,"provider",r),(0,p.defineReadOnly)(this,"signer",null)):y.throwArgumentError("invalid signer or provider","signerOrProvider",r),(0,p.defineReadOnly)(this,"callStatic",{}),(0,p.defineReadOnly)(this,"estimateGas",{}),(0,p.defineReadOnly)(this,"functions",{}),(0,p.defineReadOnly)(this,"populateTransaction",{}),(0,p.defineReadOnly)(this,"filters",{});var s={};if(Object.keys(this.interface.events).forEach((function(e){var t=i.interface.events[e];(0,p.defineReadOnly)(i.filters,e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return{address:i.address,topics:i.interface.encodeFilterTopics(t,e)}})),s[t.name]||(s[t.name]=[]),s[t.name].push(e)})),Object.keys(s).forEach((function(e){var t=s[e];1===t.length?(0,p.defineReadOnly)(i.filters,e,i.filters[t[0]]):y.warn("Duplicate definition of "+e+" ("+t.join(", ")+")")})),(0,p.defineReadOnly)(this,"_runningEvents",{}),(0,p.defineReadOnly)(this,"_wrappedEmits",{}),null==e&&y.throwArgumentError("invalid contract address or ENS name","addressOrName",e),(0,p.defineReadOnly)(this,"address",e),this.provider)(0,p.defineReadOnly)(this,"resolvedAddress",_(this.provider,e));else try{(0,p.defineReadOnly)(this,"resolvedAddress",Promise.resolve((0,f.getAddress)(e)))}catch(e){y.throwError("provider is required to use ENS name as contract address",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch((function(e){}));var u={},h={};Object.keys(this.interface.functions).forEach((function(e){var t=i.interface.functions[e];if(h[e])y.warn("Duplicate ABI entry for "+JSON.stringify(e));else{h[e]=!0;var r=t.name;u["%"+r]||(u["%"+r]=[]),u["%"+r].push(e),null==i[e]&&(0,p.defineReadOnly)(i,e,R(i,t,!0)),null==i.functions[e]&&(0,p.defineReadOnly)(i.functions,e,R(i,t,!1)),null==i.callStatic[e]&&(0,p.defineReadOnly)(i.callStatic,e,S(i,t,!0)),null==i.populateTransaction[e]&&(0,p.defineReadOnly)(i.populateTransaction,e,function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return E(e,t,r)}}(i,t)),null==i.estimateGas[e]&&(0,p.defineReadOnly)(i.estimateGas,e,function(e,t){var r=e.signer||e.provider;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return o(this,void 0,void 0,(function(){var i;return a(this,(function(o){switch(o.label){case 0:return r||y.throwError("estimate require a provider or signer",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),[4,E(e,t,n)];case 1:return i=o.sent(),[4,r.estimateGas(i)];case 2:return[2,o.sent()]}}))}))}}(i,t))}})),Object.keys(u).forEach((function(e){var t=u[e];if(!(t.length>1)){e=e.substring(1);var r=t[0];try{null==i[e]&&(0,p.defineReadOnly)(i,e,i[r])}catch(e){}null==i.functions[e]&&(0,p.defineReadOnly)(i.functions,e,i.functions[r]),null==i.callStatic[e]&&(0,p.defineReadOnly)(i.callStatic,e,i.callStatic[r]),null==i.populateTransaction[e]&&(0,p.defineReadOnly)(i.populateTransaction,e,i.populateTransaction[r]),null==i.estimateGas[e]&&(0,p.defineReadOnly)(i.estimateGas,e,i.estimateGas[r])}}))}return e.getContractAddress=function(e){return(0,f.getContractAddress)(e)},e.getInterface=function(e){return u.Interface.isInterface(e)?e:new u.Interface(e)},e.prototype.deployed=function(){return this._deployed()},e.prototype._deployed=function(e){var t=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return t})):this._deployedPromise=this.provider.getCode(this.address,e).then((function(e){return"0x"===e&&y.throwError("contract not deployed",g.Logger.errors.UNSUPPORTED_OPERATION,{contractAddress:t.address,operation:"getDeployed"}),t}))),this._deployedPromise},e.prototype.fallback=function(e){var t=this;this.signer||y.throwError("sending a transactions require a signer",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var r=(0,p.shallowCopy)(e||{});return["from","to"].forEach((function(e){null!=r[e]&&y.throwError("cannot override "+e,g.Logger.errors.UNSUPPORTED_OPERATION,{operation:e})})),r.to=this.resolvedAddress,this.deployed().then((function(){return t.signer.sendTransaction(r)}))},e.prototype.connect=function(e){"string"==typeof e&&(e=new l.VoidSigner(e,this.provider));var t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&(0,p.defineReadOnly)(t,"deployTransaction",this.deployTransaction),t},e.prototype.attach=function(e){return new this.constructor(e,this.interface,this.signer||this.provider)},e.isIndexed=function(e){return u.Indexed.isIndexed(e)},e.prototype._normalizeRunningEvent=function(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e},e.prototype._getRunningEvent=function(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new C);if("event"===e)return this._normalizeRunningEvent(new A("event",null));if("*"===e)return this._normalizeRunningEvent(new P(this.address,this.interface));var t=this.interface.getEvent(e);return this._normalizeRunningEvent(new O(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{var r=e.topics[0];if("string"!=typeof r)throw new Error("invalid topic");t=this.interface.getEvent(r);return this._normalizeRunningEvent(new O(this.address,this.interface,t,e.topics))}catch(e){}var n={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new A(T(n),n))}return this._normalizeRunningEvent(new P(this.address,this.interface))},e.prototype._checkRunningEvents=function(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];var t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}},e.prototype._wrapEvent=function(e,t,r){var n=this,i=(0,p.deepCopy)(t);return i.removeListener=function(){r&&(e.removeListener(r),n._checkRunningEvents(e))},i.getBlock=function(){return n.provider.getBlock(t.blockHash)},i.getTransaction=function(){return n.provider.getTransaction(t.transactionHash)},i.getTransactionReceipt=function(){return n.provider.getTransactionReceipt(t.transactionHash)},e.prepareEvent(i),i},e.prototype._addEventListener=function(e,t,r){var n=this;if(this.provider||y.throwError("events require a provider or a signer with a provider",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){var i=function(r){var i=n._wrapEvent(e,r,t);if(null==i.decodeError)try{var o=e.getEmit(i);n.emit.apply(n,s([e.filter],o,!1))}catch(e){i.decodeError=e.error}null!=e.filter&&n.emit("event",i),null!=i.decodeError&&n.emit("error",i.decodeError,i)};this._wrappedEmits[e.tag]=i,null!=e.filter&&this.provider.on(e.filter,i)}},e.prototype.queryFilter=function(e,t,r){var n=this,i=this._getRunningEvent(e),o=(0,p.shallowCopy)(i.filter);return"string"==typeof t&&(0,d.isHexString)(t,32)?(null!=r&&y.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),o.blockHash=t):(o.fromBlock=null!=t?t:0,o.toBlock=null!=r?r:"latest"),this.provider.getLogs(o).then((function(e){return e.map((function(e){return n._wrapEvent(i,e,null)}))}))},e.prototype.on=function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this},e.prototype.once=function(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this},e.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!this.provider)return!1;var n=this._getRunningEvent(e),i=n.run(t)>0;return this._checkRunningEvents(n),i},e.prototype.listenerCount=function(e){var t=this;return this.provider?null==e?Object.keys(this._runningEvents).reduce((function(e,r){return e+t._runningEvents[r].listenerCount()}),0):this._getRunningEvent(e).listenerCount():0},e.prototype.listeners=function(e){if(!this.provider)return[];if(null==e){var t=[];for(var r in this._runningEvents)this._runningEvents[r].listeners().forEach((function(e){t.push(e)}));return t}return this._getRunningEvent(e).listeners()},e.prototype.removeAllListeners=function(e){if(!this.provider)return this;if(null==e){for(var t in this._runningEvents){var r=this._runningEvents[t];r.removeAllListeners(),this._checkRunningEvents(r)}return this}var n=this._getRunningEvent(e);return n.removeAllListeners(),this._checkRunningEvents(n),this},e.prototype.off=function(e,t){if(!this.provider)return this;var r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this},e.prototype.removeListener=function(e,t){return this.off(e,t)},e}();r.BaseContract=x;var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(x);r.Contract=I;var N=function(){function e(e,t,r){var n=this.constructor,i=null;"0x"!==(i="string"==typeof t?t:(0,d.isBytes)(t)?(0,d.hexlify)(t):t&&"string"==typeof t.object?t.object:"!").substring(0,2)&&(i="0x"+i),(!(0,d.isHexString)(i)||i.length%2)&&y.throwArgumentError("invalid bytecode","bytecode",t),r&&!l.Signer.isSigner(r)&&y.throwArgumentError("invalid signer","signer",r),(0,p.defineReadOnly)(this,"bytecode",i),(0,p.defineReadOnly)(this,"interface",(0,p.getStatic)(n,"getInterface")(e)),(0,p.defineReadOnly)(this,"signer",r||null)}return e.prototype.getDeployTransaction=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1])for(var n in r=(0,p.shallowCopy)(e.pop()))if(!v[n])throw new Error("unknown transaction override "+n);if(["data","from","to"].forEach((function(e){null!=r[e]&&y.throwError("cannot override "+e,g.Logger.errors.UNSUPPORTED_OPERATION,{operation:e})})),r.value){var i=h.BigNumber.from(r.value);i.isZero()||this.interface.deploy.payable||y.throwError("non-payable constructor cannot override value",g.Logger.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:r.value})}return y.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),r.data=(0,d.hexlify)((0,d.concat)([this.bytecode,this.interface.encodeDeploy(e)])),r},e.prototype.deploy=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(this,void 0,void 0,(function(){var t,r,n,i,o,s;return a(this,(function(a){switch(a.label){case 0:return t={},e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),y.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),[4,w(this.signer,e,this.interface.deploy.inputs)];case 1:return(r=a.sent()).push(t),n=this.getDeployTransaction.apply(this,r),[4,this.signer.sendTransaction(n)];case 2:return i=a.sent(),o=(0,p.getStatic)(this.constructor,"getContractAddress")(i),k(s=(0,p.getStatic)(this.constructor,"getContract")(o,this.interface,this.signer),i),(0,p.defineReadOnly)(s,"deployTransaction",i),[2,s]}}))}))},e.prototype.attach=function(e){return this.constructor.getContract(e,this.interface,this.signer)},e.prototype.connect=function(e){return new this.constructor(this.interface,this.bytecode,e)},e.fromSolidity=function(e,t){null==e&&y.throwError("missing compiler output",g.Logger.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));var r=e.abi,n=null;return e.bytecode?n=e.bytecode:e.evm&&e.evm.bytecode&&(n=e.evm.bytecode),new this(r,n,t)},e.getInterface=function(e){return I.getInterface(e)},e.getContractAddress=function(e){return(0,f.getContractAddress)(e)},e.getContract=function(e,t,r){return new I(e,t,r)},e}();r.ContractFactory=N}}},{package:"@eth-optimism/contracts>@ethersproject/contracts"}],[6810,{"./headers":6791,_process:6295,buffer:2438,"end-of-stream":2708,"fs-constants":5065,inherits:5299,"readable-stream":6809,string_decoder:6783},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r,n){(function(){var i=e("fs-constants"),o=e("end-of-stream"),a=e("inherits"),s=n.alloc,u=e("readable-stream").Readable,c=e("readable-stream").Writable,l=e("string_decoder").StringDecoder,f=e("./headers"),h=parseInt("755",8),d=parseInt("644",8),p=s(1024),m=function(){},g=function(e,t){(t&=511)&&e.push(p.slice(0,512-t))};var b=function(e){c.call(this),this.written=0,this._to=e,this._destroyed=!1};a(b,c),b.prototype._write=function(e,t,r){if(this.written+=e.length,this._to.push(e))return r();this._to._drain=r},b.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var y=function(){c.call(this),this.linkname="",this._decoder=new l("utf-8"),this._destroyed=!1};a(y,c),y.prototype._write=function(e,t,r){this.linkname+=this._decoder.write(e),r()},y.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var v=function(){c.call(this),this._destroyed=!1};a(v,c),v.prototype._write=function(e,t,r){r(new Error("No body allowed for this entry"))},v.prototype.destroy=function(){this._destroyed||(this._destroyed=!0,this.emit("close"))};var _=function(e){if(!(this instanceof _))return new _(e);u.call(this,e),this._drain=m,this._finalized=!1,this._finalizing=!1,this._destroyed=!1,this._stream=null};a(_,u),_.prototype.entry=function(e,t,a){if(this._stream)throw new Error("already piping an entry");if(!this._finalized&&!this._destroyed){"function"==typeof t&&(a=t,t=null),a||(a=m);var s=this;if(e.size&&"symlink"!==e.type||(e.size=0),e.type||(e.type=function(e){switch(e&i.S_IFMT){case i.S_IFBLK:return"block-device";case i.S_IFCHR:return"character-device";case i.S_IFDIR:return"directory";case i.S_IFIFO:return"fifo";case i.S_IFLNK:return"symlink"}return"file"}(e.mode)),e.mode||(e.mode="directory"===e.type?h:d),e.uid||(e.uid=0),e.gid||(e.gid=0),e.mtime||(e.mtime=new Date),"string"==typeof t&&(t=n.from(t)),n.isBuffer(t)){e.size=t.length,this._encode(e);var u=this.push(t);return g(s,e.size),u?r.nextTick(a):this._drain=a,new v}if("symlink"===e.type&&!e.linkname){var c=new y;return o(c,(function(t){if(t)return s.destroy(),a(t);e.linkname=c.linkname,s._encode(e),a()})),c}if(this._encode(e),"file"!==e.type&&"contiguous-file"!==e.type)return r.nextTick(a),new v;var l=new b(this);return this._stream=l,o(l,(function(t){return s._stream=null,t?(s.destroy(),a(t)):l.written!==e.size?(s.destroy(),a(new Error("size mismatch"))):(g(s,e.size),s._finalizing&&s.finalize(),void a())})),l}},_.prototype.finalize=function(){this._stream?this._finalizing=!0:this._finalized||(this._finalized=!0,this.push(p),this.push(null))},_.prototype.destroy=function(e){this._destroyed||(this._destroyed=!0,e&&this.emit("error",e),this.emit("close"),this._stream&&this._stream.destroy&&this._stream.destroy())},_.prototype._encode=function(e){if(!e.pax){var t=f.encode(e);if(t)return void this.push(t)}this._encodePax(e)},_.prototype._encodePax=function(e){var t=f.encodePax({name:e.name,linkname:e.linkname,pax:e.pax}),r={name:"PaxHeader",mode:e.mode,uid:e.uid,gid:e.gid,size:t.length,mtime:e.mtime,type:"pax-header",linkname:e.linkname&&"PaxHeader",uname:e.uname,gname:e.gname,devmajor:e.devmajor,devminor:e.devminor};this.push(f.encode(r)),this.push(t),g(this,t.length),r.size=e.size,r.type=e.type,this.push(f.encode(r))},_.prototype._read=function(e){var t=this._drain;this._drain=m,t()},t.exports=_}).call(this)}).call(this,e("_process"),e("buffer").Buffer)}}},{package:"@metamask/snap-controllers>tar-stream"}],[6812,{_process:6295,stream:2441},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("stream");function i(e,t,i){e=e||function(e){this.queue(e)},t=t||function(){this.queue(null)};var o=!1,a=!1,s=[],u=!1,c=new n;function l(){for(;s.length&&!c.paused;){var e=s.shift();if(null===e)return c.emit("end");c.emit("data",e)}}function f(){c.writable=!1,t.call(c),!c.readable&&c.autoDestroy&&c.destroy()}return c.readable=c.writable=!0,c.paused=!1,c.autoDestroy=!(i&&!1===i.autoDestroy),c.write=function(t){return e.call(this,t),!c.paused},c.queue=c.push=function(e){return u||(null===e&&(u=!0),s.push(e),l()),c},c.on("end",(function(){c.readable=!1,!c.writable&&c.autoDestroy&&r.nextTick((function(){c.destroy()}))})),c.end=function(e){if(!o)return o=!0,arguments.length&&c.write(e),f(),c},c.destroy=function(){if(!a)return a=!0,o=!0,s.length=0,c.writable=c.readable=!1,c.emit("close"),c},c.pause=function(){if(!c.paused)return c.paused=!0,c},c.resume=function(){return c.paused&&(c.paused=!1,c.emit("resume")),l(),c.paused||c.emit("drain"),c},c}t.exports=i,i.through=i}).call(this)}).call(this,e("_process"))}}},{package:"debounce-stream>through"}],[6813,{"lodash.throttle":5870},function(){with(this)return function(){"use strict";return function(e,t,r){const n=e("lodash.throttle");t.exports=function e(t){if(!(this instanceof e))return new e(t);const r=(t=t||{}).validity||30,i=new Map,o=n((()=>{i.forEach(((e,t)=>{const n=e.validity||r;(function(e){const t=(new Date).getTime()-e.getTime();return Math.floor(t/1e3)})(e.timestamp)>n&&i.delete(t)}))}),200);this.put=(e,t,r)=>{this.has(e)||i.set(e,{value:t,timestamp:new Date,validity:r}),o()},this.get=e=>{if(i.has(e))return i.get(e).value;throw new Error("key does not exist")},this.has=e=>i.has(e)}}}},{package:"3box>ipfs>libp2p>libp2p-floodsub>libp2p-pubsub>time-cache"}],[6815,{},function(){with(this)return function(){"use strict";return function(e,t,r){
/**
 * Timestamp for 64-bit time_t, nanosecond precision and strftime
 *
 * @author Yusuke Kawasaki
 * @license MIT
 * @see https://github.com/kawanet/timestamp-nano
 */
!function(){void 0!==t&&(t.exports=g);var e=86400,r=3200,n=1168776,i=100982246400,o=1e3*i,a=864e13,s=4294967296,u=1e6,c=1e9,l="000000000",f=Math.trunc||function(e){var t=e-e%1;return 0===t&&(e<0||0===e&&1/e!=1/0)?-0:t},h=g.prototype;g.fromDate=function(e){return new g(+e)},g.fromInt64BE=w(0,1,2,3,0,4),g.fromInt64LE=w(3,2,1,0,4,0),g.fromString=function(e){var t,r=new g,n=(e+="").replace(/^\s*[+\-]?\d+/,(function(e){var t=+e,n=1970+(t-1970)%400;return r.year=t-n,n})).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,(function(e,r,n){return r<0&&(n*=-1),t=6e4*(60*+r+ +n),""})).replace(/\.\d+$/,(function(e){return r.nano=+(e+l).substr(1,9),""})).split(/\D+/);n.length>1?n[1]--:n[1]=0;if(r.time=t=Date.UTC.apply(Date,n)-(t||0),isNaN(t))throw new TypeError("Invalid Date");return b(r)},g.fromTimeT=function(e){return v(e,0)},h.year=0,h.time=0,h.nano=0,h.addNano=function(e){return this.nano+=+e||0,this},h.getNano=function(){var e=b(this);return(e.time%1e3*u+ +e.nano+c)%c},h.getTimeT=function(){var t=b(this),i=Math.floor(t.time/1e3),o=t.year;o&&(i+=o*n*e/r);return i},h.getYear=function(){return this.toDate().getUTCFullYear()+this.year},h.toDate=function(){return y(b(this).time)},h.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},h.toString=function(e){var t=this,r=t.toDate(),n={H:function(){return k(r.getUTCHours())},L:function(){return S(r.getUTCMilliseconds(),3)},M:function(){return k(r.getUTCMinutes())},N:function(){return S(t.getNano(),9)},S:function(){return k(r.getUTCSeconds())},Y:function(){var e=t.getYear();return e>999999?"+"+e:e>9999?"+"+S(e,6):e>=0?S(e,4):e>=-999999?"-"+S(-e,6):e},a:function(){return p[r.getUTCDay()]},b:function(){return d[r.getUTCMonth()]},d:function(){return k(r.getUTCDate())},e:function(){return e=r.getUTCDate(),(e>9?"":" ")+(0|e);var e},m:function(){return k(r.getUTCMonth()+1)}};return function e(t){return t.replace(/%./g,(function(t){var r=t[1],i=m[r],o=n[r];return i?e(i):o?o():t}))}(e||"%Y-%m-%dT%H:%M:%S.%NZ")},h.writeInt64BE=_(0,1,2,3,0,4),h.writeInt64LE=_(3,2,1,0,4,0);var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],p=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m={"%":"%",F:"%Y-%m-%d",n:"\n",R:"%H:%M",T:"%H:%M:%S",t:"\t",X:"%T",Z:"GMT",z:"+0000"};return g;function g(e,t,r){var n=this;if(!(n instanceof g))return new g(e,t,r);n.time=+e||0,n.nano=+t||0,n.year=+r||0,b(n)}function b(e){var t,n,i=e.year,s=e.time,c=e.nano;if(c<0||u<=c){var l=Math.floor(c/u);c-=l*u,s+=l,t=1}var h=i%r;if(s<-a||a<s||h){(n=f(s/o))&&(i+=n*r,s-=n*o);var d=y(s);d.setUTCFullYear(h+d.getUTCFullYear());var p=(s=+d)+(n=f((i-=h)/r))*o;n&&-a<=p&&p<=a&&(i-=n*r,s=p),t=1}return t&&(e.year=i,e.time=s,e.nano=c),e}function y(e){var t=new Date(0);return t.setTime(e),t}function v(e,t){t|=0,e=+e||0;var n=f((t*=s)/i)+f(e/i),o=t%i+e%i,a=f(o/i);return a&&(n+=a,o-=a*i),new g(1e3*o,0,n*r)}function _(e,t,r,n,i,o){return function(e,t){var r=b(this);e||(e=new Array(8));E(e,t|=0);var n=Math.floor(r.time/1e3),u=31556952*r.year,c=f(u/s)+f(n/s),l=u%s+n%s,h=Math.floor(l/s);h&&(c+=h,l-=h*s);return a(e,t+i,c),a(e,t+o,l),e};function a(i,o,a){i[o+e]=a>>24&255,i[o+t]=a>>16&255,i[o+r]=a>>8&255,i[o+n]=255&a}}function w(e,t,r,n,i,o){return function(e,t){E(e,t|=0);var r=a(e,t+i);return v(a(e,t+o),r)};function a(i,o){return 16777216*i[o+e]+(i[o+t]<<16|i[o+r]<<8|i[o+n])}}function E(e,t){var r=e&&e.length;if(null==r)throw new TypeError("Invalid Buffer");if(r<t+8)throw new RangeError("Out of range")}function k(e){return(e>9?"":"0")+(0|e)}function S(e,t){return(l+(0|e)).substr(-t)}}()}}},{package:"3box>ipfs>ipns>timestamp-nano"}],[6819,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){for(var r=[],n=(t=t||0)||0;n<e.length;n++)r[n-t]=e[n];return r}}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>to-array"}],[6820,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){if(e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray)return new DataView(e.buffer,e.byteOffset,e.byteLength);if(e instanceof ArrayBuffer)return new DataView(e);throw new TypeError("Expected `data` to be an ArrayBuffer, Buffer, Int8Array, Uint8Array or Uint8ClampedArray")}}}},{package:"base32-encode>to-data-view"}],[6823,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.FIAT_RATES_UPDATE=r.NOTIFICATION=r.BLOCK=r.CONNECT=r.ERROR=void 0;r.ERROR="blockchain-error";r.CONNECT="blockchain-connect";r.BLOCK="blockchain-block";r.NOTIFICATION="blockchain-notification";r.FIAT_RATES_UPDATE="fiat-rates-update"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6824,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.POOL_RELAY_TYPE=r.CERTIFICATE_TYPE=r.ADDRESS_TYPE=r.NETWORK_IDS=r.PROTOCOL_MAGICS=void 0;var n=Object.freeze({mainnet:764824073,testnet:42});r.PROTOCOL_MAGICS=n;var i=Object.freeze({mainnet:1,testnet:0});r.NETWORK_IDS=i;var o=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});r.ADDRESS_TYPE=o;var a=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});r.CERTIFICATE_TYPE=a;var s=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});r.POOL_RELAY_TYPE=s}}},{package:"eth-trezor-keyring>trezor-connect"}],[6825,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.WAIT_FOR_SELECTION=r.WORD=r.PASSPHRASE_ON_DEVICE=r.PASSPHRASE=r.PIN=r.BUTTON=r.LOADING=r.USED_ELSEWHERE=r.RELEASED=r.ACQUIRED=r.RELEASE=r.ACQUIRE=r.CHANGED=r.DISCONNECT=r.CONNECT_UNACQUIRED=r.CONNECT=void 0;r.CONNECT="device-connect";r.CONNECT_UNACQUIRED="device-connect_unacquired";r.DISCONNECT="device-disconnect";r.CHANGED="device-changed";r.ACQUIRE="device-acquire";r.RELEASE="device-release";r.ACQUIRED="device-acquired";r.RELEASED="device-released";r.USED_ELSEWHERE="device-used_elsewhere";r.LOADING="device-loading";r.BUTTON="button";r.PIN="pin";r.PASSPHRASE="passphrase";r.PASSPHRASE_ON_DEVICE="passphrase_on_device";r.WORD="word";r.WAIT_FOR_SELECTION="device-wait_for_selection"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6826,{"@babel/runtime/helpers/inheritsLoose":312,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/helpers/wrapNativeSuper":333},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.LIBUSB_ERROR_MESSAGE=r.WEBUSB_ERROR_MESSAGE=r.INVALID_PIN_ERROR_MESSAGE=r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=r.TypedError=r.TrezorError=r.ERROR_CODES=void 0;var i=n(e("@babel/runtime/helpers/inheritsLoose")),o=n(e("@babel/runtime/helpers/wrapNativeSuper")),a={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};r.ERROR_CODES=a;var s=function(e){function t(t,r){var n;return(n=e.call(this,r)||this).code=t,n.message=r,n}return(0,i.default)(t,e),t}((0,o.default)(Error));r.TrezorError=s;r.TypedError=function(e,t){return new s(e,t||a[e])};r.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";r.INVALID_PIN_ERROR_MESSAGE="PIN invalid";r.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";r.LIBUSB_ERROR_MESSAGE="LIBUSB_ERROR"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6827,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CALL=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="iframe-bootstrap";r.LOADED="iframe-loaded";r.INIT="iframe-init";r.ERROR="iframe-error";r.CALL="iframe-call"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6828,{"./blockchain":6823,"./cardano":6824,"./device":6825,"./errors":6826,"./iframe":6827,"./network":6829,"./popup":6830,"./transport":6831,"./ui":6832},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CARDANO=r.UI=r.TRANSPORT=r.POPUP=r.NETWORK=r.IFRAME=r.ERRORS=r.DEVICE=r.BLOCKCHAIN=r.BLOCKCHAIN_EVENT=r.RESPONSE_EVENT=r.TRANSPORT_EVENT=r.DEVICE_EVENT=r.UI_EVENT=r.CORE_EVENT=void 0;var n=d(e("./blockchain"));r.BLOCKCHAIN=n;var i=d(e("./device"));r.DEVICE=i;var o=d(e("./errors"));r.ERRORS=o;var a=d(e("./iframe"));r.IFRAME=a;var s=d(e("./network"));r.NETWORK=s;var u=d(e("./popup"));r.POPUP=u;var c=d(e("./transport"));r.TRANSPORT=c;var l=d(e("./ui"));r.UI=l;var f=d(e("./cardano"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}r.CARDANO=f;r.CORE_EVENT="CORE_EVENT";r.UI_EVENT="UI_EVENT";r.DEVICE_EVENT="DEVICE_EVENT";r.TRANSPORT_EVENT="TRANSPORT_EVENT";r.RESPONSE_EVENT="RESPONSE_EVENT";r.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6829,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.TYPES=void 0;var n=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});r.TYPES=n}}},{package:"eth-trezor-keyring>trezor-connect"}],[6830,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CLOSE_WINDOW=r.CANCEL_POPUP_REQUEST=r.CLOSED=r.HANDSHAKE=r.EXTENSION_USB_PERMISSIONS=r.ERROR=r.INIT=r.LOADED=r.BOOTSTRAP=void 0;r.BOOTSTRAP="popup-bootstrap";r.LOADED="popup-loaded";r.INIT="popup-init";r.ERROR="popup-error";r.EXTENSION_USB_PERMISSIONS="open-usb-permissions";r.HANDSHAKE="popup-handshake";r.CLOSED="popup-closed";r.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";r.CLOSE_WINDOW="window.close"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6831,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.START_PENDING=r.DISABLE_WEBUSB=r.REQUEST=r.STREAM=r.UPDATE=r.ERROR=r.START=void 0;r.START="transport-start";r.ERROR="transport-error";r.UPDATE="transport-update";r.STREAM="transport-stream";r.REQUEST="transport-request_device";r.DISABLE_WEBUSB="transport-disable_webusb";r.START_PENDING="transport-start_pending"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6832,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.IFRAME_FAILURE=r.ADDRESS_VALIDATION=r.BUNDLE_PROGRESS=r.LOGIN_CHALLENGE_RESPONSE=r.LOGIN_CHALLENGE_REQUEST=r.CUSTOM_MESSAGE_RESPONSE=r.CUSTOM_MESSAGE_REQUEST=r.CHANGE_SETTINGS=r.RECEIVE_WORD=r.RECEIVE_FEE=r.RECEIVE_ACCOUNT=r.CHANGE_ACCOUNT=r.RECEIVE_DEVICE=r.RECEIVE_PASSPHRASE=r.RECEIVE_PIN=r.RECEIVE_CONFIRMATION=r.RECEIVE_PERMISSION=r.REQUEST_WORD=r.REQUEST_BUTTON=r.INSUFFICIENT_FUNDS=r.UPDATE_CUSTOM_FEE=r.SELECT_FEE=r.SELECT_ACCOUNT=r.SELECT_DEVICE=r.SET_OPERATION=r.LOADING=r.CONNECT=r.INVALID_PASSPHRASE_ACTION=r.INVALID_PASSPHRASE=r.REQUEST_PASSPHRASE_ON_DEVICE=r.REQUEST_PASSPHRASE=r.INVALID_PIN=r.REQUEST_PIN=r.REQUEST_CONFIRMATION=r.REQUEST_PERMISSION=r.CLOSE_UI_WINDOW=r.REQUEST_UI_WINDOW=r.DEVICE_NEEDS_BACKUP=r.FIRMWARE_PROGRESS=r.FIRMWARE_NOT_INSTALLED=r.FIRMWARE_NOT_COMPATIBLE=r.FIRMWARE_NOT_SUPPORTED=r.FIRMWARE_OUTDATED=r.FIRMWARE_OLD=r.SEEDLESS=r.INITIALIZE=r.REQUIRE_MODE=r.NOT_IN_BOOTLOADER=r.BOOTLOADER=r.TRANSPORT=void 0;r.TRANSPORT="ui-no_transport";r.BOOTLOADER="ui-device_bootloader_mode";r.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";r.REQUIRE_MODE="ui-device_require_mode";r.INITIALIZE="ui-device_not_initialized";r.SEEDLESS="ui-device_seedless";r.FIRMWARE_OLD="ui-device_firmware_old";r.FIRMWARE_OUTDATED="ui-device_firmware_outdated";r.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";r.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";r.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";r.FIRMWARE_PROGRESS="ui-firmware-progress";r.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";r.REQUEST_UI_WINDOW="ui-request_window";r.CLOSE_UI_WINDOW="ui-close_window";r.REQUEST_PERMISSION="ui-request_permission";r.REQUEST_CONFIRMATION="ui-request_confirmation";r.REQUEST_PIN="ui-request_pin";r.INVALID_PIN="ui-invalid_pin";r.REQUEST_PASSPHRASE="ui-request_passphrase";r.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";r.INVALID_PASSPHRASE="ui-invalid_passphrase";r.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";r.CONNECT="ui-connect";r.LOADING="ui-loading";r.SET_OPERATION="ui-set_operation";r.SELECT_DEVICE="ui-select_device";r.SELECT_ACCOUNT="ui-select_account";r.SELECT_FEE="ui-select_fee";r.UPDATE_CUSTOM_FEE="ui-update_custom_fee";r.INSUFFICIENT_FUNDS="ui-insufficient_funds";r.REQUEST_BUTTON="ui-button";r.REQUEST_WORD="ui-request_word";r.RECEIVE_PERMISSION="ui-receive_permission";r.RECEIVE_CONFIRMATION="ui-receive_confirmation";r.RECEIVE_PIN="ui-receive_pin";r.RECEIVE_PASSPHRASE="ui-receive_passphrase";r.RECEIVE_DEVICE="ui-receive_device";r.CHANGE_ACCOUNT="ui-change_account";r.RECEIVE_ACCOUNT="ui-receive_account";r.RECEIVE_FEE="ui-receive_fee";r.RECEIVE_WORD="ui-receive_word";r.CHANGE_SETTINGS="ui-change_settings";r.CUSTOM_MESSAGE_REQUEST="ui-custom_request";r.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";r.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";r.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";r.BUNDLE_PROGRESS="ui-bundle_progress";r.ADDRESS_VALIDATION="ui-address_validation";r.IFRAME_FAILURE="ui-iframe_failure"}}},{package:"eth-trezor-keyring>trezor-connect"}],[6833,{"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/interopRequireDefault":313},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.parse=r.corsValidator=r.getEnv=r.DEFAULT_PRIORITY=void 0;var i=n(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var a="8.2.6",s="https://connect.trezor.io/"+(a.split(".").map((function(e){return parseInt(e,10)}))[0]+"/");r.DEFAULT_PRIORITY=2;var u={configSrc:"./data/config.json",version:a,debug:!1,priority:2,trustedHost:!1,connectSrc:s,iframeSrc:s+"iframe.html",popup:!0,popupSrc:s+"popup.html",webusbSrc:s+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},c=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};r.getEnv=c;var l=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};r.corsValidator=l;r.parse=function(e){void 0===e&&(e={});var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},u);if(Object.prototype.hasOwnProperty.call(e,"debug")&&(Array.isArray(e),"boolean"==typeof e.debug?t.debug=e.debug:"string"==typeof e.debug&&(t.debug="true"===e.debug)),"string"==typeof e.connectSrc&&(t.connectSrc=e.connectSrc),"undefined"!=typeof global&&"string"==typeof global.__TREZOR_CONNECT_SRC&&(t.connectSrc=l(global.__TREZOR_CONNECT_SRC),t.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var r=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(r){var n=r.split("=")[1];t.connectSrc=l(decodeURIComponent(n)),t.debug=!0}}var a=t.connectSrc||s;return t.iframeSrc=a+"iframe.html",t.popupSrc=a+"popup.html",t.webusbSrc=a+"webusb.html","boolean"==typeof e.transportReconnect&&(t.transportReconnect=e.transportReconnect),"boolean"==typeof e.webusb&&(t.webusb=e.webusb),"boolean"==typeof e.popup&&(t.popup=e.popup),"boolean"==typeof e.lazyLoad&&(t.lazyLoad=e.lazyLoad),"boolean"==typeof e.pendingTransportEvent&&(t.pendingTransportEvent=e.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(t.origin="file://"+window.location.pathname,t.webusb=!1),"string"==typeof e.extension&&(t.extension=e.extension),"string"==typeof e.env?t.env=e.env:t.env=c(),"number"==typeof e.timestamp&&(t.timestamp=e.timestamp),"number"==typeof e.interactionTimeout&&(t.interactionTimeout=e.interactionTimeout),"object"==typeof e.manifest&&(t.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(e.manifest)),u=t}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6834,{"../../constants":6828,"../../data/ConnectSettings":6833,"../../iframe/builder":6836,"../../message":6840,"../../message/builder":6839,"../../popup/PopupManager":6842,"../../types":6849,"../../utils/debug":6865,"../../webusb/button":6867,"@babel/runtime/helpers/asyncToGenerator":303,"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/regenerator":334,events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.disableWebUSB=r.requestLogin=r.customMessage=r.getSettings=r.renderWebUSBButton=r.uiResponse=r.call=r.init=r.cancel=r.dispose=r.manifest=r.eventEmitter=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/defineProperty")),a=n(e("@babel/runtime/helpers/asyncToGenerator")),s=n(e("events")),u=n(e("../../popup/PopupManager")),c=b(e("../../iframe/builder")),l=n(e("../../webusb/button")),f=e("../../message"),h=e("../../message/builder"),d=e("../../data/ConnectSettings"),p=e("../../utils/debug"),m=e("../../constants");b(e("../../types"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var _=new s.default;r.eventEmitter=_;var w,E,k=(0,p.initLog)("[trezor-connect.js]"),S=function(){var e=new u.default(w);return e.on(m.POPUP.CLOSED,(function(e){c.postMessage({type:m.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};r.manifest=function(e){w=(0,d.parse)({manifest:e})};var R=function(){_.removeAllListeners(),c.dispose(),E&&E.close()};r.dispose=R;r.cancel=function(e){E&&E.emit(m.POPUP.CLOSED,e)};var T=function(e){if(e.origin===c.origin){var t=(0,f.parseMessage)(e.data),r=t.event,n=t.type,i=t.payload,o=t.id||0;switch(k.log("handleMessage",t),r){case m.RESPONSE_EVENT:c.messagePromises[o]?(c.messagePromises[o].resolve({id:o,success:t.success,payload:i}),delete c.messagePromises[o]):k.warn("Unknown message id "+o);break;case m.DEVICE_EVENT:case m.TRANSPORT_EVENT:case m.BLOCKCHAIN_EVENT:_.emit(r,t),_.emit(n,i);break;case m.UI_EVENT:if(n===m.IFRAME.BOOTSTRAP){c.clearTimeout();break}n===m.IFRAME.LOADED&&c.initPromise.resolve(),n===m.IFRAME.ERROR&&c.initPromise.reject(i.error),_.emit(r,t),_.emit(n,i);break;default:k.log("Undefined message",r,e)}}},A=function(){var e=(0,a.default)(i.default.mark((function e(t){return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!c.instance){e.next=3;break}throw m.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(w||(w=(0,d.parse)(t)),w.manifest){e.next=6;break}throw m.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!w.lazyLoad){e.next=9;break}return w.lazyLoad=!1,e.abrupt("return");case 9:return E||(E=S()),k.enabled=!!w.debug,window.addEventListener("message",T),window.addEventListener("unload",R),e.next=15,c.init(w);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.init=A;var C=function(){var e=(0,a.default)(i.default.mark((function e(t){var r;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.instance||c.timeout){e.next=15;break}if((w=(0,d.parse)(w)).manifest){e.next=4;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 4:return E||(E=S()),E.request(!0),e.prev=6,e.next=9,A(w);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),E&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?E.postMessage((0,h.UiMessage)(m.UI.IFRAME_FAILURE)):E.close()),e.abrupt("return",(0,f.errorMessage)(e.t0));case 15:if(!c.timeout){e.next=17;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!c.error){e.next=19;break}return e.abrupt("return",(0,f.errorMessage)(c.error));case 19:return w.popup&&E&&E.request(),e.prev=20,e.next=23,c.postMessage({type:m.IFRAME.CALL,payload:t});case 23:if(!(r=e.sent)){e.next=27;break}return!r.success&&"Device_CallInProgress"!==r.payload.code&&E&&E.unlock(),e.abrupt("return",r);case 27:return E&&E.unlock(),e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),k.error("__call error",e.t1),E&&E.close(),e.abrupt("return",(0,f.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();r.call=C;var O=function(e){c.postMessage({event:m.UI_EVENT,type:m.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};r.uiResponse=function(e){var t=e.type,r=e.payload;c.postMessage({event:m.UI_EVENT,type:t,payload:r})};r.renderWebUSBButton=function(e){(0,l.default)(e,w.webusbSrc,c.origin)};r.getSettings=function(){return c.instance?C({method:"getSettings"}):Promise.resolve((0,f.errorMessage)(m.ERRORS.TypedError("Init_NotInitialized")))};var P=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,f.errorMessage)(m.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return r=t.callback,n=function(){var e=(0,a.default)(i.default.mark((function e(t){var n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,r(n.payload);case 4:o=e.sent,O(o||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=7,C(v(v({method:"customMessage"},t),{},{callback:null}));case 7:return o=e.sent,window.removeEventListener("message",n),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.customMessage=P;var x=function(){var e=(0,a.default)(i.default.mark((function e(t){var r,n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return r=t.callback,n=function(){var e=(0,a.default)(i.default.mark((function e(t){var n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.data)||n.type!==m.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,r();case 5:o=e.sent,c.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),c.postMessage({event:m.UI_EVENT,type:m.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",n,!1),e.next=6,C(v(v({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return o=e.sent,window.removeEventListener("message",n),e.abrupt("return",o);case 9:return e.abrupt("return",C(v({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();r.requestLogin=x;r.disableWebUSB=function(){c.postMessage({event:m.UI_EVENT,type:m.TRANSPORT.DISABLE_WEBUSB})}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6835,{"@babel/runtime/helpers/asyncToGenerator":303,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/regenerator":334,"cross-fetch":2558},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.getOrigin=r.httpRequest=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("cross-fetch")),s=function(){var e=(0,o.default)(i.default.mark((function e(t,r){var n,o;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r="text"),e.next=3,(0,a.default)(t,{credentials:"same-origin"});case 3:if(!(n=e.sent).ok){e.next=13;break}if("json"!==r){e.next=10;break}return e.next=8,n.text();case 8:return o=e.sent,e.abrupt("return",JSON.parse(o));case 10:if("binary"!==r){e.next=12;break}return e.abrupt("return",n.arrayBuffer());case 12:return e.abrupt("return",n.text());case 13:throw new Error("httpRequest error: "+t+" "+n.statusText);case 14:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();r.httpRequest=s;r.getOrigin=function(e){if(0===e.indexOf("file://"))return"file://";var t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6836,{"../constants":6828,"../env/browser/networkUtils":6835,"../utils/deferred":6866,"./inline-styles":6837,"@babel/runtime/helpers/asyncToGenerator":303,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/regenerator":334},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.clearTimeout=r.dispose=r.postMessage=r.init=r.messagePromises=r.error=r.timeout=r.initPromise=r.origin=r.instance=void 0;var i,o,a=n(e("@babel/runtime/regenerator")),s=n(e("@babel/runtime/helpers/asyncToGenerator")),u=e("../utils/deferred"),c=e("../constants"),l=e("../env/browser/networkUtils"),f=n(e("./inline-styles"));r.instance=i,r.origin=o;var h=(0,u.create)();r.initPromise=h;var d,p=0;r.timeout=p,r.error=d;var m=0,g={};r.messagePromises=g;var b=function(){var e=(0,s.default)(a.default.mark((function e(t){var n,s,f,d,m;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.initPromise=h=(0,u.create)(),(n=document.getElementById("trezorconnect"))?r.instance=i=n:(r.instance=i=document.createElement("iframe"),i.frameBorder="0",i.width="0px",i.height="0px",i.style.position="absolute",i.style.display="none",i.style.border="0px",i.style.width="0px",i.style.height="0px",i.id="trezorconnect"),"web"===t.env?(f=t.manifest?JSON.stringify(t.manifest):"undefined",d="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(f))),s=t.iframeSrc+"?"+d):s=t.iframeSrc,i.setAttribute("src",s),t.webusb&&i.setAttribute("allow","usb"),r.origin=o=(0,l.getOrigin)(i.src),r.timeout=p=window.setTimeout((function(){h.reject(c.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),m=function(){if(i){try{var e=i.contentWindow.location.origin;if(!e||"null"===e)return void v()}catch(e){}var r;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),r=chrome.runtime.id),i.contentWindow.postMessage({type:c.IFRAME.INIT,payload:{settings:t,extension:r}},o),i.onload=undefined}else h.reject(c.ERRORS.TypedError("Init_IframeBlocked"))},i.attachEvent?i.attachEvent("onload",m):i.onload=m,document.body&&(document.body.appendChild(i),y()),e.prev=11,e.next=14,h.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),i&&(i.parentNode&&i.parentNode.removeChild(i),r.instance=i=null),e.t0;case 20:return e.prev=20,window.clearTimeout(p),r.timeout=p=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();r.init=b;var y=function(){if(!i)throw c.ERRORS.TypedError("Init_IframeBlocked");var e=i.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],r=document.createElement("style");r.setAttribute("type","text/css"),r.setAttribute("id","TrezorConnectStylesheet"),r.styleSheet?(r.styleSheet.cssText=f.default,t.appendChild(r)):(r.appendChild(document.createTextNode(f.default)),t.append(r))},v=function(){window.clearTimeout(p),r.error=d=c.ERRORS.TypedError("Init_IframeBlocked"),_(),h.reject(d)};r.postMessage=function(e,t){if(void 0===t&&(t=!0),!i)throw c.ERRORS.TypedError("Init_IframeBlocked");if(t){m++,e.id=m,g[m]=(0,u.create)();var r=g[m].promise;return i.contentWindow.postMessage(e,o),r}return i.contentWindow.postMessage(e,o),null};var _=function(){if(i&&i.parentNode)try{i.parentNode.removeChild(i)}catch(e){}r.instance=i=null,r.timeout=p=0};r.dispose=_;r.clearTimeout=function(){window.clearTimeout(p)}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6837,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.default=void 0;r.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}}},{package:"eth-trezor-keyring>trezor-connect"}],[6838,{"./constants":6828,"./env/node":6834,"./types":6849,"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/interopRequireDefault":313},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0;var i={};r.default=void 0;var o=n(e("@babel/runtime/helpers/defineProperty")),a=e("./constants");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===a[e]||(r[e]=a[e]))}));var s=e("./env/node"),u=e("./types");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(i,e)||e in r&&r[e]===u[e]||(r[e]=u[e]))}));var f={manifest:s.manifest,init:s.init,getSettings:s.getSettings,on:function(e,t){s.eventEmitter.on(e,t)},off:function(e,t){s.eventEmitter.removeListener(e,t)},removeAllListeners:function(){s.eventEmitter.removeAllListeners()},uiResponse:s.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,s.call)(l({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,s.call)(l({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,s.call)(l({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,s.call)(l({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,s.call)(l({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,s.call)(l({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,s.call)(l({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,s.call)(l({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,s.call)(l({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,s.call)(l({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,s.call)(l({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,s.customMessage)(e)},requestLogin:function(e){return(0,s.requestLogin)(e)},cardanoGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetNativeScriptHash:function(e){return(0,s.call)(l({method:"cardanoGetNativeScriptHash"},e))},cardanoGetPublicKey:function(e){return(0,s.call)(l({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,s.call)(l({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,s.call)(l({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,s.call)(l({method:"composeTransaction"},e))},ethereumGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,s.call)(l({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,s.call)(l({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,s.call)(l({method:"ethereumSignTransaction"},e))},ethereumSignTypedData:function(e){return(0,s.call)(l({method:"ethereumSignTypedData"},e))},ethereumVerifyMessage:function(e){return(0,s.call)(l({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,s.call)(l({method:"getAccountInfo"},e))},getAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,s.call)(l({method:"getDeviceState"},e))},getFeatures:function(e){return(0,s.call)(l({method:"getFeatures"},e))},getPublicKey:function(e){return(0,s.call)(l({method:"getPublicKey"},e))},liskGetAddress:function(){return(0,s.call)({method:"liskDeprecated"})},liskGetPublicKey:function(){return(0,s.call)({method:"liskDeprecated"})},liskSignMessage:function(){return(0,s.call)({method:"liskDeprecated"})},liskSignTransaction:function(){return(0,s.call)({method:"liskDeprecated"})},liskVerifyMessage:function(){return(0,s.call)({method:"liskDeprecated"})},nemGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,s.call)(l({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,s.call)(l({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,s.call)(l({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,s.call)(l({method:"signMessage"},e))},signTransaction:function(e){return(0,s.call)(l({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,s.call)(l({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,s.call)(l({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,s.call)(l({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,s.call)(l({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,s.call)(l({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=s.eventEmitter.listenerCount(a.UI.ADDRESS_VALIDATION)>0;return(0,s.call)(l(l({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,s.call)(l({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,s.call)(l({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,s.call)(l({method:"verifyMessage"},e))},resetDevice:function(e){return(0,s.call)(l({method:"resetDevice"},e))},wipeDevice:function(e){return(0,s.call)(l({method:"wipeDevice"},e))},applyFlags:function(e){return(0,s.call)(l({method:"applyFlags"},e))},applySettings:function(e){return(0,s.call)(l({method:"applySettings"},e))},backupDevice:function(e){return(0,s.call)(l({method:"backupDevice"},e))},changePin:function(e){return(0,s.call)(l({method:"changePin"},e))},firmwareUpdate:function(e){return(0,s.call)(l({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,s.call)(l({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,s.call)(l({method:"getCoinInfo"},e))},rebootToBootloader:function(e){return(0,s.call)(l({method:"rebootToBootloader"},e))},dispose:s.dispose,cancel:s.cancel,renderWebUSBButton:s.renderWebUSBButton,disableWebUSB:s.disableWebUSB};r.default=f}}},{package:"eth-trezor-keyring>trezor-connect"}],[6839,{"../constants":6828,"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/interopRequireDefault":313},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.BlockchainMessage=r.ResponseMessage=r.TransportMessage=r.DeviceMessage=r.UiMessage=void 0;var i=n(e("@babel/runtime/helpers/defineProperty")),o=e("../constants");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r.UiMessage=function(e,t){return{event:o.UI_EVENT,type:e,payload:t}};r.DeviceMessage=function(e,t){return{event:o.DEVICE_EVENT,type:e,payload:t}};r.TransportMessage=function(e,t){return{event:o.TRANSPORT_EVENT,type:e,payload:t.error?s(s({},t),{},{error:t.error.message,code:t.error.code}):t}};r.ResponseMessage=function(e,t,r){return void 0===r&&(r=null),{event:o.RESPONSE_EVENT,type:o.RESPONSE_EVENT,id:e,success:t,payload:t?r:{error:r.error.message,code:r.error.code}}};r.BlockchainMessage=function(e,t){return{event:o.BLOCKCHAIN_EVENT,type:e,payload:t}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6840,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.errorMessage=r.parseMessage=void 0;r.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};r.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6841,{"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/interopRequireDefault":313,"@metamask/eth-sig-util":1396},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var o=e("@metamask/eth-sig-util");function a(e){switch(Object.prototype.toString.call(e)){case"[object Object]":var t=Object.keys(e).map((function(t){return[t,a(e[t])]}));return Object.fromEntries(t);case"[object Array]":return e.map((function(e){return a(e)}));case"[object BigInt]":return e.toString();default:return e}}t.exports=function(e,t){if(!t)throw new Error("Trezor: Only version 4 of typed data signing is supported");var r=o.SignTypedDataVersion.V4,s=o.TypedDataUtils.sanitizeData(e),u=s.types,c=s.primaryType,l=s.domain,f=s.message;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({domain_separator_hash:o.TypedDataUtils.hashStruct("EIP712Domain",a(l),u,r).toString("hex"),message_hash:o.TypedDataUtils.hashStruct(c,a(f),u,r).toString("hex")},e)}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6842,{"../constants/iframe":6827,"../constants/popup":6830,"../constants/ui":6832,"../env/browser/networkUtils":6835,"../utils/deferred":6866,"./showPopupRequest":6843,"@babel/runtime/helpers/assertThisInitialized":302,"@babel/runtime/helpers/asyncToGenerator":303,"@babel/runtime/helpers/defineProperty":307,"@babel/runtime/helpers/inheritsLoose":312,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/regenerator":334,events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.default=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator")),a=n(e("@babel/runtime/helpers/assertThisInitialized")),s=n(e("@babel/runtime/helpers/inheritsLoose")),u=n(e("@babel/runtime/helpers/defineProperty")),c=n(e("events")),l=b(e("../constants/popup")),f=b(e("../constants/iframe")),h=b(e("../constants/ui")),d=e("./showPopupRequest"),p=e("../env/browser/networkUtils"),m=e("../utils/deferred");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var y=function(e){function t(t){var r;return r=e.call(this)||this,(0,u.default)((0,a.default)(r),"requestTimeout",0),(0,u.default)((0,a.default)(r),"closeInterval",0),(0,u.default)((0,a.default)(r),"extensionTabId",0),r.settings=t,r.origin=(0,p.getOrigin)(t.popupSrc),r.handleMessage=r.handleMessage.bind((0,a.default)(r)),r.iframeHandshake=(0,m.create)(f.LOADED),"webextension"===r.settings.env&&(r.handleExtensionConnect=r.handleExtensionConnect.bind((0,a.default)(r)),r.handleExtensionMessage=r.handleExtensionMessage.bind((0,a.default)(r)),chrome.runtime.onConnect.addListener(r.handleExtensionConnect)),window.addEventListener("message",r.handleMessage,!1),r}(0,s.default)(t,e);var r=t.prototype;return r.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var r=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var n=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,r(e)}),n)}else r()}},r.cancel=function(){this.close()},r.unlock=function(){this.locked=!1},r.open=function(e){var t=this,r=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,m.create)(l.LOADED),this.openWrapper(e?r+"#loading":r),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(l.CLOSED))})):t._window.closed&&(t.close(),t.emit(l.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,d.showPopupRequest)(t.open.bind(t),(function(){t.emit(l.CLOSED)}))}),3e3)):this.openWrapper(r+"#unsupported")},r.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(r){"normal"!==r.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(r){t.extensionTabId=r[0].id,chrome.tabs.create({url:e,index:r[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},r.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},r.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var r=this.extensionPort,n=e.data;if(n&&"object"==typeof n)if(n.type===l.ERROR){var i=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else n.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){r.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):n.type===l.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):n.type===l.CLOSE_WINDOW&&(this.emit(l.CLOSED),this.close())}},r.handleMessage=function(e){var t=this,r=e.data;if((0,p.getOrigin)(e.origin)===this.origin&&r&&"object"==typeof r)if(r.type===f.LOADED){var n=!(!r.payload||"boolean"!=typeof r.payload.useBroadcastChannel)&&r.payload.useBroadcastChannel;this.iframeHandshake.resolve(n)}else if(r.type===l.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(r.type===l.ERROR&&this._window){var i=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(l.CLOSED,i?"Popup error: "+i:null),this.close()}else r.type===l.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:l.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):r.type!==l.CANCEL_POPUP_REQUEST&&r.type!==h.CLOSE_UI_WINDOW||this.close()},r.close=function(){if(this.locked=!1,this.popupPromise=undefined,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window){if("webextension"===this.settings.env){chrome.runtime.lastError;chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))}else this._window.close();this._window=null}},r.postMessage=function(){var e=(0,o.default)(i.default.mark((function e(t){var r=this;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===h.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,d.showPopupRequest)(this.open.bind(this),(function(){r.emit(l.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t}(c.default);r.default=y}}},{package:"eth-trezor-keyring>trezor-connect"}],[6843,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.showPopupRequest=void 0;var n="TrezorConnectInteractionLayer",i='\n    <div class="trezorconnect-container" id="'+n+'">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to Continue to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n';r.showPopupRequest=function(e,t){if(!document.getElementById(n)){var r=document.createElement("div");r.id=n,r.className="trezorconnect-container",r.innerHTML=i,document.body&&document.body.appendChild(r),r.getElementsByClassName("trezorconnect-open")[0].onclick=function(){e(),document.body&&document.body.removeChild(r)},r.getElementsByClassName("trezorconnect-close")[0].onclick=function(){t(),document.body&&document.body.removeChild(r)}}}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6844,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6845,{"../constants":6828,"./account":6844,"./backend/blockchain":6846,"./events":6848,"./misc":6850,"./networks/binance":6851,"./networks/bitcoin":6852,"./networks/cardano":6853,"./networks/coinInfo":6854,"./networks/eos":6855,"./networks/ethereum":6856,"./networks/nem":6857,"./networks/ripple":6858,"./networks/stellar":6859,"./networks/tezos":6860,"./params":6861,"./trezor/device":6862,"./trezor/management":6863,"./trezor/protobuf":6864},function(){with(this)return function(){"use strict";return function(e,t,r){i(e("../constants")),i(e("./params")),i(e("./trezor/device")),i(e("./trezor/management")),i(e("./trezor/protobuf")),i(e("./account")),i(e("./networks/bitcoin")),i(e("./networks/binance")),i(e("./networks/cardano")),i(e("./networks/coinInfo")),i(e("./networks/eos")),i(e("./networks/ethereum")),i(e("./networks/nem")),i(e("./networks/ripple")),i(e("./networks/stellar")),i(e("./networks/tezos")),i(e("./misc")),i(e("./events")),i(e("./backend/blockchain"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function i(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6846,{"../../constants":6828},function(){with(this)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6847,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6848,{"../constants":6828},function(){with(this)return function(){"use strict";return function(e,t,r){e("../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6849,{"./account":6844,"./api":6845,"./backend/blockchain":6846,"./backend/transactions":6847,"./events":6848,"./misc":6850,"./networks/binance":6851,"./networks/bitcoin":6852,"./networks/cardano":6853,"./networks/coinInfo":6854,"./networks/eos":6855,"./networks/ethereum":6856,"./networks/nem":6857,"./networks/ripple":6858,"./networks/stellar":6859,"./networks/tezos":6860,"./params":6861,"./trezor/device":6862,"./trezor/management":6863},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0;var n=e("./api");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===n[e]||(r[e]=n[e]))}));var i=e("./events");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===i[e]||(r[e]=i[e]))}));var o=e("./misc");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===o[e]||(r[e]=o[e]))}));var a=e("./params");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===a[e]||(r[e]=a[e]))}));var s=e("./account");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===s[e]||(r[e]=s[e]))}));var u=e("./trezor/device");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===u[e]||(r[e]=u[e]))}));var c=e("./trezor/management");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===c[e]||(r[e]=c[e]))}));var l=e("./networks/bitcoin");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===l[e]||(r[e]=l[e]))}));var f=e("./networks/binance");Object.keys(f).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===f[e]||(r[e]=f[e]))}));var h=e("./networks/cardano");Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===h[e]||(r[e]=h[e]))}));var d=e("./networks/coinInfo");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===d[e]||(r[e]=d[e]))}));var p=e("./networks/eos");Object.keys(p).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===p[e]||(r[e]=p[e]))}));var m=e("./networks/ethereum");Object.keys(m).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===m[e]||(r[e]=m[e]))}));var g=e("./networks/nem");Object.keys(g).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===g[e]||(r[e]=g[e]))}));var b=e("./networks/ripple");Object.keys(b).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===b[e]||(r[e]=b[e]))}));var y=e("./networks/stellar");Object.keys(y).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===y[e]||(r[e]=y[e]))}));var v=e("./networks/tezos");Object.keys(v).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===v[e]||(r[e]=v[e]))}));var _=e("./backend/blockchain");Object.keys(_).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===_[e]||(r[e]=_[e]))}));var w=e("./backend/transactions");Object.keys(w).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in r&&r[e]===w[e]||(r[e]=w[e]))}))}}},{package:"eth-trezor-keyring>trezor-connect"}],[6850,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6851,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6852,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6853,{"../trezor/protobuf":6864},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.CardanoTxWitnessType=r.CardanoTxSigningMode=r.CardanoPoolRelayType=r.CardanoNativeScriptHashDisplayFormat=r.CardanoNativeScriptType=r.CardanoCertificateType=r.CardanoAddressType=void 0;var n=e("../trezor/protobuf");r.CardanoAddressType=n.Enum_CardanoAddressType,r.CardanoCertificateType=n.Enum_CardanoCertificateType,r.CardanoNativeScriptType=n.Enum_CardanoNativeScriptType,r.CardanoNativeScriptHashDisplayFormat=n.Enum_CardanoNativeScriptHashDisplayFormat,r.CardanoPoolRelayType=n.Enum_CardanoPoolRelayType,r.CardanoTxSigningMode=n.Enum_CardanoTxSigningMode,r.CardanoTxWitnessType=n.Enum_CardanoTxWitnessType}}},{package:"eth-trezor-keyring>trezor-connect"}],[6854,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6855,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6856,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6857,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6858,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6859,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6860,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6861,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6862,{"../../constants":6828},function(){with(this)return function(){"use strict";return function(e,t,r){e("../../constants")}}},{package:"eth-trezor-keyring>trezor-connect"}],[6863,{},function(){with(this)return function(){"use strict";return function(e,t,r){}}},{package:"eth-trezor-keyring>trezor-connect"}],[6864,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.Enum_TezosBallotType=r.Enum_TezosContractType=r.Enum_StellarSignerType=r.Enum_StellarMemoType=r.Enum_StellarAssetType=r.Enum_NEMImportanceTransferMode=r.Enum_NEMModificationType=r.Enum_NEMSupplyChangeType=r.Enum_NEMMosaicLevy=r.Enum_WordRequestType=r.Enum_RecoveryDeviceType=r.Enum_SdProtectOperationType=r.Enum_Capability=r.Enum_SafetyCheckLevel=r.Enum_BackupType=r.Enum_EthereumDataType=r.Enum_PinMatrixRequestType=r.Enum_ButtonRequestType=r.Enum_FailureType=r.Enum_CardanoTxWitnessType=r.Enum_CardanoTxSigningMode=r.Enum_CardanoTxAuxiliaryDataSupplementType=r.Enum_CardanoPoolRelayType=r.Enum_CardanoCertificateType=r.Enum_CardanoNativeScriptHashDisplayFormat=r.Enum_CardanoNativeScriptType=r.Enum_CardanoAddressType=r.Enum_CardanoDerivationType=r.Enum_RequestType=r.Enum_AmountUnit=r.Enum_DecredStakingSpendType=r.Enum_OutputScriptType=r.Enum_InputScriptType=r.Enum_BinanceTimeInForce=r.Enum_BinanceOrderSide=r.Enum_BinanceOrderType=void 0;var n=Object.freeze({OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3});r.Enum_BinanceOrderType=n;var i=Object.freeze({SIDE_UNKNOWN:0,BUY:1,SELL:2});r.Enum_BinanceOrderSide=i;var o=Object.freeze({TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3});r.Enum_BinanceTimeInForce=o;var a=Object.freeze({SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4,SPENDTAPROOT:5});r.Enum_InputScriptType=a;var s=Object.freeze({PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5,PAYTOTAPROOT:6});r.Enum_OutputScriptType=s;var u=Object.freeze({SSGen:0,SSRTX:1});r.Enum_DecredStakingSpendType=u;var c=Object.freeze({BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3});r.Enum_AmountUnit=c;var l=Object.freeze({TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6});r.Enum_RequestType=l;var f=Object.freeze({LEDGER:0,ICARUS:1,ICARUS_TREZOR:2});r.Enum_CardanoDerivationType=f;var h=Object.freeze({BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15});r.Enum_CardanoAddressType=h;var d=Object.freeze({PUB_KEY:0,ALL:1,ANY:2,N_OF_K:3,INVALID_BEFORE:4,INVALID_HEREAFTER:5});r.Enum_CardanoNativeScriptType=d;var p=Object.freeze({HIDE:0,BECH32:1,POLICY_ID:2});r.Enum_CardanoNativeScriptHashDisplayFormat=p;var m=Object.freeze({STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3});r.Enum_CardanoCertificateType=m;var g=Object.freeze({SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2});r.Enum_CardanoPoolRelayType=g;var b=Object.freeze({NONE:0,CATALYST_REGISTRATION_SIGNATURE:1});r.Enum_CardanoTxAuxiliaryDataSupplementType=b;var y=Object.freeze({ORDINARY_TRANSACTION:0,POOL_REGISTRATION_AS_OWNER:1,MULTISIG_TRANSACTION:2});r.Enum_CardanoTxSigningMode=y;var v=Object.freeze({BYRON_WITNESS:0,SHELLEY_WITNESS:1});r.Enum_CardanoTxWitnessType=v;var _=Object.freeze({Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99});r.Enum_FailureType=_;var w=Object.freeze({ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20});r.Enum_ButtonRequestType=w;var E=Object.freeze({PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5});r.Enum_PinMatrixRequestType=E;var k=Object.freeze({UINT:1,INT:2,BYTES:3,STRING:4,BOOL:5,ADDRESS:6,ARRAY:7,STRUCT:8});r.Enum_EthereumDataType=k;var S=Object.freeze({Bip39:0,Slip39_Basic:1,Slip39_Advanced:2});r.Enum_BackupType=S;var R=Object.freeze({Strict:0,PromptAlways:1,PromptTemporarily:2});r.Enum_SafetyCheckLevel=R;var T=Object.freeze({Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17});r.Enum_Capability=T;var A=Object.freeze({DISABLE:0,ENABLE:1,REFRESH:2});r.Enum_SdProtectOperationType=A;var C=Object.freeze({RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1});r.Enum_RecoveryDeviceType=C;var O=Object.freeze({WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2});r.Enum_WordRequestType=O;var P=Object.freeze({MosaicLevy_Absolute:1,MosaicLevy_Percentile:2});r.Enum_NEMMosaicLevy=P;var x=Object.freeze({SupplyChange_Increase:1,SupplyChange_Decrease:2});r.Enum_NEMSupplyChangeType=x;var I=Object.freeze({CosignatoryModification_Add:1,CosignatoryModification_Delete:2});r.Enum_NEMModificationType=I;var N=Object.freeze({ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2});r.Enum_NEMImportanceTransferMode=N;var M=Object.freeze({NATIVE:0,ALPHANUM4:1,ALPHANUM12:2});r.Enum_StellarAssetType=M;var L=Object.freeze({NONE:0,TEXT:1,ID:2,HASH:3,RETURN:4});r.Enum_StellarMemoType=L;var j=Object.freeze({ACCOUNT:0,PRE_AUTH:1,HASH:2});r.Enum_StellarSignerType=j;var F=Object.freeze({Implicit:0,Originated:1});r.Enum_TezosContractType=F;var B=Object.freeze({Yay:0,Nay:1,Pass:2});r.Enum_TezosBallotType=B}}},{package:"eth-trezor-keyring>trezor-connect"}],[6865,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.getLog=r.enableLogByPrefix=r.enableLog=r.initLog=void 0;var n={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},i=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=n[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this.messages.push({level:e,prefix:t,message:n,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(n=console).error.apply(n,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(n=console).warn.apply(n,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(n=console).log.apply(n,["%c"+this.prefix,this.css].concat(t))},e}(),o={};r.initLog=function(e,t){var r=new i(e,!!t);return o[e]=r,r};r.enableLog=function(e){Object.keys(o).forEach((function(t){o[t].enabled=e}))};r.enableLogByPrefix=function(e,t){o[e]&&(o[e].enabled=t)};r.getLog=function(){var e=[];return Object.keys(o).forEach((function(t){e=e.concat(o[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6866,{"@babel/runtime/helpers/asyncToGenerator":303,"@babel/runtime/helpers/interopRequireDefault":313,"@babel/runtime/regenerator":334},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("@babel/runtime/helpers/interopRequireDefault");r.__esModule=!0,r.create=function(e,t){var r,n=function(e){},a=function(e){},s=new Promise(function(){var t=(0,o.default)(i.default.mark((function t(o,s){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o,a=s,"function"!=typeof e){t.next=11;break}return t.prev=3,t.next=6,e();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),s(t.t0);case 11:"string"==typeof e&&(r=e);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,r){return t.apply(this,arguments)}}());return{id:r,device:t,resolve:n,reject:a,promise:s}},r.createAsync=function(e){var t=function(e){},r=function(e){},n=new Promise((function(e,n){t=e,r=n})),a=function(){var t=(0,o.default)(i.default.mark((function t(){return i.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{resolve:t,reject:r,promise:n,run:function(){return a(),n}}},r.resolveTimeoutPromise=function(e,t){return new Promise((function(r){setTimeout((function(){r(t)}),e)}))},r.rejectTimeoutPromise=void 0;var i=n(e("@babel/runtime/regenerator")),o=n(e("@babel/runtime/helpers/asyncToGenerator"));r.rejectTimeoutPromise=function(e,t){return new Promise((function(r,n){setTimeout((function(){n(t)}),e)}))}}}},{package:"eth-trezor-keyring>trezor-connect"}],[6867,{},function(){with(this)return function(){"use strict";return function(e,t,r){r.__esModule=!0,r.default=void 0;var n=function(e,t,r){var n=e||".trezor-webusb-button",i=document.querySelectorAll(n),o=t+"?"+Date.now();i.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),n=document.createElement("iframe");n.frameBorder="0",n.width=Math.round(t.width)+"px",n.height=Math.round(t.height)+"px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex="1",n.setAttribute("allow","usb"),n.setAttribute("scrolling","no"),n.onload=function(){n.contentWindow.postMessage({},r)},n.src=o,e.append(n)}}))};r.default=n}}},{package:"eth-trezor-keyring>trezor-connect"}],[6868,{"./lib/truncate":6869,"utf8-byte-length/browser":6885},function(){with(this)return function(){"use strict";return function(e,t,r){var n=e("./lib/truncate"),i=e("utf8-byte-length/browser");t.exports=n.bind(null,i)}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes"}],[6869,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e,t,r){if("string"!=typeof t)throw new Error("Input must be string");for(var o,a,s=t.length,u=0,c=0;c<s;c+=1){if(o=t.charCodeAt(c),a=t[c],n(o)&&i(t.charCodeAt(c+1))&&(a+=t[c+=1]),(u+=e(a))===r)return t.slice(0,c+1);if(u>r)return t.slice(0,c-a.length+1)}return t}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes"}],[6873,{buffer:2438,"is-typedarray":5604},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){var n=e("is-typedarray").strict;t.exports=function(e){if(n(e)){var t=r.from(e.buffer);return e.byteLength!==e.buffer.byteLength&&(t=t.slice(e.byteOffset,e.byteOffset+e.byteLength)),t}return r.from(e)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"stylelint>write-file-atomic>typedarray-to-buffer"}],[6874,{},function(){with(this)return function(){"use strict";return function(e,t,r){!function(e,n){"object"==typeof r&&void 0!==t?n(r):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).typical={})}(this,(function(e){function t(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return null!==e&&"object"==typeof e&&e.constructor===Object}function n(e){return i(e)&&"number"==typeof e.length}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0!==e}function a(e){return"function"==typeof e&&/^class /.test(Function.prototype.toString.call(e))}function s(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}}function u(e){if(e){const t=o(Promise)&&e instanceof Promise,r=e.then&&"function"==typeof e.then;return!(!t&&!r)}return!1}function c(e){return!(null===e||!o(e))&&("function"==typeof e[Symbol.iterator]||"function"==typeof e[Symbol.asyncIterator])}function l(e){return"string"==typeof e}function f(e){return"function"==typeof e}var h={isNumber:t,isPlainObject:r,isArrayLike:n,isObject:i,isDefined:o,isClass:a,isPrimitive:s,isPromise:u,isIterable:c,isString:l,isFunction:f};e.default=h,e.isArrayLike=n,e.isClass=a,e.isDefined=o,e.isFunction=f,e.isIterable=c,e.isNumber=t,e.isObject=i,e.isPlainObject=r,e.isPrimitive=s,e.isPromise=u,e.isString=l,Object.defineProperty(e,"__esModule",{value:!0})}))}}},{package:"3box>ipfs>ipld>typical"}],[6877,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e,t){var r=[],n={};if("function"!=typeof t){var i=t;t=function(e){return e[i]}}return e.forEach((function(e){var i=t(e);n[i]||(n[i]=!0,r.push(e))})),r}}}},{package:"3box>ipfs>peer-info>unique-by"}],[6878,{"./pad-string":6879,buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("buffer"),i=e("./pad-string");function o(e,t){return void 0===t&&(t="utf8"),n.Buffer.isBuffer(e)?s(e.toString("base64")):s(n.Buffer.from(e,t).toString("base64"))}function a(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function s(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var u=o;u.encode=o,u.decode=function(e,t){return void 0===t&&(t="utf8"),n.Buffer.from(a(e),"base64").toString(t)},u.toBase64=a,u.fromBase64=s,u.toBuffer=function(e){return n.Buffer.from(a(e),"base64")},r.default=u}}},{package:"3box>did-jwt>uport-base64url"}],[6879,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0});var n=e("buffer");r.default=function(e){var t=e.length,r=t%4;if(!r)return e;var i=t,o=4-r,a=t+o,s=n.Buffer.alloc(a);for(s.write(e);o--;)s.write("=",i++);return s.toString()}}}},{package:"3box>did-jwt>uport-base64url"}],[6880,{"./dist/base64url":6878},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=e("./dist/base64url").default,t.exports.default=t.exports}}},{package:"3box>did-jwt>uport-base64url"}],[6885,{},function(){with(this)return function(){"use strict";return function(e,t,r){function n(e){return e>=55296&&e<=56319}function i(e){return e>=56320&&e<=57343}t.exports=function(e){if("string"!=typeof e)throw new Error("Input must be string");for(var t=e.length,r=0,o=null,a=null,s=0;s<t;s++)i(o=e.charCodeAt(s))?null!=a&&n(a)?r+=1:r+=3:o<=127?r+=1:o>=128&&o<=2047?r+=2:o>=2048&&o<=65535&&(r+=3),a=o;return r}}}},{package:"3box>ipfs>libp2p-keychain>sanitize-filename>truncate-utf8-bytes>utf8-byte-length"}],[69,{events:2439},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n,i=(n=e("events"))&&n.__esModule?n:{default:n};class o extends i.default{constructor(e={}){super();const t=e.migrations||[];this.migrations=t.sort(((e,t)=>e.version-t.version));const r=this.migrations.slice(-1)[0];this.defaultVersion=e.defaultVersion||r&&r.version||0}async migrateData(e=this.generateInitialState()){const t=this.migrations.filter((function(t){return t.version>e.meta.version}));for(const r of t)try{const t=await r.migrate(e);if(!t.data)throw new Error("Migrator - migration returned empty data");if(t.version!==undefined&&t.meta.version!==r.version)throw new Error("Migrator - Migration did not update version number correctly");e=t}catch(t){const n=t.message;return t.message=`MetaMask Migration Error #${r.version}: ${n}`,this.emit("error",t),e}return e}generateInitialState(e){return{meta:{version:this.defaultVersion},data:e}}}r.default=o}}},{package:"$root$"}],[6907,{"../../is-buffer/index.js":5584,varint:6910},function(){with(this)return function(){"use strict";return function(e,t,r){(function(r){(function(){const n=e("varint");t.exports=e=>{if(!r.isBuffer(e))throw new Error("arg needs to be a buffer");let t=[];for(;e.length>0;){const r=n.decode(e);t.push(r),e=e.slice(n.decode.bytes)}return t}}).call(this)}).call(this,{isBuffer:e("../../is-buffer/index.js")})}}},{package:"3box>ipfs>ipfs-bitswap>varint-decoder"}],[6908,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r){var n,i=0,o=0,a=r=r||0,s=t.length;do{if(a>=s)throw e.bytes=0,new RangeError("Could not decode varint");n=t[a++],i+=o<28?(127&n)<<o:(127&n)*Math.pow(2,o),o+=7}while(n>=128);return e.bytes=a-r,i}}}},{package:"3box>ipfs>varint"}],[6909,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function e(t,r,i){r=r||[];var o=i=i||0;for(;t>=n;)r[i++]=255&t|128,t/=128;for(;-128&t;)r[i++]=255&t|128,t>>>=7;return r[i]=0|t,e.bytes=i-o+1,r};var n=Math.pow(2,31)}}},{package:"3box>ipfs>varint"}],[6910,{"./decode.js":6908,"./encode.js":6909,"./length.js":6911},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}}}},{package:"3box>ipfs>varint"}],[6911,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n=Math.pow(2,7),i=Math.pow(2,14),o=Math.pow(2,21),a=Math.pow(2,28),s=Math.pow(2,35),u=Math.pow(2,42),c=Math.pow(2,49),l=Math.pow(2,56),f=Math.pow(2,63);t.exports=function(e){return e<n?1:e<i?2:e<o?3:e<a?4:e<s?5:e<u?6:e<c?7:e<l?8:e<f?9:10}}}},{package:"3box>ipfs>varint"}],[6914,{util:2444},function(){with(this)return function(){"use strict";return function(e,t,r){r.TextEncoder="undefined"!=typeof TextEncoder?TextEncoder:e("util").TextEncoder,r.TextDecoder="undefined"!=typeof TextDecoder?TextDecoder:e("util").TextDecoder}}},{package:"@ensdomains/content-hash>multihashes>web-encoding"}],[70,{"../../../shared/modules/fetch-with-timeout":7079,loglevel:6059},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=i(e("loglevel"));function i(e){return e&&e.__esModule?e:{default:e}}const o=(0,i(e("../../../shared/modules/fetch-with-timeout")).default)();r.default=class{constructor(){var e,t,r;r=!0,(t="isSupported")in(e=this)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,this._initialized=!1,this._initializing=this._init(),this._state=undefined}async _init(){try{const e=await o("http://localhost:12345/state.json");e.ok&&(this._state=await e.json())}catch(e){n.default.debug(`Error loading network state: '${e.message}'`)}finally{this._initialized=!0}}async get(){return this._initialized||await this._initializing,this._state}async set(e){this._initialized||await this._initializing,this._state=e}}}}},{package:"$root$"}],[703,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="networks/5.7.0"}}},{package:"@eth-optimism/contracts>@ethersproject/abstract-provider>@ethersproject/networks"}],[7030,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i;self.mozRTCPeerConnection||navigator.mozGetUserMedia?(n="moz",i=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10)):(self.webkitRTCPeerConnection||navigator.webkitGetUserMedia)&&(n="webkit",i=navigator.userAgent.match(/Chrom(e|ium)/)&&parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10));var o=self.RTCPeerConnection||self.mozRTCPeerConnection||self.webkitRTCPeerConnection,a=self.mozRTCIceCandidate||self.RTCIceCandidate,s=self.mozRTCSessionDescription||self.RTCSessionDescription,u=self.webkitMediaStream||self.MediaStream,c="https:"===self.location.protocol&&("webkit"===n&&i>=26||"moz"===n&&i>=33),l=self.AudioContext||self.webkitAudioContext,f=self.document&&document.createElement("video"),h=f&&f.canPlayType&&"probably"===f.canPlayType('video/webm; codecs="vp8", vorbis'),d=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia;t.exports={prefix:n,browserVersion:i,support:!!o&&!!d,supportRTCPeerConnection:!!o,supportVp8:h,supportGetUserMedia:!!d,supportDataChannel:!!(o&&o.prototype&&o.prototype.createDataChannel),supportWebAudio:!(!l||!l.prototype.createMediaStreamSource),supportMediaStream:!(!u||!u.prototype.removeTrack),supportScreenSharing:!!c,AudioContext:l,PeerConnection:o,SessionDescription:s,IceCandidate:a,MediaStream:u,getUserMedia:d}}}},{package:"3box>ipfs>libp2p-webrtc-star>webrtcsupport"}],[704,{"./_version":703,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.getNetwork=void 0;var n=e("@ethersproject/logger"),i=e("./_version"),o=new n.Logger(i.version);function a(e){var t=function(t,r){null==r&&(r={});var n=[];if(t.InfuraProvider&&"-"!==r.infura)try{n.push(new t.InfuraProvider(e,r.infura))}catch(e){}if(t.EtherscanProvider&&"-"!==r.etherscan)try{n.push(new t.EtherscanProvider(e,r.etherscan))}catch(e){}if(t.AlchemyProvider&&"-"!==r.alchemy)try{n.push(new t.AlchemyProvider(e,r.alchemy))}catch(e){}if(t.PocketProvider&&"-"!==r.pocket){var i=["goerli","ropsten","rinkeby"];try{(o=new t.PocketProvider(e,r.pocket)).network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}}if(t.CloudflareProvider&&"-"!==r.cloudflare)try{n.push(new t.CloudflareProvider(e))}catch(e){}if(t.AnkrProvider&&"-"!==r.ankr)try{var o;i=["ropsten"];(o=new t.AnkrProvider(e,r.ankr)).network&&-1===i.indexOf(o.network.name)&&n.push(o)}catch(e){}if(0===n.length)return null;if(t.FallbackProvider){var a=1;return null!=r.quorum?a=r.quorum:"homestead"===e&&(a=2),new t.FallbackProvider(n,a)}return n[0]};return t.renetwork=function(e){return a(e)},t}function s(e,t){var r=function(r,n){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return s(e,t)},r}var u={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:a("homestead")},c={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:a("ropsten")},l={chainId:63,name:"classicMordor",_defaultProvider:s("https://www.ethercluster.com/mordor","classicMordor")},f={unspecified:{chainId:0,name:"unspecified"},homestead:u,mainnet:u,morden:{chainId:2,name:"morden"},ropsten:c,testnet:c,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:a("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:a("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:a("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:s("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:l,classicTestnet:l,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:s("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:a("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:a("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};r.getNetwork=function(e){if(null==e)return null;if("number"==typeof e){for(var t in f){var r=f[t];if(r.chainId===e)return{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress||null,_defaultProvider:r._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){var n=f[e];return null==n?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}var i=f[e.name];if(!i)return"number"!=typeof e.chainId&&o.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==i.chainId&&o.throwArgumentError("network chainId mismatch","network",e);var a,s=e._defaultProvider||null;return null==s&&i._defaultProvider&&(s=(a=i._defaultProvider)&&"function"==typeof a.renetwork?i._defaultProvider.renetwork(e):i._defaultProvider),{name:e.name,chainId:i.chainId,ensAddress:e.ensAddress||i.ensAddress||null,_defaultProvider:s}}}}},{package:"@eth-optimism/contracts>@ethersproject/abstract-provider>@ethersproject/networks"}],[7040,{buffer:2438},function(){with(this)return function(){"use strict";return function(e,t,r){(function(e){(function(){function r(t,r){if(t.length!==r.length)throw new Error("Inputs should have the same length");for(var n=e.allocUnsafe(t.length),i=0;i<t.length;i++)n[i]=t[i]^r[i];return n}t.exports=r,r.compare=function(e,t){if(e.length!==t.length)throw new Error("Inputs should have the same length");for(var r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0},r.gt=function(e,t){return 1===r.compare(e,t)},r.lt=function(e,t){return-1===r.compare(e,t)},r.eq=function(e,t){return 0===r.compare(e,t)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"3box>ipfs>libp2p-kad-dht>xor-distance"}],[7042,{},function(){with(this)return function(){"use strict";return function(e,t,r){t.exports=function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty}}},{package:"watchify>xtend"}],[7045,{},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},a=0,s=0;function u(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function c(){var e=u(+new Date);return e!==n?(a=0,n=e):e+"."+u(a++)}for(;s<64;s++)o[i[s]]=s;c.encode=u,c.decode=function(e){var t=0;for(s=0;s<e.length;s++)t=64*t+o[e.charAt(s)];return t},t.exports=c}}},{package:"3box>ipfs>libp2p-webrtc-star>socket.io-client>engine.io-client>yeast"}],[7053,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM=r.AUTO_LOCK_TIMEOUT_ALARM=void 0;r.AUTO_LOCK_TIMEOUT_ALARM="AUTO_LOCK_TIMEOUT_ALARM";r.METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM="METAMETRICS_FINALIZE_EVENT_FRAGMENT_ALARM"}}},{package:"$root$"}],[7062,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.PHISHING_NEW_ISSUE_URLS=void 0;r.PHISHING_NEW_ISSUE_URLS={MetaMask:"https://github.com/metamask/eth-phishing-detect/issues/new",PhishFort:"https://github.com/phishfort/phishfort-lists/issues/new"}}}},{package:"$root$"}],[7063,{"./time":7065},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=void 0;const n=10*e("./time").SECOND;r.FALLBACK_SMART_TRANSACTIONS_REFRESH_TIME=n;r.FALLBACK_SMART_TRANSACTIONS_DEADLINE=180;r.FALLBACK_SMART_TRANSACTIONS_MAX_FEE_MULTIPLIER=2}}},{package:"$root$"}],[709,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.version=void 0,r.version="providers/5.7.0"}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[71,{"../platforms/extension":167,"safe-event-emitter":6616},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=r.NOTIFICATION_MANAGER_EVENTS=void 0;var n=o(e("safe-event-emitter")),i=o(e("../platforms/extension"));function o(e){return e&&e.__esModule?e:{default:e}}const a={POPUP_CLOSED:"onPopupClosed"};r.NOTIFICATION_MANAGER_EVENTS=a;class s extends n.default{constructor(){super(),this.platform=new i.default,this.platform.addOnRemovedListener(this._onWindowClosed.bind(this))}markAsAutomaticallyClosed(){this._popupAutomaticallyClosed=!0}async showPopup(){const e=await this._getPopup();if(e)await this.platform.focusWindow(e.id);else{let e=0,t=0;try{const r=await this.platform.getLastFocusedWindow();t=r.top,e=r.left+(r.width-360)}catch(r){const{screenX:n,screenY:i,outerWidth:o}=window;t=Math.max(i,0),e=Math.max(n+(o-360),0)}const r=await this.platform.openWindow({url:"notification.html",type:"popup",width:360,height:620,left:e,top:t});r.left!==e&&"fullscreen"!==r.state&&await this.platform.updateWindowPosition(r.id,e,t),this._popupId=r.id}}_onWindowClosed(e){e===this._popupId&&(this._popupId=undefined,this.emit(a.POPUP_CLOSED,{automaticallyClosed:this._popupAutomaticallyClosed}),this._popupAutomaticallyClosed=undefined)}async _getPopup(){const e=await this.platform.getAllWindows();return this._getPopupIn(e)}_getPopupIn(e){return e?e.find((e=>e&&"popup"===e.type&&e.id===this._popupId)):null}}r.default=s}}},{package:"$root$"}],[710,{"./_version":709,"./formatter":718,"./url-json-rpc-provider":725,"./websocket-provider":727,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AlchemyProvider=r.AlchemyWebSocketProvider=void 0;var o=e("@ethersproject/properties"),a=e("./formatter"),s=e("./websocket-provider"),u=e("@ethersproject/logger"),c=e("./_version"),l=new u.Logger(c.version),f=e("./url-json-rpc-provider"),h="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",d=function(e){function t(t,r){var n,i=new p(t,r),a=i.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");return n=e.call(this,a,i.network)||this,(0,o.defineReadOnly)(n,"apiKey",i.apiKey),n}return i(t,e),t.prototype.isCommunityResource=function(){return this.apiKey===h},t}(s.WebSocketProvider);r.AlchemyWebSocketProvider=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getWebSocketProvider=function(e,t){return new d(e,t)},t.getApiKey=function(e){return null==e?h:(e&&"string"!=typeof e&&l.throwArgumentError("invalid apiKey","apiKey",e),e)},t.getUrl=function(e,t){var r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"arbitrum-goerli":r="arb-goerli.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;case"optimism-goerli":r="opt-goerli.g.alchemy.com/v2/";break;default:l.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https:/"+"/"+r+t,throttleCallback:function(e,r){return t===h&&(0,a.showThrottleMessage)(),Promise.resolve(!0)}}},t.prototype.isCommunityResource=function(){return this.apiKey===h},t}(f.UrlJsonRpcProvider);r.AlchemyProvider=p}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[711,{"./_version":709,"./formatter":718,"./url-json-rpc-provider":725,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.AnkrProvider=void 0;var o=e("./formatter"),a=e("./url-json-rpc-provider"),s=e("@ethersproject/logger"),u=e("./_version"),c=new s.Logger(u.version),l="9f7d929b018cdffb338517efa06f58359e86ff1ffd350bc889738523659e7972";function f(e){switch(e){case"homestead":return"rpc.ankr.com/eth/";case"ropsten":return"rpc.ankr.com/eth_ropsten/";case"rinkeby":return"rpc.ankr.com/eth_rinkeby/";case"goerli":return"rpc.ankr.com/eth_goerli/";case"matic":return"rpc.ankr.com/polygon/";case"arbitrum":return"rpc.ankr.com/arbitrum/"}return c.throwArgumentError("unsupported network","name",e)}var h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isCommunityResource=function(){return this.apiKey===l},t.getApiKey=function(e){return null==e?l:e},t.getUrl=function(e,t){null==t&&(t=l);var r={allowGzip:!0,url:"https://"+f(e.name)+t,throttleCallback:function(e,r){return t.apiKey===l&&(0,o.showThrottleMessage)(),Promise.resolve(!0)}};return null!=t.projectSecret&&(r.user="",r.password=t.projectSecret),r},t}(a.UrlJsonRpcProvider);r.AnkrProvider=h}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[712,{"./_version":709,"./formatter":718,"@ethersproject/abstract-provider":660,"@ethersproject/base64":666,"@ethersproject/basex":667,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/constants":678,"@ethersproject/hash":687,"@ethersproject/logger":702,"@ethersproject/networks":704,"@ethersproject/properties":708,"@ethersproject/sha2":736,"@ethersproject/strings":746,"@ethersproject/web":756,bech32:2324},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.BaseProvider=r.Resolver=r.Event=void 0;var u=e("@ethersproject/abstract-provider"),c=e("@ethersproject/base64"),l=e("@ethersproject/basex"),f=e("@ethersproject/bignumber"),h=e("@ethersproject/bytes"),d=e("@ethersproject/constants"),p=e("@ethersproject/hash"),m=e("@ethersproject/networks"),g=e("@ethersproject/properties"),b=e("@ethersproject/sha2"),y=e("@ethersproject/strings"),v=e("@ethersproject/web"),_=s(e("bech32")),w=e("@ethersproject/logger"),E=e("./_version"),k=new w.Logger(E.version),S=e("./formatter");function R(e){return null==e?"null":(32!==(0,h.hexDataLength)(e)&&k.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function T(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map((function(e){if(Array.isArray(e)){var t={};e.forEach((function(e){t[R(e)]=!0}));var r=Object.keys(t);return r.sort(),r.join("|")}return R(e)})).join("&")}function A(e){if("string"==typeof e){if(e=e.toLowerCase(),32===(0,h.hexDataLength)(e))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+T(e);if(u.ForkEvent.isForkEvent(e))throw k.warn("not implemented"),new Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+T(e.topics||[])}throw new Error("invalid event - "+e)}function C(){return(new Date).getTime()}function O(e){return new Promise((function(t){setTimeout(t,e)}))}var P=["block","network","pending","poll"],x=function(){function e(e,t,r){(0,g.defineReadOnly)(this,"tag",e),(0,g.defineReadOnly)(this,"listener",t),(0,g.defineReadOnly)(this,"once",r),this._lastBlockNumber=-2,this._inflight=!1}return Object.defineProperty(e.prototype,"event",{get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this.tag.split(":")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hash",{get:function(){var e=this.tag.split(":");return"tx"!==e[0]?null:e[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"filter",{get:function(){var e=this.tag.split(":");if("filter"!==e[0])return null;var t,r=e[1],n=""===(t=e[2])?[]:t.split(/&/g).map((function(e){if(""===e)return[];var t=e.split("|").map((function(e){return"null"===e?null:e}));return 1===t.length?t[0]:t})),i={};return n.length>0&&(i.topics=n),r&&"*"!==r&&(i.address=r),i},enumerable:!1,configurable:!0}),e.prototype.pollable=function(){return this.tag.indexOf(":")>=0||P.indexOf(this.tag)>=0},e}();r.Event=x;var I={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function N(e){return(0,h.hexZeroPad)(f.BigNumber.from(e).toHexString(),32)}function M(e){return l.Base58.encode((0,h.concat)([e,(0,h.hexDataSlice)((0,b.sha256)((0,b.sha256)(e)),0,4)]))}var L=new RegExp("^(ipfs)://(.*)$","i"),j=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),L,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function F(e,t){try{return(0,y.toUtf8String)(B(e,t))}catch(e){}return null}function B(e,t){if("0x"===e)return null;var r=f.BigNumber.from((0,h.hexDataSlice)(e,t,t+32)).toNumber(),n=f.BigNumber.from((0,h.hexDataSlice)(e,r,r+32)).toNumber();return(0,h.hexDataSlice)(e,r+32,r+32+n)}function D(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):k.throwArgumentError("unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/"+e}function U(e){var t=(0,h.arrayify)(e);if(t.length>32)throw new Error("internal; should not happen");var r=new Uint8Array(32);return r.set(t,32-t.length),r}function z(e){if(e.length%32==0)return e;var t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}function V(e){for(var t=[],r=0,n=0;n<e.length;n++)t.push(null),r+=32;for(n=0;n<e.length;n++){var i=(0,h.arrayify)(e[n]);t[n]=U(r),t.push(U(i.length)),t.push(z(i)),r+=32+32*Math.ceil(i.length/32)}return(0,h.hexConcat)(t)}var q=function(){function e(e,t,r,n){(0,g.defineReadOnly)(this,"provider",e),(0,g.defineReadOnly)(this,"name",r),(0,g.defineReadOnly)(this,"address",e.formatter.address(t)),(0,g.defineReadOnly)(this,"_resolvedAddress",n)}return e.prototype.supportsWildcard=function(){var e=this;return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then((function(e){return f.BigNumber.from(e).eq(1)})).catch((function(t){if(t.code===w.Logger.errors.CALL_EXCEPTION)return!1;throw e._supportsEip2544=null,t}))),this._supportsEip2544},e.prototype._fetch=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o;return a(this,(function(a){switch(a.label){case 0:return r={to:this.address,ccipReadEnabled:!0,data:(0,h.hexConcat)([e,(0,p.namehash)(this.name),t||"0x"])},n=!1,[4,this.supportsWildcard()];case 1:a.sent()&&(n=!0,r.data=(0,h.hexConcat)(["0x9061b923",V([(0,p.dnsEncode)(this.name),r.data])])),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.provider.call(r)];case 3:return i=a.sent(),(0,h.arrayify)(i).length%32==4&&k.throwError("resolver threw error",w.Logger.errors.CALL_EXCEPTION,{transaction:r,data:i}),n&&(i=B(i,0)),[2,i];case 4:if((o=a.sent()).code===w.Logger.errors.CALL_EXCEPTION)return[2,null];throw o;case 5:return[2]}}))}))},e.prototype._fetchBytes=function(e,t){return o(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return[4,this._fetch(e,t)];case 1:return null!=(r=n.sent())?[2,B(r,0)]:[2,null]}}))}))},e.prototype._getAddress=function(e,t){var r=I[String(e)];if(null==r&&k.throwError("unsupported coin type: "+e,w.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+e+")"}),"eth"===r.ilk)return this.provider.formatter.address(t);var n=(0,h.arrayify)(t);if(null!=r.p2pkh){var i=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){var o=parseInt(i[1],16);if(i[2].length===2*o&&o>=1&&o<=75)return M((0,h.concat)([[r.p2pkh],"0x"+i[2]]))}}if(null!=r.p2sh){var a=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(a){var s=parseInt(a[1],16);if(a[2].length===2*s&&s>=1&&s<=75)return M((0,h.concat)([[r.p2sh],"0x"+a[2]]))}}if(null!=r.prefix){var u=n[1],c=n[0];if(0===c?20!==u&&32!==u&&(c=-1):c=-1,c>=0&&n.length===2+u&&u>=1&&u<=75){var l=_.default.toWords(n.slice(2));return l.unshift(c),_.default.encode(r.prefix,l)}}return null},e.prototype.getAddress=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return a(this,(function(o){switch(o.label){case 0:if(null==e&&(e=60),60!==e)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._fetch("0x3b3b57de")];case 2:return"0x"===(t=o.sent())||t===d.HashZero?[2,null]:[2,this.provider.formatter.callAddress(t)];case 3:if((r=o.sent()).code===w.Logger.errors.CALL_EXCEPTION)return[2,null];throw r;case 4:return[4,this._fetchBytes("0xf1cb7e06",N(e))];case 5:return null==(n=o.sent())||"0x"===n?[2,null]:(null==(i=this._getAddress(e,n))&&k.throwError("invalid or unsupported coin data",w.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress("+e+")",coinType:e,data:n}),[2,i])}}))}))},e.prototype.getAvatar=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o,s,u,c,l,d,p,m,g,b,y,_,w,E,k,S,R;return a(this,(function(a){switch(a.label){case 0:e=[{type:"name",content:this.name}],a.label=1;case 1:return a.trys.push([1,19,,20]),[4,this.getText("avatar")];case 2:if(null==(t=a.sent()))return[2,null];r=0,a.label=3;case 3:if(!(r<j.length))return[3,18];if(null==(n=t.match(j[r])))return[3,17];switch(i=n[1].toLowerCase(),i){case"https":return[3,4];case"data":return[3,5];case"ipfs":return[3,6];case"erc721":case"erc1155":return[3,7]}return[3,17];case 4:return e.push({type:"url",content:t}),[2,{linkage:e,url:t}];case 5:return e.push({type:"data",content:t}),[2,{linkage:e,url:t}];case 6:return e.push({type:"ipfs",content:t}),[2,{linkage:e,url:D(t)}];case 7:return o="erc721"===i?"0xc87b56dd":"0x0e89341c",e.push({type:i,content:t}),(u=this._resolvedAddress)?[3,9]:[4,this.getAddress()];case 8:u=a.sent(),a.label=9;case 9:return s=u,2!==(c=(n[2]||"").split("/")).length?[2,null]:[4,this.provider.formatter.address(c[0])];case 10:return l=a.sent(),d=(0,h.hexZeroPad)(f.BigNumber.from(c[1]).toHexString(),32),"erc721"!==i?[3,12]:(g=(m=this.provider.formatter).callAddress,[4,this.provider.call({to:l,data:(0,h.hexConcat)(["0x6352211e",d])})]);case 11:return p=g.apply(m,[a.sent()]),s!==p?[2,null]:(e.push({type:"owner",content:p}),[3,14]);case 12:return"erc1155"!==i?[3,14]:(_=(y=f.BigNumber).from,[4,this.provider.call({to:l,data:(0,h.hexConcat)(["0x00fdd58e",(0,h.hexZeroPad)(s,32),d])})]);case 13:if((b=_.apply(y,[a.sent()])).isZero())return[2,null];e.push({type:"balance",content:b.toString()}),a.label=14;case 14:return w={to:this.provider.formatter.address(c[0]),data:(0,h.hexConcat)([o,d])},k=F,[4,this.provider.call(w)];case 15:return null==(E=k.apply(void 0,[a.sent(),0]))?[2,null]:(e.push({type:"metadata-url-base",content:E}),"erc1155"===i&&(E=E.replace("{id}",d.substring(2)),e.push({type:"metadata-url-expanded",content:E})),E.match(/^ipfs:/i)&&(E=D(E)),e.push({type:"metadata-url",content:E}),[4,(0,v.fetchJson)(E)]);case 16:if(!(S=a.sent()))return[2,null];if(e.push({type:"metadata",content:JSON.stringify(S)}),"string"!=typeof(R=S.image))return[2,null];if(R.match(/^(https:\/\/|data:)/i));else{if(null==R.match(L))return[2,null];e.push({type:"url-ipfs",content:R}),R=D(R)}return e.push({type:"url",content:R}),[2,{linkage:e,url:R}];case 17:return r++,[3,3];case 18:return[3,20];case 19:return a.sent(),[3,20];case 20:return[2,null]}}))}))},e.prototype.getContentHash=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o,s,u;return a(this,(function(a){switch(a.label){case 0:return[4,this._fetchBytes("0xbc1c58d1")];case 1:return null==(e=a.sent())||"0x"===e?[2,null]:(t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))&&(r=parseInt(t[3],16),t[4].length===2*r)?[2,"ipfs://"+l.Base58.encode("0x"+t[1])]:(n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))&&(i=parseInt(n[3],16),n[4].length===2*i)?[2,"ipns://"+l.Base58.encode("0x"+n[1])]:(o=e.match(/^0xe40101fa011b20([0-9a-f]*)$/))&&64===o[1].length?[2,"bzz://"+o[1]]:(s=e.match(/^0x90b2c605([0-9a-f]*)$/))&&68===s[1].length?(u={"=":"","+":"-","/":"_"},[2,"sia://"+(0,c.encode)("0x"+s[1]).replace(/[=+\/]/g,(function(e){return u[e]}))]):[2,k.throwError("invalid or unsupported content hash data",w.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})]}}))}))},e.prototype.getText=function(e){return o(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return t=(0,y.toUtf8Bytes)(e),(t=(0,h.concat)([N(64),N(t.length),t])).length%32!=0&&(t=(0,h.concat)([t,(0,h.hexZeroPad)("0x",32-e.length%32)])),[4,this._fetchBytes("0x59d1d43c",(0,h.hexlify)(t))];case 1:return null==(r=n.sent())||"0x"===r?[2,null]:[2,(0,y.toUtf8String)(r)]}}))}))},e}();r.Resolver=q;var G=null,W=1,K=function(e){function t(t){var r=this.constructor,n=e.call(this)||this;if(n._events=[],n._emitted={block:-2},n.disableCcipRead=!1,n.formatter=r.getFormatter(),(0,g.defineReadOnly)(n,"anyNetwork","any"===t),n.anyNetwork&&(t=n.detectNetwork()),t instanceof Promise)n._networkPromise=t,t.catch((function(e){})),n._ready().catch((function(e){}));else{var i=(0,g.getStatic)(r,"getNetwork")(t);i?((0,g.defineReadOnly)(n,"_network",i),n.emit("network",i,null)):k.throwArgumentError("invalid network","network",t)}return n._maxInternalBlockNumber=-1024,n._lastBlockNumber=-2,n._maxFilterBlockRange=10,n._pollingInterval=4e3,n._fastQueryDate=0,n}return i(t,e),t.prototype._ready=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:if(null!=this._network)return[3,7];if(e=null,!this._networkPromise)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._networkPromise];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return null!=e?[3,6]:[4,this.detectNetwork()];case 5:e=t.sent(),t.label=6;case 6:e||k.throwError("no network detected",w.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:(0,g.defineReadOnly)(this,"_network",e),this.emit("network",e,null)),t.label=7;case 7:return[2,this._network]}}))}))},Object.defineProperty(t.prototype,"ready",{get:function(){var e=this;return(0,v.poll)((function(){return e._ready().then((function(e){return e}),(function(e){if(e.code===w.Logger.errors.NETWORK_ERROR&&"noNetwork"===e.event)return undefined;throw e}))}))},enumerable:!1,configurable:!0}),t.getFormatter=function(){return null==G&&(G=new S.Formatter),G},t.getNetwork=function(e){return(0,m.getNetwork)(null==e?"homestead":e)},t.prototype.ccipReadFetch=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,s,u,c,l,f,h;return a(this,(function(a){switch(a.label){case 0:if(this.disableCcipRead||0===r.length)return[2,null];n=e.to.toLowerCase(),i=t.toLowerCase(),o=[],s=0,a.label=1;case 1:return s<r.length?(u=r[s],c=u.replace("{sender}",n).replace("{data}",i),l=u.indexOf("{data}")>=0?null:JSON.stringify({data:i,sender:n}),[4,(0,v.fetchJson)({url:c,errorPassThrough:!0},l,(function(e,t){return e.status=t.statusCode,e}))]):[3,4];case 2:if((f=a.sent()).data)return[2,f.data];if(h=f.message||"unknown error",f.status>=400&&f.status<500)return[2,k.throwError("response not found during CCIP fetch: "+h,w.Logger.errors.SERVER_ERROR,{url:u,errorMessage:h})];o.push(h),a.label=3;case 3:return s++,[3,1];case 4:return[2,k.throwError("error encountered during CCIP fetch: "+o.map((function(e){return JSON.stringify(e)})).join(", "),w.Logger.errors.SERVER_ERROR,{urls:r,errorMessages:o})]}}))}))},t.prototype._getInternalBlockNumber=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o=this;return a(this,(function(a){switch(a.label){case 0:return[4,this._ready()];case 1:if(a.sent(),!(e>0))return[3,7];a.label=2;case 2:if(!this._internalBlockNumber)return[3,7];t=this._internalBlockNumber,a.label=3;case 3:return a.trys.push([3,5,,6]),[4,t];case 4:return r=a.sent(),C()-r.respTime<=e?[2,r.blockNumber]:[3,7];case 5:return a.sent(),this._internalBlockNumber===t?[3,7]:[3,6];case 6:return[3,2];case 7:return n=C(),i=(0,g.resolveProperties)({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((function(e){return null}),(function(e){return e}))}).then((function(e){var t=e.blockNumber,r=e.networkError;if(r)throw o._internalBlockNumber===i&&(o._internalBlockNumber=null),r;var a=C();return(t=f.BigNumber.from(t).toNumber())<o._maxInternalBlockNumber&&(t=o._maxInternalBlockNumber),o._maxInternalBlockNumber=t,o._setFastBlockNumber(t),{blockNumber:t,reqTime:n,respTime:a}})),this._internalBlockNumber=i,i.catch((function(e){o._internalBlockNumber===i&&(o._internalBlockNumber=null)})),[4,i];case 8:return[2,a.sent().blockNumber]}}))}))},t.prototype.poll=function(){return o(this,void 0,void 0,(function(){var e,t,r,n,i,o=this;return a(this,(function(a){switch(a.label){case 0:e=W++,t=[],r=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._getInternalBlockNumber(100+this.pollingInterval/2)];case 2:return r=a.sent(),[3,4];case 3:return n=a.sent(),this.emit("error",n),[2];case 4:if(this._setFastBlockNumber(r),this.emit("poll",e,r),r===this._lastBlockNumber)return this.emit("didPoll",e),[2];if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)k.warn("network block skew detected; skipping block events (emitted="+this._emitted.block+" blockNumber"+r+")"),this.emit("error",k.makeError("network block skew detected",w.Logger.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(i=this._emitted.block+1;i<=r;i++)this.emit("block",i);return this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((function(e){if("block"!==e){var t=o._emitted[e];"pending"!==t&&r-t>12&&delete o._emitted[e]}}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((function(e){switch(e.type){case"tx":var n=e.hash,i=o.getTransactionReceipt(n).then((function(e){return e&&null!=e.blockNumber?(o._emitted["t:"+n]=e.blockNumber,o.emit(n,e),null):null})).catch((function(e){o.emit("error",e)}));t.push(i);break;case"filter":if(!e._inflight){e._inflight=!0,-2===e._lastBlockNumber&&(e._lastBlockNumber=r-1);var a=e.filter;a.fromBlock=e._lastBlockNumber+1,a.toBlock=r;var s=a.toBlock-o._maxFilterBlockRange;s>a.fromBlock&&(a.fromBlock=s),a.fromBlock<0&&(a.fromBlock=0);i=o.getLogs(a).then((function(t){e._inflight=!1,0!==t.length&&t.forEach((function(t){t.blockNumber>e._lastBlockNumber&&(e._lastBlockNumber=t.blockNumber),o._emitted["b:"+t.blockHash]=t.blockNumber,o._emitted["t:"+t.transactionHash]=t.blockNumber,o.emit(a,t)}))})).catch((function(t){o.emit("error",t),e._inflight=!1}));t.push(i)}}})),this._lastBlockNumber=r,Promise.all(t).then((function(){o.emit("didPoll",e)})).catch((function(e){o.emit("error",e)})),[2]}}))}))},t.prototype.resetEventsBlock=function(e){this._lastBlockNumber=e-1,this.polling&&this.poll()},Object.defineProperty(t.prototype,"network",{get:function(){return this._network},enumerable:!1,configurable:!0}),t.prototype.detectNetwork=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,k.throwError("provider does not support network detection",w.Logger.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})]}))}))},t.prototype.getNetwork=function(){return o(this,void 0,void 0,(function(){var e,t,r;return a(this,(function(n){switch(n.label){case 0:return[4,this._ready()];case 1:return e=n.sent(),[4,this.detectNetwork()];case 2:return t=n.sent(),e.chainId===t.chainId?[3,5]:this.anyNetwork?(this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),[4,O(0)]):[3,4];case 3:return n.sent(),[2,this._network];case 4:throw r=k.makeError("underlying network changed",w.Logger.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t}),this.emit("error",r),r;case 5:return[2,e]}}))}))},Object.defineProperty(t.prototype,"blockNumber",{get:function(){var e=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then((function(t){e._setFastBlockNumber(t)}),(function(e){})),null!=this._fastBlockNumber?this._fastBlockNumber:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polling",{get:function(){return null!=this._poller},set:function(e){var t=this;e&&!this._poller?(this._poller=setInterval((function(){t.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){t.poll(),t._bootstrapPoll=setTimeout((function(){t._poller||t.poll(),t._bootstrapPoll=null}),t.pollingInterval)}),0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pollingInterval",{get:function(){return this._pollingInterval},set:function(e){var t=this;if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){t.poll()}),this._pollingInterval))},enumerable:!1,configurable:!0}),t.prototype._getFastBlockNumber=function(){var e=this,t=C();return t-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=t,this._fastBlockNumberPromise=this.getBlockNumber().then((function(t){return(null==e._fastBlockNumber||t>e._fastBlockNumber)&&(e._fastBlockNumber=t),e._fastBlockNumber}))),this._fastBlockNumberPromise},t.prototype._setFastBlockNumber=function(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=C(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))},t.prototype.waitForTransaction=function(e,t,r){return o(this,void 0,void 0,(function(){return a(this,(function(n){return[2,this._waitForTransaction(e,null==t?1:t,r||0,null)]}))}))},t.prototype._waitForTransaction=function(e,t,r,n){return o(this,void 0,void 0,(function(){var i,s=this;return a(this,(function(u){switch(u.label){case 0:return[4,this.getTransactionReceipt(e)];case 1:return((i=u.sent())?i.confirmations:0)>=t?[2,i]:[2,new Promise((function(i,u){var c=[],l=!1,f=function(){return!!l||(l=!0,c.forEach((function(e){e()})),!1)},h=function(e){e.confirmations<t||f()||i(e)};if(s.on(e,h),c.push((function(){s.removeListener(e,h)})),n){var d=n.startBlock,p=null,m=function(r){return o(s,void 0,void 0,(function(){var i=this;return a(this,(function(s){switch(s.label){case 0:return l?[2]:[4,O(1e3)];case 1:return s.sent(),this.getTransactionCount(n.from).then((function(s){return o(i,void 0,void 0,(function(){var i,o,c,h,g,b;return a(this,(function(a){switch(a.label){case 0:return l?[2]:s<=n.nonce?(d=r,[3,9]):[3,1];case 1:return[4,this.getTransaction(e)];case 2:if((i=a.sent())&&null!=i.blockNumber)return[2];null==p&&(p=d-3)<n.startBlock&&(p=n.startBlock),a.label=3;case 3:return p<=r?l?[2]:[4,this.getBlockWithTransactions(p)]:[3,9];case 4:o=a.sent(),c=0,a.label=5;case 5:return c<o.transactions.length?(h=o.transactions[c]).hash===e?[2]:h.from!==n.from||h.nonce!==n.nonce?[3,7]:l?[2]:[4,this.waitForTransaction(h.hash,t)]:[3,8];case 6:return g=a.sent(),f()?[2]:(b="replaced",h.data===n.data&&h.to===n.to&&h.value.eq(n.value)?b="repriced":"0x"===h.data&&h.from===h.to&&h.value.isZero()&&(b="cancelled"),u(k.makeError("transaction was replaced",w.Logger.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===b||"cancelled"===b,reason:b,replacement:this._wrapTransaction(h),hash:e,receipt:g})),[2]);case 7:return c++,[3,5];case 8:return p++,[3,3];case 9:return l||this.once("block",m),[2]}}))}))}),(function(e){l||i.once("block",m)})),[2]}}))}))};if(l)return;s.once("block",m),c.push((function(){s.removeListener("block",m)}))}if("number"==typeof r&&r>0){var g=setTimeout((function(){f()||u(k.makeError("timeout exceeded",w.Logger.errors.TIMEOUT,{timeout:r}))}),r);g.unref&&g.unref(),c.push((function(){clearTimeout(g)}))}}))]}}))}))},t.prototype.getBlockNumber=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this._getInternalBlockNumber(0)]}))}))},t.prototype.getGasPrice=function(){return o(this,void 0,void 0,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return[4,this.getNetwork()];case 1:return t.sent(),[4,this.perform("getGasPrice",{})];case 2:e=t.sent();try{return[2,f.BigNumber.from(e)]}catch(t){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})]}return[2]}}))}))},t.prototype.getBalance=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(i){switch(i.label){case 0:return[4,this.getNetwork()];case 1:return i.sent(),[4,(0,g.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=i.sent(),[4,this.perform("getBalance",r)];case 3:n=i.sent();try{return[2,f.BigNumber.from(n)]}catch(e){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"getBalance",params:r,result:n,error:e})]}return[2]}}))}))},t.prototype.getTransactionCount=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(i){switch(i.label){case 0:return[4,this.getNetwork()];case 1:return i.sent(),[4,(0,g.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=i.sent(),[4,this.perform("getTransactionCount",r)];case 3:n=i.sent();try{return[2,f.BigNumber.from(n).toNumber()]}catch(e){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:n,error:e})]}return[2]}}))}))},t.prototype.getCode=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(i){switch(i.label){case 0:return[4,this.getNetwork()];case 1:return i.sent(),[4,(0,g.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(t)})];case 2:return r=i.sent(),[4,this.perform("getCode",r)];case 3:n=i.sent();try{return[2,(0,h.hexlify)(n)]}catch(e){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"getCode",params:r,result:n,error:e})]}return[2]}}))}))},t.prototype.getStorageAt=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i;return a(this,(function(o){switch(o.label){case 0:return[4,this.getNetwork()];case 1:return o.sent(),[4,(0,g.resolveProperties)({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then((function(e){return(0,h.hexValue)(e)}))})];case 2:return n=o.sent(),[4,this.perform("getStorageAt",n)];case 3:i=o.sent();try{return[2,(0,h.hexlify)(i)]}catch(e){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"getStorageAt",params:n,result:i,error:e})]}return[2]}}))}))},t.prototype._wrapTransaction=function(e,t,r){var n=this;if(null!=t&&32!==(0,h.hexDataLength)(t))throw new Error("invalid response - sendTransaction");var i=e;return null!=t&&e.hash!==t&&k.throwError("Transaction hash mismatch from Provider.sendTransaction.",w.Logger.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=function(t,i){return o(n,void 0,void 0,(function(){var n,o;return a(this,(function(a){switch(a.label){case 0:return null==t&&(t=1),null==i&&(i=0),n=undefined,0!==t&&null!=r&&(n={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r}),[4,this._waitForTransaction(e.hash,t,i,n)];case 1:return null==(o=a.sent())&&0===t?[2,null]:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&k.throwError("transaction failed",w.Logger.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),[2,o])}}))}))},i},t.prototype.sendTransaction=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o;return a(this,(function(a){switch(a.label){case 0:return[4,this.getNetwork()];case 1:return a.sent(),[4,Promise.resolve(e).then((function(e){return(0,h.hexlify)(e)}))];case 2:return t=a.sent(),null==(r=this.formatter.transaction(e)).confirmations&&(r.confirmations=0),[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:n=a.sent(),a.label=4;case 4:return a.trys.push([4,6,,7]),[4,this.perform("sendTransaction",{signedTransaction:t})];case 5:return i=a.sent(),[2,this._wrapTransaction(r,i,n)];case 6:throw(o=a.sent()).transaction=r,o.transactionHash=r.hash,o;case 7:return[2]}}))}))},t.prototype._getTransactionRequest=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o=this;return a(this,(function(a){switch(a.label){case 0:return[4,e];case 1:return t=a.sent(),r={},["from","to"].forEach((function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((function(e){return e?o._getAddress(e):null})))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((function(e){return e?f.BigNumber.from(e):null})))})),["type"].forEach((function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((function(e){return null!=e?e:null})))})),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach((function(e){null!=t[e]&&(r[e]=Promise.resolve(t[e]).then((function(e){return e?(0,h.hexlify)(e):null})))})),i=(n=this.formatter).transactionRequest,[4,(0,g.resolveProperties)(r)];case 2:return[2,i.apply(n,[a.sent()])]}}))}))},t.prototype._getFilter=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i=this;return a(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return e=o.sent(),t={},null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach((function(r){null!=e[r]&&(t[r]=e[r])})),["fromBlock","toBlock"].forEach((function(r){null!=e[r]&&(t[r]=i._getBlockTag(e[r]))})),n=(r=this.formatter).filter,[4,(0,g.resolveProperties)(t)];case 2:return[2,n.apply(r,[o.sent()])]}}))}))},t.prototype._call=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,s,u,c,l,d,p,m,g,b,y,v,_,E;return a(this,(function(a){switch(a.label){case 0:return r>=10&&k.throwError("CCIP read exceeded maximum redirections",w.Logger.errors.SERVER_ERROR,{redirects:r,transaction:e}),n=e.to,[4,this.perform("call",{transaction:e,blockTag:t})];case 1:if(i=a.sent(),!(r>=0&&"latest"===t&&null!=n&&"0x556f1830"===i.substring(0,10)&&(0,h.hexDataLength)(i)%32==4))return[3,5];a.label=2;case 2:for(a.trys.push([2,4,,5]),o=(0,h.hexDataSlice)(i,4),s=(0,h.hexDataSlice)(o,0,32),f.BigNumber.from(s).eq(n)||k.throwError("CCIP Read sender did not match",w.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),u=[],c=f.BigNumber.from((0,h.hexDataSlice)(o,32,64)).toNumber(),l=f.BigNumber.from((0,h.hexDataSlice)(o,c,c+32)).toNumber(),d=(0,h.hexDataSlice)(o,c+32),p=0;p<l;p++)null==(m=F(d,32*p))&&k.throwError("CCIP Read contained corrupt URL string",w.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),u.push(m);return g=B(o,64),f.BigNumber.from((0,h.hexDataSlice)(o,100,128)).isZero()||k.throwError("CCIP Read callback selector included junk",w.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),b=(0,h.hexDataSlice)(o,96,100),y=B(o,128),[4,this.ccipReadFetch(e,g,u)];case 3:return null==(v=a.sent())&&k.throwError("CCIP Read disabled or provided no URLs",w.Logger.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:i}),_={to:n,data:(0,h.hexConcat)([b,V([v,y])])},[2,this._call(_,t,r+1)];case 4:if((E=a.sent()).code===w.Logger.errors.SERVER_ERROR)throw E;return[3,5];case 5:try{return[2,(0,h.hexlify)(i)]}catch(r){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:t},result:i,error:r})]}return[2]}}))}))},t.prototype.call=function(e,t){return o(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,g.resolveProperties)({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)})];case 2:return r=n.sent(),[2,this._call(r.transaction,r.blockTag,r.ccipReadEnabled?0:-1)]}}))}))},t.prototype.estimateGas=function(e){return o(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,g.resolveProperties)({transaction:this._getTransactionRequest(e)})];case 2:return t=n.sent(),[4,this.perform("estimateGas",t)];case 3:r=n.sent();try{return[2,f.BigNumber.from(r)]}catch(e){return[2,k.throwError("bad result from backend",w.Logger.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:e})]}return[2]}}))}))},t.prototype._getAddress=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return"string"!=typeof(e=r.sent())&&k.throwArgumentError("invalid address or ENS name","name",e),[4,this.resolveName(e)];case 2:return null==(t=r.sent())&&k.throwError("ENS name not configured",w.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName("+JSON.stringify(e)+")"}),[2,t]}}))}))},t.prototype._getBlock=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,s=this;return a(this,(function(u){switch(u.label){case 0:return[4,this.getNetwork()];case 1:return u.sent(),[4,e];case 2:return e=u.sent(),r=-128,n={includeTransactions:!!t},(0,h.isHexString)(e,32)?(n.blockHash=e,[3,6]):[3,3];case 3:return u.trys.push([3,5,,6]),i=n,[4,this._getBlockTag(e)];case 4:return i.blockTag=u.sent(),(0,h.isHexString)(n.blockTag)&&(r=parseInt(n.blockTag.substring(2),16)),[3,6];case 5:return u.sent(),k.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e),[3,6];case 6:return[2,(0,v.poll)((function(){return o(s,void 0,void 0,(function(){var e,i,o,s,u,c,l=this;return a(this,(function(a){switch(a.label){case 0:return[4,this.perform("getBlock",n)];case 1:if(null==(e=a.sent()))return null!=n.blockHash&&null==this._emitted["b:"+n.blockHash]||null!=n.blockTag&&r>this._emitted.block?[2,null]:[2,undefined];if(!t)return[3,8];i=null,o=0,a.label=2;case 2:return o<e.transactions.length?null!=(s=e.transactions[o]).blockNumber?[3,3]:(s.confirmations=0,[3,6]):[3,7];case 3:return null!=s.confirmations?[3,6]:null!=i?[3,5]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 4:i=a.sent(),a.label=5;case 5:(u=i-s.blockNumber+1)<=0&&(u=1),s.confirmations=u,a.label=6;case 6:return o++,[3,2];case 7:return(c=this.formatter.blockWithTransactions(e)).transactions=c.transactions.map((function(e){return l._wrapTransaction(e)})),[2,c];case 8:return[2,this.formatter.block(e)]}}))}))}),{oncePoll:this})]}}))}))},t.prototype.getBlock=function(e){return this._getBlock(e,!1)},t.prototype.getBlockWithTransactions=function(e){return this._getBlock(e,!0)},t.prototype.getTransaction=function(e){return o(this,void 0,void 0,(function(){var t,r=this;return a(this,(function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,e];case 2:return e=n.sent(),t={transactionHash:this.formatter.hash(e,!0)},[2,(0,v.poll)((function(){return o(r,void 0,void 0,(function(){var r,n,i,o;return a(this,(function(a){switch(a.label){case 0:return[4,this.perform("getTransaction",t)];case 1:return null==(r=a.sent())?null==this._emitted["t:"+e]?[2,null]:[2,undefined]:null!=(n=this.formatter.transactionResponse(r)).blockNumber?[3,2]:(n.confirmations=0,[3,4]);case 2:return null!=n.confirmations?[3,4]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:i=a.sent(),(o=i-n.blockNumber+1)<=0&&(o=1),n.confirmations=o,a.label=4;case 4:return[2,this._wrapTransaction(n)]}}))}))}),{oncePoll:this})]}}))}))},t.prototype.getTransactionReceipt=function(e){return o(this,void 0,void 0,(function(){var t,r=this;return a(this,(function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,e];case 2:return e=n.sent(),t={transactionHash:this.formatter.hash(e,!0)},[2,(0,v.poll)((function(){return o(r,void 0,void 0,(function(){var r,n,i,o;return a(this,(function(a){switch(a.label){case 0:return[4,this.perform("getTransactionReceipt",t)];case 1:return null==(r=a.sent())?null==this._emitted["t:"+e]?[2,null]:[2,undefined]:null==r.blockHash?[2,undefined]:null!=(n=this.formatter.receipt(r)).blockNumber?[3,2]:(n.confirmations=0,[3,4]);case 2:return null!=n.confirmations?[3,4]:[4,this._getInternalBlockNumber(100+2*this.pollingInterval)];case 3:i=a.sent(),(o=i-n.blockNumber+1)<=0&&(o=1),n.confirmations=o,a.label=4;case 4:return[2,n]}}))}))}),{oncePoll:this})]}}))}))},t.prototype.getLogs=function(e){return o(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return[4,this.getNetwork()];case 1:return n.sent(),[4,(0,g.resolveProperties)({filter:this._getFilter(e)})];case 2:return t=n.sent(),[4,this.perform("getLogs",t)];case 3:return(r=n.sent()).forEach((function(e){null==e.removed&&(e.removed=!1)})),[2,S.Formatter.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)]}}))}))},t.prototype.getEtherPrice=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.getNetwork()];case 1:return e.sent(),[2,this.perform("getEtherPrice",{})]}}))}))},t.prototype._getBlockTag=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return"number"==typeof(e=r.sent())&&e<0?(e%1&&k.throwArgumentError("invalid BlockTag","blockTag",e),[4,this._getInternalBlockNumber(100+2*this.pollingInterval)]):[3,3];case 2:return t=r.sent(),(t+=e)<0&&(t=0),[2,this.formatter.blockTag(t)];case 3:return[2,this.formatter.blockTag(e)]}}))}))},t.prototype.getResolver=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return a(this,(function(o){switch(o.label){case 0:t=e,o.label=1;case 1:return""===t||"."===t||"eth"!==e&&"eth"===t?[2,null]:[4,this._getResolver(t,"getResolver")];case 2:return null==(r=o.sent())?[3,5]:(n=new q(this,r,e),(i=t!==e)?[4,n.supportsWildcard()]:[3,4]);case 3:i=!o.sent(),o.label=4;case 4:return i?[2,null]:[2,n];case 5:return t=t.split(".").slice(1).join("."),[3,1];case 6:return[2]}}))}))},t.prototype._getResolver=function(e,t){return o(this,void 0,void 0,(function(){var r,n;return a(this,(function(i){switch(i.label){case 0:return null==t&&(t="ENS"),[4,this.getNetwork()];case 1:(r=i.sent()).ensAddress||k.throwError("network does not support ENS",w.Logger.errors.UNSUPPORTED_OPERATION,{operation:t,network:r.name}),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.call({to:r.ensAddress,data:"0x0178b8bf"+(0,p.namehash)(e).substring(2)})];case 3:return n=i.sent(),[2,this.formatter.callAddress(n)];case 4:return i.sent(),[3,5];case 5:return[2,null]}}))}))},t.prototype.resolveName=function(e){return o(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return[4,e];case 1:e=r.sent();try{return[2,Promise.resolve(this.formatter.address(e))]}catch(t){if((0,h.isHexString)(e))throw t}return"string"!=typeof e&&k.throwArgumentError("invalid ENS name","name",e),[4,this.getResolver(e)];case 2:return(t=r.sent())?[4,t.getAddress()]:[2,null];case 3:return[2,r.sent()]}}))}))},t.prototype.lookupAddress=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i;return a(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return e=o.sent(),e=this.formatter.address(e),t=e.substring(2).toLowerCase()+".addr.reverse",[4,this._getResolver(t,"lookupAddress")];case 2:return null==(r=o.sent())?[2,null]:(i=F,[4,this.call({to:r,data:"0x691f3431"+(0,p.namehash)(t).substring(2)})]);case 3:return n=i.apply(void 0,[o.sent(),0]),[4,this.resolveName(n)];case 4:return o.sent()!=e?[2,null]:[2,n]}}))}))},t.prototype.getAvatar=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i,o,s,u,c,l,f;return a(this,(function(a){switch(a.label){case 0:return t=null,(0,h.isHexString)(e)?(r=this.formatter.address(e),n=r.substring(2).toLowerCase()+".addr.reverse",[4,this._getResolver(n,"getAvatar")]):[3,10];case 1:if(!(i=a.sent()))return[2,null];t=new q(this,i,n),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,t.getAvatar()];case 3:return(o=a.sent())?[2,o.url]:[3,5];case 4:if((s=a.sent()).code!==w.Logger.errors.CALL_EXCEPTION)throw s;return[3,5];case 5:return a.trys.push([5,8,,9]),c=F,[4,this.call({to:i,data:"0x691f3431"+(0,p.namehash)(n).substring(2)})];case 6:return u=c.apply(void 0,[a.sent(),0]),[4,this.getResolver(u)];case 7:return t=a.sent(),[3,9];case 8:if((l=a.sent()).code!==w.Logger.errors.CALL_EXCEPTION)throw l;return[2,null];case 9:return[3,12];case 10:return[4,this.getResolver(e)];case 11:if(!(t=a.sent()))return[2,null];a.label=12;case 12:return[4,t.getAvatar()];case 13:return null==(f=a.sent())?[2,null]:[2,f.url]}}))}))},t.prototype.perform=function(e,t){return k.throwError(e+" not implemented",w.Logger.errors.NOT_IMPLEMENTED,{operation:e})},t.prototype._startEvent=function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0},t.prototype._stopEvent=function(e){this.polling=this._events.filter((function(e){return e.pollable()})).length>0},t.prototype._addEventListener=function(e,t,r){var n=new x(A(e),t,r);return this._events.push(n),this._startEvent(n),this},t.prototype.on=function(e,t){return this._addEventListener(e,t,!1)},t.prototype.once=function(e,t){return this._addEventListener(e,t,!0)},t.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=!1,o=[],a=A(e);return this._events=this._events.filter((function(e){return e.tag!==a||(setTimeout((function(){e.listener.apply(t,r)}),0),i=!0,!e.once||(o.push(e),!1))})),o.forEach((function(e){t._stopEvent(e)})),i},t.prototype.listenerCount=function(e){if(!e)return this._events.length;var t=A(e);return this._events.filter((function(e){return e.tag===t})).length},t.prototype.listeners=function(e){if(null==e)return this._events.map((function(e){return e.listener}));var t=A(e);return this._events.filter((function(e){return e.tag===t})).map((function(e){return e.listener}))},t.prototype.off=function(e,t){var r=this;if(null==t)return this.removeAllListeners(e);var n=[],i=!1,o=A(e);return this._events=this._events.filter((function(e){return e.tag!==o||e.listener!=t||(!!i||(i=!0,n.push(e),!1))})),n.forEach((function(e){r._stopEvent(e)})),this},t.prototype.removeAllListeners=function(e){var t=this,r=[];if(null==e)r=this._events,this._events=[];else{var n=A(e);this._events=this._events.filter((function(e){return e.tag!==n||(r.push(e),!1)}))}return r.forEach((function(e){t._stopEvent(e)})),this},t}(u.Provider);r.BaseProvider=K}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[713,{},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.IpcProvider=void 0;r.IpcProvider=null}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[714,{"./_version":709,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.WebSocket=void 0;var n=e("@ethersproject/logger"),i=e("./_version"),o=null;r.WebSocket=o;try{if(r.WebSocket=o=WebSocket,null==o)throw new Error("inject please")}catch(e){var a=new n.Logger(i.version);r.WebSocket=o=function(){a.throwError("WebSockets not supported in this environment",n.Logger.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[715,{"./_version":709,"./url-json-rpc-provider":725,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.CloudflareProvider=void 0;var s=e("./url-json-rpc-provider"),u=e("@ethersproject/logger"),c=e("./_version"),l=new u.Logger(c.version),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getApiKey=function(e){return null!=e&&l.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null},t.getUrl=function(e,t){var r=null;if("homestead"===e.name)r="https://cloudflare-eth.com/";else l.throwArgumentError("unsupported network","network",arguments[0]);return r},t.prototype.perform=function(t,r){return o(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return"getBlockNumber"!==t?[3,2]:[4,e.prototype.perform.call(this,"getBlock",{blockTag:"latest"})];case 1:return[2,n.sent().number];case 2:return[2,e.prototype.perform.call(this,t,r)]}}))}))},t}(s.UrlJsonRpcProvider);r.CloudflareProvider=f}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[716,{"./_version":709,"./base-provider":712,"./formatter":718,"@ethersproject/bytes":674,"@ethersproject/logger":702,"@ethersproject/properties":708,"@ethersproject/transactions":749,"@ethersproject/web":756},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.EtherscanProvider=void 0;var s=e("@ethersproject/bytes"),u=e("@ethersproject/properties"),c=e("@ethersproject/transactions"),l=e("@ethersproject/web"),f=e("./formatter"),h=e("@ethersproject/logger"),d=e("./_version"),p=new h.Logger(d.version);function m(e){var t={};for(var r in e)if(null!=e[r]){var n=e[r];"type"===r&&0===n||(n={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[r]?(0,s.hexValue)((0,s.hexlify)(n)):"accessList"===r?"["+(0,c.accessListify)(n).map((function(e){return'{address:"'+e.address+'",storageKeys:["'+e.storageKeys.join('","')+'"]}'})).join(",")+"]":(0,s.hexlify)(n),t[r]=n)}return t}function g(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"string"!=typeof e.message||!e.message.match(/^OK/)){var t=new Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function b(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0)throw(t=new Error("throttled response")).result=JSON.stringify(e),t.throttleRetry=!0,t;if("2.0"!=e.jsonrpc)throw(t=new Error("invalid response")).result=JSON.stringify(e),t;if(e.error){var t=new Error(e.error.message||"unknown error");throw e.error.code&&(t.code=e.error.code),e.error.data&&(t.data=e.error.data),t}return e.result}function y(e){if("pending"===e)throw new Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}function v(e,t,r){if("call"===e&&t.code===h.Logger.errors.SERVER_ERROR){var n=t.error;if(n&&(n.message.match(/reverted/i)||n.message.match(/VM execution error/i))){var i=n.data;if(i&&(i="0x"+i.replace(/^.*0x/i,"")),(0,s.isHexString)(i))return i;p.throwError("missing revert data in call exception",h.Logger.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}var o=t.message;throw t.code===h.Logger.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?o=t.error.message:"string"==typeof t.body?o=t.body:"string"==typeof t.responseText&&(o=t.responseText)),(o=(o||"").toLowerCase()).match(/insufficient funds/)&&p.throwError("insufficient funds for intrinsic transaction cost",h.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),o.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&p.throwError("nonce has already been used",h.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),o.match(/another transaction with same nonce/)&&p.throwError("replacement fee too low",h.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),o.match(/execution failed due to an exception|execution reverted/)&&p.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",h.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}var _=function(e){function t(t,r){var n=e.call(this,t)||this;return(0,u.defineReadOnly)(n,"baseUrl",n.getBaseUrl()),(0,u.defineReadOnly)(n,"apiKey",r||null),n}return i(t,e),t.prototype.getBaseUrl=function(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io";case"optimism":return"https://api-optimistic.etherscan.io";case"optimism-kovan":return"https://api-kovan-optimistic.etherscan.io"}return p.throwArgumentError("unsupported network","network",this.network.name)},t.prototype.getUrl=function(e,t){var r=Object.keys(t).reduce((function(e,r){var n=t[r];return null!=n&&(e+="&"+r+"="+n),e}),""),n=this.apiKey?"&apikey="+this.apiKey:"";return this.baseUrl+"/api?module="+e+r+n},t.prototype.getPostUrl=function(){return this.baseUrl+"/api"},t.prototype.getPostData=function(e,t){return t.module=e,t.apikey=this.apiKey,t},t.prototype.fetch=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,s,c,h,d=this;return a(this,(function(a){switch(a.label){case 0:return n=r?this.getPostUrl():this.getUrl(e,t),i=r?this.getPostData(e,t):null,o="proxy"===e?b:g,this.emit("debug",{action:"request",request:n,provider:this}),s={url:n,throttleSlotInterval:1e3,throttleCallback:function(e,t){return d.isCommunityResource()&&(0,f.showThrottleMessage)(),Promise.resolve(!0)}},c=null,i&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},c=Object.keys(i).map((function(e){return e+"="+i[e]})).join("&")),[4,(0,l.fetchJson)(s,c,o||b)];case 1:return h=a.sent(),this.emit("debug",{action:"response",request:n,response:(0,u.deepCopy)(h),provider:this}),[2,h]}}))}))},t.prototype.detectNetwork=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,this.network]}))}))},t.prototype.perform=function(t,r){return o(this,void 0,void 0,(function(){var n,i,o,s,u,c,l,f,d;return a(this,(function(a){switch(a.label){case 0:switch(t){case"getBlockNumber":return[3,1];case"getGasPrice":return[3,2];case"getBalance":return[3,3];case"getTransactionCount":return[3,4];case"getCode":return[3,5];case"getStorageAt":return[3,6];case"sendTransaction":return[3,7];case"getBlock":return[3,8];case"getTransaction":return[3,9];case"getTransactionReceipt":return[3,10];case"call":return[3,11];case"estimateGas":return[3,15];case"getLogs":return[3,19];case"getEtherPrice":return[3,26]}return[3,28];case 1:return[2,this.fetch("proxy",{action:"eth_blockNumber"})];case 2:return[2,this.fetch("proxy",{action:"eth_gasPrice"})];case 3:return[2,this.fetch("account",{action:"balance",address:r.address,tag:r.blockTag})];case 4:return[2,this.fetch("proxy",{action:"eth_getTransactionCount",address:r.address,tag:r.blockTag})];case 5:return[2,this.fetch("proxy",{action:"eth_getCode",address:r.address,tag:r.blockTag})];case 6:return[2,this.fetch("proxy",{action:"eth_getStorageAt",address:r.address,position:r.position,tag:r.blockTag})];case 7:return[2,this.fetch("proxy",{action:"eth_sendRawTransaction",hex:r.signedTransaction},!0).catch((function(e){return v("sendTransaction",e,r.signedTransaction)}))];case 8:if(r.blockTag)return[2,this.fetch("proxy",{action:"eth_getBlockByNumber",tag:r.blockTag,boolean:r.includeTransactions?"true":"false"})];throw new Error("getBlock by blockHash not implemented");case 9:return[2,this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:r.transactionHash})];case 10:return[2,this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:r.transactionHash})];case 11:if("latest"!==r.blockTag)throw new Error("EtherscanProvider does not support blockTag for call");(n=m(r.transaction)).module="proxy",n.action="eth_call",a.label=12;case 12:return a.trys.push([12,14,,15]),[4,this.fetch("proxy",n,!0)];case 13:return[2,a.sent()];case 14:return[2,v("call",a.sent(),r.transaction)];case 15:(n=m(r.transaction)).module="proxy",n.action="eth_estimateGas",a.label=16;case 16:return a.trys.push([16,18,,19]),[4,this.fetch("proxy",n,!0)];case 17:return[2,a.sent()];case 18:return[2,v("estimateGas",a.sent(),r.transaction)];case 19:return i={action:"getLogs"},r.filter.fromBlock&&(i.fromBlock=y(r.filter.fromBlock)),r.filter.toBlock&&(i.toBlock=y(r.filter.toBlock)),r.filter.address&&(i.address=r.filter.address),r.filter.topics&&r.filter.topics.length>0&&(r.filter.topics.length>1&&p.throwError("unsupported topic count",h.Logger.errors.UNSUPPORTED_OPERATION,{topics:r.filter.topics}),1===r.filter.topics.length&&("string"==typeof(o=r.filter.topics[0])&&66===o.length||p.throwError("unsupported topic format",h.Logger.errors.UNSUPPORTED_OPERATION,{topic0:o}),i.topic0=o)),[4,this.fetch("logs",i)];case 20:s=a.sent(),u={},c=0,a.label=21;case 21:return c<s.length?null!=(l=s[c]).blockHash?[3,24]:null!=u[l.blockNumber]?[3,23]:[4,this.getBlock(l.blockNumber)]:[3,25];case 22:(f=a.sent())&&(u[l.blockNumber]=f.hash),a.label=23;case 23:l.blockHash=u[l.blockNumber],a.label=24;case 24:return c++,[3,21];case 25:return[2,s];case 26:return"homestead"!==this.network.name?[2,0]:(d=parseFloat,[4,this.fetch("stats",{action:"ethprice"})]);case 27:return[2,d.apply(void 0,[a.sent().ethusd])];case 28:return[3,29];case 29:return[2,e.prototype.perform.call(this,t,r)]}}))}))},t.prototype.getHistory=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o=this;return a(this,(function(a){switch(a.label){case 0:return i={action:"txlist"},[4,this.resolveName(e)];case 1:return i.address=a.sent(),i.startblock=null==t?0:t,i.endblock=null==r?99999999:r,i.sort="asc",n=i,[4,this.fetch("account",n)];case 2:return[2,a.sent().map((function(e){["contractAddress","to"].forEach((function(t){""==e[t]&&delete e[t]})),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);var t=o.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t}))]}}))}))},t.prototype.isCommunityResource=function(){return null==this.apiKey},t}(e("./base-provider").BaseProvider);r.EtherscanProvider=_}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[717,{"./_version":709,"./base-provider":712,"./formatter":718,"@ethersproject/abstract-provider":660,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/logger":702,"@ethersproject/properties":708,"@ethersproject/random":730,"@ethersproject/web":756},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.FallbackProvider=void 0;var s=e("@ethersproject/abstract-provider"),u=e("@ethersproject/bignumber"),c=e("@ethersproject/bytes"),l=e("@ethersproject/properties"),f=e("@ethersproject/random"),h=e("@ethersproject/web"),d=e("./base-provider"),p=e("./formatter"),m=e("@ethersproject/logger"),g=e("./_version"),b=new m.Logger(g.version);function y(){return(new Date).getTime()}function v(e){for(var t=null,r=0;r<e.length;r++){var n=e[r];if(null==n)return null;t?t.name===n.name&&t.chainId===n.chainId&&(t.ensAddress===n.ensAddress||null==t.ensAddress&&null==n.ensAddress)||b.throwArgumentError("provider mismatch","networks",e):t=n}return t}function _(e,t){e=e.slice().sort();var r=Math.floor(e.length/2);if(e.length%2)return e[r];var n=e[r-1],i=e[r];return null!=t&&Math.abs(n-i)>t?null:(n+i)/2}function w(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(u.BigNumber.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map((function(e){return w(e)})));if("object"==typeof e){var t=Object.keys(e);return t.sort(),"{"+t.map((function(t){var r=e[t];return r="function"==typeof r?"[function]":w(r),JSON.stringify(t)+":"+r})).join(",")+"}"}throw new Error("unknown value type: "+typeof e)}var E=1;function k(e){var t=null,r=null,n=new Promise((function(n){t=function(){r&&(clearTimeout(r),r=null),n()},r=setTimeout(t,e)}));return{cancel:t,getPromise:function(){return n},wait:function(e){return n=n.then(e)}}}var S=[m.Logger.errors.CALL_EXCEPTION,m.Logger.errors.INSUFFICIENT_FUNDS,m.Logger.errors.NONCE_EXPIRED,m.Logger.errors.REPLACEMENT_UNDERPRICED,m.Logger.errors.UNPREDICTABLE_GAS_LIMIT],R=["address","args","errorArgs","errorSignature","method","transaction"];function T(e,t){var r={weight:e.weight};return Object.defineProperty(r,"provider",{get:function(){return e.provider}}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function A(e,t,r){var n=w;switch(t){case"getBlockNumber":return function(t){var r=t.map((function(e){return e.result})),n=_(t.map((function(e){return e.result})),2);return null==n?undefined:(n=Math.ceil(n),r.indexOf(n+1)>=0&&n++,n>=e._highestBlockNumber&&(e._highestBlockNumber=n),e._highestBlockNumber)};case"getGasPrice":return function(e){var t=e.map((function(e){return e.result}));return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return _(e.map((function(e){return e.result})))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":n=function(e){return null==e?null:((e=(0,l.shallowCopy)(e)).confirmations=-1,w(e))};break;case"getBlock":n=r.includeTransactions?function(e){return null==e?null:((e=(0,l.shallowCopy)(e)).transactions=e.transactions.map((function(e){return(e=(0,l.shallowCopy)(e)).confirmations=-1,e})),w(e))}:function(e){return null==e?null:w(e)};break;default:throw new Error("unknown method: "+t)}return function(e,t){return function(r){var n={};r.forEach((function(t){var r=e(t.result);n[r]||(n[r]={count:0,result:t.result}),n[r].count++}));for(var i=Object.keys(n),o=0;o<i.length;o++){var a=n[i[o]];if(a.count>=t)return a.result}return undefined}}(n,e.quorum)}function C(e,t){return o(this,void 0,void 0,(function(){var r;return a(this,(function(n){return null!=(r=e.provider).blockNumber&&r.blockNumber>=t||-1===t?[2,r]:[2,(0,h.poll)((function(){return new Promise((function(n,i){setTimeout((function(){return r.blockNumber>=t?n(r):e.cancelled?n(null):n(undefined)}),0)}))}),{oncePoll:r})]}))}))}var O=function(e){function t(t,r){var n=this;0===t.length&&b.throwArgumentError("missing providers","providers",t);var i=t.map((function(e,t){if(s.Provider.isProvider(e)){var r=(0,p.isCommunityResource)(e)?2e3:750;return Object.freeze({provider:e,weight:1,stallTimeout:r,priority:1})}var n=(0,l.shallowCopy)(e);null==n.priority&&(n.priority=1),null==n.stallTimeout&&(n.stallTimeout=(0,p.isCommunityResource)(e)?2e3:750),null==n.weight&&(n.weight=1);var i=n.weight;return(i%1||i>512||i<1)&&b.throwArgumentError("invalid weight; must be integer in [1, 512]","providers["+t+"].weight",i),Object.freeze(n)})),o=i.reduce((function(e,t){return e+t.weight}),0);null==r?r=o/2:r>o&&b.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);var a=v(i.map((function(e){return e.provider.network})));return null==a&&(a=new Promise((function(e,t){setTimeout((function(){n.detectNetwork().then(e,t)}),0)}))),n=e.call(this,a)||this,(0,l.defineReadOnly)(n,"providerConfigs",Object.freeze(i)),(0,l.defineReadOnly)(n,"quorum",r),n._highestBlockNumber=-1,n}return i(t,e),t.prototype.detectNetwork=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,Promise.all(this.providerConfigs.map((function(e){return e.provider.getNetwork()})))];case 1:return[2,v(e.sent())]}}))}))},t.prototype.perform=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,s,u,h,d,p,g,v,_,w=this;return a(this,(function(O){switch(O.label){case 0:return"sendTransaction"!==e?[3,2]:[4,Promise.all(this.providerConfigs.map((function(e){return e.provider.sendTransaction(t.signedTransaction).then((function(e){return e.hash}),(function(e){return e}))})))];case 1:for(r=O.sent(),n=0;n<r.length;n++)if("string"==typeof(i=r[n]))return[2,i];throw r[0];case 2:return-1!==this._highestBlockNumber||"getBlockNumber"===e?[3,4]:[4,this.getBlockNumber()];case 3:O.sent(),O.label=4;case 4:s=A(this,e,t),(u=(0,f.shuffled)(this.providerConfigs.map(l.shallowCopy))).sort((function(e,t){return e.priority-t.priority})),h=this._highestBlockNumber,d=0,p=!0,g=function(){var r,n,i,f,g,_,A;return a(this,(function(O){switch(O.label){case 0:for(r=y(),n=u.filter((function(e){return e.runner&&r-e.start<e.stallTimeout})).reduce((function(e,t){return e+t.weight}),0),i=function(){var r=u[d++],i=E++;r.start=y(),r.staller=k(r.stallTimeout),r.staller.wait((function(){r.staller=null})),r.runner=function(e,t,r,n){return o(this,void 0,void 0,(function(){var i,o;return a(this,(function(a){switch(a.label){case 0:switch(i=e.provider,r){case"getBlockNumber":case"getGasPrice":return[3,1];case"getEtherPrice":return[3,2];case"getBalance":case"getTransactionCount":case"getCode":return[3,3];case"getStorageAt":return[3,6];case"getBlock":return[3,9];case"call":case"estimateGas":return[3,12];case"getTransaction":case"getTransactionReceipt":return[3,15];case"getLogs":return[3,16]}return[3,19];case 1:return[2,i[r]()];case 2:return i.getEtherPrice?[2,i.getEtherPrice()]:[3,19];case 3:return n.blockTag&&(0,c.isHexString)(n.blockTag)?[4,C(e,t)]:[3,5];case 4:i=a.sent(),a.label=5;case 5:return[2,i[r](n.address,n.blockTag||"latest")];case 6:return n.blockTag&&(0,c.isHexString)(n.blockTag)?[4,C(e,t)]:[3,8];case 7:i=a.sent(),a.label=8;case 8:return[2,i.getStorageAt(n.address,n.position,n.blockTag||"latest")];case 9:return n.blockTag&&(0,c.isHexString)(n.blockTag)?[4,C(e,t)]:[3,11];case 10:i=a.sent(),a.label=11;case 11:return[2,i[n.includeTransactions?"getBlockWithTransactions":"getBlock"](n.blockTag||n.blockHash)];case 12:return n.blockTag&&(0,c.isHexString)(n.blockTag)?[4,C(e,t)]:[3,14];case 13:i=a.sent(),a.label=14;case 14:return"call"===r&&n.blockTag?[2,i[r](n.transaction,n.blockTag)]:[2,i[r](n.transaction)];case 15:return[2,i[r](n.transactionHash)];case 16:return(o=n.filter).fromBlock&&(0,c.isHexString)(o.fromBlock)||o.toBlock&&(0,c.isHexString)(o.toBlock)?[4,C(e,t)]:[3,18];case 17:i=a.sent(),a.label=18;case 18:return[2,i.getLogs(o)];case 19:return[2,b.throwError("unknown method error",m.Logger.errors.UNKNOWN_ERROR,{method:r,params:n})]}}))}))}(r,h,e,t).then((function(n){r.done=!0,r.result=n,w.listenerCount("debug")&&w.emit("debug",{action:"request",rid:i,backend:T(r,y()),request:{method:e,params:(0,l.deepCopy)(t)},provider:w})}),(function(n){r.done=!0,r.error=n,w.listenerCount("debug")&&w.emit("debug",{action:"request",rid:i,backend:T(r,y()),request:{method:e,params:(0,l.deepCopy)(t)},provider:w})})),v.listenerCount("debug")&&v.emit("debug",{action:"request",rid:i,backend:T(r,null),request:{method:e,params:(0,l.deepCopy)(t)},provider:v}),n+=r.weight};n<v.quorum&&d<u.length;)i();return f=[],u.forEach((function(e){!e.done&&e.runner&&(f.push(e.runner),e.staller&&f.push(e.staller.getPromise()))})),f.length?[4,Promise.race(f)]:[3,2];case 1:O.sent(),O.label=2;case 2:return(g=u.filter((function(e){return e.done&&null==e.error}))).length>=v.quorum?(_=s(g))!==undefined?(u.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0})),[2,{value:_}]):p?[3,4]:[4,k(100).getPromise()]:[3,5];case 3:O.sent(),O.label=4;case 4:p=!1,O.label=5;case 5:return A=u.reduce((function(e,t){if(!t.done||null==t.error)return e;var r=t.error.code;return S.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e}),{}),Object.keys(A).forEach((function(e){var t=A[e];if(!(t.weight<w.quorum)){u.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0}));var r=t.error,n={};R.forEach((function(e){null!=r[e]&&(n[e]=r[e])})),b.throwError(r.reason||r.message,e,n)}})),0===u.filter((function(e){return!e.done})).length?[2,"break"]:[2]}}))},v=this,O.label=5;case 5:return[5,g()];case 6:return"object"==typeof(_=O.sent())?[2,_.value]:"break"===_?[3,7]:[3,5];case 7:return u.forEach((function(e){e.staller&&e.staller.cancel(),e.cancelled=!0})),[2,b.throwError("failed to meet quorum",m.Logger.errors.SERVER_ERROR,{method:e,params:t,results:u.map((function(e){return T(e)})),provider:this})]}}))}))},t}(d.BaseProvider);r.FallbackProvider=O}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[718,{"./_version":709,"@ethersproject/address":664,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/constants":678,"@ethersproject/logger":702,"@ethersproject/properties":708,"@ethersproject/transactions":749},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.showThrottleMessage=r.isCommunityResource=r.isCommunityResourcable=r.Formatter=void 0;var n=e("@ethersproject/address"),i=e("@ethersproject/bignumber"),o=e("@ethersproject/bytes"),a=e("@ethersproject/constants"),s=e("@ethersproject/properties"),u=e("@ethersproject/transactions"),c=e("@ethersproject/logger"),l=e("./_version"),f=new c.Logger(l.version),h=function(){function e(){this.formats=this.getDefaultFormats()}return e.prototype.getDefaultFormats=function(){var t=this,r={},n=this.address.bind(this),i=this.bigNumber.bind(this),o=this.blockTag.bind(this),a=this.data.bind(this),u=this.hash.bind(this),c=this.hex.bind(this),l=this.number.bind(this),f=this.type.bind(this);return r.transaction={hash:u,type:f,accessList:e.allowNull(this.accessList.bind(this),null),blockHash:e.allowNull(u,null),blockNumber:e.allowNull(l,null),transactionIndex:e.allowNull(l,null),confirmations:e.allowNull(l,null),from:n,gasPrice:e.allowNull(i),maxPriorityFeePerGas:e.allowNull(i),maxFeePerGas:e.allowNull(i),gasLimit:i,to:e.allowNull(n,null),value:i,nonce:l,data:a,r:e.allowNull(this.uint256),s:e.allowNull(this.uint256),v:e.allowNull(l),creates:e.allowNull(n,null),raw:e.allowNull(a)},r.transactionRequest={from:e.allowNull(n),nonce:e.allowNull(l),gasLimit:e.allowNull(i),gasPrice:e.allowNull(i),maxPriorityFeePerGas:e.allowNull(i),maxFeePerGas:e.allowNull(i),to:e.allowNull(n),value:e.allowNull(i),data:e.allowNull((function(e){return t.data(e,!0)})),type:e.allowNull(l),accessList:e.allowNull(this.accessList.bind(this),null)},r.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:u,address:n,topics:e.arrayOf(u),data:a,logIndex:l,blockHash:u},r.receipt={to:e.allowNull(this.address,null),from:e.allowNull(this.address,null),contractAddress:e.allowNull(n,null),transactionIndex:l,root:e.allowNull(c),gasUsed:i,logsBloom:e.allowNull(a),blockHash:u,transactionHash:u,logs:e.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:e.allowNull(l,null),cumulativeGasUsed:i,effectiveGasPrice:e.allowNull(i),status:e.allowNull(l),type:f},r.block={hash:e.allowNull(u),parentHash:u,number:l,timestamp:l,nonce:e.allowNull(c),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:e.allowNull(n),extraData:a,transactions:e.allowNull(e.arrayOf(u)),baseFeePerGas:e.allowNull(i)},r.blockWithTransactions=(0,s.shallowCopy)(r.block),r.blockWithTransactions.transactions=e.allowNull(e.arrayOf(this.transactionResponse.bind(this))),r.filter={fromBlock:e.allowNull(o,undefined),toBlock:e.allowNull(o,undefined),blockHash:e.allowNull(u,undefined),address:e.allowNull(n,undefined),topics:e.allowNull(this.topics.bind(this),undefined)},r.filterLog={blockNumber:e.allowNull(l),blockHash:e.allowNull(u),transactionIndex:l,removed:e.allowNull(this.boolean.bind(this)),address:n,data:e.allowFalsish(a,"0x"),topics:e.arrayOf(u),transactionHash:u,logIndex:l},r},e.prototype.accessList=function(e){return(0,u.accessListify)(e||[])},e.prototype.number=function(e){return"0x"===e?0:i.BigNumber.from(e).toNumber()},e.prototype.type=function(e){return"0x"===e||null==e?0:i.BigNumber.from(e).toNumber()},e.prototype.bigNumber=function(e){return i.BigNumber.from(e)},e.prototype.boolean=function(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw new Error("invalid boolean - "+e)},e.prototype.hex=function(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),(0,o.isHexString)(e))?e.toLowerCase():f.throwArgumentError("invalid hash","value",e)},e.prototype.data=function(e,t){var r=this.hex(e,t);if(r.length%2!=0)throw new Error("invalid data; odd-length - "+e);return r},e.prototype.address=function(e){return(0,n.getAddress)(e)},e.prototype.callAddress=function(e){if(!(0,o.isHexString)(e,32))return null;var t=(0,n.getAddress)((0,o.hexDataSlice)(e,12));return t===a.AddressZero?null:t},e.prototype.contractAddress=function(e){return(0,n.getContractAddress)(e)},e.prototype.blockTag=function(e){if(null==e)return"latest";if("earliest"===e)return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if("number"==typeof e||(0,o.isHexString)(e))return(0,o.hexValue)(e);throw new Error("invalid blockTag")},e.prototype.hash=function(e,t){var r=this.hex(e,t);return 32!==(0,o.hexDataLength)(r)?f.throwArgumentError("invalid hash","value",e):r},e.prototype.difficulty=function(e){if(null==e)return null;var t=i.BigNumber.from(e);try{return t.toNumber()}catch(e){}return null},e.prototype.uint256=function(e){if(!(0,o.isHexString)(e))throw new Error("invalid uint256");return(0,o.hexZeroPad)(e,32)},e.prototype._block=function(t,r){null!=t.author&&null==t.miner&&(t.miner=t.author);var n=null!=t._difficulty?t._difficulty:t.difficulty,o=e.check(r,t);return o._difficulty=null==n?null:i.BigNumber.from(n),o},e.prototype.block=function(e){return this._block(e,this.formats.block)},e.prototype.blockWithTransactions=function(e){return this._block(e,this.formats.blockWithTransactions)},e.prototype.transactionRequest=function(t){return e.check(this.formats.transactionRequest,t)},e.prototype.transactionResponse=function(t){null!=t.gas&&null==t.gasLimit&&(t.gasLimit=t.gas),t.to&&i.BigNumber.from(t.to).isZero()&&(t.to="0x0000000000000000000000000000000000000000"),null!=t.input&&null==t.data&&(t.data=t.input),null==t.to&&null==t.creates&&(t.creates=this.contractAddress(t)),1!==t.type&&2!==t.type||null!=t.accessList||(t.accessList=[]);var r=e.check(this.formats.transaction,t);if(null!=t.chainId){var n=t.chainId;(0,o.isHexString)(n)&&(n=i.BigNumber.from(n).toNumber()),r.chainId=n}else{null==(n=t.networkId)&&null==r.v&&(n=t.chainId),(0,o.isHexString)(n)&&(n=i.BigNumber.from(n).toNumber()),"number"!=typeof n&&null!=r.v&&((n=(r.v-35)/2)<0&&(n=0),n=parseInt(n)),"number"!=typeof n&&(n=0),r.chainId=n}return r.blockHash&&"x"===r.blockHash.replace(/0/g,"")&&(r.blockHash=null),r},e.prototype.transaction=function(e){return(0,u.parse)(e)},e.prototype.receiptLog=function(t){return e.check(this.formats.receiptLog,t)},e.prototype.receipt=function(t){var r=e.check(this.formats.receipt,t);if(null!=r.root)if(r.root.length<=4){var n=i.BigNumber.from(r.root).toNumber();0===n||1===n?(null!=r.status&&r.status!==n&&f.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):f.throwArgumentError("invalid alt-root-status","value.root",r.root)}else 66!==r.root.length&&f.throwArgumentError("invalid root hash","value.root",r.root);return null!=r.status&&(r.byzantium=!0),r},e.prototype.topics=function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.topics(e)})):null!=e?this.hash(e,!0):null},e.prototype.filter=function(t){return e.check(this.formats.filter,t)},e.prototype.filterLog=function(t){return e.check(this.formats.filterLog,t)},e.check=function(e,t){var r={};for(var n in e)try{var i=e[n](t[n]);i!==undefined&&(r[n]=i)}catch(e){throw e.checkKey=n,e.checkValue=t[n],e}return r},e.allowNull=function(e,t){return function(r){return null==r?t:e(r)}},e.allowFalsish=function(e,t){return function(r){return r?e(r):t}},e.arrayOf=function(e){return function(t){if(!Array.isArray(t))throw new Error("not an array");var r=[];return t.forEach((function(t){r.push(e(t))})),r}},e}();function d(e){return e&&"function"==typeof e.isCommunityResource}r.Formatter=h,r.isCommunityResourcable=d,r.isCommunityResource=function(e){return d(e)&&e.isCommunityResource()};var p=!1;r.showThrottleMessage=function(){p||(p=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[719,{"./_version":709,"./alchemy-provider":710,"./ankr-provider":711,"./base-provider":712,"./cloudflare-provider":715,"./etherscan-provider":716,"./fallback-provider":717,"./formatter":718,"./infura-provider":720,"./ipc-provider":713,"./json-rpc-batch-provider":721,"./json-rpc-provider":722,"./nodesmith-provider":723,"./pocket-provider":724,"./url-json-rpc-provider":725,"./web3-provider":726,"./websocket-provider":727,"@ethersproject/abstract-provider":660,"@ethersproject/logger":702,"@ethersproject/networks":704},function(){with(this)return function(){"use strict";return function(e,t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.Formatter=r.showThrottleMessage=r.isCommunityResourcable=r.isCommunityResource=r.getNetwork=r.getDefaultProvider=r.JsonRpcSigner=r.IpcProvider=r.WebSocketProvider=r.Web3Provider=r.StaticJsonRpcProvider=r.PocketProvider=r.NodesmithProvider=r.JsonRpcBatchProvider=r.JsonRpcProvider=r.InfuraWebSocketProvider=r.InfuraProvider=r.EtherscanProvider=r.CloudflareProvider=r.AnkrProvider=r.AlchemyWebSocketProvider=r.AlchemyProvider=r.FallbackProvider=r.UrlJsonRpcProvider=r.Resolver=r.BaseProvider=r.Provider=void 0;var n=e("@ethersproject/abstract-provider");Object.defineProperty(r,"Provider",{enumerable:!0,get:function(){return n.Provider}});var i=e("@ethersproject/networks");Object.defineProperty(r,"getNetwork",{enumerable:!0,get:function(){return i.getNetwork}});var o=e("./base-provider");Object.defineProperty(r,"BaseProvider",{enumerable:!0,get:function(){return o.BaseProvider}}),Object.defineProperty(r,"Resolver",{enumerable:!0,get:function(){return o.Resolver}});var a=e("./alchemy-provider");Object.defineProperty(r,"AlchemyProvider",{enumerable:!0,get:function(){return a.AlchemyProvider}}),Object.defineProperty(r,"AlchemyWebSocketProvider",{enumerable:!0,get:function(){return a.AlchemyWebSocketProvider}});var s=e("./ankr-provider");Object.defineProperty(r,"AnkrProvider",{enumerable:!0,get:function(){return s.AnkrProvider}});var u=e("./cloudflare-provider");Object.defineProperty(r,"CloudflareProvider",{enumerable:!0,get:function(){return u.CloudflareProvider}});var c=e("./etherscan-provider");Object.defineProperty(r,"EtherscanProvider",{enumerable:!0,get:function(){return c.EtherscanProvider}});var l=e("./fallback-provider");Object.defineProperty(r,"FallbackProvider",{enumerable:!0,get:function(){return l.FallbackProvider}});var f=e("./ipc-provider");Object.defineProperty(r,"IpcProvider",{enumerable:!0,get:function(){return f.IpcProvider}});var h=e("./infura-provider");Object.defineProperty(r,"InfuraProvider",{enumerable:!0,get:function(){return h.InfuraProvider}}),Object.defineProperty(r,"InfuraWebSocketProvider",{enumerable:!0,get:function(){return h.InfuraWebSocketProvider}});var d=e("./json-rpc-provider");Object.defineProperty(r,"JsonRpcProvider",{enumerable:!0,get:function(){return d.JsonRpcProvider}}),Object.defineProperty(r,"JsonRpcSigner",{enumerable:!0,get:function(){return d.JsonRpcSigner}});var p=e("./json-rpc-batch-provider");Object.defineProperty(r,"JsonRpcBatchProvider",{enumerable:!0,get:function(){return p.JsonRpcBatchProvider}});var m=e("./nodesmith-provider");Object.defineProperty(r,"NodesmithProvider",{enumerable:!0,get:function(){return m.NodesmithProvider}});var g=e("./pocket-provider");Object.defineProperty(r,"PocketProvider",{enumerable:!0,get:function(){return g.PocketProvider}});var b=e("./url-json-rpc-provider");Object.defineProperty(r,"StaticJsonRpcProvider",{enumerable:!0,get:function(){return b.StaticJsonRpcProvider}}),Object.defineProperty(r,"UrlJsonRpcProvider",{enumerable:!0,get:function(){return b.UrlJsonRpcProvider}});var y=e("./web3-provider");Object.defineProperty(r,"Web3Provider",{enumerable:!0,get:function(){return y.Web3Provider}});var v=e("./websocket-provider");Object.defineProperty(r,"WebSocketProvider",{enumerable:!0,get:function(){return v.WebSocketProvider}});var _=e("./formatter");Object.defineProperty(r,"Formatter",{enumerable:!0,get:function(){return _.Formatter}}),Object.defineProperty(r,"isCommunityResourcable",{enumerable:!0,get:function(){return _.isCommunityResourcable}}),Object.defineProperty(r,"isCommunityResource",{enumerable:!0,get:function(){return _.isCommunityResource}}),Object.defineProperty(r,"showThrottleMessage",{enumerable:!0,get:function(){return _.showThrottleMessage}});var w=e("@ethersproject/logger"),E=e("./_version"),k=new w.Logger(E.version);r.getDefaultProvider=function(e,t){if(null==e&&(e="homestead"),"string"==typeof e){var r=e.match(/^(ws|http)s?:/i);if(r)switch(r[1].toLowerCase()){case"http":case"https":return new d.JsonRpcProvider(e);case"ws":case"wss":return new v.WebSocketProvider(e);default:k.throwArgumentError("unsupported URL scheme","network",e)}}var n=(0,i.getNetwork)(e);return n&&n._defaultProvider||k.throwError("unsupported getDefaultProvider network",w.Logger.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),n._defaultProvider({FallbackProvider:l.FallbackProvider,AlchemyProvider:a.AlchemyProvider,AnkrProvider:s.AnkrProvider,CloudflareProvider:u.CloudflareProvider,EtherscanProvider:c.EtherscanProvider,InfuraProvider:h.InfuraProvider,JsonRpcProvider:d.JsonRpcProvider,NodesmithProvider:m.NodesmithProvider,PocketProvider:g.PocketProvider,Web3Provider:y.Web3Provider,IpcProvider:f.IpcProvider},t)}}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[72,{"../../../shared/constants/app":7055,"../../../shared/constants/metametrics":7059,"../../../shared/modules/hexstring-utils":7081,"../../../shared/modules/random-id":7085,"../../../shared/modules/siwe":7087,"../metamask-controller":91,"./util":90,"@metamask/obs-store":1471,buffer:2438,"eth-rpc-errors":2821,"ethereumjs-util":2896,events:2439,loglevel:6059},function(){with(this)return function(){"use strict";return function(e,t,r){(function(t){(function(){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var n=m(e("events")),i=e("@metamask/obs-store"),o=e("ethereumjs-util"),a=e("eth-rpc-errors"),s=m(e("loglevel")),u=e("../../../shared/constants/app"),c=e("../metamask-controller"),l=m(e("../../../shared/modules/random-id")),f=e("../../../shared/constants/metametrics"),h=e("../../../shared/modules/siwe"),d=e("../../../shared/modules/hexstring-utils"),p=e("./util");function m(e){return e&&e.__esModule?e:{default:e}}const g=/^[0-9A-Fa-f]+$/gu;class b extends n.default{constructor({metricsEvent:e}){super(),this.memStore=new i.ObservableStore({unapprovedPersonalMsgs:{},unapprovedPersonalMsgCount:0}),this.messages=[],this.metricsEvent=e}get unapprovedPersonalMsgCount(){return Object.keys(this.getUnapprovedMsgs()).length}getUnapprovedMsgs(){return this.messages.filter((e=>"unapproved"===e.status)).reduce(((e,t)=>(e[t.id]=t,e)),{})}addUnapprovedMessageAsync(e,t){return new Promise(((r,n)=>{if(!e.from)return void n(new Error("MetaMask Message Signature: from field is required."));const i=this.addUnapprovedMessage(e,t);this.once(`${i}:finished`,(t=>{switch(t.status){case"signed":return void r(t.rawSig);case"rejected":return void n(a.ethErrors.provider.userRejectedRequest("MetaMask Message Signature: User denied message signature."));case"errored":return void n(new Error(`MetaMask Message Signature: ${t.error}`));default:n(new Error(`MetaMask Message Signature: Unknown problem: ${JSON.stringify(e)}`))}}))}))}addUnapprovedMessage(e,t){s.default.debug(`PersonalMessageManager addUnapprovedMessage: ${JSON.stringify(e)}`),t&&(e.origin=t.origin),e.data=this.normalizeMsgData(e.data);const r=(0,h.detectSIWE)(e);e.siwe=r;const n=(new Date).getTime(),i=(0,l.default)(),o={id:i,msgParams:e,time:n,status:"unapproved",type:u.MESSAGE_TYPE.PERSONAL_SIGN};return this.addMsg(o),this.emit("update"),i}addMsg(e){this.messages.push(e),this._saveMsgList()}getMsg(e){return this.messages.find((t=>t.id===e))}approveMessage(e){return this.setMsgStatusApproved(e.metamaskId),this.prepMsgForSigning(e)}setMsgStatusApproved(e){this._setMsgStatus(e,"approved")}setMsgStatusSigned(e,t){const r=this.getMsg(e);r.rawSig=t,this._updateMsg(r),this._setMsgStatus(e,"signed")}prepMsgForSigning(e){return delete e.metamaskId,Promise.resolve(e)}rejectMsg(e,t=undefined){if(t){const r=this.getMsg(e);this.metricsEvent({event:t,category:f.EVENT.CATEGORIES.TRANSACTIONS,properties:{action:"Sign Request",type:r.type}})}this._setMsgStatus(e,"rejected")}errorMessage(e,t){const r=this.getMsg(e);r.error=t,this._updateMsg(r),this._setMsgStatus(e,"errored")}clearUnapproved(){this.messages=this.messages.filter((e=>"unapproved"!==e.status)),this._saveMsgList()}_setMsgStatus(e,t){const r=this.getMsg(e);if(!r)throw new Error(`PersonalMessageManager - Message not found for id: "${e}".`);r.status=t,this._updateMsg(r),this.emit(`${e}:${t}`,r),"rejected"!==t&&"signed"!==t||this.emit(`${e}:finished`,r)}_updateMsg(e){const t=this.messages.findIndex((t=>t.id===e.id));-1!==t&&(this.messages[t]=e),this._saveMsgList()}_saveMsgList(){const e=this.getUnapprovedMsgs(),t=Object.keys(e).length;this.memStore.updateState({unapprovedPersonalMsgs:e,unapprovedPersonalMsgCount:t}),this.emit(c.METAMASK_CONTROLLER_EVENTS.UPDATE_BADGE)}normalizeMsgData(e){try{const t=(0,d.stripHexPrefix)(e);if(t.match(g))return(0,p.addHexPrefix)(t)}catch(e){s.default.debug("Message was not hex encoded, interpreting as utf8.")}return(0,o.bufferToHex)(t.from(e,"utf8"))}}r.default=b}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$"}],[720,{"./_version":709,"./formatter":718,"./url-json-rpc-provider":725,"./websocket-provider":727,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.InfuraProvider=r.InfuraWebSocketProvider=void 0;var o=e("@ethersproject/properties"),a=e("./websocket-provider"),s=e("./formatter"),u=e("@ethersproject/logger"),c=e("./_version"),l=new u.Logger(c.version),f=e("./url-json-rpc-provider"),h="84842078b09946638c03157f83405213",d=function(e){function t(t,r){var n,i=new p(t,r),a=i.connection;a.password&&l.throwError("INFURA WebSocket project secrets unsupported",u.Logger.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});var s=a.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");return n=e.call(this,s,t)||this,(0,o.defineReadOnly)(n,"apiKey",i.projectId),(0,o.defineReadOnly)(n,"projectId",i.projectId),(0,o.defineReadOnly)(n,"projectSecret",i.projectSecret),n}return i(t,e),t.prototype.isCommunityResource=function(){return this.projectId===h},t}(a.WebSocketProvider);r.InfuraWebSocketProvider=d;var p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getWebSocketProvider=function(e,t){return new d(e,t)},t.getApiKey=function(e){var t={apiKey:h,projectId:h,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(l.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),l.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t},t.getUrl=function(e,t){var r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:l.throwError("unsupported network",u.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={allowGzip:!0,url:"https:/"+"/"+r+"/v3/"+t.projectId,throttleCallback:function(e,r){return t.projectId===h&&(0,s.showThrottleMessage)(),Promise.resolve(!0)}};return null!=t.projectSecret&&(n.user="",n.password=t.projectSecret),n},t.prototype.isCommunityResource=function(){return this.projectId===h},t}(f.UrlJsonRpcProvider);r.InfuraProvider=p}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[721,{"./json-rpc-provider":722,"@ethersproject/properties":708,"@ethersproject/web":756},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcBatchProvider=void 0;var o=e("@ethersproject/properties"),a=e("@ethersproject/web"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);var i={request:n,resolve:null,reject:null},s=new Promise((function(e,t){i.resolve=e,i.reject=t}));return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((function(){var e=r._pendingBatch;r._pendingBatch=null,r._pendingBatchAggregator=null;var t=e.map((function(e){return e.request}));return r.emit("debug",{action:"requestBatch",request:(0,o.deepCopy)(t),provider:r}),(0,a.fetchJson)(r.connection,JSON.stringify(t)).then((function(n){r.emit("debug",{action:"response",request:t,response:n,provider:r}),e.forEach((function(e,t){var r=n[t];if(r.error){var i=new Error(r.error.message);i.code=r.error.code,i.data=r.error.data,e.reject(i)}else e.resolve(r.result)}))}),(function(n){r.emit("debug",{action:"response",error:n,request:t,provider:r}),e.forEach((function(e){e.reject(n)}))}))}),10)),s},t}(e("./json-rpc-provider").JsonRpcProvider);r.JsonRpcBatchProvider=s}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[722,{"./_version":709,"./base-provider":712,"@ethersproject/abstract-signer":662,"@ethersproject/bignumber":671,"@ethersproject/bytes":674,"@ethersproject/hash":687,"@ethersproject/logger":702,"@ethersproject/properties":708,"@ethersproject/strings":746,"@ethersproject/transactions":749,"@ethersproject/web":756},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.JsonRpcProvider=r.JsonRpcSigner=void 0;var s=e("@ethersproject/abstract-signer"),u=e("@ethersproject/bignumber"),c=e("@ethersproject/bytes"),l=e("@ethersproject/hash"),f=e("@ethersproject/properties"),h=e("@ethersproject/strings"),d=e("@ethersproject/transactions"),p=e("@ethersproject/web"),m=e("@ethersproject/logger"),g=e("./_version"),b=new m.Logger(g.version),y=e("./base-provider"),v=["call","estimateGas"];function _(e,t){if(null==e)return null;if("string"==typeof e.message&&e.message.match("reverted")){var r=(0,c.isHexString)(e.data)?e.data:null;if(!t||r)return{message:e.message,data:r}}if("object"==typeof e){for(var n in e){var i=_(e[n],t);if(i)return i}return null}if("string"==typeof e)try{return _(JSON.parse(e),t)}catch(e){}return null}function w(e,t,r){var n=r.transaction||r.signedTransaction;if("call"===e){var i;if(i=_(t,!0))return i.data;b.throwError("missing revert data in call exception; Transaction reverted without a reason string",m.Logger.errors.CALL_EXCEPTION,{data:"0x",transaction:n,error:t})}"estimateGas"===e&&(null==(i=_(t.body,!1))&&(i=_(t,!1)),i&&b.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{reason:i.message,method:e,transaction:n,error:t}));var o=t.message;throw t.code===m.Logger.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?o=t.error.message:"string"==typeof t.body?o=t.body:"string"==typeof t.responseText&&(o=t.responseText),(o=(o||"").toLowerCase()).match(/insufficient funds|base fee exceeds gas limit/i)&&b.throwError("insufficient funds for intrinsic transaction cost",m.Logger.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:n}),o.match(/nonce (is )?too low/i)&&b.throwError("nonce has already been used",m.Logger.errors.NONCE_EXPIRED,{error:t,method:e,transaction:n}),o.match(/replacement transaction underpriced|transaction gas price.*too low/i)&&b.throwError("replacement fee too low",m.Logger.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:n}),o.match(/only replay-protected/i)&&b.throwError("legacy pre-eip-155 transactions not supported",m.Logger.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:n}),v.indexOf(e)>=0&&o.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&b.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",m.Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:n}),t}function E(e){return new Promise((function(t){setTimeout(t,e)}))}function k(e){if(e.error){var t=new Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function S(e){return e?e.toLowerCase():e}var R={},T=function(e){function t(t,r,n){var i=e.call(this)||this;if(t!==R)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return(0,f.defineReadOnly)(i,"provider",r),null==n&&(n=0),"string"==typeof n?((0,f.defineReadOnly)(i,"_address",i.provider.formatter.address(n)),(0,f.defineReadOnly)(i,"_index",null)):"number"==typeof n?((0,f.defineReadOnly)(i,"_index",n),(0,f.defineReadOnly)(i,"_address",null)):b.throwArgumentError("invalid address or index","addressOrIndex",n),i}return i(t,e),t.prototype.connect=function(e){return b.throwError("cannot alter JSON-RPC Signer connection",m.Logger.errors.UNSUPPORTED_OPERATION,{operation:"connect"})},t.prototype.connectUnchecked=function(){return new A(R,this.provider,this._address||this._index)},t.prototype.getAddress=function(){var e=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(t){return t.length<=e._index&&b.throwError("unknown account #"+e._index,m.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),e.provider.formatter.address(t[e._index])}))},t.prototype.sendUncheckedTransaction=function(e){var t=this;e=(0,f.shallowCopy)(e);var r=this.getAddress().then((function(e){return e&&(e=e.toLowerCase()),e}));if(null==e.gasLimit){var n=(0,f.shallowCopy)(e);n.from=r,e.gasLimit=this.provider.estimateGas(n)}return null!=e.to&&(e.to=Promise.resolve(e.to).then((function(e){return o(t,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return null==e?[2,null]:[4,this.provider.resolveName(e)];case 1:return null==(t=r.sent())&&b.throwArgumentError("provided ENS name resolves to null","tx.to",e),[2,t]}}))}))}))),(0,f.resolveProperties)({tx:(0,f.resolveProperties)(e),sender:r}).then((function(r){var n=r.tx,i=r.sender;null!=n.from?n.from.toLowerCase()!==i&&b.throwArgumentError("from address mismatch","transaction",e):n.from=i;var o=t.provider.constructor.hexlifyTransaction(n,{from:!0});return t.provider.send("eth_sendTransaction",[o]).then((function(e){return e}),(function(e){return"string"==typeof e.message&&e.message.match(/user denied/i)&&b.throwError("user rejected transaction",m.Logger.errors.ACTION_REJECTED,{action:"sendTransaction",transaction:n}),w("sendTransaction",e,o)}))}))},t.prototype.signTransaction=function(e){return b.throwError("signing transactions is unsupported",m.Logger.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})},t.prototype.sendTransaction=function(e){return o(this,void 0,void 0,(function(){var t,r,n,i=this;return a(this,(function(s){switch(s.label){case 0:return[4,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval)];case 1:return t=s.sent(),[4,this.sendUncheckedTransaction(e)];case 2:r=s.sent(),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,(0,p.poll)((function(){return o(i,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,this.provider.getTransaction(r)];case 1:return null===(e=n.sent())?[2,undefined]:[2,this.provider._wrapTransaction(e,r,t)]}}))}))}),{oncePoll:this.provider})];case 4:return[2,s.sent()];case 5:throw(n=s.sent()).transactionHash=r,n;case 6:return[2]}}))}))},t.prototype.signMessage=function(e){return o(this,void 0,void 0,(function(){var t,r,n;return a(this,(function(i){switch(i.label){case 0:return t="string"==typeof e?(0,h.toUtf8Bytes)(e):e,[4,this.getAddress()];case 1:r=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.provider.send("personal_sign",[(0,c.hexlify)(t),r.toLowerCase()])];case 3:return[2,i.sent()];case 4:throw"string"==typeof(n=i.sent()).message&&n.message.match(/user denied/i)&&b.throwError("user rejected signing",m.Logger.errors.ACTION_REJECTED,{action:"signMessage",from:r,message:t}),n;case 5:return[2]}}))}))},t.prototype._legacySignMessage=function(e){return o(this,void 0,void 0,(function(){var t,r,n;return a(this,(function(i){switch(i.label){case 0:return t="string"==typeof e?(0,h.toUtf8Bytes)(e):e,[4,this.getAddress()];case 1:r=i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this.provider.send("eth_sign",[r.toLowerCase(),(0,c.hexlify)(t)])];case 3:return[2,i.sent()];case 4:throw"string"==typeof(n=i.sent()).message&&n.message.match(/user denied/i)&&b.throwError("user rejected signing",m.Logger.errors.ACTION_REJECTED,{action:"_legacySignMessage",from:r,message:t}),n;case 5:return[2]}}))}))},t.prototype._signTypedData=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o,s=this;return a(this,(function(a){switch(a.label){case 0:return[4,l._TypedDataEncoder.resolveNames(e,t,r,(function(e){return s.provider.resolveName(e)}))];case 1:return n=a.sent(),[4,this.getAddress()];case 2:i=a.sent(),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.provider.send("eth_signTypedData_v4",[i.toLowerCase(),JSON.stringify(l._TypedDataEncoder.getPayload(n.domain,t,n.value))])];case 4:return[2,a.sent()];case 5:throw"string"==typeof(o=a.sent()).message&&o.message.match(/user denied/i)&&b.throwError("user rejected signing",m.Logger.errors.ACTION_REJECTED,{action:"_signTypedData",from:i,message:{domain:n.domain,types:t,value:n.value}}),o;case 6:return[2]}}))}))},t.prototype.unlock=function(e){return o(this,void 0,void 0,(function(){var t,r;return a(this,(function(n){switch(n.label){case 0:return t=this.provider,[4,this.getAddress()];case 1:return r=n.sent(),[2,t.send("personal_unlockAccount",[r.toLowerCase(),e,null])]}}))}))},t}(s.Signer);r.JsonRpcSigner=T;var A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.sendTransaction=function(e){var t=this;return this.sendUncheckedTransaction(e).then((function(e){return{hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(r){return t.provider.waitForTransaction(e,r)}}}))},t}(T),C={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},O=function(e){function t(t,r){var n=this,i=r;return null==i&&(i=new Promise((function(e,t){setTimeout((function(){n.detectNetwork().then((function(t){e(t)}),(function(e){t(e)}))}),0)}))),n=e.call(this,i)||this,t||(t=(0,f.getStatic)(n.constructor,"defaultUrl")()),"string"==typeof t?(0,f.defineReadOnly)(n,"connection",Object.freeze({url:t})):(0,f.defineReadOnly)(n,"connection",Object.freeze((0,f.shallowCopy)(t))),n._nextId=42,n}return i(t,e),Object.defineProperty(t.prototype,"_cache",{get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache},enumerable:!1,configurable:!0}),t.defaultUrl=function(){return"http://localhost:8545"},t.prototype.detectNetwork=function(){var e=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((function(){e._cache.detectNetwork=null}),0)),this._cache.detectNetwork},t.prototype._uncachedDetectNetwork=function(){return o(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){switch(r.label){case 0:return[4,E(0)];case 1:r.sent(),e=null,r.label=2;case 2:return r.trys.push([2,4,,9]),[4,this.send("eth_chainId",[])];case 3:return e=r.sent(),[3,9];case 4:r.sent(),r.label=5;case 5:return r.trys.push([5,7,,8]),[4,this.send("net_version",[])];case 6:return e=r.sent(),[3,8];case 7:return r.sent(),[3,8];case 8:return[3,9];case 9:if(null!=e){t=(0,f.getStatic)(this.constructor,"getNetwork");try{return[2,t(u.BigNumber.from(e).toNumber())]}catch(t){return[2,b.throwError("could not detect network",m.Logger.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t})]}}return[2,b.throwError("could not detect network",m.Logger.errors.NETWORK_ERROR,{event:"noNetwork"})]}}))}))},t.prototype.getSigner=function(e){return new T(R,this,e)},t.prototype.getUncheckedSigner=function(e){return this.getSigner(e).connectUnchecked()},t.prototype.listAccounts=function(){var e=this;return this.send("eth_accounts",[]).then((function(t){return t.map((function(t){return e.formatter.address(t)}))}))},t.prototype.send=function(e,t){var r=this,n={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:(0,f.deepCopy)(n),provider:this});var i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];var o=(0,p.fetchJson)(this.connection,JSON.stringify(n),k).then((function(e){return r.emit("debug",{action:"response",request:n,response:e,provider:r}),e}),(function(e){throw r.emit("debug",{action:"response",error:e,request:n,provider:r}),e}));return i&&(this._cache[e]=o,setTimeout((function(){r._cache[e]=null}),0)),o},t.prototype.prepareRequest=function(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[S(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[S(t.address),t.blockTag]];case"getCode":return["eth_getCode",[S(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[S(t.address),(0,c.hexZeroPad)(t.position,32),t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[(0,f.getStatic)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[(0,f.getStatic)(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=S(t.filter.address)),["eth_getLogs",[t.filter]]}return null},t.prototype.perform=function(e,t){return o(this,void 0,void 0,(function(){var r,n,i,o;return a(this,(function(a){switch(a.label){case 0:return"call"!==e&&"estimateGas"!==e?[3,2]:(r=t.transaction)&&null!=r.type&&u.BigNumber.from(r.type).isZero()?null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas?[3,2]:[4,this.getFeeData()]:[3,2];case 1:null==(n=a.sent()).maxFeePerGas&&null==n.maxPriorityFeePerGas&&((t=(0,f.shallowCopy)(t)).transaction=(0,f.shallowCopy)(r),delete t.transaction.type),a.label=2;case 2:null==(i=this.prepareRequest(e,t))&&b.throwError(e+" not implemented",m.Logger.errors.NOT_IMPLEMENTED,{operation:e}),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,this.send(i[0],i[1])];case 4:return[2,a.sent()];case 5:return o=a.sent(),[2,w(e,o,t)];case 6:return[2]}}))}))},t.prototype._startEvent=function(t){"pending"===t.tag&&this._startPending(),e.prototype._startEvent.call(this,t)},t.prototype._startPending=function(){if(null==this._pendingFilter){var e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then((function(r){return function n(){e.send("eth_getFilterChanges",[r]).then((function(r){if(e._pendingFilter!=t)return null;var n=Promise.resolve();return r.forEach((function(t){e._emitted["t:"+t.toLowerCase()]="pending",n=n.then((function(){return e.getTransaction(t).then((function(t){return e.emit("pending",t),null}))}))})),n.then((function(){return E(1e3)}))})).then((function(){if(e._pendingFilter==t)return setTimeout((function(){n()}),0),null;e.send("eth_uninstallFilter",[r])})).catch((function(e){}))}(),r})).catch((function(e){}))}},t.prototype._stopEvent=function(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),e.prototype._stopEvent.call(this,t)},t.hexlifyTransaction=function(e,t){var r=(0,f.shallowCopy)(C);if(t)for(var n in t)t[n]&&(r[n]=!0);(0,f.checkProperties)(e,r);var i={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(t){if(null!=e[t]){var r=(0,c.hexValue)(u.BigNumber.from(e[t]));"gasLimit"===t&&(t="gas"),i[t]=r}})),["from","to","data"].forEach((function(t){null!=e[t]&&(i[t]=(0,c.hexlify)(e[t]))})),e.accessList&&(i.accessList=(0,d.accessListify)(e.accessList)),i},t}(y.BaseProvider);r.JsonRpcProvider=O}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[723,{"./_version":709,"./url-json-rpc-provider":725,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.NodesmithProvider=void 0;var o=e("./url-json-rpc-provider"),a=e("@ethersproject/logger"),s=e("./_version"),u=new a.Logger(s.version),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getApiKey=function(e){return e&&"string"!=typeof e&&u.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"},t.getUrl=function(e,t){u.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");var r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:u.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t},t}(o.UrlJsonRpcProvider);r.NodesmithProvider=c}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[724,{"./_version":709,"./url-json-rpc-provider":725,"@ethersproject/logger":702},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PocketProvider=void 0;var o=e("@ethersproject/logger"),a=e("./_version"),s=new o.Logger(a.version),u=e("./url-json-rpc-provider"),c="62e1ad51b37b8e00394bda3b",l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.getApiKey=function(e){var t={applicationId:null,loadBalancer:!0,applicationSecretKey:null};return null==e?t.applicationId=c:"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey):e.applicationId?t.applicationId=e.applicationId:s.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t},t.getUrl=function(e,t){var r=null;switch(e?e.name:"unknown"){case"goerli":r="eth-goerli.gateway.pokt.network";break;case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"kovan":r="poa-kovan.gateway.pokt.network";break;case"matic":r="poly-mainnet.gateway.pokt.network";break;case"maticmum":r="polygon-mumbai-rpc.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;default:s.throwError("unsupported network",o.Logger.errors.INVALID_ARGUMENT,{argument:"network",value:e})}var n={headers:{},url:"https://"+r+"/v1/lb/"+t.applicationId};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n},t.prototype.isCommunityResource=function(){return this.applicationId===c},t}(u.UrlJsonRpcProvider);r.PocketProvider=l}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[725,{"./_version":709,"./json-rpc-provider":722,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.UrlJsonRpcProvider=r.StaticJsonRpcProvider=void 0;var s=e("@ethersproject/properties"),u=e("@ethersproject/logger"),c=e("./_version"),l=new u.Logger(c.version),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.detectNetwork=function(){return o(this,void 0,void 0,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return null!=(t=this.network)?[3,2]:[4,e.prototype.detectNetwork.call(this)];case 1:(t=r.sent())||l.throwError("no network detected",u.Logger.errors.UNKNOWN_ERROR,{}),null==this._network&&((0,s.defineReadOnly)(this,"_network",t),this.emit("network",t,null)),r.label=2;case 2:return[2,t]}}))}))},t}(e("./json-rpc-provider").JsonRpcProvider);r.StaticJsonRpcProvider=f;var h=function(e){function t(r,n){var i,o=this.constructor;l.checkAbstract(o,t),r=(0,s.getStatic)(o,"getNetwork")(r),n=(0,s.getStatic)(o,"getApiKey")(n);var a=(0,s.getStatic)(o,"getUrl")(r,n);return i=e.call(this,a,r)||this,"string"==typeof n?(0,s.defineReadOnly)(i,"apiKey",n):null!=n&&Object.keys(n).forEach((function(e){(0,s.defineReadOnly)(i,e,n[e])})),i}return i(t,e),t.prototype._startPending=function(){l.warn("WARNING: API provider does not support pending filters")},t.prototype.isCommunityResource=function(){return!1},t.prototype.getSigner=function(e){return l.throwError("API provider does not support signing",u.Logger.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})},t.prototype.listAccounts=function(){return Promise.resolve([])},t.getApiKey=function(e){return e},t.getUrl=function(e,t){return l.throwError("not implemented; sub-classes must override getUrl",u.Logger.errors.NOT_IMPLEMENTED,{operation:"getUrl"})},t}(f);r.UrlJsonRpcProvider=h}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[726,{"./_version":709,"./json-rpc-provider":722,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Web3Provider=void 0;var o=e("@ethersproject/properties"),a=e("@ethersproject/logger"),s=e("./_version"),u=new a.Logger(s.version),c=e("./json-rpc-provider"),l=1;function f(e,t){var r="Web3LegacyFetcher";return function(e,n){var i=this,a={method:e,params:n,id:l++,jsonrpc:"2.0"};return new Promise((function(e,n){i.emit("debug",{action:"request",fetcher:r,request:(0,o.deepCopy)(a),provider:i}),t(a,(function(t,o){if(t)return i.emit("debug",{action:"response",fetcher:r,error:t,request:a,provider:i}),n(t);if(i.emit("debug",{action:"response",fetcher:r,request:a,response:o,provider:i}),o.error){var s=new Error(o.error.message);return s.code=o.error.code,s.data=o.error.data,n(s)}e(o.result)}))}))}}var h=function(e){function t(t,r){var n;null==t&&u.throwArgumentError("missing provider","provider",t);var i=null,a=null,s=null;return"function"==typeof t?(i="unknown:",a=t):(!(i=t.host||t.path||"")&&t.isMetaMask&&(i="metamask"),s=t,t.request?(""===i&&(i="eip-1193:"),a=function(e){return function(t,r){var n=this;null==r&&(r=[]);var i={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:(0,o.deepCopy)(i),provider:this}),e.request(i).then((function(e){return n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:e,provider:n}),e}),(function(e){throw n.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:e,provider:n}),e}))}}(t)):t.sendAsync?a=f(0,t.sendAsync.bind(t)):t.send?a=f(0,t.send.bind(t)):u.throwArgumentError("unsupported provider","provider",t),i||(i="unknown:")),n=e.call(this,i,r)||this,(0,o.defineReadOnly)(n,"jsonRpcFetchFunc",a),(0,o.defineReadOnly)(n,"provider",s),n}return i(t,e),t.prototype.send=function(e,t){return this.jsonRpcFetchFunc(e,t)},t}(c.JsonRpcProvider);r.Web3Provider=h}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}],[727,{"./_version":709,"./json-rpc-provider":722,"./ws":714,"@ethersproject/bignumber":671,"@ethersproject/logger":702,"@ethersproject/properties":708},function(){with(this)return function(){"use strict";return function(e,t,r){var n,i=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function a(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(r,"__esModule",{value:!0}),r.WebSocketProvider=void 0;var s=e("@ethersproject/bignumber"),u=e("@ethersproject/properties"),c=e("./json-rpc-provider"),l=e("./ws"),f=e("@ethersproject/logger"),h=e("./_version"),d=new f.Logger(h.version),p=1,m=function(e){function t(t,r){var n=this;"any"===r&&d.throwError("WebSocketProvider does not support 'any' network yet",f.Logger.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(n="string"==typeof t?e.call(this,t,r)||this:e.call(this,"_websocket",r)||this)._pollingInterval=-1,n._wsReady=!1,"string"==typeof t?(0,u.defineReadOnly)(n,"_websocket",new l.WebSocket(n.connection.url)):(0,u.defineReadOnly)(n,"_websocket",t),(0,u.defineReadOnly)(n,"_requests",{}),(0,u.defineReadOnly)(n,"_subs",{}),(0,u.defineReadOnly)(n,"_subIds",{}),(0,u.defineReadOnly)(n,"_detectNetwork",e.prototype.detectNetwork.call(n)),n.websocket.onopen=function(){n._wsReady=!0,Object.keys(n._requests).forEach((function(e){n.websocket.send(n._requests[e].payload)}))},n.websocket.onmessage=function(e){var t=e.data,r=JSON.parse(t);if(null!=r.id){var i=String(r.id),o=n._requests[i];if(delete n._requests[i],r.result!==undefined)o.callback(null,r.result),n.emit("debug",{action:"response",request:JSON.parse(o.payload),response:r.result,provider:n});else{var a=null;r.error?(a=new Error(r.error.message||"unknown error"),(0,u.defineReadOnly)(a,"code",r.error.code||null),(0,u.defineReadOnly)(a,"response",t)):a=new Error("unknown error"),o.callback(a,undefined),n.emit("debug",{action:"response",error:a,request:JSON.parse(o.payload),provider:n})}}else if("eth_subscription"===r.method){var s=n._subs[r.params.subscription];s&&s.processFunc(r.params.result)}else console.warn("this should not happen")};var i=setInterval((function(){n.emit("poll")}),1e3);return i.unref&&i.unref(),n}return i(t,e),Object.defineProperty(t.prototype,"websocket",{get:function(){return this._websocket},enumerable:!1,configurable:!0}),t.prototype.detectNetwork=function(){return this._detectNetwork},Object.defineProperty(t.prototype,"pollingInterval",{get:function(){return 0},set:function(e){d.throwError("cannot set polling interval on WebSocketProvider",f.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})},enumerable:!1,configurable:!0}),t.prototype.resetEventsBlock=function(e){d.throwError("cannot reset events block on WebSocketProvider",f.Logger.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})},t.prototype.poll=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){return[2,null]}))}))},Object.defineProperty(t.prototype,"polling",{set:function(e){e&&d.throwError("cannot set polling on WebSocketProvider",f.Logger.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})},enumerable:!1,configurable:!0}),t.prototype.send=function(e,t){var r=this,n=p++;return new Promise((function(i,o){var a=JSON.stringify({method:e,params:t,id:n,jsonrpc:"2.0"});r.emit("debug",{action:"request",request:JSON.parse(a),provider:r}),r._requests[String(n)]={callback:function(e,t){return e?o(e):i(t)},payload:a},r._wsReady&&r.websocket.send(a)}))},t.defaultUrl=function(){return"ws://localhost:8546"},t.prototype._subscribe=function(e,t,r){return o(this,void 0,void 0,(function(){var n,i,o=this;return a(this,(function(a){switch(a.label){case 0:return null==(n=this._subIds[e])&&(n=Promise.all(t).then((function(e){return o.send("eth_subscribe",e)})),this._subIds[e]=n),[4,n];case 1:return i=a.sent(),this._subs[i]={tag:e,processFunc:r},[2]}}))}))},t.prototype._startEvent=function(e){var t=this;switch(e.type){case"block":this._subscribe("block",["newHeads"],(function(e){var r=s.BigNumber.from(e.number).toNumber();t._emitted.block=r,t.emit("block",r)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(function(e){t.emit("pending",e)}));break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],(function(r){null==r.removed&&(r.removed=!1),t.emit(e.filter,t.formatter.filterLog(r))}));break;case"tx":var r=function(e){var r=e.hash;t.getTransactionReceipt(r).then((function(e){e&&t.emit(r,e)}))};r(e),this._subscribe("tx",["newHeads"],(function(e){t._events.filter((function(e){return"tx"===e.type})).forEach(r)}));break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}},t.prototype._stopEvent=function(e){var t=this,r=e.tag;if("tx"===e.type){if(this._events.filter((function(e){return"tx"===e.type})).length)return;r="tx"}else if(this.listenerCount(e.event))return;var n=this._subIds[r];n&&(delete this._subIds[r],n.then((function(e){t._subs[e]&&(delete t._subs[e],t.send("eth_unsubscribe",[e]))})))},t.prototype.destroy=function(){return o(this,void 0,void 0,(function(){var e=this;return a(this,(function(t){switch(t.label){case 0:return this.websocket.readyState!==l.WebSocket.CONNECTING?[3,2]:[4,new Promise((function(t){e.websocket.onopen=function(){t(!0)},e.websocket.onerror=function(){t(!1)}}))];case 1:t.sent(),t.label=2;case 2:return this.websocket.close(1e3),[2]}}))}))},t}(c.JsonRpcProvider);r.WebSocketProvider=m}}},{package:"@metamask/smart-transactions-controller>@ethersproject/providers"}]],[],{});